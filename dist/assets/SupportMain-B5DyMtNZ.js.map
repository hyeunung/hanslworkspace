{"version":3,"file":"SupportMain-B5DyMtNZ.js","sources":["../../node_modules/lucide-react/dist/esm/icons/send.js","../../src/components/ui/date-range-picker.tsx","../../src/components/support/SupportMain.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.541.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z\",\n      key: \"1ffxy3\"\n    }\n  ],\n  [\"path\", { d: \"m21.854 2.147-10.94 10.939\", key: \"12cjpa\" }]\n];\nconst Send = createLucideIcon(\"send\", __iconNode);\n\nexport { __iconNode, Send as default };\n//# sourceMappingURL=send.js.map\n","import * as React from \"react\"\nimport { CalendarIcon, X } from \"lucide-react\"\nimport { DateRange } from \"react-day-picker\"\nimport { ko } from \"date-fns/locale\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Calendar } from \"@/components/ui/calendar\"\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\"\n\ninterface DateRangePickerProps extends React.HTMLAttributes<HTMLDivElement> {\n  date?: DateRange\n  onDateChange?: (date: DateRange | undefined) => void\n  placeholder?: string\n  disabled?: boolean\n}\n\nexport function DateRangePicker({\n  className,\n  date,\n  onDateChange,\n  placeholder = \"기간을 선택하세요\",\n  disabled = false,\n  ...props\n}: DateRangePickerProps) {\n  const [open, setOpen] = React.useState(false)\n\n  const formatDateRange = (range: DateRange | undefined) => {\n    if (!range?.from) {\n      return placeholder\n    }\n\n    const formatDate = (date: Date) => {\n      return date.toLocaleDateString('ko-KR', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      })\n    }\n\n    if (range.from && range.to) {\n      // 같은 달인지 확인\n      const isSameMonth = range.from.getFullYear() === range.to.getFullYear() && \n                         range.from.getMonth() === range.to.getMonth()\n      \n      if (isSameMonth) {\n        const year = range.from.getFullYear()\n        const month = range.from.toLocaleDateString('ko-KR', { month: 'long' })\n        const fromDay = range.from.getDate()\n        const toDay = range.to.getDate()\n        return `${year}년 ${month} ${fromDay}일 - ${toDay}일`\n      }\n      \n      return `${formatDate(range.from)} - ${formatDate(range.to)}`\n    }\n\n    return formatDate(range.from)\n  }\n\n  return (\n    <div className={cn(\"grid gap-2\", className)} {...props}>\n      <Popover open={open} onOpenChange={setOpen}>\n        <PopoverTrigger asChild>\n          <Button\n            id=\"date\"\n            variant=\"outline\"\n            className={cn(\n              \"w-full justify-start text-left font-normal h-9 text-sm border-gray-200 hover:border-gray-300 hover:bg-gray-50 transition-colors\",\n              !date && \"text-gray-500\",\n              date && \"text-gray-900\"\n            )}\n            disabled={disabled}\n          >\n            <CalendarIcon className=\"mr-2 h-4 w-4 text-gray-400\" />\n            <span className=\"truncate\">{formatDateRange(date)}</span>\n            {date && (\n              <X \n                className=\"ml-auto h-4 w-4 text-gray-400 hover:text-gray-600 transition-colors\" \n                onClick={(e) => {\n                  e.stopPropagation()\n                  onDateChange?.(undefined)\n                  setOpen(false)\n                }}\n              />\n            )}\n          </Button>\n        </PopoverTrigger>\n        <PopoverContent className=\"w-auto p-0 shadow-lg border border-gray-200\" align=\"start\">\n          <div className=\"bg-white rounded-lg overflow-hidden\">\n            <div className=\"bg-gray-50 border-b border-gray-100 px-4 py-3\">\n              <h4 className=\"text-sm font-medium text-gray-900\">기간 선택</h4>\n              <p className=\"text-xs text-gray-500 mt-1\">시작일과 종료일을 선택하세요</p>\n            </div>\n            <div className=\"p-4\">\n              <Calendar\n                initialFocus\n                mode=\"range\"\n                defaultMonth={date?.from}\n                selected={date}\n                onSelect={(newDate) => {\n                  onDateChange?.(newDate)\n                  // 종료일이 선택되면 자동으로 팝오버 닫기\n                  if (newDate?.from && newDate?.to) {\n                    setOpen(false)\n                  }\n                }}\n                numberOfMonths={2}\n                disabled={disabled}\n                locale={ko}\n                className=\"rounded-md\"\n                classNames={{\n                  months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n                  month: \"space-y-4\",\n                  caption: \"flex justify-center pt-1 relative items-center text-sm font-medium\",\n                  caption_label: \"text-sm font-medium text-gray-900\",\n                  nav: \"space-x-1 flex items-center\",\n                  nav_button: \"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none border border-input bg-background hover:bg-accent hover:text-accent-foreground h-7 w-7\",\n                  nav_button_previous: \"absolute left-1\",\n                  nav_button_next: \"absolute right-1\",\n                  table: \"w-full border-collapse space-y-1\",\n                  head_row: \"flex\",\n                  head_cell: \"text-gray-500 rounded-md w-9 font-normal text-[0.8rem]\",\n                  row: \"flex w-full mt-2\",\n                  cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n                  day: \"inline-flex items-center justify-center rounded-md text-sm font-normal ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 aria-selected:opacity-100 h-9 w-9 hover:bg-gray-100 hover:text-gray-900 text-gray-900\",\n                  day_range_start: \"day-range-start bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n                  day_range_end: \"day-range-end bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n                  day_selected: \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n                  day_today: \"bg-accent text-accent-foreground font-semibold\",\n                  outside: \"!text-gray-400 !opacity-40 hover:!text-gray-500 hover:bg-gray-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30\",\n                  day_disabled: \"!text-gray-400 !opacity-40\",\n                  day_range_middle: \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n                  day_hidden: \"invisible\",\n                }}\n              />\n            </div>\n            {date && (\n              <div className=\"bg-gray-50 border-t border-gray-100 px-4 py-3\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-xs text-gray-600\">\n                    선택된 기간: {formatDateRange(date)}\n                  </span>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => {\n                      onDateChange?.(undefined)\n                      setOpen(false)\n                    }}\n                    className=\"h-6 px-2 text-xs\"\n                  >\n                    지우기\n                  </Button>\n                </div>\n              </div>\n            )}\n          </div>\n        </PopoverContent>\n      </Popover>\n    </div>\n  )\n}","import { useState, useEffect } from 'react'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\nimport { MessageCircle, Send, Calendar, Search, CheckCircle, Clock, AlertCircle, ChevronRight, ChevronLeft, ChevronDown, ChevronUp, Eye, X, Edit2, Trash2, Save } from 'lucide-react'\nimport { supportService, type SupportInquiry } from '@/services/supportService'\nimport { createClient } from '@/lib/supabase/client'\nimport { toast } from 'sonner'\nimport { format } from 'date-fns'\nimport { ko } from 'date-fns/locale'\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog'\nimport { DateRangePicker } from '@/components/ui/date-range-picker'\nimport { DateRange } from 'react-day-picker'\n\nexport default function SupportMain() {\n  const [inquiryType, setInquiryType] = useState('')\n  const [subject, setSubject] = useState('')\n  const [message, setMessage] = useState('')\n  const [loading, setLoading] = useState(false)\n  \n  // 발주요청 선택 관련\n  const [showPurchaseSelect, setShowPurchaseSelect] = useState(false)\n  const [dateRange, setDateRange] = useState<DateRange | undefined>()\n  const [purchaseRequests, setPurchaseRequests] = useState<any[]>([])\n  const [selectedPurchase, setSelectedPurchase] = useState<any>(null)\n  const [searchingPurchase, setSearchingPurchase] = useState(false)\n  const [currentPage, setCurrentPage] = useState(1)\n  const [expandedPurchase, setExpandedPurchase] = useState<string | null>(null)\n  const itemsPerPage = 5\n  \n  // 문의 목록 관련\n  const [inquiries, setInquiries] = useState<SupportInquiry[]>([])\n  const [isAdmin, setIsAdmin] = useState<boolean | null>(null)\n  const [currentUserEmail, setCurrentUserEmail] = useState('')\n  const [loadingInquiries, setLoadingInquiries] = useState(true)\n  const [expandedInquiry, setExpandedInquiry] = useState<number | null>(null)\n  \n  // 모달 관련\n  const [showDetailModal, setShowDetailModal] = useState(false)\n  const [selectedInquiryDetail, setSelectedInquiryDetail] = useState<any>(null)\n  const [loadingDetail, setLoadingDetail] = useState(false)\n  const [editingItemId, setEditingItemId] = useState<string | null>(null)\n  const [editingItem, setEditingItem] = useState<any>(null)\n\n  // 초기 데이터 로드\n  useEffect(() => {\n    const init = async () => {\n      await checkUserRole()\n    }\n    init()\n    \n    // 실시간 구독 설정\n    const subscription = supportService.subscribeToInquiries((payload) => {\n      // 권한 상태 확인 후 적절한 목록 로드\n      checkUserRole()\n    })\n    \n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [])\n\n  // 사용자 권한 확인\n  const checkUserRole = async () => {\n    const supabase = createClient()\n    const { data: { user } } = await supabase.auth.getUser()\n    if (!user) return\n\n    setCurrentUserEmail(user.email || '')\n\n    const { data: employee } = await supabase\n      .from('employees')\n      .select('purchase_role')\n      .eq('email', user.email)\n      .single()\n\n    if (employee) {\n      const roles = Array.isArray(employee.purchase_role)\n        ? employee.purchase_role\n        : employee.purchase_role?.split(',').map((r: string) => r.trim()) || []\n      \n      const adminStatus = roles.includes('app_admin')\n      setIsAdmin(adminStatus)\n      \n      // 권한 확인 후 바로 목록 로드\n      loadInquiriesWithRole(adminStatus)\n    }\n  }\n  \n  // 역할에 따라 문의 목록 로드 (내부 함수)\n  const loadInquiriesWithRole = async (adminStatus: boolean) => {\n    setLoadingInquiries(true)\n    \n    const result = adminStatus \n      ? await supportService.getAllInquiries()\n      : await supportService.getMyInquiries()\n    \n    \n    if (result.success) {\n      setInquiries(result.data)\n    } else {\n    }\n    \n    setLoadingInquiries(false)\n  }\n\n  // 문의 목록 로드\n  const loadInquiries = async () => {\n    // 권한 확인이 완료되지 않았으면 대기\n    if (isAdmin === null) {\n      return;\n    }\n    \n    setLoadingInquiries(true)\n    \n    // 관리자면 모든 문의, 아니면 내 문의만\n    const result = isAdmin \n      ? await supportService.getAllInquiries()\n      : await supportService.getMyInquiries()\n    \n    \n    if (result.success) {\n      setInquiries(result.data)\n    } else {\n    }\n    \n    setLoadingInquiries(false)\n  }\n\n  // 문의 유형 변경 시\n  useEffect(() => {\n    if (inquiryType === 'modify' || inquiryType === 'delete') {\n      setShowPurchaseSelect(true)\n    } else {\n      setShowPurchaseSelect(false)\n      setSelectedPurchase(null)\n    }\n  }, [inquiryType])\n\n  // 발주요청 검색\n  const searchPurchaseRequests = async () => {\n    setSearchingPurchase(true)\n    setCurrentPage(1) // 검색 시 첫 페이지로 리셋\n    \n    const startDate = dateRange?.from ? dateRange.from.toISOString().split('T')[0] : undefined\n    const endDate = dateRange?.to ? dateRange.to.toISOString().split('T')[0] : undefined\n    \n    const result = await supportService.getMyPurchaseRequests(startDate, endDate)\n    \n    if (result.success) {\n      setPurchaseRequests(result.data)\n    } else {\n      toast.error(result.error || '발주요청 조회 실패')\n    }\n    \n    setSearchingPurchase(false)\n  }\n\n  // 페이지네이션 계산\n  const totalPages = Math.ceil(purchaseRequests.length / itemsPerPage)\n  const startIndex = (currentPage - 1) * itemsPerPage\n  const endIndex = startIndex + itemsPerPage\n  const currentPurchaseRequests = purchaseRequests.slice(startIndex, endIndex)\n\n  // 문의 제출\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    if (!inquiryType || !subject || !message) {\n      toast.error('모든 필드를 입력해주세요.')\n      return\n    }\n    \n    // 수정/삭제 요청인데 발주를 선택하지 않은 경우\n    if ((inquiryType === 'modify' || inquiryType === 'delete') && !selectedPurchase) {\n      toast.error('수정/삭제할 발주요청을 선택해주세요.')\n      return\n    }\n\n    setLoading(true)\n    \n    // 발주 정보를 텍스트로 구성\n    let finalMessage = message;\n    let purchaseInfo = '';\n    \n    if (selectedPurchase) {\n      const items = selectedPurchase.purchase_request_items || [];\n      const itemsText = items.map((item: any) => \n        `- ${item.item_name} (${item.specification}) ${item.quantity}개`\n      ).join('\\n');\n      \n      purchaseInfo = `발주번호: ${selectedPurchase.purchase_order_number}\n업체: ${selectedPurchase.vendor_name}\n요청자: ${selectedPurchase.requester_name}\n요청일: ${selectedPurchase.request_date}\n품목:\n${itemsText}`;\n\n      finalMessage = `${message}\n\n[관련 발주 정보]\n${purchaseInfo}`;\n    }\n\n    const result = await supportService.createInquiry({\n      inquiry_type: inquiryType as any,\n      subject,\n      message: finalMessage,\n      purchase_info: purchaseInfo,\n      purchase_order_number: selectedPurchase?.purchase_order_number\n    })\n\n    if (result.success) {\n      toast.success('문의가 접수되었습니다.')\n      // 폼 초기화\n      setInquiryType('')\n      setSubject('')\n      setMessage('')\n      setSelectedPurchase(null)\n      setPurchaseRequests([])\n      setDateRange(undefined)\n      // 목록 새로고침\n      loadInquiries()\n    } else {\n      toast.error(result.error || '문의 접수에 실패했습니다.')\n    }\n    \n    setLoading(false)\n  }\n\n  // 문의 상태 업데이트 (관리자용)\n  const handleStatusUpdate = async (inquiryId: number, newStatus: 'in_progress' | 'resolved' | 'closed', resolutionNote?: string) => {\n    // resolved 상태로 변경 시 답변 내용 확인\n    if (newStatus === 'resolved') {\n      const note = resolutionNote || prompt('처리 완료 답변을 입력해주세요:')\n      if (!note || note.trim() === '') {\n        toast.error('답변 내용을 입력해야 완료 처리할 수 있습니다.')\n        return\n      }\n      \n      const result = await supportService.updateInquiryStatus(inquiryId, newStatus, note.trim())\n      \n      if (result.success) {\n        toast.success('문의가 완료 처리되었습니다.')\n        loadInquiries()\n      } else {\n        toast.error(result.error || '완료 처리 실패')\n      }\n    } else {\n      const result = await supportService.updateInquiryStatus(inquiryId, newStatus)\n      \n      if (result.success) {\n        toast.success('상태가 업데이트되었습니다.')\n        loadInquiries()\n      } else {\n        toast.error(result.error || '상태 업데이트 실패')\n      }\n    }\n  }\n\n  // 문의 삭제\n  const handleDeleteInquiry = async (inquiryId: number) => {\n    if (!confirm('정말로 이 문의를 삭제하시겠습니까?\\n삭제된 문의는 복구할 수 없습니다.')) return\n\n    const result = await supportService.deleteInquiry(inquiryId)\n    \n    if (result.success) {\n      toast.success('문의가 삭제되었습니다.')\n      loadInquiries()\n    } else {\n      toast.error(result.error || '문의 삭제 실패')\n    }\n  }\n\n  // 문의 상세 보기\n  const viewInquiryDetail = (inquiry: SupportInquiry) => {\n    setSelectedInquiryDetail(inquiry)\n    setShowDetailModal(true)\n  }\n\n  // 품목 수정 시작\n  const startEditItem = (item: any) => {\n    setEditingItemId(item.id)\n    setEditingItem({\n      item_name: item.item_name,\n      specification: item.specification,\n      quantity: item.quantity,\n      unit_price_value: item.unit_price_value,\n      remark: item.remark\n    })\n  }\n\n  // 품목 수정 취소\n  const cancelEditItem = () => {\n    setEditingItemId(null)\n    setEditingItem(null)\n  }\n\n  // 품목 수정 저장\n  const saveEditItem = async (itemId: string) => {\n    if (!editingItem) return\n\n    const totalPrice = (editingItem.quantity || 0) * (editingItem.unit_price_value || 0)\n    const result = await supportService.updatePurchaseRequestItem(itemId, {\n      item_name: editingItem.item_name,\n      specification: editingItem.specification,\n      quantity: editingItem.quantity,\n      unit_price_value: editingItem.unit_price_value,\n      amount_value: totalPrice,\n      remark: editingItem.remark\n    })\n\n    if (result.success) {\n      toast.success('품목이 수정되었습니다.')\n      // 목록 새로고침 - 상세 정보가 있다면 다시 로드\n      if (selectedInquiryDetail?.id) {\n        // Refresh logic can be implemented here if needed\n      }\n      cancelEditItem()\n    } else {\n      toast.error(result.error || '품목 수정 실패')\n    }\n  }\n\n  // 품목 삭제\n  const deleteItem = async (itemId: string) => {\n    if (!confirm('이 품목을 삭제하시겠습니까?')) return\n\n    const result = await supportService.deletePurchaseRequestItem(itemId)\n\n    if (result.success) {\n      toast.success('품목이 삭제되었습니다.')\n      // 목록 새로고침 - 상세 정보가 있다면 다시 로드\n      if (selectedInquiryDetail?.id) {\n        // Refresh logic can be implemented here if needed\n      }\n    } else {\n      toast.error(result.error || '품목 삭제 실패')\n    }\n  }\n\n  // 발주요청 전체 삭제\n  const deletePurchaseRequest = async () => {\n    if (!selectedInquiryDetail?.id) return\n    if (!confirm('이 발주요청 전체를 삭제하시겠습니까?\\n모든 품목이 함께 삭제됩니다.')) return\n\n    const result = await supportService.deletePurchaseRequest(selectedInquiryDetail.id)\n\n    if (result.success) {\n      toast.success('발주요청이 삭제되었습니다.')\n      setShowDetailModal(false)\n      setSelectedInquiryDetail(null)\n      // 문의 목록 새로고침\n      loadInquiries()\n    } else {\n      toast.error(result.error || '발주요청 삭제 실패')\n    }\n  }\n\n  // 상태 배지 스타일\n  const getStatusBadge = (status?: string) => {\n    switch (status) {\n      case 'open':\n        return <span className=\"badge-stats bg-yellow-100 text-yellow-800\">대기</span>\n      case 'in_progress':\n        return <span className=\"badge-stats bg-blue-100 text-blue-800\">처리중</span>\n      case 'resolved':\n        return <span className=\"badge-stats bg-green-100 text-green-800\">완료</span>\n      case 'closed':\n        return <span className=\"badge-stats bg-gray-100 text-gray-800\">종료</span>\n      default:\n        return <span className=\"badge-stats border border-gray-300 bg-white text-gray-600\">-</span>\n    }\n  }\n\n  // 문의 유형 라벨\n  const getInquiryTypeLabel = (type: string) => {\n    switch (type) {\n      case 'bug': return '오류 신고'\n      case 'modify': return '수정 요청'\n      case 'delete': return '삭제 요청'\n      case 'other': return '기타 문의'\n      default: return type\n    }\n  }\n\n  // 권한 확인 중일 때 로딩 표시\n  if (isAdmin === null) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">권한 확인 중...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"w-full\">\n        {/* 헤더 */}\n        <div className=\"mb-4\">\n          <h1 className=\"page-title text-gray-900\">문의하기</h1>\n          <p className=\"page-subtitle text-gray-600 mt-1\">\n            {isAdmin \n              ? '모든 문의를 관리하고 답변할 수 있습니다'\n              : '시스템 사용 중 궁금하신 점이나 개선사항을 알려주세요'}\n          </p>\n        </div>\n\n        <div className={`${isAdmin ? 'max-w-4xl' : 'grid grid-cols-1 xl:grid-cols-2 gap-4'}`}>\n          {/* 문의 작성 폼 - app_admin이 아닌 경우에만 표시 */}\n          {!isAdmin && (\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <MessageCircle className=\"w-5 h-5\" />\n                  문의 내용\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\n                <div>\n                  <label className=\"block modal-label text-gray-700 mb-1\">\n                    문의 유형 <span className=\"text-red-500\">*</span>\n                  </label>\n                  <Select value={inquiryType} onValueChange={setInquiryType}>\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"문의 유형을 선택해주세요\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"bug\">오류 신고</SelectItem>\n                      <SelectItem value=\"modify\">수정 요청</SelectItem>\n                      <SelectItem value=\"delete\">삭제 요청</SelectItem>\n                      <SelectItem value=\"other\">기타 문의</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                {/* 수정/삭제 요청 시 발주요청 선택 */}\n                {showPurchaseSelect && (\n                  <div className=\"space-y-3 p-4 bg-blue-50 rounded-lg border border-blue-200\">\n                    <div className=\"modal-label text-blue-900\">\n                      수정/삭제할 발주요청 선택\n                    </div>\n                    \n                    <div>\n                      <label className=\"modal-label text-gray-600 mb-2 block\">기간 선택</label>\n                      <DateRangePicker\n                        date={dateRange}\n                        onDateChange={setDateRange}\n                        placeholder=\"발주요청 기간을 선택하세요\"\n                        className=\"w-full\"\n                      />\n                    </div>\n                    \n                    <Button\n                      type=\"button\"\n                      onClick={searchPurchaseRequests}\n                      disabled={searchingPurchase}\n                      className=\"w-full h-9\"\n                      variant=\"outline\"\n                    >\n                      {searchingPurchase ? (\n                        <>\n                          <div className=\"w-4 h-4 border-2 border-gray-600 border-t-transparent rounded-full animate-spin mr-2\" />\n                          검색 중...\n                        </>\n                      ) : (\n                        <>\n                          <Search className=\"w-4 h-4 mr-2\" />\n                          발주요청 검색\n                        </>\n                      )}\n                    </Button>\n                    \n                    {purchaseRequests.length > 0 && (\n                      <div className=\"space-y-3\">\n                        <div className=\"modal-label text-gray-600\">\n                          발주요청 선택 (총 {purchaseRequests.length}건)\n                        </div>\n                        \n                        {/* 발주요청 리스트 */}\n                        <div className=\"space-y-1\">\n                          {currentPurchaseRequests.map((pr) => (\n                            <div key={pr.id} className=\"border rounded overflow-hidden\">\n                              <div\n                                onClick={() => setSelectedPurchase(pr)}\n                                className={`px-3 py-2 cursor-pointer transition-all badge-text ${\n                                  selectedPurchase?.id === pr.id\n                                    ? 'border-blue-500 bg-blue-50'\n                                    : 'hover:bg-gray-50'\n                                }`}\n                              >\n                                <div className=\"flex items-center justify-between gap-2\">\n                                  <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                                    <span className=\"modal-value whitespace-nowrap\">\n                                      {pr.purchase_order_number || 'N/A'}\n                                    </span>\n                                    <span className=\"text-gray-600 truncate\">\n                                      {pr.vendor_name}\n                                    </span>\n                                    <span className=\"text-gray-500\">\n                                      {pr.purchase_request_items?.[0]?.item_name || '품목 없음'}\n                                      {pr.purchase_request_items?.length > 1 && (\n                                        <span className=\"modal-value text-blue-600\">\n                                          {` 외 ${pr.purchase_request_items.length - 1}건`}\n                                        </span>\n                                      )}\n                                    </span>\n                                    <span className=\"text-gray-400 whitespace-nowrap ml-auto\">\n                                      {pr.request_date && format(new Date(pr.request_date), 'MM/dd')}\n                                    </span>\n                                  </div>\n                                  <div className=\"flex items-center gap-1\">\n                                    {selectedPurchase?.id === pr.id && (\n                                      <CheckCircle className=\"w-4 h-4 text-blue-500 flex-shrink-0\" />\n                                    )}\n                                    {pr.purchase_request_items?.length > 1 && (\n                                      <button\n                                        type=\"button\"\n                                        onClick={(e) => {\n                                          e.stopPropagation()\n                                          setExpandedPurchase(expandedPurchase === pr.id ? null : pr.id)\n                                        }}\n                                        className=\"p-1 hover:bg-gray-200 rounded\"\n                                      >\n                                        {expandedPurchase === pr.id ? (\n                                          <ChevronUp className=\"w-4 h-4\" />\n                                        ) : (\n                                          <ChevronDown className=\"w-4 h-4\" />\n                                        )}\n                                      </button>\n                                    )}\n                                  </div>\n                                </div>\n                              </div>\n                              \n                              {/* 상세 품목 목록 */}\n                              {expandedPurchase === pr.id && pr.purchase_request_items?.length > 0 && (\n                                <div className=\"px-3 py-2 bg-gray-50 border-t badge-text\">\n                                  <div className=\"space-y-1\">\n                                    <div className=\"modal-value text-gray-700 mb-1\">품목 상세</div>\n                                    {pr.purchase_request_items.map((item: any, index: number) => (\n                                      <div key={index} className=\"flex items-center gap-2 text-gray-600 pl-2\">\n                                        <span className=\"text-gray-400\">{index + 1}.</span>\n                                        <span>{item.item_name}</span>\n                                        {item.specification && (\n                                          <span className=\"text-gray-500\">({item.specification})</span>\n                                        )}\n                                        <span className=\"text-gray-500\">- {item.quantity}개</span>\n                                      </div>\n                                    ))}\n                                  </div>\n                                </div>\n                              )}\n                            </div>\n                          ))}\n                        </div>\n                        \n                        {/* 페이지네이션 */}\n                        {totalPages > 1 && (\n                          <div className=\"flex justify-center items-center gap-1 pt-2\">\n                            <Button\n                              type=\"button\"\n                              variant=\"outline\"\n                              size=\"sm\"\n                              onClick={() => setCurrentPage(Math.max(1, currentPage - 1))}\n                              disabled={currentPage === 1}\n                              className=\"h-8 w-8 p-0\"\n                            >\n                              <ChevronLeft className=\"w-4 h-4\" />\n                            </Button>\n                            \n                            {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\n                              <Button\n                                key={page}\n                                type=\"button\"\n                                variant={currentPage === page ? \"default\" : \"outline\"}\n                                size=\"sm\"\n                                onClick={() => setCurrentPage(page)}\n                                className=\"h-8 w-8 p-0\"\n                              >\n                                {page}\n                              </Button>\n                            ))}\n                            \n                            <Button\n                              type=\"button\"\n                              variant=\"outline\"\n                              size=\"sm\"\n                              onClick={() => setCurrentPage(Math.min(totalPages, currentPage + 1))}\n                              disabled={currentPage === totalPages}\n                              className=\"h-8 w-8 p-0\"\n                            >\n                              <ChevronRight className=\"w-4 h-4\" />\n                            </Button>\n                          </div>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                )}\n\n                <div>\n                  <label className=\"block modal-label text-gray-700 mb-1\">\n                    제목 <span className=\"text-red-500\">*</span>\n                  </label>\n                  <Input\n                    value={subject}\n                    onChange={(e) => setSubject(e.target.value)}\n                    placeholder=\"문의 제목을 입력해주세요\"\n                    maxLength={100}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block modal-label text-gray-700 mb-1\">\n                    내용 <span className=\"text-red-500\">*</span>\n                  </label>\n                  <Textarea\n                    value={message}\n                    onChange={(e) => setMessage(e.target.value)}\n                    placeholder=\"문의 내용을 자세히 입력해주세요\"\n                    rows={6}\n                    maxLength={1000}\n                  />\n                  <p className=\"badge-text text-gray-500 mt-1\">\n                    {message.length}/1000\n                  </p>\n                </div>\n\n                <Button \n                  type=\"submit\" \n                  className=\"w-full\"\n                  disabled={loading}\n                >\n                  {loading ? (\n                    <>\n                      <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\" />\n                      전송 중...\n                    </>\n                  ) : (\n                    <>\n                      <Send className=\"w-4 h-4 mr-2\" />\n                      문의 보내기\n                    </>\n                  )}\n                </Button>\n              </form>\n            </CardContent>\n          </Card>\n          )}\n\n          {/* 문의 목록 */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center justify-between\">\n                <span className=\"flex items-center gap-2\">\n                  <AlertCircle className=\"w-5 h-5 text-orange-500\" />\n                  {isAdmin ? '전체 문의 목록' : '내 문의 내역'}\n                </span>\n                <span className=\"badge-stats border border-gray-300 bg-white text-gray-600\">\n                  {inquiries.length}건\n                </span>\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              {loadingInquiries ? (\n                <div className=\"flex items-center justify-center py-8\">\n                  <div className=\"w-6 h-6 border-2 border-gray-300 border-t-transparent rounded-full animate-spin\" />\n                </div>\n              ) : inquiries.length === 0 ? (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <MessageCircle className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\n                  <p className=\"text-sm\">문의 내역이 없습니다</p>\n                </div>\n              ) : (\n                <div className=\"space-y-1 max-h-[600px] overflow-y-auto\">\n                  {inquiries.map((inquiry) => (\n                    <div key={inquiry.id} className=\"border rounded overflow-hidden\">\n                      {/* 문의 요약 (한 줄) */}\n                      <div \n                        className=\"px-3 py-2 hover:bg-gray-50 transition-colors cursor-pointer\"\n                        onClick={() => {\n                          setExpandedInquiry(expandedInquiry === inquiry.id ? null : inquiry.id!)\n                        }}\n                      >\n                        <div className=\"flex items-center justify-between gap-2\">\n                          <div className=\"flex items-center gap-2 flex-1 min-w-0\">\n                            <span className=\"badge-stats border border-gray-300 bg-white text-gray-600 badge-text whitespace-nowrap\">\n                              {getInquiryTypeLabel(inquiry.inquiry_type)}\n                            </span>\n                            {getStatusBadge(inquiry.status)}\n                            <span className=\"modal-label truncate\">\n                              {inquiry.subject}\n                            </span>\n                            {isAdmin && (\n                              <span className=\"badge-text text-gray-500\">\n                                {inquiry.user_name || inquiry.user_email}\n                              </span>\n                            )}\n                            {inquiry.purchase_order_number && (\n                              <span className=\"badge-text text-blue-600\">\n                                [{inquiry.purchase_order_number}]\n                              </span>\n                            )}\n                            <span className=\"badge-text text-gray-400 ml-auto whitespace-nowrap\">\n                              {inquiry.created_at && format(new Date(inquiry.created_at), 'MM/dd HH:mm')}\n                            </span>\n                          </div>\n                          <div className=\"flex items-center gap-1\">\n                            {isAdmin && inquiry.status === 'open' && (\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                onClick={(e) => {\n                                  e.stopPropagation()\n                                  handleStatusUpdate(inquiry.id!, 'in_progress')\n                                }}\n                                className=\"h-6 badge-text px-2\"\n                              >\n                                처리중\n                              </Button>\n                            )}\n                            {isAdmin && (inquiry.status === 'open' || inquiry.status === 'in_progress') && (\n                              <Button\n                                size=\"sm\"\n                                onClick={(e) => {\n                                  e.stopPropagation()\n                                  handleStatusUpdate(inquiry.id!, 'resolved')\n                                }}\n                                className=\"h-6 badge-text px-2 bg-green-600 hover:bg-green-700\"\n                              >\n                                완료\n                              </Button>\n                            )}\n                            {/* 삭제 버튼 - 관리자는 모든 문의 삭제 가능, 일반 사용자는 본인의 open 상태만 */}\n                            {(isAdmin || (inquiry.status === 'open' && !inquiry.resolution_note && inquiry.user_email === currentUserEmail)) && (\n                              <Button\n                                size=\"sm\"\n                                variant=\"ghost\"\n                                onClick={(e) => {\n                                  e.stopPropagation()\n                                  handleDeleteInquiry(inquiry.id!)\n                                }}\n                                className=\"h-6 w-6 p-0 hover:bg-red-50\"\n                                title=\"문의 삭제\"\n                              >\n                                <Trash2 className=\"w-3 h-3 text-red-600\" />\n                              </Button>\n                            )}\n                            <button\n                              type=\"button\"\n                              className=\"p-1 hover:bg-gray-200 rounded\"\n                            >\n                              {expandedInquiry === inquiry.id ? (\n                                <ChevronUp className=\"w-4 h-4\" />\n                              ) : (\n                                <ChevronDown className=\"w-4 h-4\" />\n                              )}\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                      \n                      {/* 상세 내역 */}\n                      {expandedInquiry === inquiry.id && (\n                        <div className=\"px-3 py-3 bg-gray-50 border-t text-sm\">\n                          <div className=\"space-y-2\">\n                            <div>\n                              <span className=\"modal-value text-gray-700\">내용:</span>\n                              <p className=\"text-gray-600 mt-1 whitespace-pre-wrap\">{inquiry.message}</p>\n                            </div>\n                            {inquiry.purchase_order_number && (\n                              <div>\n                                <span className=\"modal-value text-gray-700\">관련 발주번호:</span>\n                                <span className=\"text-blue-600 ml-2\">{inquiry.purchase_order_number}</span>\n                              </div>\n                            )}\n                            {inquiry.handled_by && (\n                              <div>\n                                <span className=\"modal-value text-gray-700\">처리자:</span>\n                                <span className=\"text-green-600 ml-2\">\n                                  {inquiry.handled_by}\n                                  {inquiry.processed_at && ` (${format(new Date(inquiry.processed_at), 'yyyy-MM-dd HH:mm')})`}\n                                </span>\n                              </div>\n                            )}\n                            {inquiry.resolution_note && (\n                              <div>\n                                <span className=\"modal-value text-gray-700\">처리 내용:</span>\n                                <p className=\"text-gray-600 mt-1\">{inquiry.resolution_note}</p>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n\n      {/* 발주요청 상세 모달 */}\n      <Dialog open={showDetailModal} onOpenChange={setShowDetailModal}>\n        <DialogContent className=\"max-w-6xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center justify-between text-lg\">\n              <div className=\"flex items-center gap-2\">\n                <span>발주요청 상세</span>\n                {selectedInquiryDetail?.purchase_order_number && (\n                  <span className=\"badge-stats border border-gray-300 bg-white text-gray-600 font-normal\">\n                    {selectedInquiryDetail.purchase_order_number}\n                  </span>\n                )}\n              </div>\n              {isAdmin && selectedInquiryDetail && (\n                <Button\n                  variant=\"destructive\"\n                  size=\"sm\"\n                  onClick={deletePurchaseRequest}\n                  className=\"h-8 px-3\"\n                >\n                  <Trash2 className=\"w-4 h-4 mr-1\" />\n                  전체 삭제\n                </Button>\n              )}\n            </DialogTitle>\n          </DialogHeader>\n          \n          {loadingDetail ? (\n            <div className=\"flex items-center justify-center py-8\">\n              <div className=\"w-6 h-6 border-2 border-gray-300 border-t-transparent rounded-full animate-spin\" />\n            </div>\n          ) : selectedInquiryDetail && (\n            <div className=\"space-y-6\">\n              {/* 기본 정보 */}\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg\">\n                <div>\n                  <span className=\"badge-text text-gray-500 uppercase tracking-wider\">발주번호</span>\n                  <p className=\"font-semibold text-sm mt-1\">{selectedInquiryDetail.purchase_order_number || 'N/A'}</p>\n                </div>\n                <div>\n                  <span className=\"badge-text text-gray-500 uppercase tracking-wider\">업체명</span>\n                  <p className=\"font-semibold text-sm mt-1\">{selectedInquiryDetail.vendor_name}</p>\n                </div>\n                <div>\n                  <span className=\"badge-text text-gray-500 uppercase tracking-wider\">요청자</span>\n                  <p className=\"font-semibold text-sm mt-1\">{selectedInquiryDetail.requester_name}</p>\n                </div>\n                <div>\n                  <span className=\"badge-text text-gray-500 uppercase tracking-wider\">요청일</span>\n                  <p className=\"font-semibold text-sm mt-1\">\n                    {selectedInquiryDetail.request_date && \n                      format(new Date(selectedInquiryDetail.request_date), 'yyyy-MM-dd')}\n                  </p>\n                </div>\n              </div>\n\n              {/* 품목 목록 - 개선된 디자인 */}\n              <div>\n                <h3 className=\"font-semibold text-base mb-3\">품목 상세</h3>\n                <div className=\"border rounded-lg overflow-x-auto\">\n                  <table className=\"w-full\">\n                    <thead className=\"bg-gray-50 border-b\">\n                      <tr>\n                        <th className=\"text-left badge-text modal-value text-gray-700 px-3 py-3 w-12\">번호</th>\n                        <th className=\"text-left badge-text modal-value text-gray-700 px-3 py-3 min-w-[180px]\">품명</th>\n                        <th className=\"text-left badge-text modal-value text-gray-700 px-3 py-3 min-w-[150px]\">규격</th>\n                        <th className=\"text-center badge-text modal-value text-gray-700 px-3 py-3 w-20\">수량</th>\n                        <th className=\"text-right badge-text modal-value text-gray-700 px-3 py-3 w-28\">단가</th>\n                        <th className=\"text-right badge-text modal-value text-gray-700 px-3 py-3 w-32\">금액</th>\n                        <th className=\"text-left badge-text modal-value text-gray-700 px-3 py-3 min-w-[150px]\">비고</th>\n                        <th className=\"text-center badge-text modal-value text-gray-700 px-3 py-3 w-16\">링크</th>\n                        {isAdmin && <th className=\"text-center badge-text modal-value text-gray-700 px-3 py-3 w-24\">작업</th>}\n                      </tr>\n                    </thead>\n                    <tbody className=\"divide-y divide-gray-200\">\n                      {selectedInquiryDetail.purchase_request_items?.map((item: any, index: number) => (\n                        <tr key={item.id} className=\"hover:bg-gray-50 transition-colors\">\n                          <td className=\"text-sm px-3 py-3 text-center modal-value text-gray-600\">\n                            {item.line_number || index + 1}\n                          </td>\n                          <td className=\"text-sm px-3 py-3\">\n                            {editingItemId === item.id ? (\n                              <Input\n                                value={editingItem?.item_name || ''}\n                                onChange={(e) => setEditingItem({...editingItem, item_name: e.target.value})}\n                                className=\"h-9 text-sm w-full\"\n                                autoFocus\n                              />\n                            ) : (\n                              <span className=\"modal-value text-gray-900\">{item.item_name}</span>\n                            )}\n                          </td>\n                          <td className=\"text-sm px-3 py-3\">\n                            {editingItemId === item.id ? (\n                              <Input\n                                value={editingItem?.specification || ''}\n                                onChange={(e) => setEditingItem({...editingItem, specification: e.target.value})}\n                                className=\"h-9 text-sm w-full\"\n                              />\n                            ) : (\n                              <span className=\"text-gray-600\">{item.specification || '-'}</span>\n                            )}\n                          </td>\n                          <td className=\"text-sm text-center px-3 py-3\">\n                            {editingItemId === item.id ? (\n                              <Input\n                                type=\"number\"\n                                value={editingItem?.quantity || ''}\n                                onChange={(e) => setEditingItem({...editingItem, quantity: parseInt(e.target.value)})}\n                                className=\"h-9 text-sm text-center w-full\"\n                              />\n                            ) : (\n                              <span className=\"modal-value\">{item.quantity}</span>\n                            )}\n                          </td>\n                          <td className=\"text-sm text-right px-3 py-3\">\n                            {editingItemId === item.id ? (\n                              <Input\n                                type=\"number\"\n                                value={editingItem?.unit_price_value || ''}\n                                onChange={(e) => setEditingItem({...editingItem, unit_price_value: parseInt(e.target.value)})}\n                                className=\"h-9 text-sm text-right w-full\"\n                              />\n                            ) : (\n                              <span className=\"modal-value\">\n                                {item.unit_price_value ? `${parseFloat(item.unit_price_value).toLocaleString()}` : '-'}\n                              </span>\n                            )}\n                          </td>\n                          <td className=\"text-sm text-right px-3 py-3\">\n                            {editingItemId === item.id ? (\n                              <span className=\"font-semibold text-blue-600\">\n                                {((editingItem?.quantity || 0) * (editingItem?.unit_price_value || 0)).toLocaleString()}\n                              </span>\n                            ) : (\n                              <span className=\"font-semibold text-blue-600\">\n                                {item.amount_value ? `${parseFloat(item.amount_value).toLocaleString()}` : '-'}\n                              </span>\n                            )}\n                          </td>\n                          <td className=\"text-sm px-3 py-3\">\n                            {editingItemId === item.id ? (\n                              <Textarea\n                                value={editingItem?.remark || ''}\n                                onChange={(e) => setEditingItem({...editingItem, remark: e.target.value})}\n                                className=\"h-9 text-sm w-full resize-none\"\n                                rows={1}\n                              />\n                            ) : (\n                              <span className=\"text-gray-600 badge-text\">{item.remark || '-'}</span>\n                            )}\n                          </td>\n                          <td className=\"text-sm text-center px-3 py-3\">\n                            {item.link ? (\n                              <a \n                                href={item.link} \n                                target=\"_blank\" \n                                rel=\"noopener noreferrer\" \n                                className=\"inline-flex items-center justify-center w-8 h-8 rounded hover:bg-blue-50 text-blue-600\"\n                              >\n                                <Eye className=\"w-4 h-4\" />\n                              </a>\n                            ) : (\n                              <span className=\"text-gray-400\">-</span>\n                            )}\n                          </td>\n                          {isAdmin && (\n                            <td className=\"text-sm text-center px-3 py-3\">\n                              {editingItemId === item.id ? (\n                                <div className=\"flex justify-center gap-1\">\n                                  <Button\n                                    size=\"sm\"\n                                    onClick={() => saveEditItem(item.id)}\n                                    className=\"h-8 px-2 bg-green-600 hover:bg-green-700\"\n                                  >\n                                    <Save className=\"w-4 h-4 mr-1\" />\n                                    저장\n                                  </Button>\n                                  <Button\n                                    size=\"sm\"\n                                    variant=\"outline\"\n                                    onClick={cancelEditItem}\n                                    className=\"h-8 px-2\"\n                                  >\n                                    취소\n                                  </Button>\n                                </div>\n                              ) : (\n                                <div className=\"flex justify-center gap-1\">\n                                  <Button\n                                    size=\"sm\"\n                                    variant=\"ghost\"\n                                    onClick={() => startEditItem(item)}\n                                    className=\"h-8 w-8 p-0 hover:bg-blue-50\"\n                                  >\n                                    <Edit2 className=\"w-4 h-4 text-blue-600\" />\n                                  </Button>\n                                  <Button\n                                    size=\"sm\"\n                                    variant=\"ghost\"\n                                    onClick={() => deleteItem(item.id)}\n                                    className=\"h-8 w-8 p-0 hover:bg-red-50\"\n                                  >\n                                    <Trash2 className=\"w-4 h-4 text-red-600\" />\n                                  </Button>\n                                </div>\n                              )}\n                            </td>\n                          )}\n                        </tr>\n                      ))}\n                    </tbody>\n                    <tfoot className=\"bg-gray-50 border-t-2\">\n                      <tr>\n                        <td colSpan={5} className=\"text-sm font-semibold text-right px-3 py-3\">\n                          합계\n                        </td>\n                        <td className=\"text-sm font-bold text-right px-3 py-3 text-blue-600\">\n                          {selectedInquiryDetail.purchase_request_items\n                            ?.reduce((sum: number, item: any) => sum + (parseFloat(item.amount_value) || 0), 0)\n                            .toLocaleString()}\n                        </td>\n                        <td colSpan={isAdmin ? 3 : 2} className=\"px-3 py-3\"></td>\n                      </tr>\n                    </tfoot>\n                  </table>\n                </div>\n              </div>\n\n              {/* 비고 */}\n              {selectedInquiryDetail.notes && (\n                <div>\n                  <h3 className=\"modal-value mb-2\">비고</h3>\n                  <p className=\"page-subtitle text-gray-600 p-3 bg-gray-50 rounded-lg\">\n                    {selectedInquiryDetail.notes}\n                  </p>\n                </div>\n              )}\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  )\n}"],"names":["Send","createLucideIcon","d","key","DateRangePicker","className","date","onDateChange","placeholder","disabled","props","open","setOpen","React.useState","formatDateRange","range","from","formatDate","toLocaleDateString","year","month","day","to","getFullYear","getMonth","getDate","jsx","cn","children","jsxs","Popover","onOpenChange","PopoverTrigger","asChild","Button","id","variant","CalendarIcon","X","onClick","e","stopPropagation","PopoverContent","align","Calendar","initialFocus","mode","defaultMonth","selected","onSelect","newDate","numberOfMonths","locale","ko","classNames","months","caption","caption_label","nav","nav_button","nav_button_previous","nav_button_next","table","head_row","head_cell","row","cell","day_range_start","day_range_end","day_selected","day_today","outside","day_disabled","day_range_middle","day_hidden","size","SupportMain","inquiryType","setInquiryType","useState","subject","setSubject","message","setMessage","loading","setLoading","showPurchaseSelect","setShowPurchaseSelect","dateRange","setDateRange","purchaseRequests","setPurchaseRequests","selectedPurchase","setSelectedPurchase","searchingPurchase","setSearchingPurchase","currentPage","setCurrentPage","expandedPurchase","setExpandedPurchase","inquiries","setInquiries","isAdmin","setIsAdmin","currentUserEmail","setCurrentUserEmail","loadingInquiries","setLoadingInquiries","expandedInquiry","setExpandedInquiry","showDetailModal","setShowDetailModal","selectedInquiryDetail","setSelectedInquiryDetail","loadingDetail","setLoadingDetail","editingItemId","setEditingItemId","editingItem","setEditingItem","useEffect","async","checkUserRole","init","subscription","supportService","subscribeToInquiries","payload","unsubscribe","supabase","createClient","data","user","auth","getUser","email","employee","select","eq","single","adminStatus","Array","isArray","purchase_role","split","map","r","trim","includes","loadInquiriesWithRole","result","getAllInquiries","getMyInquiries","success","loadInquiries","totalPages","Math","ceil","length","startIndex","endIndex","currentPurchaseRequests","slice","handleStatusUpdate","inquiryId","newStatus","resolutionNote","note","prompt","toast","error","updateInquiryStatus","cancelEditItem","getStatusBadge","status","getInquiryTypeLabel","type","Card","CardHeader","CardTitle","MessageCircle","CardContent","onSubmit","preventDefault","finalMessage","purchaseInfo","itemsText","purchase_request_items","item","item_name","specification","quantity","join","purchase_order_number","vendor_name","requester_name","request_date","createInquiry","inquiry_type","purchase_info","Select","value","onValueChange","SelectTrigger","SelectValue","SelectContent","SelectItem","startDate","toISOString","endDate","getMyPurchaseRequests","Fragment","Search","pr","format","Date","CheckCircle","ChevronUp","ChevronDown","index","max","ChevronLeft","_","i","page","min","ChevronRight","Input","onChange","target","maxLength","Textarea","rows","AlertCircle","inquiry","user_name","user_email","created_at","resolution_note","confirm","deleteInquiry","handleDeleteInquiry","title","Trash2","handled_by","processed_at","Dialog","DialogContent","DialogHeader","DialogTitle","deletePurchaseRequest","line_number","autoFocus","parseInt","unit_price_value","parseFloat","toLocaleString","amount_value","remark","link","href","rel","Eye","itemId","totalPrice","updatePurchaseRequestItem","saveEditItem","Save","startEditItem","Edit2","deletePurchaseRequestItem","deleteItem","colSpan","reduce","sum","notes"],"mappings":"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","x_google_ignoreList":[0]}