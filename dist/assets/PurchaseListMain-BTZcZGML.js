const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FastPurchaseTable-CRrjd7hq.js","assets/index-m3fJUWdN.js","assets/index-xu3noEvr.css","assets/index-OpY-RBjo.js","assets/PurchaseDetailModal-DrVdQG50.js","assets/helpers-CWDchwQL.js","assets/input-L8jZtFSn.js","assets/dialog-BsyHRK2b.js","assets/format-Dg54GRbZ.js","assets/circle-check-big-B_vs-Xwo.js","assets/eye-D8dGsA2j.js","assets/chevron-down-B34F4nwP.js","assets/popover-Bru2i_nz.js","assets/calendar-Bvy8cUb0.js","assets/package-Cqdj-6Td.js","assets/credit-card-V-VwHt5k.js","assets/trash-2-CYhjtZSR.js","assets/plus-BLzYEBb7.js","assets/save-CXgkag0j.js","assets/PurchaseItemsModal-BRhnEZ2n.js","assets/table-DlHUIbEg.js"])))=>i.map(i=>d[i]);
import{r as n,a as he,l as _e,j as e,_ as je,u as Te,f as Ee,b as ke}from"./index-m3fJUWdN.js";import{t as ee,B as Ie}from"./index-OpY-RBjo.js";import{I as ie}from"./input-L8jZtFSn.js";import{S as fe,a as ge,b as xe,c as ye,d as U}from"./select-CHF8V9yq.js";import{C as Ae}from"./combobox-CriyXjoM.js";import{C as ve,a as Le,b as qe,c as be}from"./card-CB2Q29jH.js";import{P as Me}from"./plus-BLzYEBb7.js";import{F as Oe}from"./funnel-BpRG3l8K.js";import{S as Re}from"./search-gHNZD30F.js";import{P as Ve}from"./package-Cqdj-6Td.js";import"./chevron-down-B34F4nwP.js";import"./popover-Bru2i_nz.js";const m={purchases:null,vendors:null,employees:null,lastFetch:0,userInfo:null,CACHE_DURATION:300*1e3},$e=()=>{const[x,i]=n.useState([]),[_,P]=n.useState([]),[v,T]=n.useState([]),[k,$]=n.useState(!0),[te,w]=n.useState([]),[M,Y]=n.useState(""),[S,z]=n.useState(""),[O,Z]=n.useState(""),y=he(),R=n.useRef(!1);n.useEffect(()=>{(async()=>{if(R.current)return;R.current=!0;const g=Date.now(),A=m.lastFetch&&g-m.lastFetch<m.CACHE_DURATION;try{if(A&&m.vendors&&m.employees&&m.userInfo){P(m.vendors),T(m.employees);const o=m.userInfo;if(o){let f=[];o.purchase_role&&(Array.isArray(o.purchase_role)?f=o.purchase_role.map(s=>String(s).trim()):f=String(o.purchase_role).split(",").map(u=>u.trim()).filter(u=>u.length>0)),w(f),Y(o.name||o.full_name||""),z(o.email||""),Z(o.id||"")}return}const[h,L,C]=await Promise.all([y.from("vendors").select("*"),y.from("employees").select("*"),y.auth.getUser()]);if(h.error)throw h.error;const F=h.data||[];if(P(F),m.vendors=F,L.error)throw L.error;const D=L.data||[];if(T(D),m.employees=D,C.data.user&&!C.error){let o=null;if(C.data.user.email&&(o=(await y.from("employees").select("*").eq("email",C.data.user.email).maybeSingle()).data),o){m.userInfo=o;let f=[];o.purchase_role&&(Array.isArray(o.purchase_role)?f=o.purchase_role.map(s=>String(s).trim()):f=String(o.purchase_role).split(",").map(u=>u.trim()).filter(u=>u.length>0)),w(f),Y(o.name||o.full_name||""),z(o.email||""),Z(o.id||"")}m.lastFetch=g}}catch(h){_e.error("초기 데이터 로드 실패",h)}})()},[]);const N=n.useCallback(async(I=!1)=>{$(!0);try{const g=Date.now(),A=m.lastFetch&&g-m.lastFetch<m.CACHE_DURATION;if(!I&&A&&m.purchases){i(m.purchases),$(!1);return}let h=v;if(h.length===0&&(h=m.employees||[],h.length===0)){const{data:s}=await y.from("employees").select("*");h=s||[]}const{data:{user:L},error:C}=await y.auth.getUser();if(C||!L){_e.error("사용자 인증 실패",C),ee.error("로그인이 필요합니다."),$(!1);return}const F=new Date;F.setMonth(F.getMonth()-3);const{data:D,error:o}=await y.from("purchase_requests").select("*,vendors(vendor_name,vendor_payment_schedule),vendor_contacts(contact_name),purchase_request_items(*).order(line_number)").gte("request_date",F.toISOString()).order("request_date",{ascending:!1}).limit(1e3);if(o)throw o;const f=(D||[]).map(s=>{const u=s.purchase_request_items?.[0]||{},V=h.find(E=>E.id===s.requester_id);return{id:Number(s.id),purchase_order_number:s.purchase_order_number,request_date:s.request_date,delivery_request_date:s.delivery_request_date,progress_type:s.progress_type,payment_completed_at:s.payment_completed_at,payment_category:s.payment_category,currency:s.currency,request_type:s.request_type,vendor:s.vendors||null,vendor_name:s.vendors?.vendor_name||"",vendor_payment_schedule:s.vendors?.vendor_payment_schedule||"",vendor_contacts:s.vendor_contacts||[],requester_id:s.requester_id,requester_name:s.requester_name,requester_full_name:V?.full_name||V?.name||s.requester_name||"",item_name:u.item_name||"",specification:u.specification||"",quantity:Number(u.quantity)||0,unit_price_value:Number(u.unit_price_value)||0,amount_value:Number(u.amount_value)||0,remark:u.remark||"",project_vendor:s.project_vendor,sales_order_number:s.sales_order_number,project_item:s.project_item,line_number:Number(u.line_number)||1,contact_name:s.vendor_contacts?.contact_name||"",middle_manager_status:s.middle_manager_status,final_manager_status:s.final_manager_status,is_received:!!s.is_received,received_at:s.received_at,is_payment_completed:!!s.is_payment_completed,is_po_download:!!s.is_po_download,link:u.link,items:s.purchase_request_items||[],total_amount:s.purchase_request_items?.reduce((E,G)=>E+(Number(G.amount_value)||0),0)||0,purchase_status:s.purchase_status||"pending"}});i(f),m.purchases=f,m.lastFetch=g}catch(g){_e.error("발주 목록 로드 실패",g),ee.error("발주 목록을 불러올 수 없습니다.")}finally{$(!1)}},[v]);return n.useEffect(()=>{N()},[N]),{purchases:x,vendors:_,employees:v,loading:k,currentUserRoles:te,currentUserName:M,currentUserEmail:S,currentUserId:O,refreshPurchases:N}};function ze(x,i=500){const[_,P]=n.useState(x);return n.useEffect(()=>{const v=setTimeout(()=>{P(x)},i);return()=>{clearTimeout(v)}},[x,i]),_}const Be=["정희웅"],d=new Map,de=100,He=(x,i,_,P,v)=>{const T=he(),[k,$]=n.useState("pending"),[te,w]=n.useState(""),[M,Y]=n.useState(""),[S,z]=n.useState(""),[O,Z]=n.useState(""),[y,R]=n.useState(""),[N,I]=n.useState(""),[g,A]=n.useState(""),[h,L]=n.useState(""),C=new Date().getFullYear(),F=new Date(C,0,1).toISOString().split("T")[0],D=new Date().toISOString().split("T")[0],[o,f]=n.useState(F),[s,u]=n.useState(D),V=ze(te,300),E=i?.includes("app_admin");i?.includes("final_approver"),i?.includes("middle_manager");const G=i?.includes("purchase_manager"),Q=i?.includes("raw_material_manager")||i?.includes("consumable_manager")||i?.includes("purchase_manager"),W=n.useMemo(()=>!i||i.length===0?1:G?2:i.some(t=>["middle_manager","final_approver","app_admin","ceo"].includes(t))?3:1,[i,G]),X=n.useCallback(t=>{if(!_)return"all";if(t==="purchase")return Q||E?"all":_;switch(W){case 1:return t==="done"?"all":_;case 2:return t==="done"?"all":_;case 3:return"all";default:return _}},[_,W,Q,E]);n.useEffect(()=>{if(!_)return;const t=X(k);z(t)},[k,_,W,X]);const B=n.useMemo(()=>{const t=`visible_${x.length}_${i.join(",")}`;if(d.has(t))return d.get(t);let a;if(i.includes("purchase_manager")||i.includes("app_admin")?a=x:a=x.filter(r=>!Be.includes(r.requester_name)),d.size>=de){const r=d.keys().next().value;d.delete(r)}return d.set(t,a),a},[x,i]),se=n.useMemo(()=>{const t=`date_${B.length}_${o}_${s}`;if(d.has(t))return d.get(t);const a=B.filter(r=>{const c=r.request_date?r.request_date.split("T")[0]:"",K=!o||c>=o,J=!s||c<=s;return K&&J});if(d.size>=de){const r=d.keys().next().value;d.delete(r)}return d.set(t,a),a},[B,o,s]),H=n.useMemo(()=>{const t=`tab_${se.length}_${k}`;if(d.has(t))return d.get(t);const a=se.filter(r=>{let c=!1;switch(k){case"pending":return c=["pending","대기","",null].includes(r.final_manager_status),c;case"purchase":{const K=r.payment_category==="구매 요청",J=!r.is_payment_completed,le=(r.progress_type||"").includes("선진행"),me=(r.progress_type||"").includes("일반"),pe=r.final_manager_status==="approved";return!K||!J?c=!1:c=le||me&&pe,c}case"receipt":{const K=!r.is_received,J=(r.progress_type||"").includes("선진행"),le=r.final_manager_status==="approved";return c=K&&(J||le),c}case"done":return c=!0,c;default:return!0}});if(d.size>=de){const r=d.keys().next().value;d.delete(r)}return d.set(t,a),a},[se,k]),ae=n.useMemo(()=>{const t=`employee_${H.length}_${S}`;if(d.has(t))return d.get(t);let a;if(S&&S!=="all"&&S!=="전체"?a=H.filter(r=>r.requester_name===S):a=H,d.size>=de){const r=d.keys().next().value;d.delete(r)}return d.set(t,a),a},[H,S]),ce=n.useMemo(()=>M?ae.filter(t=>t.vendor_name===M):ae,[ae,M]),re=n.useMemo(()=>{let t=ce;if(O){const a=O.trim().toLowerCase();t=t.filter(r=>r.purchase_order_number?.toLowerCase().includes(a))}if(y){const a=y.trim().toLowerCase();t=t.filter(r=>r.items&&r.items.length>0?r.items.some(c=>c.item_name?.toLowerCase().includes(a)):!1)}if(N){const a=N.trim().toLowerCase();t=t.filter(r=>r.items&&r.items.length>0?r.items.some(c=>c.specification?.toLowerCase().includes(a)):!1)}if(g&&g!=="all"&&(t=t.filter(a=>{switch(g){case"pending":return!a.final_manager_status||a.final_manager_status==="pending"||a.final_manager_status==="대기";case"approved":return a.final_manager_status==="approved";case"rejected":return a.final_manager_status==="rejected"||a.middle_manager_status==="rejected";default:return!0}})),h){const a=h.trim().toLowerCase();t=t.filter(r=>r.items&&r.items.length>0?r.items.some(c=>c.remark?.toLowerCase().includes(a)):!1)}return t},[ce,O,y,N,g,h]),l=n.useMemo(()=>{if(!V)return re;const t=V.trim().toLowerCase();return re.filter(a=>a.purchase_order_number?.toLowerCase().includes(t)||a.vendor_name?.toLowerCase().includes(t)||a.requester_name?.toLowerCase().includes(t)||a.project_vendor?.toLowerCase().includes(t)?!0:a.items&&a.items.length>0?a.items.some(r=>r.item_name&&r.item_name.toLowerCase().includes(t)||r.specification&&r.specification.toLowerCase().includes(t)):!1)},[re,V]),j=n.useMemo(()=>[...l].sort((t,a)=>{const r=t.request_date?new Date(t.request_date).getTime():0;return(a.request_date?new Date(a.request_date).getTime():0)-r}),[l]),Ne=n.useMemo(()=>{const a=B.filter(p=>{const b=p.request_date?p.request_date.split("T")[0]:"",q=!o||b>=o,oe=!s||b<=s;return q&&oe}),r=p=>new Set(p.map(b=>b.purchase_order_number)).size,c=p=>{if(p==="purchase")return Q||E?a:a.filter(q=>q.requester_name===_);const b=X(p);return b==="all"||b==="전체"?a:a.filter(q=>q.requester_name===b)},K=c("pending"),J=c("purchase"),le=c("receipt"),me=c("done"),pe=K.filter(p=>["pending","대기","",null].includes(p.final_manager_status)),Ce=J.filter(p=>{const b=p.payment_category==="구매 요청",q=!p.is_payment_completed;if(!b||!q)return!1;const oe=(p.progress_type||"").includes("선진행"),De=(p.progress_type||"").includes("일반"),Pe=p.final_manager_status==="approved";return oe||De&&Pe}),Fe=le.filter(p=>{const b=!p.is_received,q=(p.progress_type||"").includes("선진행"),oe=p.final_manager_status==="approved";return b&&(q||oe)});return{pending:r(pe),purchase:r(Ce),receipt:r(Fe),done:r(me)}},[B,o,s,W,_,X,Q,E]),ue=n.useRef(!1);n.useEffect(()=>{ue.current||(ue.current=!0,(async()=>{const{data:{user:t}}=await T.auth.getUser();if(!t)return;const{data:a}=await T.from("user_preferences").select("period_start, period_end").eq("user_id",t.id).single();if(a){const r=a.period_start?new Date(a.period_start).toISOString().split("T")[0]:F,c=a.period_end?new Date(a.period_end).toISOString().split("T")[0]:D;f(r),u(c)}})())},[]);const ne=n.useRef();return n.useEffect(()=>{if(ue.current)return ne.current&&clearTimeout(ne.current),ne.current=setTimeout(async()=>{const{data:{user:t}}=await T.auth.getUser();t&&(!o||!s||await T.from("user_preferences").upsert({user_id:t.id,period_start:o,period_end:s,updated_at:new Date().toISOString()}))},1e3),()=>{ne.current&&clearTimeout(ne.current)}},[o,s]),{activeTab:k,searchTerm:te,vendorFilter:M,dateFromFilter:o,dateToFilter:s,selectedEmployee:S,purchaseNumberFilter:O,itemNameFilter:y,specificationFilter:N,approvalStatusFilter:g,remarkFilter:h,setActiveTab:$,setSearchTerm:w,setVendorFilter:Y,setDateFromFilter:f,setDateToFilter:u,setSelectedEmployee:z,setPurchaseNumberFilter:Z,setItemNameFilter:R,setSpecificationFilter:I,setApprovalStatusFilter:A,setRemarkFilter:L,filteredPurchases:j,tabCounts:Ne}},Ke=n.lazy(()=>je(()=>import("./FastPurchaseTable-CRrjd7hq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]))),we=n.memo(()=>e.jsx("div",{className:"p-4 space-y-4",children:[...Array(5)].map((x,i)=>e.jsxs("div",{className:"flex space-x-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]},i))}));we.displayName="TableSkeleton";const Se=n.memo(({purchases:x,activeTab:i,currentUserRoles:_,onRefresh:P,onPaymentComplete:v,onReceiptComplete:T})=>e.jsx(n.Suspense,{fallback:e.jsx(we,{}),children:e.jsx(Ke,{purchases:x,activeTab:i,currentUserRoles:_,onRefresh:P,onPaymentComplete:v,onReceiptComplete:T})}));Se.displayName="LazyPurchaseTable";const Je=n.lazy(()=>je(()=>import("./PurchaseItemsModal-BRhnEZ2n.js"),__vite__mapDeps([19,1,2,7,6,20,3,8,17,18,16]))),Ye=[{key:"pending",label:"승인대기"},{key:"purchase",label:"구매 현황"},{key:"receipt",label:"입고 현황"},{key:"done",label:"전체 항목"}];function ot({onEmailToggle:x,showEmailButton:i=!0}){const _=Te(),P=Ee(),v=he(),[T,k]=n.useState(null),[$,te]=n.useState({}),[w,M]=n.useState(null),[Y,S]=n.useState(!1),{purchases:z,vendors:O,employees:Z,loading:y,currentUserRoles:R,currentUserName:N,refreshPurchases:I}=$e(),g=R?.includes("app_admin"),{activeTab:A,searchTerm:h,vendorFilter:L,dateFromFilter:C,dateToFilter:F,selectedEmployee:D,purchaseNumberFilter:o,itemNameFilter:f,approvalStatusFilter:s,setActiveTab:u,setSearchTerm:V,setVendorFilter:E,setDateFromFilter:G,setDateToFilter:Q,setSelectedEmployee:W,setPurchaseNumberFilter:X,setItemNameFilter:B,setApprovalStatusFilter:se,filteredPurchases:H,tabCounts:ae}=He(z,R,N);n.useEffect(()=>{new URLSearchParams(P.search).get("tab")==="purchase"&&u("purchase")},[P.search,u]);const ce=async l=>{try{const{error:j}=await v.from("purchase_requests").update({is_received:!0,received_at:new Date().toISOString()}).eq("id",l);if(j)throw j;await v.from("purchase_request_items").update({is_received:!0,delivery_status:"received"}).eq("purchase_request_id",l),ee.success("입고완료 처리되었습니다."),await I()}catch{ee.error("처리 중 오류가 발생했습니다.")}},re=async l=>{try{const{error:j}=await v.from("purchase_requests").update({is_payment_completed:!0,payment_completed_at:new Date().toISOString()}).eq("id",l);if(j)throw j;await v.from("purchase_request_items").update({is_payment_completed:!0}).eq("purchase_request_id",l),ee.success("구매완료 처리되었습니다."),await I()}catch{ee.error("처리 중 오류가 발생했습니다.")}};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"발주요청 관리"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"발주요청서를 관리하고 승인 처리를 할 수 있습니다"})]}),e.jsxs(ke,{onClick:()=>_("/purchase/new"),className:"mt-4 sm:mt-0 bg-hansl-500 hover:bg-hansl-600",children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),"새 발주요청 작성"]})]}),e.jsxs(ve,{className:"mb-4 border border-gray-200",children:[e.jsx(Le,{className:"bg-white border-b border-gray-200 py-3",children:e.jsxs(qe,{className:"flex items-center text-gray-900 text-sm font-medium",children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"검색 필터"]})}),e.jsx(be,{className:"py-3",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"시작일"}),e.jsx(ie,{type:"date",value:C,onChange:l=>G(l.target.value),className:"text-sm h-9"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"종료일"}),e.jsx(ie,{type:"date",value:F,onChange:l=>Q(l.target.value),className:"text-sm h-9"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"요청자"}),e.jsx(Ae,{value:D||"all",onValueChange:l=>{W(l)},options:[{value:"all",label:"전체"},...Z.filter(l=>l.name&&l.name.trim()!=="").sort((l,j)=>(l.name||"").localeCompare(j.name||"")).map(l=>({value:l.name||"",label:`${l.name}${l.name===N?" (나)":""}`}))],placeholder:D==="all"?"전체":D||"선택",searchPlaceholder:"직원 이름 검색...",emptyText:"일치하는 직원이 없습니다",className:"text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"업체"}),e.jsxs(fe,{value:L||"all",onValueChange:l=>E(l==="all"?"":l),children:[e.jsx(ge,{className:"h-9 text-sm",children:e.jsx(xe,{placeholder:"전체"})}),e.jsxs(ye,{children:[e.jsx(U,{value:"all",children:"전체"}),O.map(l=>e.jsx(U,{value:l.vendor_name,children:l.vendor_name},l.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"발주번호"}),e.jsx(ie,{placeholder:"번호",value:o,onChange:l=>X(l.target.value),className:"text-sm h-9"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"품명"}),e.jsx(ie,{placeholder:"품명",value:f,onChange:l=>B(l.target.value),className:"text-sm h-9"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"승인상태"}),e.jsxs(fe,{value:s||"all",onValueChange:l=>se(l==="all"?"":l),children:[e.jsx(ge,{className:"h-9 text-sm",children:e.jsx(xe,{placeholder:"전체"})}),e.jsxs(ye,{children:[e.jsx(U,{value:"all",children:"전체"}),e.jsx(U,{value:"pending",children:"대기"}),e.jsx(U,{value:"approved",children:"승인"}),e.jsx(U,{value:"rejected",children:"반려"})]})]})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"통합검색"}),e.jsxs("div",{className:"relative",children:[e.jsx(Re,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 w-3 h-3 text-gray-400"}),e.jsx(ie,{placeholder:"검색...",value:h,onChange:l=>V(l.target.value),className:"pl-7 text-sm h-9"})]})]})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-1 space-y-1 sm:space-y-0 bg-gray-50 p-1 rounded-lg border border-gray-200",children:Ye.map(l=>e.jsxs("button",{onClick:()=>u(l.key),className:`flex-1 flex items-center justify-center space-x-2 py-2.5 px-3 sm:px-4 rounded-md text-xs sm:text-sm font-medium transition-colors ${A===l.key?"text-hansl-600 bg-white shadow-sm border border-gray-200":"text-gray-600 bg-transparent hover:text-gray-900 hover:bg-white/50"}`,children:[e.jsx("span",{className:"whitespace-nowrap",children:l.label}),e.jsx(Ie,{variant:"secondary",className:`text-[10px] sm:text-xs ${A===l.key?"bg-hansl-50 text-hansl-700":"bg-gray-100 text-gray-600"}`,children:ae[l.key]})]},l.key))}),e.jsx(ve,{className:"overflow-hidden border border-gray-200",children:e.jsx(be,{className:"p-0",children:y?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-hansl-500 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"로딩 중..."})]}):H.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ve,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"발주요청서가 없습니다"}),e.jsx("p",{className:"text-gray-600",children:"새로운 발주요청서를 작성해보세요."})]}):e.jsx(Se,{purchases:H,activeTab:A,currentUserRoles:R,onRefresh:I,onPaymentComplete:re,onReceiptComplete:ce})})})]}),w&&e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}),children:e.jsx(Je,{isOpen:Y,onClose:()=>{S(!1),M(null)},purchase:{...w,vendor_name:w.vendor_name||"",project_vendor:w.project_vendor||"",sales_order_number:w.sales_order_number||"",project_item:w.project_item||""},isAdmin:g||!1,onUpdate:I})})]})}export{ot as default};
//# sourceMappingURL=PurchaseListMain-BTZcZGML.js.map
