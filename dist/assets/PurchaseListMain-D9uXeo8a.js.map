{"version":3,"mappings":"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BAAgB,GAElB,CACEH,GAAI,cACJC,MAAO,KACPC,YAAa,QACbC,gBAAgB,GAElB,CACEH,GAAI,eACJC,MAAO,MACPC,YAAa,UACbC,gBAAgB,GAElB,CACEH,GAAI,wBACJC,MAAO,QACPC,YAAa,WACbC,gBAAgB,GAElB,CACEH,GAAI,wBACJC,MAAO,QACPC,YAAa,YACbC,gBAAgB,GAElB,CACEH,GAAI,YACJC,MAAO,KACPC,YAAa,SACbC,gBAAgB,GAElB,CACEH,GAAI,gBACJC,MAAO,KACPC,YAAa,WACbC,gBAAgB,GAElB,CACEH,GAAI,WACJC,MAAO,KACPC,YAAa,QACbC,gBAAgB,GAElB,CACEH,GAAI,aACJC,MAAO,KACPC,YAAa,QACbC,gBAAgB,GAElB,CACEH,GAAI,SACJC,MAAO,KACPC,YAAa,OACbC,gBAAgB,GAElB,CACEH,GAAI,SACJC,MAAO,KACPC,YAAa,WACbC,gBAAgB,GAElB,CACEH,GAAI,OACJC,MAAO,KACPC,YAAa,QACbC,gBAAgB,GAElB,CACEH,GAAI,iBACJC,MAAO,OACPC,YAAa,UACbC,gBAAgB,GAElB,CACEH,GAAI,eACJC,MAAO,UACPC,YAAa,WACbC,gBAAgB,GAElB,CACEH,GAAI,qBACJC,MAAO,OACPC,YAAa,QACbC,gBAAgB,GAElB,CACEH,GAAI,oBACJC,MAAO,OACPC,YAAa,SACbC,gBAAgB,GAElB,CACEH,GAAI,mBACJC,MAAO,OACPC,YAAa,SACbC,gBAAgB,IAKPC,GAA8CL,GAAiBM,OAC1E,CAACC,EAAKC,KACJD,EAAIC,EAAOP,IAAMO,EAAOJ,eACjBG,GAET,IAIkEP,GAAiBM,OACnF,CAACC,EAAKC,KACJD,EAAIC,EAAOP,IAAMO,EACVD,GAET,IAIK,MAAME,GAAsC,CACjD,wBACA,cACA,YACA,UAIWC,GAAgB,CAC3B,CACEC,MAAO,QACPC,QAAS,CACP,qBACA,wBACA,mBACA,iBACA,eACA,eAGJ,CACED,MAAO,QACPC,QAAS,CACP,cACA,eACA,wBACA,0BAGJ,CACED,MAAO,QACPC,QAAS,CACP,YACA,gBACA,WAC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","names":["Building","createLucideIcon","d","key","x","y","width","height","rx","DollarSign","x1","x2","y1","y2","EyeOff","Info","cx","cy","r","Settings","SlidersVertical","HIDDEN_EMPLOYEES","filterByTab","purchases","tab","currentUser","userRoles","Array","isArray","purchase_role","map","trim","split","filter","purchase","middle_manager_status","final_manager_status","includes","payment_category","logger","debug","purchase_order_number","requester_name","name","isRequest","notPaid","is_payment_completed","isSeonJin","progress_type","isIlban","finalApproved","is_received","getFieldValue","field","is_statement_received","is_utk_checked","keys","value","applyAllFilters","options","filtered","employeeName","hasManagerRole","some","role","requestorName","filterByEmployee","searchTerm","term","toLowerCase","vendor_name","purchase_request_items","item","item_name","item_detail","manufacturer","model","spec","flat","String","filterBySearchTerm","advancedFilters","filters","length","every","condition","dateField","fieldValue","startDate","endDate","purchaseDate","Date","toISOString","match","startMonth","endMonth","purchaseMonth","slice","startsWith","endsWith","Number","min","max","numValue","v","applyAdvancedFilters","requestDate","request_date","filterByDateRange","sortConfig","sort","a","b","aValue","bValue","comparison","direction","sortPurchases","usePurchaseMemory","setPurchases","useState","loading","setLoading","error","setError","purchaseMemoryCache","useEffect","lastArrayRef","allPurchases","lastFetchTime","lastFetch","checkCache","arrayChanged","fetchTimeChanged","isLoading","interval","setInterval","clearInterval","getFilteredPurchases","useCallback","tabCounts","useMemo","pending","receipt","done","calculateTabCounts","stats","total","loaded","loadedCount","memoryUsage","StatusBadge","memo","status","text","className","completed","inProgress","rejected","children","displayName","MobilePurchaseCard","onClick","receiptProgress","received","percentage","actual_received_date","Math","round","getReceiptProgress","isAdvance","jsxs","jsx","formatDateShort","project_vendor","project_item","sales_order_number","amount_value","total_amount","toLocaleString","currency","style","Eye","formatDate","formatDateISO","getCurrencySymbol","DONE_TAB_COLUMNS","id","label","description","defaultVisible","DEFAULT_COLUMN_VISIBILITY","reduce","acc","column","REQUIRED_COLUMNS","COLUMN_GROUPS","title","columns","useColumnSettings","columnVisibility","setColumnVisibility","setIsLoading","supabase","createClient","loadUserSettings","async","data","user","authError","auth","getUser","email","warn","settings","settingsError","from","select","eq","maybeSingle","userEmail","setting_value","savedSettings","mergedSettings","settingsCount","Object","saveUserSettings","newSettings","upsertError","upsert","user_email","setting_type","setting_key","onConflict","info","visibleColumns","entries","visible","toggleColumn","columnId","prev","catch","toast","resetToDefault","success","ROOT_NAME","createAlertDialogContext","createAlertDialogScope","createContextScope","createDialogScope","useDialogScope","AlertDialog","props","__scopeAlertDialog","alertDialogProps","dialogScope","DialogPrimitive.Root","modal","React.forwardRef","forwardedRef","triggerProps","DialogPrimitive.Trigger","ref","AlertDialogPortal","portalProps","DialogPrimitive.Portal","AlertDialogOverlay","overlayProps","DialogPrimitive.Overlay","CONTENT_NAME","AlertDialogContentProvider","useAlertDialogContentContext","Slottable","createSlottable","AlertDialogContent","contentProps","contentRef","React.useRef","composedRefs","useComposedRefs","cancelRef","DialogPrimitive.WarningProvider","contentName","titleName","TITLE_NAME","docsSlug","scope","DialogPrimitive.Content","onOpenAutoFocus","composeEventHandlers","event","preventDefault","current","focus","preventScroll","onPointerDownOutside","onInteractOutside","DescriptionWarning","AlertDialogTitle","titleProps","DialogPrimitive.Title","DESCRIPTION_NAME","AlertDialogDescription","descriptionProps","DialogPrimitive.Description","AlertDialogAction","actionProps","DialogPrimitive.Close","CANCEL_NAME","AlertDialogCancel","cancelProps","MESSAGE","React.useEffect","document","getElementById","getAttribute","Overlay2","Content2","Action","Cancel","Title2","Description2","AlertDialogPrimitive.Overlay","cn","AlertDialogPrimitive.Content","AlertDialogHeader","AlertDialogFooter","AlertDialogPrimitive.Title","AlertDialogPrimitive.Description","AlertDialogPrimitive.Action","buttonVariants","AlertDialogPrimitive.Cancel","variant","COMMON_COLUMN_CLASSES","ApprovalStatusBadge","memoryPurchase","find","p","middleApproved","middleRejected","finalRejected","PaymentProgressBar","activeTab","ReceiptProgressBar","StatementProgressBar","currentPurchase","statementProgress","items","type","TableRow","isLeadBuyer","onPaymentComplete","onReceiptComplete","onExcelDownload","isVisible","src","alt","is_po_download","e","stopPropagation","pointerEvents","contact_name","revised_delivery_request_date","delivery_request_date","specification","quantity","unit_price_value","unit_price_currency","amount_currency","Fragment","remark","link","href","target","rel","FastPurchaseTable","currentUserRoles","onRefresh","onOptimisticUpdate","selectedPurchaseId","setSelectedPurchaseId","isModalOpen","setIsModalOpen","deleteConfirmOpen","setDeleteConfirmOpen","purchaseToDelete","setPurchaseToDelete","handleRowClick","handleCloseModal","handleExcelDownload","purchaseRequest","requestError","single","orderItems","itemsError","order","vendorInfo","vendor_phone","vendor_fax","vendor_contact_name","vendor_payment_schedule","vendorId","vendor_id","contactId","contact_id","vendorData","contactData","excelData","line_number","blob","workbook","__vitePreload","import","then","n","__VITE_PRELOAD__","Workbook","sheet","addWorksheet","pageSetup","paperSize","orientation","fitToPage","fitToWidth","fitToHeight","horizontalCentered","verticalCentered","margins","left","right","top","bottom","header","footer","getRow","eachCell","cell","font","size","mergeCells","response","fetch","arrayBuffer","imageId","addImage","buffer","extension","dWidth","getColumn","logoWidth","logoHeight","logoCol","logoRow","tl","col","row","ext","_e","getCell","alignment","horizontal","vertical","indent","bold","tableHeaders","i","fromCharCode","sortedItems","itemRows","sumRow","rowIdx","bCell","unitSymbol","unitWithCurrency","amountSymbol","amountWithCurrency","gCell","wrapText","shrinkToFit","c","totalSymbol","totalAmount","sum","lastRow","cellAddr","isItemRow","border","currentBorder","sumCellBorder","A","B","C","D","E","F","G","forEach","xlsx","writeBuffer","Blob","generatePurchaseOrderExcelJS","downloadFilename","url","window","URL","createObjectURL","createElement","download","body","appendChild","click","removeChild","revokeObjectURL","downloadFlagErr","update","flagErr","handleConfirmDelete","supabaseUrl","employee","empError","roles","canEdit","isApproved","isRequester","deletedItems","delete","code","message","details","hint","deletedRequest","removePurchaseFromMemory","purchaseId","errorObj","stack","isColumnVisible","tableHeader","baseHeaders","additionalHeaders","PurchaseDetailModal","isOpen","onClose","onDelete","open","onOpenChange","CHECKBOX_NAME","createCheckboxContext","createCheckboxScope","CheckboxProviderImpl","useCheckboxContext","CheckboxProvider","__scopeCheckbox","checked","checkedProp","defaultChecked","disabled","form","onCheckedChange","required","internal_do_not_use_render","setChecked","useControllableState","prop","defaultProp","onChange","caller","control","setControl","React.useState","bubbleInput","setBubbleInput","hasConsumerStoppedPropagationRef","isFormControl","closest","context","isIndeterminate","isFunction","TRIGGER_NAME","CheckboxTrigger","onKeyDown","checkboxProps","initialCheckedStateRef","reset","addEventListener","removeEventListener","Primitive","button","getState","prevChecked","isPropagationStopped","Checkbox","CheckboxBubbleInput","INDICATOR_NAME","CheckboxIndicator","forceMount","indicatorProps","Presence","present","span","BUBBLE_INPUT_NAME","usePrevious","controlSize","useSize","input","inputProto","HTMLInputElement","prototype","getOwnPropertyDescriptor","set","bubbles","Event","indeterminate","call","dispatchEvent","defaultCheckedRef","tabIndex","position","opacity","margin","transform","CheckboxPrimitive.Root","CheckboxPrimitive.Indicator","Check","Skeleton","ColumnSettingsDropdown","Button","visibleColumnCount","values","Boolean","totalColumnCount","handleColumnToggle","DropdownMenu","DropdownMenuTrigger","asChild","DropdownMenuContent","align","DropdownMenuLabel","RotateCcw","DropdownMenuSeparator","group","groupIndex","React","isRequired","flatMap","g","DropdownMenuItem","statement_progress","utk_status","revised_delivery_date","unit_price","amount","purchase_progress","receipt_progress","FILTER_FIELDS","icon","Calendar","category","User","Package","CheckCircle","DATE_FIELDS","SORT_FIELDS","FilterToolbar","activeFilters","onFiltersChange","onSortChange","onSearchChange","availableEmployees","availableVendors","availableContacts","availablePaymentSchedules","showColumnSettings","isFilterOpen","setIsFilterOpen","isSortOpen","setIsSortOpen","isSearchExpanded","setIsSearchExpanded","newFilter","setNewFilter","datePickerOpen","setDatePickerOpen","monthPickerOpen","setMonthPickerOpen","tempDateRange","setTempDateRange","tempMonth","setTempMonth","tempMonthRange","setTempMonthRange","tempSort","setTempSort","searchValue","setSearchValue","searchInputRef","useRef","handleRemoveFilter","filterId","f","renderValueInput","fieldConfig","Input","placeholder","padding","fontSize","fontWeight","filteredOptions","option","Popover","PopoverTrigger","Search","PopoverContent","autoFocus","Select","onValueChange","SelectTrigger","SelectValue","SelectContent","SelectItem","scheduleOptions","start","end","to","format","CalendarComponent","mode","selected","onSelect","range","numberOfMonths","initialFocus","rangeValue","startYear","endYear","year","month","currentYear","getFullYear","newDate","getMonth","_","monthDate","isSelected","isDisabled","Sliders","df","X","defaultCondition","now","scrollbarWidth","scrollbarColor","WebkitScrollbarWidth","push","fields","isDateFilter","requiresDateField","finalCondition","ArrowUpDown","MANAGER_ROLES","filterByEmployeeVisibility","PurchaseItemsModal","lazy","NAV_TABS","PurchaseListMain","showEmailButton","navigate","useNavigate","location","useLocation","selectedPurchase","setSelectedPurchase","setActiveFilters","setSortConfig","setSearchTerm","setAvailableEmployees","setAvailableVendors","setAvailableContacts","setAvailablePaymentSchedules","currentUserName","refreshTrigger","setRefreshTrigger","loadPurchases","updatePurchaseOptimistic","updater","updatePurchaseInMemory","isAdmin","setActiveTab","selectedEmployee","setSelectedEmployee","roleCase","getRoleCase","computeDefaultEmployee","tabKey","defaultEmployee","URLSearchParams","search","get","isCacheValid","loadAllPurchaseData","checkAndRefreshCache","employees","employeeNames","Set","vendors","vendorNames","contacts","contactNames","schedules","scheduleNames","s","loadFilterOptions","payment_completed_at","received_at","created_at","statement_received_date","filterValue","filterField","fieldDate","endOfMonth","filterYear","filterMonth","parseInt","fieldStr","filterStr","tabFilteredPurchases","dateStart","sixtyDaysAgo","setDate","getDate","filteredTabCounts","filterOptions","monthlyFilterSummary","monthFilters","monthlyTotals","totalSum","currentDate","monthStr","toString","padStart","monthData","monthTotal","itemSum","count","setMonth","months","grandTotal","handleReceiptComplete","currentTime","requestResult","itemsResult","Promise","all","delivery_status","markPurchaseAsReceived","handlePaymentComplete","markPurchaseAsPaymentCompleted","modalPurchaseData","marginTop","marginBottom","Plus","Card","CardHeader","CardTitle","m","CardContent","Suspense","fallback","onUpdate"],"ignoreList":[0,1,2,3,4,5,13,16],"sources":["../../node_modules/lucide-react/dist/esm/icons/building.js","../../node_modules/lucide-react/dist/esm/icons/dollar-sign.js","../../node_modules/lucide-react/dist/esm/icons/eye-off.js","../../node_modules/lucide-react/dist/esm/icons/info.js","../../node_modules/lucide-react/dist/esm/icons/settings.js","../../node_modules/lucide-react/dist/esm/icons/sliders-vertical.js","../../src/config/constants.ts","../../src/utils/purchaseFilters.ts","../../src/hooks/usePurchaseMemory.ts","../../src/components/purchase/MobilePurchaseCard.tsx","../../src/utils/exceljs/generatePurchaseOrderExcel.ts","../../src/constants/columnSettings.ts","../../src/hooks/useColumnSettings.ts","../../node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","../../src/components/ui/alert-dialog.tsx","../../src/components/purchase/FastPurchaseTable.tsx","../../node_modules/@radix-ui/react-checkbox/dist/index.mjs","../../src/components/ui/checkbox.tsx","../../src/components/ui/skeleton.tsx","../../src/components/purchase/ColumnSettingsDropdown.tsx","../../src/components/purchase/FilterToolbar.tsx","../../src/utils/roleHelper.ts","../../src/components/purchase/PurchaseListMain.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.541.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 10h.01\", key: \"1nrarc\" }],\n  [\"path\", { d: \"M12 14h.01\", key: \"1etili\" }],\n  [\"path\", { d: \"M12 6h.01\", key: \"1vi96p\" }],\n  [\"path\", { d: \"M16 10h.01\", key: \"1m94wz\" }],\n  [\"path\", { d: \"M16 14h.01\", key: \"1gbofw\" }],\n  [\"path\", { d: \"M16 6h.01\", key: \"1x0f13\" }],\n  [\"path\", { d: \"M8 10h.01\", key: \"19clt8\" }],\n  [\"path\", { d: \"M8 14h.01\", key: \"6423bh\" }],\n  [\"path\", { d: \"M8 6h.01\", key: \"1dz90k\" }],\n  [\"path\", { d: \"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3\", key: \"cabbwy\" }],\n  [\"rect\", { x: \"4\", y: \"2\", width: \"16\", height: \"20\", rx: \"2\", key: \"1uxh74\" }]\n];\nconst Building = createLucideIcon(\"building\", __iconNode);\n\nexport { __iconNode, Building as default };\n//# sourceMappingURL=building.js.map\n","/**\n * @license lucide-react v0.541.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"2\", y2: \"22\", key: \"7eqyqh\" }],\n  [\"path\", { d: \"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6\", key: \"1b0p4s\" }]\n];\nconst DollarSign = createLucideIcon(\"dollar-sign\", __iconNode);\n\nexport { __iconNode, DollarSign as default };\n//# sourceMappingURL=dollar-sign.js.map\n","/**\n * @license lucide-react v0.541.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49\",\n      key: \"ct8e1f\"\n    }\n  ],\n  [\"path\", { d: \"M14.084 14.158a3 3 0 0 1-4.242-4.242\", key: \"151rxh\" }],\n  [\n    \"path\",\n    {\n      d: \"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143\",\n      key: \"13bj9a\"\n    }\n  ],\n  [\"path\", { d: \"m2 2 20 20\", key: \"1ooewy\" }]\n];\nconst EyeOff = createLucideIcon(\"eye-off\", __iconNode);\n\nexport { __iconNode, EyeOff as default };\n//# sourceMappingURL=eye-off.js.map\n","/**\n * @license lucide-react v0.541.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 16v-4\", key: \"1dtifu\" }],\n  [\"path\", { d: \"M12 8h.01\", key: \"e9boi3\" }]\n];\nconst Info = createLucideIcon(\"info\", __iconNode);\n\nexport { __iconNode, Info as default };\n//# sourceMappingURL=info.js.map\n","/**\n * @license lucide-react v0.541.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915\",\n      key: \"1i5ecw\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n];\nconst Settings = createLucideIcon(\"settings\", __iconNode);\n\nexport { __iconNode, Settings as default };\n//# sourceMappingURL=settings.js.map\n","/**\n * @license lucide-react v0.541.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"line\", { x1: \"4\", x2: \"4\", y1: \"21\", y2: \"14\", key: \"1p332r\" }],\n  [\"line\", { x1: \"4\", x2: \"4\", y1: \"10\", y2: \"3\", key: \"gb41h5\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"21\", y2: \"12\", key: \"hf2csr\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"3\", key: \"1kfi7u\" }],\n  [\"line\", { x1: \"20\", x2: \"20\", y1: \"21\", y2: \"16\", key: \"1lhrwl\" }],\n  [\"line\", { x1: \"20\", x2: \"20\", y1: \"12\", y2: \"3\", key: \"16vvfq\" }],\n  [\"line\", { x1: \"2\", x2: \"6\", y1: \"14\", y2: \"14\", key: \"1uebub\" }],\n  [\"line\", { x1: \"10\", x2: \"14\", y1: \"8\", y2: \"8\", key: \"1yglbp\" }],\n  [\"line\", { x1: \"18\", x2: \"22\", y1: \"16\", y2: \"16\", key: \"1jxqpz\" }]\n];\nconst SlidersVertical = createLucideIcon(\"sliders-vertical\", __iconNode);\n\nexport { __iconNode, SlidersVertical as default };\n//# sourceMappingURL=sliders-vertical.js.map\n","/**\n *    \n */\n\n//         \nexport const HIDDEN_EMPLOYEES = ['']\n\n//  ...\n","/**\n *     \n *     \n */\n\nimport type { Purchase, Employee } from '@/types/purchase'\nimport { HIDDEN_EMPLOYEES } from '@/config/constants'\nimport { logger } from '@/lib/logger'\n\n//   \nexport type TabType = 'pending' | 'purchase' | 'receipt' | 'done'\n\n/**\n *  \n */\nexport const filterByTab = (\n  purchases: Purchase[],\n  tab: TabType,\n  currentUser: Employee | null\n): Purchase[] => {\n  if (!purchases || !currentUser) return []\n  \n  const userRoles = Array.isArray(currentUser.purchase_role) \n    ? currentUser.purchase_role.map((r: string) => r.trim())\n    : typeof currentUser.purchase_role === 'string' \n    ? currentUser.purchase_role.split(',').map((r: string) => r.trim())\n    : []\n  \n  switch (tab) {\n    case 'pending': {\n      //   :  \n      return purchases.filter(purchase => {\n        //  :   approved \n        if (purchase.middle_manager_status === 'approved' && \n            purchase.final_manager_status === 'approved') {\n          return false //     \n        }\n        \n        //   \n        if (purchase.middle_manager_status === 'rejected' || \n            purchase.final_manager_status === 'rejected') {\n          return false\n        }\n        \n        // 1.     (  )\n        if (userRoles.includes('consumable_manager')) {\n          //     \n          if (purchase.payment_category !== ' ') {\n            return false\n          }\n        }\n        \n        if (userRoles.includes('raw_material_manager')) {\n          //    \n          if (purchase.payment_category !== '') {\n            return false\n          }\n        }\n        \n        // 2.    (app_admin ceo)\n        if (userRoles.includes('app_admin') || \n            userRoles.includes('ceo')) {\n          logger.debug(' App Admin detected! Showing all items for:', { purchase_order_number: purchase.purchase_order_number });\n          return true\n        }\n        \n        // 3. middle_manager   \n        if (userRoles.includes('middle_manager')) {\n          const isMiddlePending = ['pending', '', '', null, undefined].includes(\n            purchase.middle_manager_status as any\n          )\n          return isMiddlePending\n        }\n        \n        // 4.     \n        return purchase.requester_name === currentUser?.name\n      })\n    }\n    \n    case 'purchase': {\n      //   :   \n      return purchases.filter(purchase => {\n        const isRequest = purchase.payment_category === ' '\n        const notPaid = !purchase.is_payment_completed\n        if (!isRequest || !notPaid) return false\n\n        const isSeonJin = (purchase.progress_type || '').includes('')\n        const isIlban = (purchase.progress_type || '').includes('') || !purchase.progress_type || purchase.progress_type === ''\n        const finalApproved = purchase.final_manager_status === 'approved'\n\n        return isSeonJin || (isIlban && finalApproved)\n      })\n    }\n    \n    case 'receipt': {\n      //   :   \n      return purchases.filter(purchase => {\n        if (purchase.is_received) return false\n        const isSeonJin = (purchase.progress_type || '').includes('')\n        const finalApproved = purchase.final_manager_status === 'approved'\n        return isSeonJin || finalApproved\n      })\n    }\n    \n    case 'done':\n    default: {\n      //   :  \n      return purchases\n    }\n  }\n}\n\n/**\n *  \n */\nexport const filterByEmployee = (\n  purchases: Purchase[],\n  employeeName: string | null,\n  currentUser: Employee | null\n): Purchase[] => {\n  if (!purchases || !employeeName || employeeName === '') return purchases\n  \n  // HIDDEN_EMPLOYEES  (  )\n  const userRoles = Array.isArray(currentUser?.purchase_role) \n    ? currentUser.purchase_role.map((r: string) => r.trim())\n    : typeof currentUser?.purchase_role === 'string' \n    ? currentUser.purchase_role.split(',').map((r: string) => r.trim())\n    : []\n  const hasManagerRole = userRoles.some((role: string) => \n    ['lead_buyer', 'ceo', 'finance_team', 'raw_material_manager', 'consumable_manager'].includes(role)\n  )\n  \n  return purchases.filter(purchase => {\n    const requestorName = purchase.requester_name || ''\n    \n    // HIDDEN_EMPLOYEES \n    if (HIDDEN_EMPLOYEES.includes(requestorName) && !hasManagerRole) {\n      return false\n    }\n    \n    return requestorName === employeeName\n  })\n}\n\n/**\n *   \n */\nexport const applyAdvancedFilters = (\n  purchases: Purchase[],\n  filters: any[]\n): Purchase[] => {\n  if (!filters || filters.length === 0) return purchases\n  \n  return purchases.filter(purchase => {\n    return filters.every(filter => {\n      const { field, condition, value, dateField } = filter\n      \n      //       \n      const targetField = dateField || field\n      const fieldValue = getFieldValue(purchase, targetField)\n      \n      switch (condition) {\n        case 'contains':\n          return String(fieldValue).toLowerCase().includes(String(value).toLowerCase())\n        case 'equals':\n          //   \n          if (typeof value === 'string' && value.includes('~')) {\n            const [startDate, endDate] = value.split('~')\n            const purchaseDate = new Date(fieldValue).toISOString().split('T')[0]\n            return purchaseDate >= startDate && purchaseDate <= endDate\n          }\n          //    (YYYY-MM )\n          if (typeof value === 'string' && (value.match(/^\\d{4}-\\d{2}$/) || value.match(/^\\d{4}-\\d{2}~\\d{4}-\\d{2}$/))) {\n            if (value.includes('~')) {\n              const [startMonth, endMonth] = value.split('~')\n              const purchaseMonth = new Date(fieldValue).toISOString().slice(0, 7) // YYYY-MM \n              return purchaseMonth >= startMonth && purchaseMonth <= endMonth\n            } else {\n              const purchaseMonth = new Date(fieldValue).toISOString().slice(0, 7)\n              return purchaseMonth === value\n            }\n          }\n          return fieldValue === value\n        case 'not_equals':\n          return fieldValue !== value\n        case 'starts_with':\n          return String(fieldValue).toLowerCase().startsWith(String(value).toLowerCase())\n        case 'ends_with':\n          return String(fieldValue).toLowerCase().endsWith(String(value).toLowerCase())\n        case 'greater_than':\n          return Number(fieldValue) > Number(value)\n        case 'less_than':\n          return Number(fieldValue) < Number(value)\n        case 'after':\n          return new Date(fieldValue) > new Date(value)\n        case 'before':\n          return new Date(fieldValue) < new Date(value)\n        case 'is_empty':\n          return !fieldValue || fieldValue === '' || fieldValue === null\n        case 'is_not_empty':\n          return fieldValue && fieldValue !== '' && fieldValue !== null\n        case 'between': {\n          const [min, max] = value.split(',').map(Number)\n          const numValue = Number(fieldValue)\n          return numValue >= min && numValue <= max\n        }\n        case 'in': {\n          const values = value.split(',').map((v: string) => v.trim())\n          return values.includes(String(fieldValue))\n        }\n        default:\n          return true\n      }\n    })\n  })\n}\n\n/**\n *  \n */\nexport const filterBySearchTerm = (\n  purchases: Purchase[],\n  searchTerm: string\n): Purchase[] => {\n  if (!searchTerm || searchTerm.trim() === '') return purchases\n  \n  const term = searchTerm.toLowerCase().trim()\n  \n  return purchases.filter(purchase => {\n    //   \n    const searchableFields = [\n      purchase.purchase_order_number,\n      purchase.requester_name,\n      purchase.purchase_order_number,\n      purchase.vendor_name,\n      // purchase_request_items    \n      ...(purchase.purchase_request_items || []).map((item: any) => [\n        item.item_name,\n        item.item_detail,\n        item.manufacturer,\n        item.model,\n        item.spec\n      ]).flat()\n    ]\n    \n    //    true\n    return searchableFields.some(field => \n      field && String(field).toLowerCase().includes(term)\n    )\n  })\n}\n\n/**\n *   \n */\nexport const filterByDateRange = (\n  purchases: Purchase[],\n  startDate?: string,\n  endDate?: string\n): Purchase[] => {\n  if (!startDate && !endDate) return purchases\n  \n  return purchases.filter(purchase => {\n    const requestDate = new Date(purchase.request_date)\n    \n    if (startDate && requestDate < new Date(startDate)) return false\n    if (endDate && requestDate > new Date(endDate)) return false\n    \n    return true\n  })\n}\n\n/**\n *  \n */\nexport const sortPurchases = (\n  purchases: Purchase[],\n  sortConfig?: { key: string; direction: 'asc' | 'desc' }\n): Purchase[] => {\n  if (!sortConfig) return purchases\n  \n  return [...purchases].sort((a, b) => {\n    const aValue = getFieldValue(a, sortConfig.key)\n    const bValue = getFieldValue(b, sortConfig.key)\n    \n    if (aValue === null || aValue === undefined) return 1\n    if (bValue === null || bValue === undefined) return -1\n    \n    let comparison = 0\n    if (aValue > bValue) comparison = 1\n    if (aValue < bValue) comparison = -1\n    \n    return sortConfig.direction === 'desc' ? -comparison : comparison\n  })\n}\n\n/**\n *    \n */\nconst getFieldValue = (purchase: Purchase, field: string): any => {\n  // boolean     (   )\n  if (field === 'is_payment_completed') {\n    const value = purchase.is_payment_completed\n    return value === true ? '' : ''\n  }\n  if (field === 'is_received') {\n    // purchase_requests.is_received  (  X)\n    const value = purchase.is_received\n    return value === true ? '' : ''\n  }\n  if (field === 'is_statement_received') {\n    const value = purchase.is_statement_received\n    return value === true ? '' : ''\n  }\n  if (field === 'is_utk_checked') {\n    const value = purchase.is_utk_checked\n    return value === true ? '' : ''\n  }\n  \n  //    (: items.0.item_name)\n  const keys = field.split('.')\n  let value: any = purchase\n  \n  for (const key of keys) {\n    if (value === null || value === undefined) return null\n    value = value[key]\n  }\n  \n  return value\n}\n\n/**\n *   \n */\nexport const calculateTabCounts = (\n  allPurchases: Purchase[],\n  currentUser: Employee | null\n): Record<TabType, number> => {\n  return {\n    pending: filterByTab(allPurchases, 'pending', currentUser).length,\n    purchase: filterByTab(allPurchases, 'purchase', currentUser).length,\n    receipt: filterByTab(allPurchases, 'receipt', currentUser).length,\n    done: allPurchases.length\n  }\n}\n\n/**\n *   \n */\nexport interface FilterOptions {\n  tab?: TabType\n  employeeName?: string | null\n  searchTerm?: string\n  advancedFilters?: any[]\n  startDate?: string\n  endDate?: string\n  sortConfig?: { key: string; direction: 'asc' | 'desc' }\n}\n\nexport const applyAllFilters = (\n  purchases: Purchase[],\n  options: FilterOptions,\n  currentUser: Employee | null\n): Purchase[] => {\n  let filtered = purchases\n  \n  // 1.  \n  if (options.tab) {\n    filtered = filterByTab(filtered, options.tab, currentUser)\n  }\n  \n  // 2.  \n  if (options.employeeName) {\n    filtered = filterByEmployee(filtered, options.employeeName, currentUser)\n  }\n  \n  // 3.  \n  if (options.searchTerm) {\n    filtered = filterBySearchTerm(filtered, options.searchTerm)\n  }\n  \n  // 4.  \n  if (options.advancedFilters) {\n    filtered = applyAdvancedFilters(filtered, options.advancedFilters)\n  }\n  \n  // 5.   \n  if (options.startDate || options.endDate) {\n    filtered = filterByDateRange(filtered, options.startDate, options.endDate)\n  }\n  \n  // 6. \n  if (options.sortConfig) {\n    filtered = sortPurchases(filtered, options.sortConfig)\n  }\n  \n  return filtered\n}\n","/**\n *     Hook\n *     \n */\n\nimport { useState, useEffect, useMemo, useCallback } from 'react'\nimport { purchaseMemoryCache } from '@/stores/purchaseMemoryStore'\nimport { applyAllFilters, calculateTabCounts, type FilterOptions, type TabType } from '@/utils/purchaseFilters'\nimport type { Purchase } from '@/types/purchase'\n\nexport function usePurchaseMemory() {\n  //  \n  const [purchases, setPurchases] = useState<Purchase[]>([])\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  \n  //   \n  const currentUser = purchaseMemoryCache.currentUser\n  \n  //   \n  useEffect(() => {\n    let lastArrayRef = purchaseMemoryCache.allPurchases\n    let lastFetchTime = purchaseMemoryCache.lastFetch\n    \n    //    \n    const checkCache = () => {\n      //    lastFetch  \n      const arrayChanged = purchaseMemoryCache.allPurchases !== lastArrayRef\n      const fetchTimeChanged = purchaseMemoryCache.lastFetch !== lastFetchTime\n      \n      if (arrayChanged || fetchTimeChanged) {\n        console.log(' [usePurchaseMemory]   ', {\n          arrayChanged,\n          fetchTimeChanged,\n          currentLastFetch: purchaseMemoryCache.lastFetch,\n          prevLastFetch: lastFetchTime,\n          purchasesCount: purchaseMemoryCache.allPurchases?.length || 0\n        })\n        \n        if (purchaseMemoryCache.allPurchases) {\n          setPurchases([...purchaseMemoryCache.allPurchases]) //     \n          setLoading(false)\n          lastArrayRef = purchaseMemoryCache.allPurchases\n          lastFetchTime = purchaseMemoryCache.lastFetch\n          \n          console.log(' [usePurchaseMemory] purchases   ', {\n            newPurchasesCount: purchaseMemoryCache.allPurchases.length\n          })\n        } else {\n          setLoading(purchaseMemoryCache.isLoading)\n        }\n        setError(purchaseMemoryCache.error)\n      }\n    }\n    \n    //  \n    checkCache()\n    \n    //     (    10ms )\n    //      ,    \n    const interval = setInterval(checkCache, 10)\n    \n    return () => clearInterval(interval)\n  }, [])\n  \n  //    \n  const getFilteredPurchases = useCallback((options: FilterOptions): Purchase[] => {\n    if (!purchaseMemoryCache.allPurchases) return []\n    \n    return applyAllFilters(\n      purchaseMemoryCache.allPurchases,\n      options,\n      currentUser\n    )\n  }, [currentUser])\n  \n  //    - purchases    \n  const tabCounts = useMemo(() => {\n    if (!purchases || purchases.length === 0) {\n      return {\n        pending: 0,\n        purchase: 0,\n        receipt: 0,\n        done: 0\n      }\n    }\n    \n    return calculateTabCounts(purchases, currentUser)\n  }, [purchases, currentUser])\n  \n  //  \n  const stats = useMemo(() => {\n    return {\n      total: purchases.length,\n      loaded: purchaseMemoryCache.stats?.loadedCount || 0,\n      memoryUsage: purchaseMemoryCache.stats?.memoryUsage || 0,\n      lastFetch: purchaseMemoryCache.lastFetch\n    }\n  }, [purchases])\n  \n  return {\n    // \n    allPurchases: purchases,\n    getFilteredPurchases,\n    \n    // \n    loading,\n    error,\n    \n    //  & \n    tabCounts,\n    stats,\n    \n    //  \n    currentUser\n  }\n}\n\n/**\n *   Hook\n */\nexport function usePurchaseTab(tab: TabType) {\n  const { getFilteredPurchases, loading, error, currentUser } = usePurchaseMemory()\n  const [filteredData, setFilteredData] = useState<Purchase[]>([])\n  \n  useEffect(() => {\n    //   \n    const data = getFilteredPurchases({ tab })\n    setFilteredData(data)\n  }, [tab, getFilteredPurchases])\n  \n  return {\n    purchases: filteredData,\n    loading,\n    error,\n    currentUser\n  }\n}\n","import { memo } from 'react'\nimport { Eye } from 'lucide-react'\nimport { Purchase } from '@/types/purchase'\nimport { formatDateShort } from '@/utils/helpers'\n\ninterface MobilePurchaseCardProps {\n  purchase: Purchase\n  onClick: (purchase: Purchase) => void\n}\n\n// formatDateShort utils/helpers.ts import\n\nconst getReceiptProgress = (purchase: Purchase) => {\n  if (!purchase.purchase_request_items || purchase.purchase_request_items.length === 0) return { received: 0, total: 0, percentage: 0 }\n  \n  const total = purchase.purchase_request_items.length\n  const received = purchase.purchase_request_items.filter((item: any) => \n    item.actual_received_date !== null && item.actual_received_date !== undefined\n  ).length\n  const percentage = total > 0 ? Math.round((received / total) * 100) : 0\n  \n  return { received, total, percentage }\n}\n\nconst StatusBadge = memo(({ purchase }: { purchase: Purchase }) => {\n  const status = purchase.is_received \n    ? 'completed'\n    : (purchase.middle_manager_status === 'approved' && purchase.final_manager_status === 'approved')\n    ? 'inProgress'\n    : (purchase.middle_manager_status === 'rejected' || purchase.final_manager_status === 'rejected')\n    ? 'rejected'\n    : 'pending'\n  \n  const config = {\n    completed: { text: '', className: 'badge-success' },\n    inProgress: { text: '', className: 'badge-primary' },\n    rejected: { text: '', className: 'badge-danger' },\n    pending: { text: '', className: 'badge-warning' }\n  }\n  \n  const { text, className } = config[status]\n  return <span className={`badge-stats ${className}`}>{text}</span>\n})\n\nStatusBadge.displayName = 'StatusBadge'\n\nconst MobilePurchaseCard = memo(({ purchase, onClick }: MobilePurchaseCardProps) => {\n  const receiptProgress = getReceiptProgress(purchase)\n  const isAdvance = purchase.progress_type === '' || purchase.progress_type?.includes('')\n  \n  return (\n    <div \n      className={`bg-white rounded-lg border p-4 space-y-3 cursor-pointer transition-all hover:shadow-md ${isAdvance ? 'border-red-400 bg-red-50 hover:bg-red-100' : 'hover:bg-gray-50'}`}\n      onClick={() => onClick(purchase)}\n    >\n      {/*  */}\n      <div className=\"flex items-start justify-between\">\n        <div>\n          <div className=\"flex items-center gap-2\">\n            {isAdvance ? (\n              <span className=\"badge-stats bg-red-500 text-white\">\n                \n              </span>\n            ) : (\n              <span className=\"badge-stats bg-gray-500 text-white\">\n                \n              </span>\n            )}\n            <span className=\"card-title text-gray-900\">\n              {purchase.purchase_order_number || '-'}\n            </span>\n          </div>\n          <div className=\"badge-text text-gray-500 mt-1\">\n            {formatDateShort(purchase.request_date)} \n          </div>\n        </div>\n        <StatusBadge purchase={purchase} />\n      </div>\n\n      {/*   */}\n      <div className=\"space-y-2\">\n        <div className=\"flex items-center justify-between card-subtitle\">\n          <span className=\"text-gray-600\"></span>\n          <span className=\"card-title\">{purchase.requester_name}</span>\n        </div>\n        <div className=\"flex items-center justify-between card-subtitle\">\n          <span className=\"text-gray-600\"></span>\n          <span className=\"card-title\">{purchase.vendor_name}</span>\n        </div>\n        {purchase.project_vendor && (\n          <div className=\"flex items-center justify-between card-subtitle\">\n            <span className=\"text-gray-600\">PJ</span>\n            <span className=\"card-title truncate max-w-[150px]\">{purchase.project_vendor}</span>\n          </div>\n        )}\n        {purchase.project_item && (\n          <div className=\"flex items-center justify-between card-subtitle\">\n            <span className=\"text-gray-600\">PJ ITEM</span>\n            <span className=\"card-title truncate max-w-[150px]\">{purchase.project_item}</span>\n          </div>\n        )}\n        {purchase.sales_order_number && (\n          <div className=\"flex items-center justify-between card-subtitle\">\n            <span className=\"text-gray-600\"></span>\n            <span className=\"card-title truncate max-w-[150px]\">{purchase.sales_order_number}</span>\n          </div>\n        )}\n        {purchase.item_name && (\n          <div className=\"flex items-center justify-between card-subtitle\">\n            <span className=\"text-gray-600\"></span>\n            <span className=\"card-title truncate max-w-[150px]\">{purchase.item_name}</span>\n          </div>\n        )}\n        <div className=\"flex items-center justify-between card-subtitle\">\n          <span className=\"text-gray-600\"></span>\n          <span className=\"font-semibold text-gray-900\">\n            {(purchase.amount_value || purchase.total_amount)?.toLocaleString()} {purchase.currency}\n          </span>\n        </div>\n      </div>\n\n      {/*   */}\n      <div className=\"space-y-1\">\n        <div className=\"flex items-center justify-between badge-text\">\n          <span className=\"text-gray-600\"></span>\n          <span className=\"text-gray-700\">\n            {receiptProgress.received}/{receiptProgress.total} ({receiptProgress.percentage}%)\n          </span>\n        </div>\n        <div className=\"bg-gray-200 rounded-full h-2\">\n          <div \n            className={`h-2 rounded-full transition-all ${\n              receiptProgress.percentage === 100 ? 'bg-green-500' : \n              receiptProgress.percentage > 0 ? 'bg-hansl-500' : 'bg-gray-300'\n            }`}\n            style={{ width: `${receiptProgress.percentage}%` }}\n          />\n        </div>\n      </div>\n\n      {/*   */}\n      {purchase.is_payment_completed !== undefined && (\n        <div className=\"flex items-center justify-between card-subtitle\">\n          <span className=\"text-gray-600\"></span>\n          {purchase.is_payment_completed ? (\n            <span className=\"badge-stats bg-green-500 text-white\"></span>\n          ) : (\n            <span className=\"badge-stats bg-gray-500 text-white\"></span>\n          )}\n        </div>\n      )}\n\n      {/*       */}\n      <div className=\"pt-2 border-t\">\n        <div className=\"flex items-center justify-center badge-text text-gray-500\">\n          <Eye className=\"w-3 h-3 mr-1\" />\n           \n        </div>\n      </div>\n    </div>\n  )\n})\n\nMobilePurchaseCard.displayName = 'MobilePurchaseCard'\n\nexport default MobilePurchaseCard","// hanslwebapp    Excel \nimport { formatDateISO } from '@/utils/helpers';\n\nexport interface PurchaseOrderData {\n  purchase_order_number: string;\n  request_date: string;\n  delivery_request_date: string;\n  requester_name: string;\n  vendor_name: string;\n  vendor_contact_name?: string;\n  vendor_phone?: string;\n  vendor_fax?: string;\n  project_vendor: string;\n  sales_order_number: string;\n  project_item: string;\n  items: PurchaseOrderItem[];\n  vendor_payment_schedule?: string;\n}\n\nexport interface PurchaseOrderItem {\n  line_number: number;\n  item_name: string;\n  specification: string;\n  quantity: number;\n  unit_price_value: number;\n  amount_value: number;\n  remark: string;\n  currency: string;\n}\n\nconst formatDate = formatDateISO;\n\n// Helper: currency code to symbol\nfunction getCurrencySymbol(currency: string) {\n  if (!currency) return '';\n  if (['KRW', '', ''].includes(currency)) return '';\n  if (['USD', '$', ''].includes(currency)) return '$';\n  if (['EUR', ''].includes(currency)) return '';\n  if (['JPY', '', ''].includes(currency)) return '';\n  if (['CNY', '', ''].includes(currency)) return '';\n  return currency;\n}\n\n/**\n *    (ExcelJS) - hanslwebapp  \n * @param data PurchaseOrderData\n * @returns Blob (xlsx)\n */\nexport async function generatePurchaseOrderExcelJS(data: PurchaseOrderData): Promise<Blob> {\n  // ExcelJS  import    \n  const ExcelJS = await import('exceljs');\n  const workbook = new ExcelJS.Workbook();\n  \n  const sheet = workbook.addWorksheet('', {\n    pageSetup: {\n      paperSize: 9, // A4\n      orientation: 'portrait',\n      fitToPage: true,\n      fitToWidth: 1,\n      fitToHeight: 1,\n      horizontalCentered: true,\n      verticalCentered: true,\n      margins: {\n        left: 0.3,\n        right: 0.3,\n        top: 0.5,\n        bottom: 0.5,\n        header: 0.2,\n        footer: 0.2\n      }\n    }\n  });\n\n  //   : 1 39.75px(29.8pt), 2 18px(13.5pt)\n  sheet.getRow(1).height = 29.8; // 39.75px\n  for (let r = 2; r <= 60; r++) {\n    sheet.getRow(r).height = 15.75; // 21px15.75pt\n  }\n  //  : ,  11 (2), 1 20\n  // 1\n  sheet.getRow(1).eachCell(cell => {\n    cell.font = { ...(cell.font || {}), name: ' ', size: 20 };\n  });\n\n  //      (     bold )\n  for (let r = 2; r <= 60; r++) {\n    sheet.getRow(r).eachCell(cell => {\n      cell.font = { ...(cell.font || {}), name: ' ', size: 11 };\n    });\n  }\n\n  // 1.    1:1 \n  sheet.mergeCells('A1:G1');\n  sheet.mergeCells('A2:B2'); sheet.mergeCells('C2:D2'); sheet.mergeCells('F2:G2');\n  sheet.mergeCells('A3:B3'); sheet.mergeCells('C3:D3'); sheet.mergeCells('F3:G3');\n  sheet.mergeCells('A4:B4'); sheet.mergeCells('C4:D4'); sheet.mergeCells('F4:G4');\n  sheet.mergeCells('A5:B5'); sheet.mergeCells('C5:D5'); sheet.mergeCells('F5:G5');\n  sheet.mergeCells('A6:B6'); sheet.mergeCells('C6:D6'); sheet.mergeCells('F6:G6');\n  sheet.mergeCells('A7:B7'); sheet.mergeCells('C7:D7'); sheet.mergeCells('F7:G7');\n  // 8~46(//)  \n  //        \n  // ( sumRow   )\n\n  try {\n    const response = await fetch('/logo_KOR.png');\n    const arrayBuffer = await response.arrayBuffer();\n    const imageId = workbook.addImage({\n      buffer: arrayBuffer,\n      extension: 'png',\n    });\n    // ()  0.58col, ''      \n    // D width undefined/null/0  22 \n    const dWidth = sheet.getColumn('D').width || 22;\n    const logoWidth = Math.max(1, dWidth * 7.2 * 0.58) + 4; //  4px  \n    const logoHeight = 30 + 4; //  30 4px  \n    // D1  (3.5, 0.5)  2px(0.28col),  2px(0.13row) \n    const logoCol = 3.5 - 0.50;\n    const logoRow = 0.5 - 0.20;\n    sheet.addImage(imageId, {\n      tl: { col: logoCol, row: logoRow }, // D1    2px,  2px \n      ext: { width: logoWidth, height: logoHeight },\n    });\n  } catch (_e) {\n    // Logo loading failed, continue without logo\n  }\n\n  // 2.  (B1:H1 , )\n  sheet.getCell('D1').value = '                  ';\n  sheet.getCell('D1').alignment = { horizontal: 'left', vertical: 'middle', indent: 1 };\n  sheet.getCell('D1').font = { bold: true, size: 20 };\n\n  // 3.      ( )\n  sheet.getCell('A2').value = '      ';\n  sheet.getCell('A2').font = { bold: true };\n  sheet.getCell('A3').value = '      ';\n  sheet.getCell('A3').font = { bold: true };\n  sheet.getCell('A4').value = '      ';\n  sheet.getCell('A4').font = { bold: true };\n  sheet.getCell('A5').value = 'TEL.';\n  sheet.getCell('A5').font = { bold: true };\n  sheet.getCell('A6').value = 'FAX.';\n  sheet.getCell('A6').font = { bold: true };\n  sheet.getCell('A7').value = '';\n  sheet.getCell('A7').font = { bold: true };\n\n  sheet.getCell('E2').value = '';\n  sheet.getCell('E2').font = { bold: true };\n  sheet.getCell('E3').value = '         ';\n  sheet.getCell('E3').font = { bold: true };\n  sheet.getCell('E4').value = '   ';\n  sheet.getCell('E4').font = { bold: true };\n  sheet.getCell('E5').value = 'TEL.';\n  sheet.getCell('E5').font = { bold: true };\n  sheet.getCell('E6').value = 'FAX.';\n  sheet.getCell('E6').font = { bold: true };\n  sheet.getCell('E7').value = ' ';\n  sheet.getCell('E7').font = { bold: true };\n\n  sheet.getCell('F7').value = data.vendor_payment_schedule || '';\n\n  //  ()\n  sheet.getCell('C2').value = data.vendor_name;\n  sheet.getCell('C3').value = data.vendor_contact_name || '';\n  sheet.getCell('C4').value = formatDate(data.request_date);\n  sheet.getCell('C5').value = data.vendor_phone || '';\n  sheet.getCell('C6').value = data.vendor_fax || '';\n  sheet.getCell('C7').value = formatDate(data.delivery_request_date);\n\n  sheet.getCell('F2').value = data.requester_name;\n  sheet.getCell('F3').value = '  305';\n  sheet.getCell('F4').value = data.purchase_order_number;\n  sheet.getCell('F5').value = '(053) 626-7805';\n  sheet.getCell('F6').value = '(053) 657-7905';\n  sheet.getCell('F5').alignment = { horizontal: 'center', vertical: 'middle' };\n  sheet.getCell('F6').alignment = { horizontal: 'center', vertical: 'middle' };\n\n  // 8:  \n  const tableHeaders = ['No', '', '', '', '', '', ''];\n  for (let i = 0; i < tableHeaders.length; i++) {\n    sheet.getCell(String.fromCharCode(65 + i) + '8').value = tableHeaders[i];\n    sheet.getCell(String.fromCharCode(65 + i) + '8').font = { bold: true };\n    if(i===6){\n       sheet.getCell('G8').alignment = { horizontal:'center', vertical:'middle' };\n    }\n  }\n\n  //  45    /  \n  const baseRow = 9;\n  const minRows = 45;\n  // ---   line_number   ---\n  const sortedItems = [...data.items].sort((a, b) => a.line_number - b.line_number);\n  const itemRows = sortedItems.length;\n  const sumRow = baseRow + Math.max(itemRows, minRows); //  \n\n  //  \n  for (let i = 0; i < sortedItems.length; i++) {\n    const item = sortedItems[i];\n    const rowIdx = baseRow + i;\n    sheet.getCell('A' + rowIdx).value = item.line_number;\n    const bCell = sheet.getCell('B' + rowIdx);\n    bCell.value = item.item_name;\n    bCell.alignment = { horizontal: 'left', vertical: 'middle' };\n    sheet.getCell('C' + rowIdx).value = item.specification;\n    sheet.getCell('C' + rowIdx).alignment = { horizontal: 'left', vertical: 'middle' };\n    sheet.getCell('D' + rowIdx).value = item.quantity;\n    // (E) -   \n    const unitSymbol = getCurrencySymbol(item.currency);\n    const unitWithCurrency = (item.unit_price_value !== undefined && item.unit_price_value !== null)\n      ? `${item.unit_price_value.toLocaleString()} ${unitSymbol}`.trim()\n      : '';\n    sheet.getCell('E' + rowIdx).value = unitWithCurrency;\n    sheet.getCell('E' + rowIdx).alignment = { horizontal: 'right', vertical: 'middle' };\n\n    // (F) -   \n    const amountSymbol = getCurrencySymbol(item.currency);\n    const amountWithCurrency = (item.amount_value !== undefined && item.amount_value !== null)\n      ? `${item.amount_value.toLocaleString()} ${amountSymbol}`.trim()\n      : '';\n    sheet.getCell('F' + rowIdx).value = amountWithCurrency;\n    sheet.getCell('F' + rowIdx).alignment = { horizontal: 'right', vertical: 'middle' };\n    // G \n    const gCell = sheet.getCell('G' + rowIdx);\n    gCell.value = (item.remark !== undefined && item.remark !== null) ? String(item.remark) : '';\n    gCell.alignment = { horizontal: 'left', vertical: 'middle', wrapText: false, shrinkToFit: true };\n  }\n\n  //  45    \n  for (let i = itemRows; i < minRows; i++) {\n    const rowIdx = baseRow + i;\n    for (let c = 0; c < 7; c++) {\n      sheet.getCell(String.fromCharCode(65 + c) + rowIdx).value = '';\n    }\n  }\n\n  // \n  sheet.mergeCells(`A${sumRow}:E${sumRow}`);\n  sheet.getCell('A' + sumRow).value = '';\n  sheet.getCell('A' + sumRow).font = { bold: true };\n  const totalSymbol = getCurrencySymbol(data.items[0]?.currency);\n  const totalAmount = data.items.reduce((sum, item) => sum + (item.amount_value || 0), 0);\n  sheet.getCell('F' + sumRow).value = `${totalAmount.toLocaleString()} ${totalSymbol}`.trim();\n  sheet.getCell('F' + sumRow).alignment = { horizontal: 'right', vertical: 'middle' };\n\n  //         ()\n  const lastRow = sumRow;\n  for (let r = 1; r <= lastRow; r++) {\n    for (let c = 1; c <= 7; c++) {\n      const col = String.fromCharCode(64 + c); // A~G\n      const cellAddr = col + r;\n      const cell = sheet.getCell(cellAddr);\n      // E(5), F(6)   (/) , C(3)   () alignment  \n      const isPriceCol = (c === 5 || c === 6);\n      const isSpecCol = (c === 3);\n      const isItemRow = (r >= baseRow && r < sumRow);\n      const isSumRow = (r === sumRow);\n      if (!((isPriceCol && (isItemRow || isSumRow)) || (isSpecCol && isItemRow))) {\n        //    \n        cell.alignment = { horizontal: 'center', vertical: 'middle' };\n      }\n      //  : 2/8/(sumRow) , 8 ,  \n      cell.border = {\n        top:    { style: (r === 1) ? 'medium' : (r === 2 || r === 8 || r === sumRow) ? 'medium' : 'thin' },\n        left:   { style: c === 1 ? 'medium' : 'thin' },\n        right:  { style: c === 7 ? 'medium' : 'thin' },\n        bottom: { style: (r === 8 || r === sumRow || r === lastRow) ? 'medium' : 'thin' }\n      };\n    }\n  }\n  // (C) (  )    \n  for (let i = 0; i < itemRows; i++) {\n    const rowIdx = baseRow + i;\n    sheet.getCell('C' + rowIdx).alignment = { horizontal: 'left', vertical: 'middle' };\n  }\n\n  // B2:B7, D2:D7, E2:E6   \n  for (let r = 2; r <= 7; r++) {\n    sheet.getCell('B' + r).border = {\n      ...sheet.getCell('B' + r).border,\n      right: { style: 'medium' }\n    };\n    sheet.getCell('D' + r).border = {\n      ...sheet.getCell('D' + r).border,\n      right: { style: 'medium' }\n    };\n    if (r <= 6) {\n      sheet.getCell('E' + r).border = {\n        ...sheet.getCell('E' + r).border,\n        right: { style: 'medium' }\n      };\n    }\n  }\n  // E7, G7   ()\n  sheet.getCell('E7').border = {\n    ...sheet.getCell('E7').border,\n    top: { style: 'thin' },\n    right: { style: 'medium' }\n  };\n  sheet.getCell('G7').border = {\n    ...sheet.getCell('G7').border,\n    top: { style: 'thin' }\n  };\n\n  // A1~A7      ( )\n  for (let r = 1; r <= 7; r++) {\n    const currentBorder = sheet.getCell('A' + r).border || {};\n    sheet.getCell('A' + r).border = {\n      ...currentBorder,\n      left: { style: 'medium' }\n    };\n  }\n\n  //  (A)     \n  const sumCellBorder = sheet.getCell('A' + sumRow).border || {};\n  sheet.getCell('A' + sumRow).border = {\n    ...sumCellBorder,\n    left: { style: 'medium' }\n  };\n\n  //   ( )\n  const colWidths = { A:4.7, B:23, C:30, D:11, E:15, F:16, G:37 };\n  Object.entries(colWidths).forEach(([col, width]) => {\n    sheet.getColumn(col).width = width;\n  });\n\n  /* -----------------------------------\n        /  \n      1 : 39.75pt\n      2~lastRow : 18pt\n  ----------------------------------- */\n  sheet.getRow(1).height = 29.8; // 39.75px29.8pt\n  sheet.getRow(1).eachCell(c => { c.font = { ...(c.font || {}), name: ' ', size: 20 }; });\n\n  for (let r = 2; r <= lastRow; r++) {\n    const row = sheet.getRow(r);\n    row.height = 15.75; // 21px15.75pt\n    row.eachCell(c => {\n      c.font = { ...(c.font || {}), name: ' ', size: 11 };\n    });\n  }\n\n  // G       \n  for (let r = 9; r <= lastRow; r++) {\n    sheet.getCell('G' + r).alignment = { horizontal: 'left', vertical: 'middle', wrapText: false, shrinkToFit: true };\n    sheet.getCell('B' + r).alignment = { horizontal: 'left', vertical: 'middle' };\n  }\n\n  // 9.  \n  const buffer = await workbook.xlsx.writeBuffer();\n  return new Blob([buffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\n}","import { ColumnInfo, DoneTabColumnId, ColumnVisibility } from '@/types/columnSettings';\n\n/**\n *     \n * 22     \n */\n\n//     ( )\nexport const DONE_TAB_COLUMNS: ColumnInfo[] = [\n  {\n    id: 'statement_progress',\n    label: '',\n    description: '  ',\n    defaultVisible: true,\n  },\n  {\n    id: 'purchase_order_number',\n    label: '',\n    description: ' ',\n    defaultVisible: true,\n  },\n  {\n    id: 'payment_category',\n    label: '',\n    description: '  (, ,  )',\n    defaultVisible: true,\n  },\n  {\n    id: 'requester_name',\n    label: '',\n    description: '  ',\n    defaultVisible: true,\n  },\n  {\n    id: 'request_date',\n    label: '',\n    description: '  ',\n    defaultVisible: true,\n  },\n  {\n    id: 'utk_status',\n    label: 'UTK',\n    description: 'UTK  ',\n    defaultVisible: true,\n  },\n  {\n    id: 'vendor_name',\n    label: '',\n    description: '',\n    defaultVisible: true,\n  },\n  {\n    id: 'contact_name',\n    label: '',\n    description: ' ',\n    defaultVisible: true,\n  },\n  {\n    id: 'delivery_request_date',\n    label: '',\n    description: '  ',\n    defaultVisible: true,\n  },\n  {\n    id: 'revised_delivery_date',\n    label: '',\n    description: '  ',\n    defaultVisible: true,\n  },\n  {\n    id: 'item_name',\n    label: '',\n    description: ' ',\n    defaultVisible: true,\n  },\n  {\n    id: 'specification',\n    label: '',\n    description: '  ',\n    defaultVisible: true,\n  },\n  {\n    id: 'quantity',\n    label: '',\n    description: ' ',\n    defaultVisible: true,\n  },\n  {\n    id: 'unit_price',\n    label: '',\n    description: ' ',\n    defaultVisible: true,\n  },\n  {\n    id: 'amount',\n    label: '',\n    description: ' ',\n    defaultVisible: true,\n  },\n  {\n    id: 'remark',\n    label: '',\n    description: '  ',\n    defaultVisible: true,\n  },\n  {\n    id: 'link',\n    label: '',\n    description: ' ',\n    defaultVisible: true,\n  },\n  {\n    id: 'project_vendor',\n    label: 'PJ',\n    description: ' ',\n    defaultVisible: true,\n  },\n  {\n    id: 'project_item',\n    label: 'PJ ITEM',\n    description: ' ',\n    defaultVisible: true,\n  },\n  {\n    id: 'sales_order_number',\n    label: '',\n    description: ' ',\n    defaultVisible: true,\n  },\n  {\n    id: 'purchase_progress',\n    label: '',\n    description: ' ',\n    defaultVisible: true,\n  },\n  {\n    id: 'receipt_progress',\n    label: '',\n    description: ' ',\n    defaultVisible: true,\n  },\n];\n\n//     (  )\nexport const DEFAULT_COLUMN_VISIBILITY: ColumnVisibility = DONE_TAB_COLUMNS.reduce(\n  (acc, column) => {\n    acc[column.id] = column.defaultVisible;\n    return acc;\n  },\n  {} as ColumnVisibility\n);\n\n//  ID    \nexport const COLUMN_INFO_MAP: Record<DoneTabColumnId, ColumnInfo> = DONE_TAB_COLUMNS.reduce(\n  (acc, column) => {\n    acc[column.id] = column;\n    return acc;\n  },\n  {} as Record<DoneTabColumnId, ColumnInfo>\n);\n\n//   (   )\nexport const REQUIRED_COLUMNS: DoneTabColumnId[] = [\n  'purchase_order_number',\n  'vendor_name',\n  'item_name',\n  'amount',\n];\n\n//   ( UI )\nexport const COLUMN_GROUPS = [\n  {\n    title: ' ',\n    columns: [\n      'statement_progress',\n      'purchase_order_number',\n      'payment_category',\n      'requester_name',\n      'request_date',\n      'utk_status',\n    ] as DoneTabColumnId[],\n  },\n  {\n    title: ' ',\n    columns: [\n      'vendor_name',\n      'contact_name',\n      'delivery_request_date',\n      'revised_delivery_date',\n    ] as DoneTabColumnId[],\n  },\n  {\n    title: ' ',\n    columns: [\n      'item_name',\n      'specification',\n      'quantity',\n      'unit_price',\n      'amount',\n      'remark',\n      'link',\n    ] as DoneTabColumnId[],\n  },\n  {\n    title: ' ',\n    columns: [\n      'project_vendor',\n      'project_item',\n      'sales_order_number',\n    ] as DoneTabColumnId[],\n  },\n  {\n    title: ' ',\n    columns: [\n      'purchase_progress',\n      'receipt_progress',\n    ] as DoneTabColumnId[],\n  },\n] as const;","import { useState, useEffect, useCallback } from 'react';\nimport { createClient } from '@/lib/supabase/client';\nimport { toast } from 'sonner';\nimport { logger } from '@/lib/logger';\nimport {\n  ColumnVisibility,\n  DoneTabColumnId,\n  UseColumnSettingsReturn,\n} from '@/types/columnSettings';\nimport { DEFAULT_COLUMN_VISIBILITY } from '@/constants/columnSettings';\n\n/**\n *      \n * -     DB /\n * -      \n */\nexport const useColumnSettings = (): UseColumnSettingsReturn => {\n  const [columnVisibility, setColumnVisibility] = useState<ColumnVisibility>(DEFAULT_COLUMN_VISIBILITY);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const supabase = createClient();\n\n  //   \n  const loadUserSettings = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n\n      //    \n      const { data: { user }, error: authError } = await supabase.auth.getUser();\n      \n      if (authError || !user?.email) {\n        logger.warn('[useColumnSettings]    ', { authError });\n        setColumnVisibility(DEFAULT_COLUMN_VISIBILITY);\n        return;\n      }\n\n      //   \n      const { data: settings, error: settingsError } = await supabase\n        .from('user_ui_settings')\n        .select('setting_value')\n        .eq('user_email', user.email)\n        .eq('setting_type', 'column_visibility')\n        .eq('setting_key', 'purchase_list_done')\n        .maybeSingle();\n\n      if (settingsError) {\n        logger.error('[useColumnSettings]   ', settingsError, {\n          userEmail: user.email\n        });\n        setError('    .');\n        setColumnVisibility(DEFAULT_COLUMN_VISIBILITY);\n        return;\n      }\n\n      if (settings?.setting_value) {\n        // DB   \n        const savedSettings = settings.setting_value as ColumnVisibility;\n        \n        //   (    )\n        const mergedSettings = { ...DEFAULT_COLUMN_VISIBILITY, ...savedSettings };\n        \n        setColumnVisibility(mergedSettings);\n        logger.debug('[useColumnSettings]    ', {\n          userEmail: user.email,\n          settingsCount: Object.keys(mergedSettings).length\n        });\n      } else {\n        // DB     \n        setColumnVisibility(DEFAULT_COLUMN_VISIBILITY);\n        logger.debug('[useColumnSettings]   ', {\n          userEmail: user.email\n        });\n      }\n    } catch (error) {\n      logger.error('[useColumnSettings]     ', error);\n      setError('    .');\n      setColumnVisibility(DEFAULT_COLUMN_VISIBILITY);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [supabase]);\n\n  //  \n  const saveUserSettings = useCallback(async (newSettings: ColumnVisibility) => {\n    try {\n      const { data: { user }, error: authError } = await supabase.auth.getUser();\n      \n      if (authError || !user?.email) {\n        logger.warn('[useColumnSettings]     -  ', { authError });\n        return;\n      }\n\n      const { error: upsertError } = await supabase\n        .from('user_ui_settings')\n        .upsert({\n          user_email: user.email,\n          setting_type: 'column_visibility',\n          setting_key: 'purchase_list_done',\n          setting_value: newSettings,\n        }, {\n          onConflict: 'user_email,setting_type,setting_key'\n        });\n\n      if (upsertError) {\n        logger.error('[useColumnSettings]   ', upsertError, {\n          userEmail: user.email,\n          settings: newSettings\n        });\n        throw upsertError;\n      }\n\n      logger.info('[useColumnSettings]   ', {\n        userEmail: user.email,\n        settingsCount: Object.keys(newSettings).length,\n        visibleColumns: Object.entries(newSettings).filter(([, visible]) => visible).length\n      });\n    } catch (error) {\n      logger.error('[useColumnSettings]     ', error);\n      throw error;\n    }\n  }, [supabase]);\n\n  //  \n  const toggleColumn = useCallback((columnId: DoneTabColumnId) => {\n    setColumnVisibility(prev => {\n      const newSettings = {\n        ...prev,\n        [columnId]: !prev[columnId]\n      };\n\n      //    DB \n      saveUserSettings(newSettings).catch(error => {\n        //    \n        setColumnVisibility(prev);\n        toast.error('  .');\n        logger.error('[useColumnSettings]   ,  ', error);\n      });\n\n      return newSettings;\n    });\n  }, [saveUserSettings]);\n\n  //  \n  const resetToDefault = useCallback(() => {\n    setColumnVisibility(DEFAULT_COLUMN_VISIBILITY);\n\n    // DB  \n    saveUserSettings(DEFAULT_COLUMN_VISIBILITY).catch(error => {\n      toast.error('   .');\n      logger.error('[useColumnSettings]   ', error);\n    });\n\n    toast.success('   .');\n  }, [saveUserSettings]);\n\n  //     \n  useEffect(() => {\n    loadUserSettings();\n  }, [loadUserSettings]);\n\n  return {\n    columnVisibility,\n    toggleColumn,\n    resetToDefault,\n    isLoading,\n    error,\n  };\n};","\"use client\";\n\n// src/alert-dialog.tsx\nimport * as React from \"react\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\";\nimport { createDialogScope } from \"@radix-ui/react-dialog\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { createSlottable } from \"@radix-ui/react-slot\";\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nvar ROOT_NAME = \"AlertDialog\";\nvar [createAlertDialogContext, createAlertDialogScope] = createContextScope(ROOT_NAME, [\n  createDialogScope\n]);\nvar useDialogScope = createDialogScope();\nvar AlertDialog = (props) => {\n  const { __scopeAlertDialog, ...alertDialogProps } = props;\n  const dialogScope = useDialogScope(__scopeAlertDialog);\n  return /* @__PURE__ */ jsx(DialogPrimitive.Root, { ...dialogScope, ...alertDialogProps, modal: true });\n};\nAlertDialog.displayName = ROOT_NAME;\nvar TRIGGER_NAME = \"AlertDialogTrigger\";\nvar AlertDialogTrigger = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, ...triggerProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    return /* @__PURE__ */ jsx(DialogPrimitive.Trigger, { ...dialogScope, ...triggerProps, ref: forwardedRef });\n  }\n);\nAlertDialogTrigger.displayName = TRIGGER_NAME;\nvar PORTAL_NAME = \"AlertDialogPortal\";\nvar AlertDialogPortal = (props) => {\n  const { __scopeAlertDialog, ...portalProps } = props;\n  const dialogScope = useDialogScope(__scopeAlertDialog);\n  return /* @__PURE__ */ jsx(DialogPrimitive.Portal, { ...dialogScope, ...portalProps });\n};\nAlertDialogPortal.displayName = PORTAL_NAME;\nvar OVERLAY_NAME = \"AlertDialogOverlay\";\nvar AlertDialogOverlay = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, ...overlayProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    return /* @__PURE__ */ jsx(DialogPrimitive.Overlay, { ...dialogScope, ...overlayProps, ref: forwardedRef });\n  }\n);\nAlertDialogOverlay.displayName = OVERLAY_NAME;\nvar CONTENT_NAME = \"AlertDialogContent\";\nvar [AlertDialogContentProvider, useAlertDialogContentContext] = createAlertDialogContext(CONTENT_NAME);\nvar Slottable = createSlottable(\"AlertDialogContent\");\nvar AlertDialogContent = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, children, ...contentProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    const contentRef = React.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, contentRef);\n    const cancelRef = React.useRef(null);\n    return /* @__PURE__ */ jsx(\n      DialogPrimitive.WarningProvider,\n      {\n        contentName: CONTENT_NAME,\n        titleName: TITLE_NAME,\n        docsSlug: \"alert-dialog\",\n        children: /* @__PURE__ */ jsx(AlertDialogContentProvider, { scope: __scopeAlertDialog, cancelRef, children: /* @__PURE__ */ jsxs(\n          DialogPrimitive.Content,\n          {\n            role: \"alertdialog\",\n            ...dialogScope,\n            ...contentProps,\n            ref: composedRefs,\n            onOpenAutoFocus: composeEventHandlers(contentProps.onOpenAutoFocus, (event) => {\n              event.preventDefault();\n              cancelRef.current?.focus({ preventScroll: true });\n            }),\n            onPointerDownOutside: (event) => event.preventDefault(),\n            onInteractOutside: (event) => event.preventDefault(),\n            children: [\n              /* @__PURE__ */ jsx(Slottable, { children }),\n              /* @__PURE__ */ jsx(DescriptionWarning, { contentRef })\n            ]\n          }\n        ) })\n      }\n    );\n  }\n);\nAlertDialogContent.displayName = CONTENT_NAME;\nvar TITLE_NAME = \"AlertDialogTitle\";\nvar AlertDialogTitle = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, ...titleProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    return /* @__PURE__ */ jsx(DialogPrimitive.Title, { ...dialogScope, ...titleProps, ref: forwardedRef });\n  }\n);\nAlertDialogTitle.displayName = TITLE_NAME;\nvar DESCRIPTION_NAME = \"AlertDialogDescription\";\nvar AlertDialogDescription = React.forwardRef((props, forwardedRef) => {\n  const { __scopeAlertDialog, ...descriptionProps } = props;\n  const dialogScope = useDialogScope(__scopeAlertDialog);\n  return /* @__PURE__ */ jsx(DialogPrimitive.Description, { ...dialogScope, ...descriptionProps, ref: forwardedRef });\n});\nAlertDialogDescription.displayName = DESCRIPTION_NAME;\nvar ACTION_NAME = \"AlertDialogAction\";\nvar AlertDialogAction = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, ...actionProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    return /* @__PURE__ */ jsx(DialogPrimitive.Close, { ...dialogScope, ...actionProps, ref: forwardedRef });\n  }\n);\nAlertDialogAction.displayName = ACTION_NAME;\nvar CANCEL_NAME = \"AlertDialogCancel\";\nvar AlertDialogCancel = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, ...cancelProps } = props;\n    const { cancelRef } = useAlertDialogContentContext(CANCEL_NAME, __scopeAlertDialog);\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    const ref = useComposedRefs(forwardedRef, cancelRef);\n    return /* @__PURE__ */ jsx(DialogPrimitive.Close, { ...dialogScope, ...cancelProps, ref });\n  }\n);\nAlertDialogCancel.displayName = CANCEL_NAME;\nvar DescriptionWarning = ({ contentRef }) => {\n  const MESSAGE = `\\`${CONTENT_NAME}\\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \\`${CONTENT_NAME}\\` by passing a \\`${DESCRIPTION_NAME}\\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \\`id\\` and passing the same value to the \\`aria-describedby\\` prop in \\`${CONTENT_NAME}\\`. If the description is confusing or duplicative for sighted users, you can use the \\`@radix-ui/react-visually-hidden\\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;\n  React.useEffect(() => {\n    const hasDescription = document.getElementById(\n      contentRef.current?.getAttribute(\"aria-describedby\")\n    );\n    if (!hasDescription) console.warn(MESSAGE);\n  }, [MESSAGE, contentRef]);\n  return null;\n};\nvar Root2 = AlertDialog;\nvar Trigger2 = AlertDialogTrigger;\nvar Portal2 = AlertDialogPortal;\nvar Overlay2 = AlertDialogOverlay;\nvar Content2 = AlertDialogContent;\nvar Action = AlertDialogAction;\nvar Cancel = AlertDialogCancel;\nvar Title2 = AlertDialogTitle;\nvar Description2 = AlertDialogDescription;\nexport {\n  Action,\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogOverlay,\n  AlertDialogPortal,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n  Cancel,\n  Content2 as Content,\n  Description2 as Description,\n  Overlay2 as Overlay,\n  Portal2 as Portal,\n  Root2 as Root,\n  Title2 as Title,\n  Trigger2 as Trigger,\n  createAlertDialogScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm\",\n      \"data-[state=open]:animate-in data-[state=closed]:animate-out\",\n      \"data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50\",\n        \"w-full max-w-md translate-x-[-50%] translate-y-[-50%]\",\n        \"grid gap-4 bg-white border border-gray-200\",\n        \"rounded-lg p-6 shadow-professional-xl\",\n        \"duration-200\",\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out\",\n        \"data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n        \"data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95\",\n        \"data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%]\",\n        \"data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end gap-3\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-gray-800 tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-gray-600\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}","import { memo, useMemo, useState, useCallback } from \"react\";\nimport PurchaseDetailModal from \"./PurchaseDetailModal\";\nimport MobilePurchaseCard from \"./MobilePurchaseCard\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { toast } from \"sonner\";\nimport { generatePurchaseOrderExcelJS, PurchaseOrderData } from \"@/utils/exceljs/generatePurchaseOrderExcel\";\nimport { formatDateShort } from \"@/utils/helpers\";\nimport { logger } from \"@/lib/logger\";\nimport { usePurchaseMemory } from \"@/hooks/usePurchaseMemory\";\nimport { removePurchaseFromMemory } from '@/stores/purchaseMemoryStore';\nimport { useColumnSettings } from \"@/hooks/useColumnSettings\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { Purchase, PurchaseRequestWithDetails } from \"@/types/purchase\";\nimport { DoneTabColumnId, ColumnVisibility } from \"@/types/columnSettings\";\n\ninterface FastPurchaseTableProps {\n  purchases: Purchase[];\n  activeTab?: string; //   \n  currentUserRoles?: string[];\n  onRefresh?: (forceRefresh?: boolean, options?: { silent?: boolean }) => void | Promise<void>;\n  onOptimisticUpdate?: (purchaseId: number, updater: (prev: Purchase) => Purchase) => void;\n  onPaymentComplete?: (purchaseId: number) => Promise<void>;\n  onReceiptComplete?: (purchaseId: number) => Promise<void>;\n}\n\n//    ( )\nconst StatusBadge = memo(({ purchase }: { purchase: Purchase }) => {\n  const status = purchase.is_received \n    ? 'completed'\n    : (purchase.middle_manager_status === 'approved' && purchase.final_manager_status === 'approved')\n    ? 'inProgress'\n    : (purchase.middle_manager_status === 'rejected' || purchase.final_manager_status === 'rejected')\n    ? 'rejected'\n    : 'pending';\n  \n  const config = {\n    completed: { text: '', className: 'badge-success' },\n    inProgress: { text: '', className: 'badge-primary' },\n    rejected: { text: '', className: 'badge-danger' },\n    pending: { text: '', className: 'badge-warning' }\n  };\n  \n  const { text, className } = config[status];\n  return <span className={`badge-stats ${className}`}>{text}</span>;\n});\n\nStatusBadge.displayName = 'StatusBadge';\n\n//     \nconst getCurrencySymbol = (currency: string) => {\n  if (!currency) return '';\n  if (['KRW', '', ''].includes(currency)) return '';\n  if (['USD', '$', ''].includes(currency)) return '$';\n  if (['EUR', ''].includes(currency)) return '';\n  if (['JPY', '', ''].includes(currency)) return '';\n  if (['CNY', '', ''].includes(currency)) return '';\n  return currency;\n};\n\n//   DB  1,979        (2025-10-28)\n//   : 90      \n//  min-width = max-width   , truncate   \nconst COMMON_COLUMN_CLASSES = {\n  //    \n  approvalStatus: \"text-center w-20 min-w-[85px] max-w-[85px]\",\n  \n  //     ( )\n  purchaseOrderNumber: \"pl-2 w-38 min-w-[155px] max-w-[155px]\",      //  +  + \n  purchaseOrderNumberCompact: \"pl-2 w-36 min-w-[140px] max-w-[140px]\", //   (  )\n  paymentCategory: \"text-center w-20 min-w-[85px] max-w-[85px]\",\n  requesterName: \"w-16 min-w-[68px] max-w-[68px]\",\n  requestDate: \"text-center px-2 w-16 min-w-[64px] max-w-[68px]\",\n  vendorName: \"pl-3 pr-2 w-32 min-w-[130px] max-w-[130px]\",\n  contactName: \"w-16 min-w-[68px] max-w-[68px]\",\n  deliveryRequestDate: \"w-20 min-w-[85px] max-w-[85px]\",\n  revisedDeliveryRequestDate: \"w-20 min-w-[85px] max-w-[85px]\",\n  itemName: \"w-28 min-w-[120px] max-w-[120px]\",                       //  7.8 + \n  specification: \"w-64 min-w-[260px] max-w-[260px]\",                  //  15.5 +  (  )\n  quantity: \"text-center w-14 min-w-[60px] max-w-[60px]\",\n  unitPrice: \"text-right w-24 min-w-[100px] max-w-[100px]\",\n  amount: \"text-right w-24 min-w-[100px] max-w-[100px]\",\n  \n  //    ( )\n  remark: \"w-28 min-w-[115px] max-w-[115px]\",                         //  1.8,  \n  paymentSchedule: \"w-24 min-w-[100px] max-w-[100px]\",\n  purchaseStatus: \"text-center w-20 min-w-[85px] max-w-[85px]\",\n  projectVendor: \"w-24 min-w-[105px] max-w-[105px]\",                  //  6.6\n  salesOrderNumber: \"w-28 min-w-[115px] max-w-[115px]\",               //  8.6\n  projectItem: \"w-44 min-w-[180px] max-w-[180px]\",                    //  11.1 +  (  )\n  receiptProgress: \"text-center w-20 min-w-[85px] max-w-[85px]\",\n  status: \"text-center w-20 min-w-[85px] max-w-[85px]\",\n  receipt: \"text-center w-24 min-w-[100px] max-w-[100px]\",           //  +  \n  paymentStatus: \"text-center w-16 min-w-[70px] max-w-[70px]\",\n  link: \"w-20 min-w-[85px] max-w-[85px]\",\n  utk: \"text-center w-14 min-w-[56px] max-w-[60px]\"  // UTK   ()\n};\n\n//      ( )\n//       usePurchaseMemory  \nconst ApprovalStatusBadge = memo(({ purchase }: { purchase: Purchase }) => {\n  const { allPurchases } = usePurchaseMemory(); //    \n  \n  //     (  )\n  const memoryPurchase = allPurchases?.find(p => p.id === purchase.id) || purchase;\n  \n  const middleApproved = memoryPurchase.middle_manager_status === 'approved';\n  const middleRejected = memoryPurchase.middle_manager_status === 'rejected';\n  const finalApproved = memoryPurchase.final_manager_status === 'approved';\n  const finalRejected = memoryPurchase.final_manager_status === 'rejected';\n\n  //   \n  if (middleRejected || finalRejected) {\n    //    \n    return (\n      <div className=\"flex flex-col items-center gap-0.5\">\n        <div className=\"flex items-center gap-0.5\">\n          <div className=\"w-1.5 h-1.5 bg-red-500 rounded-full animate-pulse\"></div>\n        </div>\n        <span className=\"badge-stats bg-red-500 text-white\">\n          \n        </span>\n      </div>\n    );\n  }\n  \n  if (middleApproved && finalApproved) {\n    //    \n    return (\n      <div className=\"flex flex-col items-center gap-0.5\">\n        <div className=\"flex items-center gap-0.5\">\n          <div className=\"w-1.5 h-1.5 bg-green-500 rounded-full\"></div>\n        </div>\n        <span className=\"badge-stats bg-green-500 text-white\">\n          \n        </span>\n      </div>\n    );\n  }\n  \n  if (middleApproved && !finalApproved && !finalRejected) {\n    //  \n    return (\n      <div className=\"flex flex-col items-center gap-0.5\">\n        <div className=\"flex items-center gap-1\">\n          <div className=\"w-1.5 h-1.5 bg-green-500 rounded-full\"></div>\n          <div className=\"w-3 h-0.5 bg-gray-300\"></div>\n          <div className=\"w-1.5 h-1.5 bg-gray-300 rounded-full\"></div>\n        </div>\n        <span className=\"badge-stats bg-yellow-500 text-white\">\n          1 \n        </span>\n      </div>\n    );\n  }\n  \n  //   \n  return (\n    <div className=\"flex flex-col items-center gap-0.5\">\n      <div className=\"flex items-center gap-1\">\n        <div className=\"w-1.5 h-1.5 bg-gray-300 rounded-full\"></div>\n        <div className=\"w-3 h-0.5 bg-gray-300\"></div>\n        <div className=\"w-1.5 h-1.5 bg-gray-300 rounded-full\"></div>\n      </div>\n      <span className=\"badge-stats bg-gray-500 text-white\">\n        \n      </span>\n    </div>\n  );\n});\n\nApprovalStatusBadge.displayName = 'ApprovalStatusBadge';\n\n//    ( )\n//       usePurchaseMemory  \nconst PaymentProgressBar = memo(({ purchase, activeTab }: { purchase: Purchase; activeTab?: string }) => {\n  const { allPurchases } = usePurchaseMemory(); //    \n  \n  //     (  )\n  const memoryPurchase = allPurchases?.find(p => p.id === purchase.id) || purchase;\n\n  //    ' '   \"-\" \n  if (activeTab === 'done') {\n    if (memoryPurchase.payment_category !== ' ') {\n      return (\n        <div className=\"flex items-center justify-center\">\n          <span className=\"card-title text-gray-500\">-</span>\n        </div>\n      );\n    }\n  }\n  \n  // purchase_requests  is_payment_completed   \n  if (memoryPurchase.is_payment_completed) {\n    const progress = { completed: 1, total: 1, percentage: 100 };\n    return (\n      <div className=\"flex items-center justify-center gap-1\">\n        <div className=\"bg-gray-200 rounded-full h-1.5 w-8\">\n          <div \n            className=\"h-1.5 rounded-full bg-orange-500\"\n            style={{ width: '100%' }}\n          />\n        </div>\n        <span className=\"card-title text-gray-600\">100%</span>\n      </div>\n    );\n  }\n  \n  // items     \n  if (!memoryPurchase.purchase_request_items || memoryPurchase.purchase_request_items.length === 0) {\n    const progress = { completed: 0, total: 1, percentage: 0 };\n    return (\n      <div className=\"flex items-center justify-center gap-1\">\n        <div className=\"bg-gray-200 rounded-full h-1.5 w-8\">\n          <div \n            className=\"h-1.5 rounded-full bg-gray-300\"\n            style={{ width: '0%' }}\n          />\n        </div>\n        <span className=\"card-title text-gray-600\">0%</span>\n      </div>\n    );\n  }\n  \n  //     \n  const total = memoryPurchase.purchase_request_items.length;\n  const completed = memoryPurchase.purchase_request_items.filter((item: any) => \n    item.is_payment_completed === true\n  ).length;\n  const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;\n\n  return (\n    <div className=\"flex items-center justify-center gap-1\">\n      <div className=\"bg-gray-200 rounded-full h-1.5 w-8\">\n        <div \n          className={`h-1.5 rounded-full ${\n            percentage === 100 ? 'bg-orange-500' : \n            percentage > 0 ? 'bg-orange-400' : 'bg-gray-300'\n          }`}\n          style={{ width: `${percentage}%` }}\n        />\n      </div>\n      <span className=\"card-title text-gray-600\">{percentage}%</span>\n    </div>\n  );\n});\n\nPaymentProgressBar.displayName = 'PaymentProgressBar';\n\n//    ( )  \n//       usePurchaseMemory  \nconst ReceiptProgressBar = memo(({ purchase }: { purchase: Purchase }) => {\n  const { allPurchases } = usePurchaseMemory(); //    \n  \n  //     (  )\n  const memoryPurchase = allPurchases?.find(p => p.id === purchase.id) || purchase;\n  \n  // items     \n  if (!memoryPurchase.purchase_request_items || memoryPurchase.purchase_request_items.length === 0) {\n    return (\n      <div className=\"flex items-center justify-center gap-1\">\n        <div className=\"bg-gray-200 rounded-full h-1.5 w-8\">\n          <div \n            className=\"h-1.5 rounded-full bg-gray-300\"\n            style={{ width: '0%' }}\n          />\n        </div>\n        <span className=\"card-title text-gray-600\">0%</span>\n      </div>\n    );\n  }\n  \n  //       (is_received )\n  const total = memoryPurchase.purchase_request_items.length;\n  const received = memoryPurchase.purchase_request_items.filter((item: any) => \n    item.is_received === true\n  ).length;\n  const percentage = total > 0 ? Math.round((received / total) * 100) : 0;\n\n  return (\n    <div className=\"flex items-center justify-center gap-1\">\n      <div className=\"bg-gray-200 rounded-full h-1.5 w-8\">\n        <div \n          className={`h-1.5 rounded-full ${\n            percentage === 100 ? 'bg-blue-500' : \n            percentage > 0 ? 'bg-blue-400' : 'bg-gray-300'\n          }`}\n          style={{ width: `${percentage}%` }}\n        />\n      </div>\n      <span className=\"card-title text-gray-600\">{percentage}%</span>\n    </div>\n  );\n});\n\nReceiptProgressBar.displayName = 'ReceiptProgressBar';\n\n//    ( )  \n//       usePurchaseMemory  \nconst StatementProgressBar = memo(({ purchase }: { purchase: Purchase }) => {\n  const { allPurchases } = usePurchaseMemory(); //    \n  \n  //      (  )\n  const currentPurchase = useMemo(() => {\n    if (!allPurchases) return purchase;\n    const memoryPurchase = allPurchases.find(p => p.id === purchase.id);\n    return memoryPurchase || purchase;\n  }, [allPurchases, purchase.id, purchase]);\n\n  //    \n  const statementProgress = useMemo(() => {\n    const items = currentPurchase.purchase_request_items || currentPurchase.items || [];\n    if (items.length === 0) {\n      return { completed: 0, total: 1, percentage: 0 };\n    }\n    \n    const total = items.length;\n    const completed = items.filter((item: any) => item.is_statement_received === true).length;\n    const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;\n    \n    return { completed, total, percentage };\n  }, [currentPurchase]);\n\n  return (\n    <div className=\"flex items-center justify-center gap-1\">\n      <div className=\"bg-gray-200 rounded-full h-1.5 w-8\">\n        <div \n          className={`h-1.5 rounded-full ${\n            statementProgress.percentage === 100 ? 'bg-green-500' : \n            statementProgress.percentage > 0 ? 'bg-green-400' : 'bg-gray-300'\n          }`}\n          style={{ width: `${statementProgress.percentage}%` }}\n        />\n      </div>\n      <span className=\"card-title text-gray-600\">\n        {statementProgress.percentage}%\n      </span>\n    </div>\n  );\n});\n\nStatementProgressBar.displayName = 'StatementProgressBar';\n\n\n// formatDateShort utils/helpers.ts import\n\n//   \nconst ProgressTypeBadge = memo(({ type }: { type?: string }) => {\n  const isAdvance = type === '' || type?.includes('');\n  \n  if (isAdvance) {\n    return (\n      <span className=\"badge-stats bg-red-500 text-white\">\n        \n      </span>\n    );\n  }\n  \n  return (\n    <span className=\"badge-stats bg-gray-500 text-white\">\n      \n    </span>\n  );\n});\n\nProgressTypeBadge.displayName = 'ProgressTypeBadge';\n\n//    \nconst TableRow = memo(({ purchase, onClick, activeTab, isLeadBuyer, onPaymentComplete, onReceiptComplete, onExcelDownload, columnVisibility }: { \n  purchase: Purchase; \n  onClick: (purchase: Purchase) => void;\n  activeTab?: string;\n  isLeadBuyer?: boolean;\n  onPaymentComplete?: (purchaseId: number) => Promise<void>;\n  onReceiptComplete?: (purchaseId: number) => Promise<void>;\n  onExcelDownload?: (purchase: Purchase) => Promise<void>;\n  columnVisibility?: ColumnVisibility;\n}) => {\n  const isAdvance = purchase.progress_type === '' || purchase.progress_type?.includes('');\n  \n  //    \n  const isVisible = (columnId: DoneTabColumnId) => {\n    if (activeTab !== 'done' || !columnVisibility) return true;\n    return columnVisibility[columnId] !== false;\n  };\n  \n  return (\n    <tr \n      className={`border-b hover:bg-gray-100 cursor-pointer transition-colors ${isAdvance ? 'bg-red-50 hover:bg-red-100' : ''}`}\n      onClick={() => onClick(purchase)}\n    >\n      {/*       */}\n      {activeTab === 'pending' && (\n        <td className={`px-2 py-1.5 whitespace-nowrap ${COMMON_COLUMN_CLASSES.approvalStatus}`}>\n          <ApprovalStatusBadge purchase={purchase} />\n        </td>\n      )}\n      {/*      */}\n      {activeTab === 'purchase' && (\n        <td className={`px-2 py-1.5 ${COMMON_COLUMN_CLASSES.receiptProgress}`}>\n          <PaymentProgressBar purchase={purchase} activeTab={activeTab} />\n        </td>\n      )}\n      {/*       */}\n      {activeTab === 'receipt' && (\n        <td className={`px-2 py-1.5 ${COMMON_COLUMN_CLASSES.receiptProgress}`}>\n          <ReceiptProgressBar purchase={purchase} />\n        </td>\n      )}\n      {/*    */}\n      {activeTab === 'done' && isVisible('statement_progress') && (\n        <td className={`px-2 py-1.5 ${COMMON_COLUMN_CLASSES.receiptProgress}`}>\n          <StatementProgressBar purchase={purchase} />\n        </td>\n      )}\n      {/*   */}\n      {isVisible('purchase_order_number') && (\n        <td className={`px-2 py-1.5 card-title whitespace-nowrap ${activeTab === 'purchase' ? COMMON_COLUMN_CLASSES.purchaseOrderNumberCompact : COMMON_COLUMN_CLASSES.purchaseOrderNumber}`}>\n        <div className=\"flex items-center gap-1\">\n          {/*    -  ,   / */}\n          {onExcelDownload && (\n            <img\n              src=\"/excels-icon.svg\"\n              alt=\" \"\n              width=\"16\"\n              height=\"16\"\n              className={`inline-block align-middle transition-transform p-0.5 rounded\n                ${purchase.is_po_download ? 'border border-gray-400' : ''}\n                ${(purchase.progress_type === '' || purchase.progress_type?.includes('') ||\n                  (purchase.middle_manager_status === 'approved' && purchase.final_manager_status === 'approved'))\n                  ? (purchase.is_po_download ? 'cursor-pointer' : 'cursor-pointer hover:scale-110')\n                  : 'opacity-40 grayscale cursor-not-allowed'}`}\n              onClick={async (e: React.MouseEvent) => {\n                if (purchase.progress_type === '' || purchase.progress_type?.includes('') ||\n                    (purchase.middle_manager_status === 'approved' && purchase.final_manager_status === 'approved')) {\n                  e.stopPropagation();\n                  await onExcelDownload(purchase);\n                }\n              }}\n              style={{\n                pointerEvents: (purchase.progress_type === '' || purchase.progress_type?.includes('') ||\n                  (purchase.middle_manager_status === 'approved' && purchase.final_manager_status === 'approved'))\n                  ? 'auto' : 'none'\n              }}\n              title={purchase.is_po_download ? ' ' : '  '}\n            />\n          )}\n          <span className=\"block truncate\" title={purchase.purchase_order_number || ''}>\n            {purchase.purchase_order_number || '-'}\n            {purchase.purchase_request_items && purchase.purchase_request_items.length > 1 && (\n              <span className=\"text-gray-500 ml-0.5\">({purchase.purchase_request_items.length})</span>\n            )}\n          </span>\n        </div>\n        </td>\n      )}\n      {/*   */}\n      {(activeTab === 'pending' || activeTab === 'purchase' || activeTab === 'receipt' || !activeTab || (activeTab === 'done' && isVisible('payment_category'))) && (\n        <td className={`px-2 py-1.5 card-title whitespace-nowrap ${COMMON_COLUMN_CLASSES.paymentCategory}`}>\n          <span className={`badge-stats ${\n            purchase.payment_category === '' || purchase.payment_category === ' ' ? 'bg-blue-500 text-white' :\n            purchase.payment_category === '' ? 'bg-green-500 text-white' :\n            purchase.payment_category === '' || purchase.payment_category === ' ' ? 'bg-gray-500 text-white' :\n            purchase.payment_category === ' ' ? 'bg-gray-500 text-white' :\n            'bg-gray-500 text-white'\n          }`}>\n            {(() => {\n              //   \n              if (purchase.payment_category === '') return '';\n              if (purchase.payment_category === ' ') return '';\n              if (purchase.payment_category === ' ') return '';\n              return purchase.payment_category || '-';\n            })()}\n          </span>\n        </td>\n      )}\n      {/*   */}\n      {isVisible('requester_name') && (\n        <td className={`px-2 py-1.5 card-title whitespace-nowrap ${COMMON_COLUMN_CLASSES.requesterName}`}>\n          <span className=\"block truncate\" title={purchase.requester_name || ''}>\n            {purchase.requester_name || '-'}\n          </span>\n        </td>\n      )}\n      {/*   */}\n      {isVisible('request_date') && (\n        <td className={`py-1.5 card-title whitespace-nowrap ${COMMON_COLUMN_CLASSES.requestDate}`}>\n          {formatDateShort(purchase.request_date)}\n        </td>\n      )}\n      {/* UTK   */}\n      {activeTab === 'done' && isVisible('utk_status') && (\n        <td className={`pl-2 pr-3 py-1.5 card-title whitespace-nowrap text-center overflow-visible text-clip ${COMMON_COLUMN_CLASSES.utk}`}>\n          <span className={(purchase as any).is_utk_checked ? 'badge-utk-complete' : 'badge-utk-pending'}>\n            {(purchase as any).is_utk_checked ? '' : ''}\n          </span>\n        </td>\n      )}\n      {/*   */}\n      {isVisible('vendor_name') && (\n        <td className={`pl-3 pr-2 py-1.5 card-title ${COMMON_COLUMN_CLASSES.vendorName}`}>\n          <span className=\"block truncate\" title={purchase.vendor_name || ''}>\n            {purchase.vendor_name || '-'}\n          </span>\n        </td>\n      )}\n      {/*   */}\n      {isVisible('contact_name') && (\n        <td className={`px-2 py-1.5 card-title whitespace-nowrap ${COMMON_COLUMN_CLASSES.contactName}`}>\n          <span className=\"block truncate\" title={purchase.contact_name || ''}>\n            {purchase.contact_name || '-'}\n          </span>\n        </td>\n      )}\n      {/*   */}\n      {isVisible('delivery_request_date') && (\n        <td className={`px-2 py-1.5 card-title whitespace-nowrap ${COMMON_COLUMN_CLASSES.deliveryRequestDate} ${\n          purchase.revised_delivery_request_date ? 'text-gray-400' : ''\n        }`}>\n          {formatDateShort(purchase.delivery_request_date)}\n        </td>\n      )}\n      {/*   */}\n      {(activeTab === 'receipt' || !activeTab || (activeTab === 'done' && isVisible('revised_delivery_date'))) && (\n        <td className={`px-2 py-1.5 card-title whitespace-nowrap ${COMMON_COLUMN_CLASSES.revisedDeliveryRequestDate}`}>\n          {formatDateShort(purchase.revised_delivery_request_date)}\n        </td>\n      )}\n      {/*   */}\n      {isVisible('item_name') && (\n        <td className={`px-2 py-1.5 card-title ${COMMON_COLUMN_CLASSES.itemName}`}>\n          <span className=\"block truncate\" title={purchase.purchase_request_items?.[0]?.item_name || ''}>\n            {purchase.purchase_request_items?.[0]?.item_name || '-'}\n          </span>\n        </td>\n      )}\n      {/*   */}\n      {isVisible('specification') && (\n        <td className={`px-2 py-1.5 card-title ${COMMON_COLUMN_CLASSES.specification}`}>\n          <span className=\"block truncate\" title={purchase.purchase_request_items?.[0]?.specification || ''}>\n            {purchase.purchase_request_items?.[0]?.specification || '-'}\n          </span>\n        </td>\n      )}\n      {/*   */}\n      {isVisible('quantity') && (\n        <td className={`px-2 py-1.5 card-title whitespace-nowrap ${COMMON_COLUMN_CLASSES.quantity}`}>\n          {purchase.purchase_request_items?.[0]?.quantity || 0}\n        </td>\n      )}\n      {/*   */}\n      {isVisible('unit_price') && (\n        <td className={`px-2 py-1.5 card-title whitespace-nowrap ${COMMON_COLUMN_CLASSES.unitPrice}`}>\n          {purchase.purchase_request_items?.[0]?.unit_price_value ? `${purchase.purchase_request_items[0].unit_price_value.toLocaleString()} ${getCurrencySymbol(purchase.purchase_request_items[0]?.unit_price_currency || 'KRW')}` : `0 ${getCurrencySymbol(purchase.purchase_request_items?.[0]?.unit_price_currency || 'KRW')}`}\n        </td>\n      )}\n      {/*   */}\n      {isVisible('amount') && (\n        <td className={`px-2 py-1.5 card-amount whitespace-nowrap ${COMMON_COLUMN_CLASSES.amount}`}>\n          {purchase.purchase_request_items?.[0]?.amount_value ? `${purchase.purchase_request_items[0].amount_value.toLocaleString()} ${getCurrencySymbol(purchase.purchase_request_items[0]?.amount_currency || 'KRW')}` : purchase.total_amount ? `${purchase.total_amount.toLocaleString()} ${getCurrencySymbol(purchase.currency || 'KRW')}` : `0 ${getCurrencySymbol(purchase.currency || 'KRW')}`}\n        </td>\n      )}\n      \n      {/*     */}\n      {activeTab === 'pending' && (\n        <>\n          <td className={`px-2 py-1.5 card-title ${COMMON_COLUMN_CLASSES.remark}`}>\n            <span className=\"block truncate\" title={purchase.purchase_request_items?.[0]?.remark || ''}>\n              {purchase.purchase_request_items?.[0]?.remark || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 card-title ${COMMON_COLUMN_CLASSES.projectVendor}`}>\n            <span className=\"block truncate\" title={purchase.project_vendor || ''}>\n              {purchase.project_vendor || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 card-title ${COMMON_COLUMN_CLASSES.projectItem}`}>\n            <span className=\"block truncate\" title={purchase.project_item || ''}>\n              {purchase.project_item || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 card-title whitespace-nowrap ${COMMON_COLUMN_CLASSES.salesOrderNumber}`}>\n            <span className=\"block truncate\" title={purchase.sales_order_number || ''}>\n              {purchase.sales_order_number || '-'}\n            </span>\n          </td>\n        </>\n      )}\n      \n      {activeTab === 'purchase' && (\n        <>\n          <td className={`px-2 py-1.5 card-title ${COMMON_COLUMN_CLASSES.remark}`}>\n            <span className=\"block truncate\" title={purchase.purchase_request_items?.[0]?.remark || ''}>\n              {purchase.purchase_request_items?.[0]?.remark || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 card-title ${COMMON_COLUMN_CLASSES.link}`}>\n            {purchase.purchase_request_items?.[0]?.link ? (\n              <a \n                href={purchase.purchase_request_items?.[0]?.link} \n                target=\"_blank\" \n                rel=\"noopener noreferrer\" \n                className=\"text-blue-600 hover:text-blue-800 underline truncate block\"\n                title={purchase.purchase_request_items?.[0]?.link}\n              >\n                 \n              </a>\n            ) : (\n              <span className=\"text-gray-400\">-</span>\n            )}\n          </td>\n        </>\n      )}\n      \n      {activeTab === 'receipt' && (\n        <>\n          <td className={`px-2 py-1.5 card-title ${COMMON_COLUMN_CLASSES.remark}`}>\n            <span className=\"block truncate\" title={purchase.purchase_request_items?.[0]?.remark || ''}>\n              {purchase.purchase_request_items?.[0]?.remark || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 card-title ${COMMON_COLUMN_CLASSES.projectVendor}`}>\n            <span className=\"block truncate\" title={purchase.project_vendor || ''}>\n              {purchase.project_vendor || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 card-title ${COMMON_COLUMN_CLASSES.projectItem}`}>\n            <span className=\"block truncate\" title={purchase.project_item || ''}>\n              {purchase.project_item || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 card-title whitespace-nowrap ${COMMON_COLUMN_CLASSES.salesOrderNumber}`}>\n            <span className=\"block truncate\" title={purchase.sales_order_number || ''}>\n              {purchase.sales_order_number || '-'}\n            </span>\n          </td>\n        </>\n      )}\n      \n      {(activeTab === 'done' || !activeTab) && (\n        <>\n          {/*   */}\n          {isVisible('remark') && (\n            <td className={`px-2 py-1.5 card-title ${COMMON_COLUMN_CLASSES.remark}`}>\n              <span className=\"block truncate\" title={purchase.purchase_request_items?.[0]?.remark || ''}>\n                {purchase.purchase_request_items?.[0]?.remark || '-'}\n              </span>\n            </td>\n          )}\n          {/*   */}\n          {isVisible('link') && (\n            <td className={`px-2 py-1.5 card-title ${COMMON_COLUMN_CLASSES.link}`}>\n              {purchase.purchase_request_items?.[0]?.link ? (\n                <a \n                  href={purchase.purchase_request_items?.[0]?.link} \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\" \n                  className=\"text-blue-600 hover:text-blue-800 underline truncate block\"\n                  title={purchase.purchase_request_items?.[0]?.link}\n                >\n                   \n                </a>\n              ) : (\n                <span className=\"text-gray-400\">-</span>\n              )}\n            </td>\n          )}\n          {/* PJ  */}\n          {isVisible('project_vendor') && (\n            <td className={`px-2 py-1.5 card-title ${COMMON_COLUMN_CLASSES.projectVendor}`}>\n              <span className=\"block truncate\" title={purchase.project_vendor || ''}>\n                {purchase.project_vendor || '-'}\n              </span>\n            </td>\n          )}\n          {/* PJ ITEM  */}\n          {isVisible('project_item') && (\n            <td className={`px-2 py-1.5 card-title ${COMMON_COLUMN_CLASSES.projectItem}`}>\n              <span className=\"block truncate\" title={purchase.project_item || ''}>\n                {purchase.project_item || '-'}\n              </span>\n            </td>\n          )}\n          {/*   */}\n          {isVisible('sales_order_number') && (\n            <td className={`px-2 py-1.5 card-title whitespace-nowrap ${COMMON_COLUMN_CLASSES.salesOrderNumber}`}>\n              <span className=\"block truncate\" title={purchase.sales_order_number || ''}>\n                {purchase.sales_order_number || '-'}\n              </span>\n            </td>\n          )}\n          {/*   */}\n          {isVisible('purchase_progress') && (\n            <td className={`px-2 py-1.5 ${COMMON_COLUMN_CLASSES.status}`}>\n              <PaymentProgressBar purchase={purchase} activeTab={activeTab} />\n            </td>\n          )}\n          {/*   */}\n          {isVisible('receipt_progress') && (\n            <td className={`px-2 py-1.5 ${COMMON_COLUMN_CLASSES.receipt} ${activeTab === 'done' ? 'column-progress' : ''}`}>\n              <ReceiptProgressBar purchase={purchase} />\n            </td>\n          )}\n        </>\n      )}\n      \n    </tr>\n  );\n});\n\nTableRow.displayName = 'TableRow';\n\n//   \nconst FastPurchaseTable = memo(({ \n  purchases, \n  activeTab = 'done', \n  currentUserRoles = [], \n  onRefresh,\n  onOptimisticUpdate,\n  onPaymentComplete,\n  onReceiptComplete\n}: FastPurchaseTableProps) => {\n  const [selectedPurchaseId, setSelectedPurchaseId] = useState<number | null>(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [deleteConfirmOpen, setDeleteConfirmOpen] = useState(false);\n  const [purchaseToDelete, setPurchaseToDelete] = useState<Purchase | null>(null);\n  const supabase = createClient();\n  \n  //   \n  const { columnVisibility } = useColumnSettings();\n\n  //   - lead buyer app_admin /   \n  const isLeadBuyer = currentUserRoles && (\n    currentUserRoles.includes('lead buyer') ||\n    currentUserRoles.includes('app_admin')\n  );\n  \n\n  //  \n  const canEdit = currentUserRoles.includes('final_approver') || \n                  currentUserRoles.includes('app_admin') || \n                  currentUserRoles.includes('ceo');\n  \n  const canDelete = canEdit;\n\n  const handleRowClick = useCallback((purchase: Purchase) => {\n    setSelectedPurchaseId(purchase.id);\n    setIsModalOpen(true);\n  }, []);\n\n  const handleCloseModal = useCallback(() => {\n    setIsModalOpen(false);\n    setSelectedPurchaseId(null);\n  }, []);\n\n  //   \n  const handleExcelDownload = useCallback(async (purchase: Purchase) => {\n    try {\n      // DB    \n      const { data: purchaseRequest, error: requestError } = await supabase\n        .from('purchase_requests')\n        .select('*')\n        .eq('purchase_order_number', purchase.purchase_order_number)\n        .single();\n\n      if (requestError || !purchaseRequest) {\n        toast.error('     .');\n        return;\n      }\n\n      //   \n      const { data: orderItems, error: itemsError } = await supabase\n        .from('purchase_request_items')\n        .select('*')\n        .eq('purchase_order_number', purchase.purchase_order_number)\n        .order('line_number');\n\n      if (itemsError || !orderItems || orderItems.length === 0) {\n        toast.error('      .');\n        return;\n      }\n\n      //       \n      const vendorInfo = {\n        vendor_name: purchase.vendor_name,\n        vendor_phone: '',\n        vendor_fax: '',\n        vendor_contact_name: '',\n        vendor_payment_schedule: ''\n      };\n\n      try {\n        const vendorId = purchaseRequest.vendor_id || purchase.vendor_id;\n        const contactId = purchaseRequest.contact_id || purchase.contact_id;\n        \n        // vendor  \n        if (vendorId) {\n          const { data: vendorData } = await supabase\n            .from('vendors')\n            .select('vendor_phone, vendor_fax, vendor_payment_schedule')\n            .eq('id', vendorId)\n            .single();\n\n          if (vendorData) {\n            vendorInfo.vendor_phone = vendorData.vendor_phone || '';\n            vendorInfo.vendor_fax = vendorData.vendor_fax || '';\n            vendorInfo.vendor_payment_schedule = vendorData.vendor_payment_schedule || '';\n          }\n        }\n\n        // vendor_contacts contact_id   \n        if (contactId) {\n          const { data: contactData } = await supabase\n            .from('vendor_contacts')\n            .select('contact_name, contact_phone, contact_email')\n            .eq('id', contactId)\n            .single();\n          if (contactData) {\n            vendorInfo.vendor_contact_name = contactData.contact_name || '';\n          }\n        }\n      } catch (error) {\n        //     \n      }\n\n      const excelData: PurchaseOrderData = {\n        purchase_order_number: purchaseRequest.purchase_order_number || '',\n        request_date: purchaseRequest.request_date,\n        delivery_request_date: purchaseRequest.delivery_request_date,\n        requester_name: purchaseRequest.requester_name,\n        vendor_name: vendorInfo.vendor_name || '',\n        vendor_contact_name: vendorInfo.vendor_contact_name,\n        vendor_phone: vendorInfo.vendor_phone,\n        vendor_fax: vendorInfo.vendor_fax,\n        project_vendor: purchaseRequest.project_vendor,\n        sales_order_number: purchaseRequest.sales_order_number,\n        project_item: purchaseRequest.project_item,\n        vendor_payment_schedule: vendorInfo.vendor_payment_schedule,\n        items: orderItems.map((item: any) => ({\n          line_number: item.line_number,\n          item_name: item.item_name,\n          specification: item.specification,\n          quantity: item.quantity,\n          unit_price_value: item.unit_price_value,\n          amount_value: item.amount_value,\n          remark: item.remark,\n          currency: purchaseRequest.currency || 'KRW'\n        }))\n      };\n\n      //   ExcelJS \n      const blob = await generatePurchaseOrderExcelJS(excelData);\n      \n      //  \n      const downloadFilename = `_${excelData.vendor_name}_${excelData.purchase_order_number}.xlsx`;\n\n      //  \n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = downloadFilename;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n      \n      toast.success('  .');\n      \n      // DB   (is_po_download)  - lead buyer \n      try {\n        const canUpdateFlag = currentUserRoles && (\n          currentUserRoles.includes('lead buyer')\n        );\n\n        if (canUpdateFlag) {\n          const { error: downloadFlagErr } = await supabase\n            .from('purchase_requests')\n            .update({ is_po_download: true })\n            .eq('purchase_order_number', purchase.purchase_order_number);\n          \n          if (!downloadFlagErr) {\n            //  \n            onRefresh?.();\n          }\n        }\n      } catch (flagErr) {\n        //    \n      }\n    } catch (error) {\n      toast.error('  .');\n    }\n  }, [supabase]);\n\n  const handleConfirmDelete = useCallback(async () => {\n    if (!purchaseToDelete) return;\n\n\n    try {\n      // Supabase   \n      const supabaseUrl = import.meta.env.VITE_SUPABASE_URL;\n      const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;\n      \n      if (!supabaseUrl || !supabaseAnonKey || supabaseUrl.includes('placeholder')) {\n        logger.warn('Supabase     - FastPurchaseTable');\n        toast.error(\"   .\");\n        return;\n      }\n\n      //    \n      const { data: { user }, error: authError } = await supabase.auth.getUser();\n      \n      \n      if (authError || !user) {\n        toast.error(\" .\");\n        return;\n      }\n\n      //   \n      const { data: employee, error: empError } = await supabase\n        .from('employees')\n        .select('name, email, purchase_role')\n        .eq('email', user.email)\n        .single();\n\n\n      if (empError || !employee) {\n        toast.error(\"    .\");\n        return;\n      }\n\n      //  \n      let roles: string[] = [];\n      if (employee.purchase_role) {\n        if (Array.isArray(employee.purchase_role)) {\n          roles = employee.purchase_role.map((r: any) => String(r).trim());\n        } else {\n          const roleString = String(employee.purchase_role);\n          roles = roleString.split(',').map((r: string) => r.trim()).filter((r: string) => r.length > 0);\n        }\n      }\n\n      const canEdit = roles.includes('final_approver') || \n                      roles.includes('app_admin') || \n                      roles.includes('ceo');\n      \n      const isApproved = purchaseToDelete.final_manager_status === 'approved';\n      const isRequester = purchaseToDelete.requester_name === employee.name;\n      const canDeleteThis = isApproved ? canEdit : (canEdit || isRequester);\n\n\n      if (!canDeleteThis) {\n        toast.error(\"  .\");\n        return;\n      }\n\n\n      //   \n      const { data: deletedItems, error: itemsError } = await supabase\n        .from('purchase_request_items')\n        .delete()\n        .eq('purchase_request_id', purchaseToDelete.id)\n        .select();\n\n      if (itemsError) {\n        logger.error('    ', itemsError, {\n          code: itemsError.code,\n          message: itemsError.message,\n          details: itemsError.details,\n          hint: itemsError.hint\n        });\n        throw itemsError;\n      }\n\n\n      //  \n      const { data: deletedRequest, error: requestError } = await supabase\n        .from('purchase_requests')\n        .delete()\n        .eq('id', purchaseToDelete.id)\n        .select();\n\n      if (requestError) {\n        logger.error('    ', requestError, {\n          code: requestError.code,\n          message: requestError.message,\n          details: requestError.details,\n          hint: requestError.hint\n        });\n        throw requestError;\n      }\n\n\n      //      (   )\n      const memoryUpdated = removePurchaseFromMemory(purchaseToDelete.id);\n      if (!memoryUpdated) {\n        logger.warn('[handleConfirmDelete]     ', { \n          purchaseId: purchaseToDelete.id \n        });\n      } else {\n        logger.info(' [handleConfirmDelete]     ', { \n          purchaseId: purchaseToDelete.id \n        });\n      }\n\n      toast.success(\"  .\");\n      onRefresh?.();\n    } catch (error) {\n      const errorObj = error as any;\n      logger.error('    ', errorObj, {\n        name: errorObj?.name,\n        message: errorObj?.message,\n        code: errorObj?.code,\n        details: errorObj?.details,\n        hint: errorObj?.hint,\n        stack: errorObj?.stack\n      });\n      toast.error(`   : ${errorObj?.message || '   '}`);\n    }\n    \n    setDeleteConfirmOpen(false);\n    setPurchaseToDelete(null);\n  }, [supabase, purchaseToDelete, onRefresh]);\n\n  //     \n  const isColumnVisible = useCallback((columnId: DoneTabColumnId) => {\n    if (activeTab !== 'done') return true; //      \n    return columnVisibility[columnId] !== false;\n  }, [activeTab, columnVisibility]);\n\n  //    \n  const tableHeader = useMemo(() => {\n    if (activeTab === 'pending') {\n      return (\n        <thead className=\"bg-gray-50\">\n          <tr>\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap ${COMMON_COLUMN_CLASSES.approvalStatus}`}></th>\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.purchaseOrderNumber}`}></th>\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap ${COMMON_COLUMN_CLASSES.paymentCategory}`}></th>\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.requesterName}`}></th>\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.requestDate}`}></th>\n            <th className={`px-2 py-1.5 modal-label text-gray-900 text-left ${COMMON_COLUMN_CLASSES.vendorName}`}></th>\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.contactName}`}></th>\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.deliveryRequestDate}`}></th>\n            <th className={`px-2 py-1.5 modal-label text-gray-900 text-left ${COMMON_COLUMN_CLASSES.itemName}`}></th>\n            <th className={`px-2 py-1.5 modal-label text-gray-900 text-left ${COMMON_COLUMN_CLASSES.specification}`}></th>\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap ${COMMON_COLUMN_CLASSES.quantity}`}></th>\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap ${COMMON_COLUMN_CLASSES.unitPrice}`}></th>\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap ${COMMON_COLUMN_CLASSES.amount}`}></th>\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.remark}`}></th>\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.projectVendor}`}>PJ</th>\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.projectItem}`}>PJ ITEM</th>\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.salesOrderNumber}`}></th>\n          </tr>\n        </thead>\n      );\n    }\n    \n    const baseHeaders = (\n      <>\n        {(activeTab !== 'done' || isColumnVisible('purchase_order_number')) && (\n          <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${activeTab === 'purchase' ? COMMON_COLUMN_CLASSES.purchaseOrderNumberCompact : COMMON_COLUMN_CLASSES.purchaseOrderNumber}`}></th>\n        )}\n        {(activeTab === 'purchase' || activeTab === 'receipt' || !activeTab || (activeTab === 'done' && isColumnVisible('payment_category'))) && (\n          <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap ${COMMON_COLUMN_CLASSES.paymentCategory}`}></th>\n        )}\n        {(activeTab !== 'done' || isColumnVisible('requester_name')) && (\n          <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.requesterName}`}></th>\n        )}\n        {(activeTab !== 'done' || isColumnVisible('request_date')) && (\n          <th className={`py-1.5 modal-label text-gray-900 whitespace-nowrap ${COMMON_COLUMN_CLASSES.requestDate}`}></th>\n        )}\n        {/*   UTK     */}\n        {activeTab === 'done' && isColumnVisible('utk_status') && (\n          <th className={`pl-2 pr-3 py-1.5 modal-label text-gray-900 whitespace-nowrap text-center ${COMMON_COLUMN_CLASSES.utk}`}>UTK</th>\n        )}\n        {(activeTab !== 'done' || isColumnVisible('vendor_name')) && (\n          <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.vendorName}`}></th>\n        )}\n        {(activeTab !== 'done' || isColumnVisible('contact_name')) && (\n          <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.contactName}`}></th>\n        )}\n        {(activeTab !== 'done' || isColumnVisible('delivery_request_date')) && (\n          <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.deliveryRequestDate}`}></th>\n        )}\n        {(activeTab === 'receipt' || !activeTab || (activeTab === 'done' && isColumnVisible('revised_delivery_date'))) && (\n          <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.revisedDeliveryRequestDate}`}> </th>\n        )}\n        {(activeTab !== 'done' || isColumnVisible('item_name')) && (\n          <th className={`px-2 py-1.5 modal-label text-gray-900 text-left ${COMMON_COLUMN_CLASSES.itemName}`}></th>\n        )}\n        {(activeTab !== 'done' || isColumnVisible('specification')) && (\n          <th className={`px-2 py-1.5 modal-label text-gray-900 text-left ${COMMON_COLUMN_CLASSES.specification}`}></th>\n        )}\n        {(activeTab !== 'done' || isColumnVisible('quantity')) && (\n          <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap ${COMMON_COLUMN_CLASSES.quantity}`}></th>\n        )}\n        {(activeTab !== 'done' || isColumnVisible('unit_price')) && (\n          <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap ${COMMON_COLUMN_CLASSES.unitPrice}`}></th>\n        )}\n        {(activeTab !== 'done' || isColumnVisible('amount')) && (\n          <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap ${COMMON_COLUMN_CLASSES.amount}`}></th>\n        )}\n      </>\n    );\n\n    let additionalHeaders = null;\n    \n    if (activeTab === 'purchase') {\n      additionalHeaders = (\n        <>\n          <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.remark}`}></th>\n          <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.link}`}></th>\n        </>\n      );\n    } else if (activeTab === 'receipt') {\n      additionalHeaders = (\n        <>\n          <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.remark}`}></th>\n          <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.projectVendor}`}>PJ</th>\n          <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.projectItem}`}>PJ ITEM</th>\n          <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.salesOrderNumber}`}></th>\n        </>\n      );\n    } else {\n      // done  \n      additionalHeaders = (\n        <>\n          {(activeTab !== 'done' || isColumnVisible('remark')) && (\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.remark}`}></th>\n          )}\n          {(activeTab !== 'done' || isColumnVisible('link')) && (\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.link}`}></th>\n          )}\n          {(activeTab !== 'done' || isColumnVisible('project_vendor')) && (\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.projectVendor}`}>PJ</th>\n          )}\n          {(activeTab !== 'done' || isColumnVisible('project_item')) && (\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.projectItem}`}>PJ ITEM</th>\n          )}\n          {(activeTab !== 'done' || isColumnVisible('sales_order_number')) && (\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.salesOrderNumber}`}></th>\n          )}\n          {(activeTab !== 'done' || isColumnVisible('purchase_progress')) && (\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap ${COMMON_COLUMN_CLASSES.status}`}></th>\n          )}\n          {(activeTab !== 'done' || isColumnVisible('receipt_progress')) && (\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap ${COMMON_COLUMN_CLASSES.receipt}`}></th>\n          )}\n        </>\n      );\n    }\n\n    return (\n      <thead className=\"bg-gray-50\">\n        <tr>\n          {/*       */}\n          {activeTab === 'purchase' && (\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap ${COMMON_COLUMN_CLASSES.receiptProgress}`}></th>\n          )}\n          {/*      */}\n          {activeTab === 'receipt' && (\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap ${COMMON_COLUMN_CLASSES.receiptProgress}`}></th>\n          )}\n          {/*       */}\n          {activeTab === 'done' && isColumnVisible('statement_progress') && (\n            <th className={`px-2 py-1.5 modal-label text-gray-900 whitespace-nowrap ${COMMON_COLUMN_CLASSES.receiptProgress}`}></th>\n          )}\n          {baseHeaders}\n          {additionalHeaders}\n        </tr>\n      </thead>\n    );\n  }, [activeTab, isColumnVisible]);\n\n  return (\n    <>\n      {/*    -   1,979     */}\n      <div className=\"hidden md:block w-full\">\n        \n        <div className={activeTab === 'done' ? 'table-container-fit-left' : 'overflow-x-auto border rounded-lg'}>\n          <table className={activeTab === 'done' ? 'table-fit-left' : 'w-full min-w-[1790px] border-collapse'}>\n            {tableHeader}\n            <tbody>\n              {purchases.map((purchase) => (\n                <TableRow \n                  key={purchase.id} \n                  purchase={purchase} \n                  onClick={handleRowClick}\n                  activeTab={activeTab}\n                  isLeadBuyer={isLeadBuyer}\n                  onPaymentComplete={onPaymentComplete}\n                  onReceiptComplete={onReceiptComplete}\n                  onExcelDownload={handleExcelDownload}\n                  columnVisibility={columnVisibility}\n                />\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n      \n      {/*    */}\n      <div className=\"hidden sm:block md:hidden w-full\">\n        <div className=\"overflow-x-auto border rounded-lg\">\n          <table className=\"w-full min-w-[600px] card-title\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"text-left p-2 modal-label text-gray-900 w-24\"></th>\n                <th className=\"text-left p-2 modal-label text-gray-900 w-16\"></th>\n                <th className=\"text-left p-2 modal-label text-gray-900 w-20\"></th>\n                <th className=\"text-left p-2 modal-label text-gray-900 w-32\"></th>\n                <th className=\"text-right p-2 modal-label text-gray-900 w-20\"></th>\n                <th className=\"text-center p-2 modal-label text-gray-900 w-16\"></th>\n              </tr>\n            </thead>\n            <tbody>\n              {purchases.map((purchase) => (\n                <tr \n                  key={purchase.id}\n                  className=\"border-b hover:bg-gray-50 cursor-pointer\"\n                  onClick={() => handleRowClick(purchase)}\n                >\n                  <td className=\"p-2 modal-value\">{purchase.purchase_order_number || '-'}</td>\n                  <td className=\"p-2\">{purchase.requester_name}</td>\n                  <td className=\"p-2 truncate\" title={purchase.vendor_name}>{purchase.vendor_name}</td>\n                  <td className=\"p-2 truncate\" title={purchase.purchase_request_items?.[0]?.item_name}>{purchase.purchase_request_items?.[0]?.item_name || '-'}</td>\n                  <td className=\"p-2 text-right card-amount\">\n                    {purchase.purchase_request_items?.[0]?.amount_value ? `${purchase.purchase_request_items[0].amount_value.toLocaleString()} ${getCurrencySymbol(purchase.purchase_request_items[0]?.amount_currency || 'KRW')}` : purchase.total_amount ? `${purchase.total_amount.toLocaleString()} ${getCurrencySymbol(purchase.currency || 'KRW')}` : `0 ${getCurrencySymbol(purchase.currency || 'KRW')}`}\n                  </td>\n                  <td className=\"p-2 text-center\">\n                    <StatusBadge purchase={purchase} />\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n      \n      {/*    */}\n      <div className=\"sm:hidden space-y-3\">\n        {purchases.map((purchase) => (\n          <MobilePurchaseCard\n            key={purchase.id}\n            purchase={purchase}\n            onClick={() => handleRowClick(purchase)}\n          />\n        ))}\n      </div>\n      \n      {/*  /  */}\n      <PurchaseDetailModal\n        purchaseId={selectedPurchaseId}\n        isOpen={isModalOpen}\n        onClose={handleCloseModal}\n        currentUserRoles={currentUserRoles}\n        activeTab={activeTab}\n        onRefresh={onRefresh}\n        onOptimisticUpdate={onOptimisticUpdate}\n        onDelete={(purchase) => {\n          setPurchaseToDelete(purchase as unknown as Purchase);\n          setDeleteConfirmOpen(true);\n        }}\n      />\n\n      {/*    */}\n      <AlertDialog open={deleteConfirmOpen} onOpenChange={setDeleteConfirmOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>  </AlertDialogTitle>\n            <AlertDialogDescription>\n               {purchaseToDelete?.purchase_order_number} ?\n                  .\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel></AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleConfirmDelete}\n              className=\"bg-red-600 hover:bg-red-700\"\n            >\n              \n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </>\n  );\n});\n\nFastPurchaseTable.displayName = 'FastPurchaseTable';\n\nexport default FastPurchaseTable;","\"use client\";\n\n// src/checkbox.tsx\nimport * as React from \"react\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { usePrevious } from \"@radix-ui/react-use-previous\";\nimport { useSize } from \"@radix-ui/react-use-size\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { Fragment, jsx, jsxs } from \"react/jsx-runtime\";\nvar CHECKBOX_NAME = \"Checkbox\";\nvar [createCheckboxContext, createCheckboxScope] = createContextScope(CHECKBOX_NAME);\nvar [CheckboxProviderImpl, useCheckboxContext] = createCheckboxContext(CHECKBOX_NAME);\nfunction CheckboxProvider(props) {\n  const {\n    __scopeCheckbox,\n    checked: checkedProp,\n    children,\n    defaultChecked,\n    disabled,\n    form,\n    name,\n    onCheckedChange,\n    required,\n    value = \"on\",\n    // @ts-expect-error\n    internal_do_not_use_render\n  } = props;\n  const [checked, setChecked] = useControllableState({\n    prop: checkedProp,\n    defaultProp: defaultChecked ?? false,\n    onChange: onCheckedChange,\n    caller: CHECKBOX_NAME\n  });\n  const [control, setControl] = React.useState(null);\n  const [bubbleInput, setBubbleInput] = React.useState(null);\n  const hasConsumerStoppedPropagationRef = React.useRef(false);\n  const isFormControl = control ? !!form || !!control.closest(\"form\") : (\n    // We set this to true by default so that events bubble to forms without JS (SSR)\n    true\n  );\n  const context = {\n    checked,\n    disabled,\n    setChecked,\n    control,\n    setControl,\n    name,\n    form,\n    value,\n    hasConsumerStoppedPropagationRef,\n    required,\n    defaultChecked: isIndeterminate(defaultChecked) ? false : defaultChecked,\n    isFormControl,\n    bubbleInput,\n    setBubbleInput\n  };\n  return /* @__PURE__ */ jsx(\n    CheckboxProviderImpl,\n    {\n      scope: __scopeCheckbox,\n      ...context,\n      children: isFunction(internal_do_not_use_render) ? internal_do_not_use_render(context) : children\n    }\n  );\n}\nvar TRIGGER_NAME = \"CheckboxTrigger\";\nvar CheckboxTrigger = React.forwardRef(\n  ({ __scopeCheckbox, onKeyDown, onClick, ...checkboxProps }, forwardedRef) => {\n    const {\n      control,\n      value,\n      disabled,\n      checked,\n      required,\n      setControl,\n      setChecked,\n      hasConsumerStoppedPropagationRef,\n      isFormControl,\n      bubbleInput\n    } = useCheckboxContext(TRIGGER_NAME, __scopeCheckbox);\n    const composedRefs = useComposedRefs(forwardedRef, setControl);\n    const initialCheckedStateRef = React.useRef(checked);\n    React.useEffect(() => {\n      const form = control?.form;\n      if (form) {\n        const reset = () => setChecked(initialCheckedStateRef.current);\n        form.addEventListener(\"reset\", reset);\n        return () => form.removeEventListener(\"reset\", reset);\n      }\n    }, [control, setChecked]);\n    return /* @__PURE__ */ jsx(\n      Primitive.button,\n      {\n        type: \"button\",\n        role: \"checkbox\",\n        \"aria-checked\": isIndeterminate(checked) ? \"mixed\" : checked,\n        \"aria-required\": required,\n        \"data-state\": getState(checked),\n        \"data-disabled\": disabled ? \"\" : void 0,\n        disabled,\n        value,\n        ...checkboxProps,\n        ref: composedRefs,\n        onKeyDown: composeEventHandlers(onKeyDown, (event) => {\n          if (event.key === \"Enter\") event.preventDefault();\n        }),\n        onClick: composeEventHandlers(onClick, (event) => {\n          setChecked((prevChecked) => isIndeterminate(prevChecked) ? true : !prevChecked);\n          if (bubbleInput && isFormControl) {\n            hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();\n            if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();\n          }\n        })\n      }\n    );\n  }\n);\nCheckboxTrigger.displayName = TRIGGER_NAME;\nvar Checkbox = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeCheckbox,\n      name,\n      checked,\n      defaultChecked,\n      required,\n      disabled,\n      value,\n      onCheckedChange,\n      form,\n      ...checkboxProps\n    } = props;\n    return /* @__PURE__ */ jsx(\n      CheckboxProvider,\n      {\n        __scopeCheckbox,\n        checked,\n        defaultChecked,\n        disabled,\n        required,\n        onCheckedChange,\n        name,\n        form,\n        value,\n        internal_do_not_use_render: ({ isFormControl }) => /* @__PURE__ */ jsxs(Fragment, { children: [\n          /* @__PURE__ */ jsx(\n            CheckboxTrigger,\n            {\n              ...checkboxProps,\n              ref: forwardedRef,\n              __scopeCheckbox\n            }\n          ),\n          isFormControl && /* @__PURE__ */ jsx(\n            CheckboxBubbleInput,\n            {\n              __scopeCheckbox\n            }\n          )\n        ] })\n      }\n    );\n  }\n);\nCheckbox.displayName = CHECKBOX_NAME;\nvar INDICATOR_NAME = \"CheckboxIndicator\";\nvar CheckboxIndicator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeCheckbox, forceMount, ...indicatorProps } = props;\n    const context = useCheckboxContext(INDICATOR_NAME, __scopeCheckbox);\n    return /* @__PURE__ */ jsx(\n      Presence,\n      {\n        present: forceMount || isIndeterminate(context.checked) || context.checked === true,\n        children: /* @__PURE__ */ jsx(\n          Primitive.span,\n          {\n            \"data-state\": getState(context.checked),\n            \"data-disabled\": context.disabled ? \"\" : void 0,\n            ...indicatorProps,\n            ref: forwardedRef,\n            style: { pointerEvents: \"none\", ...props.style }\n          }\n        )\n      }\n    );\n  }\n);\nCheckboxIndicator.displayName = INDICATOR_NAME;\nvar BUBBLE_INPUT_NAME = \"CheckboxBubbleInput\";\nvar CheckboxBubbleInput = React.forwardRef(\n  ({ __scopeCheckbox, ...props }, forwardedRef) => {\n    const {\n      control,\n      hasConsumerStoppedPropagationRef,\n      checked,\n      defaultChecked,\n      required,\n      disabled,\n      name,\n      value,\n      form,\n      bubbleInput,\n      setBubbleInput\n    } = useCheckboxContext(BUBBLE_INPUT_NAME, __scopeCheckbox);\n    const composedRefs = useComposedRefs(forwardedRef, setBubbleInput);\n    const prevChecked = usePrevious(checked);\n    const controlSize = useSize(control);\n    React.useEffect(() => {\n      const input = bubbleInput;\n      if (!input) return;\n      const inputProto = window.HTMLInputElement.prototype;\n      const descriptor = Object.getOwnPropertyDescriptor(\n        inputProto,\n        \"checked\"\n      );\n      const setChecked = descriptor.set;\n      const bubbles = !hasConsumerStoppedPropagationRef.current;\n      if (prevChecked !== checked && setChecked) {\n        const event = new Event(\"click\", { bubbles });\n        input.indeterminate = isIndeterminate(checked);\n        setChecked.call(input, isIndeterminate(checked) ? false : checked);\n        input.dispatchEvent(event);\n      }\n    }, [bubbleInput, prevChecked, checked, hasConsumerStoppedPropagationRef]);\n    const defaultCheckedRef = React.useRef(isIndeterminate(checked) ? false : checked);\n    return /* @__PURE__ */ jsx(\n      Primitive.input,\n      {\n        type: \"checkbox\",\n        \"aria-hidden\": true,\n        defaultChecked: defaultChecked ?? defaultCheckedRef.current,\n        required,\n        disabled,\n        name,\n        value,\n        form,\n        ...props,\n        tabIndex: -1,\n        ref: composedRefs,\n        style: {\n          ...props.style,\n          ...controlSize,\n          position: \"absolute\",\n          pointerEvents: \"none\",\n          opacity: 0,\n          margin: 0,\n          // We transform because the input is absolutely positioned but we have\n          // rendered it **after** the button. This pulls it back to sit on top\n          // of the button.\n          transform: \"translateX(-100%)\"\n        }\n      }\n    );\n  }\n);\nCheckboxBubbleInput.displayName = BUBBLE_INPUT_NAME;\nfunction isFunction(value) {\n  return typeof value === \"function\";\n}\nfunction isIndeterminate(checked) {\n  return checked === \"indeterminate\";\n}\nfunction getState(checked) {\n  return isIndeterminate(checked) ? \"indeterminate\" : checked ? \"checked\" : \"unchecked\";\n}\nexport {\n  Checkbox,\n  CheckboxIndicator,\n  CheckboxIndicator as Indicator,\n  Checkbox as Root,\n  createCheckboxScope,\n  CheckboxBubbleInput as unstable_BubbleInput,\n  CheckboxBubbleInput as unstable_CheckboxBubbleInput,\n  CheckboxProvider as unstable_CheckboxProvider,\n  CheckboxTrigger as unstable_CheckboxTrigger,\n  CheckboxProvider as unstable_Provider,\n  CheckboxTrigger as unstable_Trigger\n};\n//# sourceMappingURL=index.mjs.map\n","\nimport * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-5 w-5 shrink-0 rounded-sm\",\n      \"border-2 border-gray-300 bg-white\",\n      \"transition-all duration-200\",\n      \"hover:border-gray-400\",\n      \"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-hansl-500/20 focus-visible:ring-offset-2\",\n      \"disabled:cursor-not-allowed disabled:opacity-50\",\n      \"data-[state=checked]:bg-hansl-500 data-[state=checked]:border-hansl-500 data-[state=checked]:text-white\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }","import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\n        \"animate-pulse rounded-professional\",\n        \"bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200\",\n        \"background-size-200 bg-[length:200%_100%]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }","import React, { memo } from 'react';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { Button } from '@/components/ui/button';\nimport { Settings, RotateCcw, Eye, EyeOff } from 'lucide-react';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { useColumnSettings } from '@/hooks/useColumnSettings';\nimport { COLUMN_GROUPS, REQUIRED_COLUMNS } from '@/constants/columnSettings';\nimport { DoneTabColumnId } from '@/types/columnSettings';\nimport { Skeleton } from '@/components/ui/skeleton';\n\ninterface ColumnSettingsDropdownProps {\n  /**\n   *    \n   */\n  isVisible?: boolean;\n  /**\n   *  CSS \n   */\n  className?: string;\n}\n\n/**\n *      \n * -   \n * -   \n * -  \n * -   \n */\nconst ColumnSettingsDropdown: React.FC<ColumnSettingsDropdownProps> = memo(({\n  isVisible = true,\n  className = '',\n}) => {\n  const { columnVisibility, toggleColumn, resetToDefault, isLoading, error } = useColumnSettings();\n\n  //     \n  if (!isVisible) {\n    return null;\n  }\n\n  //  \n  if (isLoading) {\n    return (\n      <Button variant=\"outline\" size=\"sm\" className={`button-base ${className}`} disabled>\n        <Skeleton className=\"w-4 h-4 mr-2\" />\n        <span className=\"button-text\"> </span>\n      </Button>\n    );\n  }\n\n  //  \n  if (error) {\n    return (\n      <Button variant=\"outline\" size=\"sm\" className={`button-base ${className}`} disabled>\n        <Settings className=\"w-4 h-4 mr-2\" />\n        <span className=\"button-text text-red-500\"> </span>\n      </Button>\n    );\n  }\n\n  //    \n  const visibleColumnCount = Object.values(columnVisibility).filter(Boolean).length;\n  const totalColumnCount = Object.keys(columnVisibility).length;\n\n  //   \n  const handleColumnToggle = (columnId: DoneTabColumnId) => {\n    //     \n    if (REQUIRED_COLUMNS.includes(columnId) && columnVisibility[columnId]) {\n      return;\n    }\n    \n    toggleColumn(columnId);\n  };\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button variant=\"outline\" size=\"sm\" className={`button-base ${className}`}>\n          <Settings className=\"w-4 h-4 mr-2\" />\n          <span className=\"button-text\">\n              ({visibleColumnCount}/{totalColumnCount})\n          </span>\n        </Button>\n      </DropdownMenuTrigger>\n      \n      <DropdownMenuContent className=\"w-80 max-h-96 overflow-y-auto\" align=\"end\">\n        {/*  */}\n        <DropdownMenuLabel className=\"flex items-center justify-between\">\n          <span className=\"modal-section-title\">  </span>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={resetToDefault}\n            className=\"h-6 px-2\"\n            title=\" \"\n          >\n            <RotateCcw className=\"w-3 h-3\" />\n          </Button>\n        </DropdownMenuLabel>\n        \n        <DropdownMenuSeparator />\n\n        {/*   */}\n        <div className=\"px-3 py-2\">\n          <div className=\"flex items-center justify-between text-xs\">\n            <span className=\"card-subtitle\">  </span>\n            <span className=\"badge-stats bg-blue-500 text-white\">\n              {visibleColumnCount} / {totalColumnCount}\n            </span>\n          </div>\n        </div>\n\n        <DropdownMenuSeparator />\n\n        {/*    */}\n        {COLUMN_GROUPS.map((group, groupIndex) => (\n          <React.Fragment key={group.title}>\n            {/*   */}\n            <div className=\"px-3 py-2\">\n              <div className=\"modal-label text-gray-700 font-medium\">\n                {group.title}\n              </div>\n            </div>\n\n            {/*    */}\n            {group.columns.map((columnId) => {\n              const isVisible = columnVisibility[columnId];\n              const isRequired = REQUIRED_COLUMNS.includes(columnId);\n              const columnInfo = COLUMN_GROUPS\n                .flatMap(g => g.columns)\n                .find(id => id === columnId);\n              \n              //   \n              const columnLabels: Record<DoneTabColumnId, string> = {\n                statement_progress: '',\n                purchase_order_number: '',\n                payment_category: '',\n                requester_name: '',\n                request_date: '',\n                utk_status: 'UTK',\n                vendor_name: '',\n                contact_name: '',\n                delivery_request_date: '',\n                revised_delivery_date: '',\n                item_name: '',\n                specification: '',\n                quantity: '',\n                unit_price: '',\n                amount: '',\n                remark: '',\n                link: '',\n                project_vendor: 'PJ',\n                project_item: 'PJ ITEM',\n                sales_order_number: '',\n                purchase_progress: '',\n                receipt_progress: '',\n              };\n\n              return (\n                <DropdownMenuItem\n                  key={columnId}\n                  className={`flex items-center gap-2 px-3 py-2 cursor-pointer ${\n                    isRequired ? 'opacity-75' : ''\n                  }`}\n                  onClick={() => handleColumnToggle(columnId)}\n                  disabled={isRequired && isVisible}\n                >\n                  <Checkbox\n                    checked={isVisible}\n                    disabled={isRequired && isVisible}\n                    className=\"w-4 h-4\"\n                    onCheckedChange={() => handleColumnToggle(columnId)}\n                  />\n                  \n                  <div className=\"flex items-center gap-2 flex-1\">\n                    {isVisible ? (\n                      <Eye className=\"w-3 h-3 text-green-600\" />\n                    ) : (\n                      <EyeOff className=\"w-3 h-3 text-gray-400\" />\n                    )}\n                    \n                    <div className=\"flex-1\">\n                      <div className={`modal-value text-xs ${\n                        !isVisible ? 'text-gray-500' : ''\n                      }`}>\n                        {columnLabels[columnId]}\n                        {isRequired && (\n                          <span className=\"ml-1 text-red-500\" title=\" \">*</span>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </DropdownMenuItem>\n              );\n            })}\n\n            {/*   (  ) */}\n            {groupIndex < COLUMN_GROUPS.length - 1 && <DropdownMenuSeparator />}\n          </React.Fragment>\n        ))}\n\n        <DropdownMenuSeparator />\n\n        {/*   */}\n        <div className=\"px-3 py-2\">\n          <div className=\"text-xs text-gray-500 space-y-1\">\n            <div>  (*)   </div>\n            <div>   </div>\n            <div>    </div>\n          </div>\n        </div>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n});\n\nColumnSettingsDropdown.displayName = 'ColumnSettingsDropdown';\n\nexport default ColumnSettingsDropdown;","import { useState, useRef, useEffect } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { \n  Sliders, \n  ArrowUpDown, \n  Search, \n  X, \n  Calendar,\n  Check,\n  User,\n  Building,\n  Package,\n  DollarSign,\n  CheckCircle\n} from 'lucide-react'\nimport ColumnSettingsDropdown from './ColumnSettingsDropdown'\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from '@/components/ui/popover'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport { Calendar as CalendarComponent } from '@/components/ui/calendar'\nimport { format } from 'date-fns'\nimport { ko } from 'date-fns/locale'\n\n//   \ntype FilterCondition = 'contains' | 'equals' | 'starts_with' | 'ends_with' | 'is_empty' | 'is_not_empty' | 'greater_than' | 'less_than' | 'after' | 'before' | 'not_equals'\n\n//   \nexport interface FilterRule {\n  id: string\n  field: string\n  condition: FilterCondition\n  value: string | number | Date\n  label: string\n  dateField?: string // /    \n}\n\nexport interface SortRule {\n  field: string\n  direction: 'asc' | 'desc'\n  label: string\n}\n\ninterface FilterToolbarProps {\n  activeFilters: FilterRule[]\n  sortConfig: SortRule | null\n  searchTerm: string\n  onFiltersChange: (filters: FilterRule[]) => void\n  onSortChange: (sort: SortRule | null) => void\n  onSearchChange: (search: string) => void\n  availableEmployees?: string[]\n  availableVendors?: string[]\n  availableContacts?: string[]\n  availablePaymentSchedules?: string[]\n  showColumnSettings?: boolean\n  activeTab?: string\n}\n\n//   \nconst FILTER_FIELDS = [\n  //  \n  { \n    key: 'date_range', \n    label: '', \n    type: 'date_range',\n    icon: Calendar,\n    category: ''\n  },\n  { \n    key: 'date_month', \n    label: '', \n    type: 'date_month',\n    icon: Calendar,\n    category: ''\n  },\n  \n  // & \n  { \n    key: 'requester_name', \n    label: '', \n    type: 'searchable_select',\n    icon: User,\n    category: ''\n  },\n  { \n    key: 'vendor_name', \n    label: '', \n    type: 'searchable_select',\n    icon: Building,\n    category: ''\n  },\n  { \n    key: 'contact_name', \n    label: '', \n    type: 'searchable_select',\n    icon: User,\n    category: ''\n  },\n  \n  //  \n  { \n    key: 'purchase_order_number', \n    label: '', \n    type: 'text',\n    icon: Package,\n    category: ''\n  },\n  { \n    key: 'item_name', \n    label: '', \n    type: 'text',\n    icon: Package,\n    category: ''\n  },\n  { \n    key: 'specification', \n    label: '', \n    type: 'text',\n    icon: Package,\n    category: ''\n  },\n  { \n    key: 'remark', \n    label: '', \n    type: 'text',\n    icon: Package,\n    category: ''\n  },\n  { \n    key: 'project_vendor', \n    label: 'PJ', \n    type: 'text',\n    icon: Building,\n    category: ''\n  },\n  { \n    key: 'project_item', \n    label: 'PJ ITEM', \n    type: 'text',\n    icon: Package,\n    category: ''\n  },\n  { \n    key: 'sales_order_number', \n    label: '', \n    type: 'text',\n    icon: Package,\n    category: ''\n  },\n  \n  //  \n  { \n    key: 'quantity', \n    label: '', \n    type: 'number',\n    icon: DollarSign,\n    category: ''\n  },\n  { \n    key: 'unit_price_value', \n    label: '', \n    type: 'number',\n    icon: DollarSign,\n    category: ''\n  },\n  { \n    key: 'total_amount', \n    label: '', \n    type: 'number',\n    icon: DollarSign,\n    category: ''\n  },\n  \n  //  \n  { \n    key: 'payment_category', \n    label: '', \n    type: 'select',\n    icon: CheckCircle,\n    category: '',\n    options: ['', '', '']\n  },\n  { \n    key: 'payment_schedule', \n    label: '', \n    type: 'select_with_empty',\n    icon: Calendar,\n    category: ''\n  },\n  { \n    key: 'is_payment_completed', \n    label: '', \n    type: 'select',\n    icon: Check,\n    category: '',\n    options: ['', '']\n  },\n  { \n    key: 'is_received', \n    label: '', \n    type: 'select',\n    icon: Check,\n    category: '',\n    options: ['', '']\n  },\n  { \n    key: 'is_statement_received', \n    label: ' ', \n    type: 'select',\n    icon: Check,\n    category: '',\n    options: ['', '']\n  },\n  { \n    key: 'is_utk_checked', \n    label: 'UTK ', \n    type: 'select',\n    icon: CheckCircle,\n    category: '',\n    options: ['', '']\n  }\n]\n\n//   \nconst TEXT_CONDITIONS = [\n  { value: 'contains', label: '' },\n  { value: 'equals', label: '' },\n  { value: 'starts_with', label: '' },\n  { value: 'ends_with', label: '' },\n  { value: 'is_empty', label: '' },\n  { value: 'is_not_empty', label: ' ' }\n]\n\nconst NUMBER_CONDITIONS = [\n  { value: 'equals', label: '' },\n  { value: 'greater_than', label: '' },\n  { value: 'less_than', label: '' },\n  { value: 'between', label: '' },\n  { value: 'is_empty', label: '' },\n  { value: 'is_not_empty', label: ' ' }\n]\n\nconst DATE_CONDITIONS = [\n  { value: 'equals', label: '' },\n  { value: 'after', label: '' },\n  { value: 'before', label: '' },\n  { value: 'between', label: '' },\n  { value: 'is_empty', label: '' },\n  { value: 'is_not_empty', label: ' ' }\n]\n\nconst SELECT_CONDITIONS = [\n  { value: 'equals', label: '' },\n  { value: 'not_equals', label: '' }\n]\n\n//    \nconst DATE_FIELDS = [\n  { value: 'request_date', label: '' },\n  { value: 'delivery_request_date', label: '' },\n  { value: 'payment_completed_at', label: '' },\n  { value: 'received_at', label: '' },\n  { value: 'created_at', label: '' },\n  { value: 'statement_received_at', label: '' }\n]\n\n//   \nconst SORT_FIELDS = [\n  { value: 'request_date', label: '' },\n  { value: 'purchase_order_number', label: '' },\n  { value: 'vendor_name', label: '' },\n  { value: 'requester_name', label: '' },\n  { value: 'total_amount', label: '' },\n  { value: 'delivery_request_date', label: '' },\n  { value: 'created_at', label: '' }\n]\n\nexport default function FilterToolbar({\n  activeFilters,\n  sortConfig,\n  searchTerm,\n  onFiltersChange,\n  onSortChange,\n  onSearchChange,\n  availableEmployees = [],\n  availableVendors = [],\n  availableContacts = [],\n  availablePaymentSchedules = [],\n  showColumnSettings = false,\n  activeTab\n}: FilterToolbarProps) {\n  const [isFilterOpen, setIsFilterOpen] = useState(false)\n  const [isSortOpen, setIsSortOpen] = useState(false)\n  const [isSearchExpanded, setIsSearchExpanded] = useState(false)\n  const [newFilter, setNewFilter] = useState<Partial<FilterRule>>({})\n  const [datePickerOpen, setDatePickerOpen] = useState(false)\n  const [monthPickerOpen, setMonthPickerOpen] = useState(false)\n  const [tempDateRange, setTempDateRange] = useState<{from?: Date, to?: Date}>({})\n  const [tempMonth, setTempMonth] = useState<Date | undefined>()\n  const [tempMonthRange, setTempMonthRange] = useState<{from?: Date, to?: Date}>({})\n  const [tempSort, setTempSort] = useState<{field?: string, direction?: 'asc' | 'desc'}>({})\n  const [searchValue, setSearchValue] = useState('')\n  const searchInputRef = useRef<HTMLInputElement>(null)\n\n  //    \n  useEffect(() => {\n    if (isSearchExpanded && searchInputRef.current) {\n      searchInputRef.current.focus()\n    }\n  }, [isSearchExpanded])\n\n  //       \n  useEffect(() => {\n    if (isSortOpen) {\n      setTempSort({\n        field: sortConfig?.field || '',\n        direction: sortConfig?.direction || 'asc'\n      })\n    }\n  }, [isSortOpen, sortConfig])\n\n  const handleAddFilter = (field: string) => {\n    const fieldConfig = FILTER_FIELDS.find(f => f.key === field)\n    if (!fieldConfig) return\n\n    //      \n    let defaultCondition = 'contains'\n    if (fieldConfig.type === 'date_range' || fieldConfig.type === 'date_month') {\n      defaultCondition = 'equals'\n    }\n\n    setNewFilter({\n      id: `${field}_${Date.now()}`,\n      field,\n      condition: defaultCondition,\n      value: '',\n      label: fieldConfig.label\n    })\n  }\n\n  const handleApplyFilter = () => {\n    const isDateFilter = newFilter.field === 'date_range' || newFilter.field === 'date_month'\n    const requiresDateField = isDateFilter && !newFilter.dateField\n    \n    //      \n    let finalCondition = newFilter.condition\n    if (!finalCondition) {\n      if (isDateFilter) {\n        finalCondition = 'equals'\n      } else {\n        //   'contains',   'equals'\n        const fieldConfig = FILTER_FIELDS.find(f => f.key === newFilter.field)\n        finalCondition = (fieldConfig?.type === 'select' || fieldConfig?.type === 'select_with_empty' || fieldConfig?.type === 'searchable_select') \n          ? 'equals' \n          : 'contains'\n      }\n    }\n    \n    if (newFilter.field && finalCondition !== undefined && newFilter.value !== '' && !requiresDateField) {\n      const filter: FilterRule = {\n        id: newFilter.id!,\n        field: newFilter.field,\n        condition: finalCondition,\n        value: newFilter.value,\n        label: newFilter.label!,\n        dateField: newFilter.dateField //    \n      }\n      onFiltersChange([...activeFilters, filter])\n      setNewFilter({})\n      setIsFilterOpen(false)\n    }\n  }\n\n  const handleRemoveFilter = (filterId: string) => {\n    onFiltersChange(activeFilters.filter(f => f.id !== filterId))\n  }\n\n  const handleClearAllFilters = () => {\n    onFiltersChange([])\n    setIsFilterOpen(false)\n  }\n\n  const handleSortFieldChange = (field: string) => {\n    setTempSort(prev => ({ ...prev, field }))\n  }\n\n  const handleSortDirectionChange = (direction: 'asc' | 'desc') => {\n    setTempSort(prev => ({ ...prev, direction }))\n  }\n\n  const handleApplySort = () => {\n    if (tempSort.field && tempSort.direction) {\n      const fieldConfig = SORT_FIELDS.find(f => f.value === tempSort.field)\n      if (fieldConfig) {\n        onSortChange({\n          field: tempSort.field,\n          direction: tempSort.direction,\n          label: fieldConfig.label\n        })\n      }\n    }\n    setIsSortOpen(false)\n    setTempSort({})\n  }\n\n  const handleClearSort = () => {\n    onSortChange(null)\n    setTempSort({})\n    setIsSortOpen(false)\n  }\n\n  const getConditionOptions = (fieldType: string) => {\n    switch (fieldType) {\n      case 'text':\n      case 'searchable_select':\n        return TEXT_CONDITIONS\n      case 'number':\n        return NUMBER_CONDITIONS\n      case 'date_range':\n      case 'date_month':\n        return DATE_CONDITIONS\n      case 'select':\n      case 'select_with_empty':\n        return SELECT_CONDITIONS\n      default:\n        return TEXT_CONDITIONS\n    }\n  }\n\n  const renderValueInput = () => {\n    const fieldConfig = FILTER_FIELDS.find(f => f.key === newFilter.field)\n    if (!fieldConfig) return null\n\n    switch (fieldConfig.type) {\n      case 'text':\n        return (\n          <Input\n            placeholder=\" \"\n            value={newFilter.value || ''}\n            onChange={(e) => setNewFilter(prev => ({ ...prev, value: e.target.value }))}\n            className=\"w-full business-radius-input border border-gray-300 bg-white text-gray-700 card-description h-auto\"\n            style={{padding: '2px 10px', fontSize: '10px', fontWeight: '500'}}\n          />\n        )\n      \n      case 'number':\n        return (\n          <Input\n            type=\"number\"\n            placeholder=\" \"\n            value={newFilter.value || ''}\n            onChange={(e) => setNewFilter(prev => ({ ...prev, value: e.target.value }))}\n            className=\"w-full business-radius-input border border-gray-300 bg-white text-gray-700 card-description h-auto\"\n            style={{padding: '2px 10px', fontSize: '10px', fontWeight: '500'}}\n          />\n        )\n\n      case 'searchable_select':\n        let options: string[] = []\n        let placeholder = \"\"\n        if (fieldConfig.key === 'requester_name') {\n          options = availableEmployees\n          placeholder = \"\"\n        } else if (fieldConfig.key === 'vendor_name') {\n          options = availableVendors\n          placeholder = \"\"\n        } else if (fieldConfig.key === 'contact_name') {\n          options = availableContacts\n          placeholder = \"\"\n        }\n\n        //   \n        const filteredOptions = options.filter(option => \n          option.toLowerCase().includes(searchValue.toLowerCase())\n        )\n\n        return (\n          <Popover onOpenChange={(open) => {\n            if (!open) {\n              setSearchValue('')\n            }\n          }}>\n            <PopoverTrigger asChild>\n              <Button\n                variant=\"outline\"\n                role=\"combobox\"\n                className=\"w-full button-base business-radius-button border border-gray-300 bg-white text-gray-700 justify-between [&>svg]:hidden\"\n              >\n                <span className=\"truncate text-left\" style={{fontSize: '12px', fontWeight: '500'}}>\n                  {newFilter.value || placeholder}\n                </span>\n                <Search className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\n              </Button>\n            </PopoverTrigger>\n            <PopoverContent className=\"w-[200px] p-1 border-0 shadow-lg\" align=\"start\">\n              <div className=\"space-y-1\">\n                {/*    */}\n                <Input\n                  placeholder={`${placeholder} ...`}\n                  className=\"h-auto border-0 focus:ring-0 focus:outline-none card-description placeholder:card-description\"\n                  style={{padding: '2px 10px'}}\n                  value={searchValue}\n                  onChange={(e) => setSearchValue(e.target.value)}\n                  autoFocus\n                />\n                \n                {/*   - Command   div  */}\n                <div className=\"max-h-[200px] overflow-y-auto\">\n                  {filteredOptions.length === 0 ? (\n                    <div className=\"p-2 text-sm text-gray-500\">\n                      {searchValue ? '  ' : `${placeholder}   `}\n                    </div>\n                  ) : (\n                    filteredOptions.map(option => (\n                      <Button\n                        key={option}\n                        variant=\"ghost\"\n                        onClick={() => {\n                          setNewFilter(prev => ({ ...prev, value: option }))\n                          setSearchValue('')\n                        }}\n                        className=\"w-full justify-start p-2 h-auto hover:bg-gray-100 text-left\"\n                      >\n                        <Check\n                          className={`mr-2 h-3 w-3 ${\n                            newFilter.value === option ? \"opacity-100\" : \"opacity-0\"\n                          }`}\n                        />\n                        <span className=\"card-description\">{option}</span>\n                      </Button>\n                    ))\n                  )}\n                </div>\n              </div>\n            </PopoverContent>\n          </Popover>\n        )\n\n      case 'select':\n        return (\n          <Select value={newFilter.value || ''} onValueChange={(value) => setNewFilter(prev => ({ ...prev, value }))}>\n            <SelectTrigger className=\"button-base business-radius-button border border-gray-300 bg-white text-gray-700 [&>svg]:hidden text-center\">\n              <SelectValue placeholder=\"\" />\n            </SelectTrigger>\n            <SelectContent>\n              {fieldConfig.options?.map(option => (\n                <SelectItem key={option} value={option}>\n                  <span className=\"card-description\">{option}</span>\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        )\n\n      case 'select_with_empty':\n        const scheduleOptions = ['', ...availablePaymentSchedules]\n        return (\n          <Select value={newFilter.value || ''} onValueChange={(value) => setNewFilter(prev => ({ ...prev, value }))}>\n            <SelectTrigger className=\"button-base business-radius-button border border-gray-300 bg-white text-gray-700 [&>svg]:hidden text-center\">\n              <SelectValue placeholder=\"\" />\n            </SelectTrigger>\n            <SelectContent>\n              {scheduleOptions.map(option => (\n                <SelectItem key={option} value={option}>\n                  <span className=\"card-description\">{option}</span>\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        )\n\n      case 'date_range':\n        return (\n          <Popover open={datePickerOpen} onOpenChange={(open) => {\n            if (open) {\n              //      \n              if (newFilter.value) {\n                if (newFilter.value.includes('~')) {\n                  const [start, end] = newFilter.value.split('~');\n                  setTempDateRange({\n                    from: new Date(start),\n                    to: new Date(end)\n                  });\n                } else {\n                  setTempDateRange({\n                    from: new Date(newFilter.value),\n                    to: undefined\n                  });\n                }\n              } else {\n                setTempDateRange({});\n              }\n            }\n            setDatePickerOpen(open);\n          }}>\n            <PopoverTrigger asChild>\n              <Button \n                variant=\"outline\" \n                className=\"w-full button-base business-radius-button border border-gray-300 bg-white text-gray-700 justify-between h-auto\"\n              >\n                <div className=\"flex items-center gap-1.5 min-h-[32px]\">\n                  <Calendar className=\"w-3 h-3 flex-shrink-0\" />\n                  <span className=\"card-description leading-tight whitespace-pre-line\">\n                    {newFilter.value ? (() => {\n                      if (newFilter.value.includes('~')) {\n                        const [start, end] = newFilter.value.split('~');\n                        return `${format(new Date(start), 'yy/MM/dd')}\\n~ ${format(new Date(end), 'yy/MM/dd')}`;\n                      } else {\n                        return format(new Date(newFilter.value), 'yy/MM/dd');\n                      }\n                    })() : ' '}\n                  </span>\n                </div>\n              </Button>\n            </PopoverTrigger>\n            <PopoverContent className=\"w-auto p-0\" align=\"start\">\n              <div className=\"space-y-3\">\n                <div className=\"p-3 pb-0\">\n                  <div className=\"text-xs font-medium text-gray-600 mb-2\">  </div>\n                  <CalendarComponent\n                    mode=\"range\"\n                    selected={tempDateRange}\n                    onSelect={(range) => {\n                      if (range) {\n                        setTempDateRange(range);\n                      }\n                    }}\n                    numberOfMonths={1}\n                    initialFocus\n                    className=\"compact-calendar\"\n                  />\n                </div>\n                <div className=\"flex gap-2 p-3 pt-0\">\n                  <Button\n                    onClick={() => {\n                      setTempDateRange({});\n                      setDatePickerOpen(false);\n                    }}\n                    variant=\"outline\"\n                    className=\"button-base border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 flex-1\"\n                  >\n                    \n                  </Button>\n                  <Button\n                    onClick={() => {\n                      if (tempDateRange.from) {\n                        if (tempDateRange.to) {\n                          // ~ \n                          const rangeValue = `${format(tempDateRange.from, 'yyyy-MM-dd')}~${format(tempDateRange.to, 'yyyy-MM-dd')}`;\n                          setNewFilter(prev => ({ ...prev, value: rangeValue }));\n                        } else {\n                          //  ( )\n                          setNewFilter(prev => ({ ...prev, value: format(tempDateRange.from, 'yyyy-MM-dd') }));\n                        }\n                        setDatePickerOpen(false);\n                      }\n                    }}\n                    disabled={!tempDateRange.from}\n                    className=\"button-base bg-blue-500 text-white hover:bg-blue-600 flex-1\"\n                  >\n                    \n                  </Button>\n                </div>\n              </div>\n            </PopoverContent>\n          </Popover>\n        )\n\n      case 'date_month':\n        return (\n          <Popover open={monthPickerOpen} onOpenChange={(open) => {\n            if (open) {\n              //      \n              if (newFilter.value) {\n                if (newFilter.value.includes('~')) {\n                  const [start, end] = newFilter.value.split('~');\n                  setTempMonthRange({\n                    from: new Date(`${start}-01`),\n                    to: new Date(`${end}-01`)\n                  });\n                } else {\n                  setTempMonthRange({\n                    from: new Date(`${newFilter.value}-01`),\n                    to: undefined\n                  });\n                }\n              } else {\n                setTempMonthRange({});\n              }\n            }\n            setMonthPickerOpen(open);\n          }}>\n            <PopoverTrigger asChild>\n              <Button \n                variant=\"outline\" \n                className=\"w-full button-base business-radius-button border border-gray-300 bg-white text-gray-700 justify-between h-auto\"\n              >\n                <div className=\"flex items-center gap-1.5\">\n                  <Calendar className=\"w-3 h-3 flex-shrink-0\" />\n                  <span className=\"card-description leading-tight whitespace-pre-line\">\n                    {newFilter.value ? (() => {\n                      if (newFilter.value.includes('~')) {\n                        const [start, end] = newFilter.value.split('~');\n                        const [startYear, startMonth] = start.split('-');\n                        const [endYear, endMonth] = end.split('-');\n                        return `${startYear.slice(-2)}/${startMonth}\\n~ ${endYear.slice(-2)}/${endMonth}`;\n                      } else {\n                        const [year, month] = newFilter.value.split('-');\n                        return `${year.slice(-2)}/${month}`;\n                      }\n                    })() : ' '}\n                  </span>\n                </div>\n              </Button>\n            </PopoverTrigger>\n            <PopoverContent className=\"w-auto p-0\" align=\"start\">\n              <div className=\"space-y-3\">\n                <div className=\"p-3 pb-0\">\n                  <div className=\"text-xs font-medium text-gray-600 mb-3\"> </div>\n                  \n                  {/*   -  12  */}\n                  <div className=\"flex gap-4\">\n                    <div className=\"flex-1\">\n                      <div className=\"text-xs text-gray-500 mb-2\">  </div>\n                      {/*   */}\n                      <div className=\"mb-3\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <Button\n                            onClick={() => {\n                              const currentYear = tempMonthRange.from ? tempMonthRange.from.getFullYear() : new Date().getFullYear();\n                              const newDate = new Date(currentYear - 1, tempMonthRange.from ? tempMonthRange.from.getMonth() : 0, 1);\n                              setTempMonthRange(prev => ({ ...prev, from: newDate }));\n                            }}\n                            variant=\"outline\"\n                            size=\"sm\"\n                            className=\"button-base border border-gray-300 bg-white text-gray-600 hover:bg-gray-50\"\n                          >\n                            \n                          </Button>\n                          <span className=\"text-sm font-medium text-gray-700\">\n                            {tempMonthRange.from ? tempMonthRange.from.getFullYear() : new Date().getFullYear()}\n                          </span>\n                          <Button\n                            onClick={() => {\n                              const currentYear = tempMonthRange.from ? tempMonthRange.from.getFullYear() : new Date().getFullYear();\n                              const newDate = new Date(currentYear + 1, tempMonthRange.from ? tempMonthRange.from.getMonth() : 0, 1);\n                              setTempMonthRange(prev => ({ ...prev, from: newDate }));\n                            }}\n                            variant=\"outline\"\n                            size=\"sm\"\n                            className=\"button-base border border-gray-300 bg-white text-gray-600 hover:bg-gray-50\"\n                          >\n                            \n                          </Button>\n                        </div>\n                      </div>\n                      \n                      {/* 12  */}\n                      <div className=\"grid grid-cols-3 gap-2\">\n                        {Array.from({ length: 12 }, (_, i) => {\n                          const currentYear = tempMonthRange.from ? tempMonthRange.from.getFullYear() : new Date().getFullYear();\n                          const monthDate = new Date(currentYear, i, 1);\n                          const isSelected = tempMonthRange.from && \n                            tempMonthRange.from.getFullYear() === currentYear && \n                            tempMonthRange.from.getMonth() === i;\n                          \n                          return (\n                            <Button\n                              key={i}\n                              onClick={() => {\n                                setTempMonthRange(prev => ({ ...prev, from: monthDate }));\n                              }}\n                              variant=\"outline\"\n                              className={`button-base text-xs h-8 ${\n                                isSelected \n                                  ? 'bg-blue-500 text-white border-blue-500 hover:bg-blue-600' \n                                  : 'border-gray-300 bg-white text-gray-700 hover:bg-gray-50'\n                              }`}\n                            >\n                              {i + 1}\n                            </Button>\n                          );\n                        })}\n                      </div>\n                    </div>\n                    \n                    {tempMonthRange.from && (\n                      <div className=\"flex-1\">\n                        <div className=\"text-xs text-gray-500 mb-2\">   ()</div>\n                        {/*     */}\n                        <div className=\"mb-3\">\n                          <div className=\"flex items-center justify-between mb-2\">\n                            <Button\n                              onClick={() => {\n                                const currentYear = tempMonthRange.to ? tempMonthRange.to.getFullYear() : tempMonthRange.from.getFullYear();\n                                const newDate = new Date(currentYear - 1, tempMonthRange.to ? tempMonthRange.to.getMonth() : 11, 1);\n                                setTempMonthRange(prev => ({ ...prev, to: newDate }));\n                              }}\n                              variant=\"outline\"\n                              size=\"sm\"\n                              className=\"button-base border border-gray-300 bg-white text-gray-600 hover:bg-gray-50\"\n                            >\n                              \n                            </Button>\n                            <span className=\"text-sm font-medium text-gray-700\">\n                              {tempMonthRange.to ? tempMonthRange.to.getFullYear() : tempMonthRange.from.getFullYear()}\n                            </span>\n                            <Button\n                              onClick={() => {\n                                const currentYear = tempMonthRange.to ? tempMonthRange.to.getFullYear() : tempMonthRange.from.getFullYear();\n                                const newDate = new Date(currentYear + 1, tempMonthRange.to ? tempMonthRange.to.getMonth() : 11, 1);\n                                setTempMonthRange(prev => ({ ...prev, to: newDate }));\n                              }}\n                              variant=\"outline\"\n                              size=\"sm\"\n                              className=\"button-base border border-gray-300 bg-white text-gray-600 hover:bg-gray-50\"\n                            >\n                              \n                            </Button>\n                          </div>\n                        </div>\n                        \n                        {/*   12  */}\n                        <div className=\"grid grid-cols-3 gap-2\">\n                          {Array.from({ length: 12 }, (_, i) => {\n                            const currentYear = tempMonthRange.to ? tempMonthRange.to.getFullYear() : tempMonthRange.from.getFullYear();\n                            const monthDate = new Date(currentYear, i, 1);\n                            const isSelected = tempMonthRange.to && \n                              tempMonthRange.to.getFullYear() === currentYear && \n                              tempMonthRange.to.getMonth() === i;\n                            const isDisabled = monthDate < tempMonthRange.from;\n                            \n                            return (\n                              <Button\n                                key={i}\n                                onClick={() => {\n                                  if (!isDisabled) {\n                                    setTempMonthRange(prev => ({ ...prev, to: monthDate }));\n                                  }\n                                }}\n                                variant=\"outline\"\n                                disabled={isDisabled}\n                                className={`button-base text-xs h-8 ${\n                                  isSelected \n                                    ? 'bg-blue-500 text-white border-blue-500 hover:bg-blue-600' \n                                    : isDisabled\n                                    ? 'border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed'\n                                    : 'border-gray-300 bg-white text-gray-700 hover:bg-gray-50'\n                                }`}\n                              >\n                                {i + 1}\n                              </Button>\n                            );\n                          })}\n                        </div>\n                        \n                        <div className=\"mt-3\">\n                          <Button\n                            onClick={() => {\n                              setTempMonthRange(prev => ({ ...prev, to: undefined }));\n                            }}\n                            variant=\"outline\"\n                            size=\"sm\"\n                            className=\"button-base border border-gray-300 bg-white text-gray-600 hover:bg-gray-50 text-xs\"\n                          >\n                              \n                          </Button>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n                <div className=\"flex gap-2 p-3 pt-0\">\n                  <Button\n                    onClick={() => {\n                      setTempMonthRange({});\n                      setMonthPickerOpen(false);\n                    }}\n                    variant=\"outline\"\n                    className=\"button-base border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 flex-1\"\n                  >\n                    \n                  </Button>\n                  <Button\n                    onClick={() => {\n                      if (tempMonthRange.from) {\n                        if (tempMonthRange.to) {\n                          //  \n                          const rangeValue = `${format(tempMonthRange.from, 'yyyy-MM')}~${format(tempMonthRange.to, 'yyyy-MM')}`;\n                          setNewFilter(prev => ({ ...prev, value: rangeValue }));\n                        } else {\n                          //  \n                          setNewFilter(prev => ({ ...prev, value: format(tempMonthRange.from, 'yyyy-MM') }));\n                        }\n                        setMonthPickerOpen(false);\n                      }\n                    }}\n                    disabled={!tempMonthRange.from}\n                    className=\"button-base bg-blue-500 text-white hover:bg-blue-600 flex-1\"\n                  >\n                    \n                  </Button>\n                </div>\n              </div>\n            </PopoverContent>\n          </Popover>\n        )\n\n      default:\n        return null\n    }\n  }\n\n  return (\n    <div className=\"w-full space-y-3\">\n      {/*   */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          {/*   */}\n          <Popover open={isFilterOpen} onOpenChange={setIsFilterOpen}>\n            <PopoverTrigger asChild>\n              <Button \n                variant=\"outline\" \n                className=\"button-base border border-gray-300 bg-white text-gray-700 hover:bg-gray-50\"\n              >\n                <Sliders className=\"w-4 h-4 mr-1\" />\n                <span className=\"button-text\"></span>\n                {activeFilters.length > 0 && (\n                  <span className=\"ml-1 badge-stats bg-blue-50 text-blue-700\">\n                    {activeFilters.length}\n                  </span>\n                )}\n              </Button>\n            </PopoverTrigger>\n            <PopoverContent className=\"w-64 p-3\" align=\"start\">\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between\">\n                  <h4 className=\"card-title\"></h4>\n                  {activeFilters.length > 0 && (\n                    <Button\n                      variant=\"ghost\"\n                      onClick={handleClearAllFilters}\n                      className=\"button-base text-red-600 hover:text-red-700 hover:bg-red-50\"\n                    >\n                      <span className=\"button-text\"> </span>\n                    </Button>\n                  )}\n                </div>\n\n                {/*    */}\n                {activeFilters.length > 0 && (\n                  <div className=\"space-y-2\">\n                    {activeFilters.map(filter => (\n                      <div key={filter.id} className=\"flex items-center justify-between p-2 bg-gray-50 business-radius\">\n                        <span className=\"card-description\">\n                          {filter.label}\n                          {filter.dateField && (\n                            <span className=\"text-blue-600\">\n                              ({DATE_FIELDS.find(df => df.value === filter.dateField)?.label})\n                            </span>\n                          )}\n                          : {filter.value}\n                        </span>\n                        <Button\n                          variant=\"ghost\"\n                          onClick={() => handleRemoveFilter(filter.id)}\n                          className=\"button-base h-6 w-6 p-0 hover:bg-red-50\"\n                        >\n                          <X className=\"w-3 h-3\" />\n                        </Button>\n                      </div>\n                    ))}\n                    <div className=\"border-t border-gray-200 my-2\" />\n                  </div>\n                )}\n\n                {/*    */}\n                <div className=\"space-y-2\">\n                  <Select onValueChange={handleAddFilter}>\n                    <SelectTrigger className=\"button-base business-radius-button border border-gray-300 bg-white text-gray-700 [&>svg]:hidden text-center\">\n                      <SelectValue placeholder=\"+  \" />\n                    </SelectTrigger>\n                    <SelectContent \n                      className=\"w-64 max-h-80 overflow-y-auto\"\n                      style={{\n                        scrollbarWidth: 'auto',\n                        scrollbarColor: '#9ca3af #f3f4f6',\n                        WebkitScrollbarWidth: '8px'\n                      }}\n                    >\n                      {Object.entries(\n                        FILTER_FIELDS.reduce((acc, field) => {\n                          if (!acc[field.category]) acc[field.category] = []\n                          acc[field.category].push(field)\n                          return acc\n                        }, {} as Record<string, typeof FILTER_FIELDS>)\n                      ).map(([category, fields]) => (\n                        <div key={category}>\n                          <div className=\"px-2 py-1 card-description uppercase\">\n                            {category}\n                          </div>\n                          {fields.map(field => (\n                            <SelectItem key={field.key} value={field.key}>\n                              <div className=\"flex items-center gap-2\">\n                                <field.icon className=\"w-4 h-4\" />\n                                <span className=\"card-description\">{field.label}</span>\n                              </div>\n                            </SelectItem>\n                          ))}\n                        </div>\n                      ))}\n                    </SelectContent>\n                  </Select>\n\n                  {/*   UI */}\n                  {newFilter.field && (\n                    <div className=\"space-y-2 p-3 border business-radius bg-white\">\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"card-title\">{newFilter.label} </span>\n                      </div>\n                      \n                      {/*    */}\n                      {(newFilter.field === 'date_range' || newFilter.field === 'date_month') ? (\n                        <div className=\"grid grid-cols-2 gap-2\">\n                          {/*    */}\n                          <div className=\"flex items-start\">\n                            <Select \n                              value={newFilter.dateField || ''} \n                              onValueChange={(value) => setNewFilter(prev => ({ ...prev, dateField: value }))}\n                            >\n                              <SelectTrigger className=\"w-full button-base business-radius-button border border-gray-300 bg-white text-gray-700 [&>svg]:hidden text-center justify-center\">\n                                <SelectValue placeholder=\" \" className=\"text-center\" />\n                              </SelectTrigger>\n                              <SelectContent>\n                                {DATE_FIELDS.map(dateField => (\n                                  <SelectItem key={dateField.value} value={dateField.value}>\n                                    <span className=\"card-description\">{dateField.label}</span>\n                                  </SelectItem>\n                                ))}\n                              </SelectContent>\n                            </Select>\n                          </div>\n\n                          {/*    */}\n                          <div className=\"flex items-start\">\n                            {renderValueInput()}\n                          </div>\n                        </div>\n                      ) : (\n                        /*    -       */\n                        <div>\n                          {renderValueInput()}\n                        </div>\n                      )}\n\n                      <div className=\"flex gap-2\">\n                        <Button\n                          onClick={handleApplyFilter}\n                          disabled={\n                            !newFilter.field || \n                            newFilter.value === '' ||\n                            ((newFilter.field === 'date_range' || newFilter.field === 'date_month') && !newFilter.dateField)\n                          }\n                          className=\"button-base bg-blue-500 text-white hover:bg-blue-600 flex-1\"\n                        >\n                          \n                        </Button>\n                        <Button\n                          variant=\"outline\"\n                          onClick={() => setNewFilter({})}\n                          className=\"button-base border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 flex-1\"\n                        >\n                          \n                        </Button>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </PopoverContent>\n          </Popover>\n\n          {/*   */}\n          <Popover open={isSortOpen} onOpenChange={setIsSortOpen}>\n            <PopoverTrigger asChild>\n              <Button \n                variant=\"outline\" \n                className=\"button-base border border-gray-300 bg-white text-gray-700 hover:bg-gray-50\"\n              >\n                <ArrowUpDown className=\"w-4 h-4 mr-1\" />\n                <span className=\"button-text\"></span>\n                {sortConfig && (\n                  <span className=\"ml-1 card-description\">\n                    ({sortConfig.direction === 'asc' ? '' : ''})\n                  </span>\n                )}\n              </Button>\n            </PopoverTrigger>\n            <PopoverContent className=\"w-56 p-3\" align=\"start\">\n              <div className=\"space-y-3\">\n                <h4 className=\"card-title\"> </h4>\n                \n                <div className=\"space-y-2\">\n                  {/*    */}\n                  <div>\n                    <label className=\"text-xs text-gray-500 mb-1 block\"> </label>\n                    <Select \n                      value={tempSort.field || ''} \n                      onValueChange={handleSortFieldChange}\n                    >\n                      <SelectTrigger className=\"button-base business-radius-button border border-gray-300 bg-white text-gray-700 [&>svg]:hidden\">\n                        <SelectValue placeholder=\"\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {SORT_FIELDS.map(field => (\n                          <SelectItem key={field.value} value={field.value}>\n                            <span className=\"card-description\">{field.label}</span>\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  {/*    */}\n                  {tempSort.field && (\n                    <div>\n                      <label className=\"text-xs text-gray-500 mb-1 block\"> </label>\n                      <Select \n                        value={tempSort.direction || ''} \n                        onValueChange={handleSortDirectionChange}\n                      >\n                        <SelectTrigger className=\"button-base business-radius-button border border-gray-300 bg-white text-gray-700 [&>svg]:hidden\">\n                          <SelectValue placeholder=\"\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"asc\">\n                            <span className=\"card-description\"> </span>\n                          </SelectItem>\n                          <SelectItem value=\"desc\">\n                            <span className=\"card-description\"> </span>\n                          </SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  )}\n\n                  {/* /  */}\n                  <div className=\"flex gap-2 pt-2\">\n                    <Button \n                      onClick={handleApplySort}\n                      disabled={!tempSort.field || !tempSort.direction}\n                      className=\"button-base bg-blue-500 hover:bg-blue-600 text-white flex-1\"\n                    >\n                      \n                    </Button>\n                    <Button \n                      onClick={handleClearSort}\n                      className=\"button-base border border-gray-300 bg-white text-gray-700 hover:bg-gray-50\"\n                    >\n                      \n                    </Button>\n                  </div>\n                </div>\n\n                {sortConfig && (\n                  <div className=\"border-t pt-2\">\n                    <Button\n                      variant=\"outline\"\n                      onClick={() => onSortChange(null)}\n                      className=\"button-base w-full border border-gray-300 text-gray-700\"\n                    >\n                      <span className=\"button-text\"> </span>\n                    </Button>\n                  </div>\n                )}\n              </div>\n            </PopoverContent>\n          </Popover>\n\n          {/*   */}\n          <div className=\"flex items-center gap-2\">\n            {!isSearchExpanded ? (\n              <Button\n                variant=\"outline\"\n                onClick={() => setIsSearchExpanded(true)}\n                className=\"button-base border border-gray-300 bg-white text-gray-700 hover:bg-gray-50\"\n              >\n                <Search className=\"w-4 h-4 mr-1\" />\n                <span className=\"button-text\"></span>\n              </Button>\n            ) : (\n              <div className=\"flex items-center gap-2\">\n                <Input\n                  ref={searchInputRef}\n                  placeholder=\" ...\"\n                  value={searchTerm}\n                  onChange={(e) => onSearchChange(e.target.value)}\n                  className=\"w-64 business-radius-input button-base border border-gray-300 bg-white text-gray-700\"\n                />\n                <Button\n                  variant=\"ghost\"\n                  onClick={() => {\n                    setIsSearchExpanded(false)\n                    onSearchChange('')\n                  }}\n                  className=\"button-base h-8 w-8 p-0\"\n                >\n                  <X className=\"w-4 h-4\" />\n                </Button>\n              </div>\n            )}\n          </div>\n\n          {/*    */}\n          <Button\n            variant=\"outline\"\n            onClick={() => {\n              onSearchChange('')\n              onFiltersChange([])\n              onSortChange({\n                field: 'created_at',\n                direction: 'desc',\n                label: ''\n              })\n              setIsSearchExpanded(false)\n            }}\n            className=\"button-base border border-gray-300 bg-white text-blue-600 hover:bg-blue-50 hover:border-blue-300\"\n          >\n             <span className=\"button-text text-blue-600\"></span>\n          </Button>\n\n          {/*    (  ) */}\n          {showColumnSettings && (\n            <ColumnSettingsDropdown isVisible={true} />\n          )}\n        </div>\n      </div>\n\n      {/*    - badge-stats span  */}\n      {activeFilters.length > 0 && (\n        <div className=\"flex flex-wrap gap-2\">\n          {activeFilters.map(filter => (\n            <span\n              key={filter.id}\n              className=\"badge-stats flex items-center gap-1 bg-blue-50 text-blue-700 border border-blue-200\"\n            >\n              {filter.label}\n              {filter.dateField && (\n                <span className=\"text-blue-600\">\n                  ({DATE_FIELDS.find(df => df.value === filter.dateField)?.label})\n                </span>\n              )}\n              : {filter.value}\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => handleRemoveFilter(filter.id)}\n                className=\"h-4 w-4 p-0 hover:bg-blue-100 ml-1\"\n              >\n                <X className=\"w-3 h-3\" />\n              </Button>\n            </span>\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}","/**\n *     \n *       \n */\n\nexport type PurchaseRole = \n  | 'app_admin' \n  | 'ceo' \n  | 'middle_manager' \n  | 'final_approver' \n  | 'raw_material_manager' \n  | 'consumable_manager' \n  | 'purchase_manager' \n  | 'requester' \n  | 'lead buyer' \n  | 'buyer' \n  | 'hr';\n\n//   \nexport const MANAGER_ROLES: PurchaseRole[] = [\n  'purchase_manager',\n  'app_admin',\n  'raw_material_manager',\n  'consumable_manager'\n];\n\n//   \nexport const APPROVER_ROLES: PurchaseRole[] = [\n  'final_approver',\n  'app_admin',\n  'ceo',\n  'middle_manager',\n  'hr'\n];\n\n//   \nexport const HIDDEN_EMPLOYEES = [''];\n\n/**\n *    \n */\nexport function hasManagerRole(roles: string[]): boolean {\n  return MANAGER_ROLES.some(role => roles.includes(role));\n}\n\n/**\n *    \n */\nexport function hasApproverRole(roles: string[]): boolean {\n  return APPROVER_ROLES.some(role => roles.includes(role));\n}\n\n/**\n *    (  )\n * 1:   ( )\n * 2:   (   )\n * 3:   (app_admin, ceo -  )\n */\nexport function getRoleCase(roles: string[]): number {\n  if (!roles || roles.length === 0) return 1;\n  \n  // app_admin ceo   (case 3)\n  if (roles.includes('app_admin') || roles.includes('ceo')) return 3;\n  \n  //     (case 2)\n  if (roles.includes('consumable_manager') || \n      roles.includes('raw_material_manager') ||\n      roles.includes('purchase_manager')) return 2;\n  \n  // middle_manager  \n  if (roles.includes('middle_manager')) return 2;\n  \n  return 1;\n}\n\n/**\n *    \n */\nexport function filterByEmployeeVisibility<T extends { requester_name: string }>(\n  items: T[],\n  userRoles: string[]\n): T[] {\n  if (hasManagerRole(userRoles)) {\n    return items; //    \n  }\n  return items.filter(item => !HIDDEN_EMPLOYEES.includes(item.requester_name));\n}","\nimport { useState, lazy, Suspense, useEffect, useCallback, useMemo } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { usePurchaseMemory } from \"@/hooks/usePurchaseMemory\";\nimport FastPurchaseTable from \"@/components/purchase/FastPurchaseTable\";\nimport FilterToolbar, { FilterRule, SortRule } from \"@/components/purchase/FilterToolbar\";\nimport { updatePurchaseInMemory, loadAllPurchaseData } from \"@/services/purchaseDataLoader\";\nimport { markPurchaseAsPaymentCompleted, markPurchaseAsReceived, isCacheValid, purchaseMemoryCache } from '@/stores/purchaseMemoryStore';\n\nimport { Plus, Package, Info } from \"lucide-react\";\nimport { generatePurchaseOrderExcelJS, PurchaseOrderData } from \"@/utils/exceljs/generatePurchaseOrderExcel\";\n\n// Lazy load modal for better performance\nconst PurchaseItemsModal = lazy(() => import(\"@/components/purchase/PurchaseItemsModal\"));\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\n// Tabs     (hanslwebapp )\nimport { Button } from \"@/components/ui/button\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { toast } from \"sonner\";\nimport { Purchase } from \"@/types/purchase\";\nimport { hasManagerRole, getRoleCase, filterByEmployeeVisibility } from \"@/utils/roleHelper\";\nimport { logger } from \"@/lib/logger\";\n\ninterface PurchaseListMainProps {\n  //      \n  onEmailToggle?: () => void;\n  showEmailButton?: boolean;\n}\n\n//   () \nconst NAV_TABS: { key: string; label: string }[] = [\n  { key: 'pending', label: '' },\n  { key: 'purchase', label: ' ' },\n  { key: 'receipt', label: ' ' },\n  { key: 'done', label: ' ' },\n];\n\n//    \nexport default function PurchaseListMain({ showEmailButton = true }: PurchaseListMainProps) {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const supabase = createClient();\n  const [selectedPurchase, setSelectedPurchase] = useState<Purchase | null>(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  \n  //    \n  const [activeFilters, setActiveFilters] = useState<FilterRule[]>([]);\n  const [sortConfig, setSortConfig] = useState<SortRule | null>({\n    field: 'created_at',\n    direction: 'desc',\n    label: ''\n  });\n  const [searchTerm, setSearchTerm] = useState('');\n  const [availableEmployees, setAvailableEmployees] = useState<string[]>([]);\n  const [availableVendors, setAvailableVendors] = useState<string[]>([]);\n  const [availableContacts, setAvailableContacts] = useState<string[]>([]);\n  const [availablePaymentSchedules, setAvailablePaymentSchedules] = useState<string[]>([]);\n  \n  //     \n  const {\n    allPurchases: purchases,\n    loading,\n    currentUser,\n    getFilteredPurchases\n  } = usePurchaseMemory();\n  \n  const currentUserRoles = Array.isArray(currentUser?.purchase_role) \n    ? currentUser.purchase_role.map((r: string) => r.trim())\n    : typeof currentUser?.purchase_role === 'string' \n    ? currentUser.purchase_role.split(',').map((r: string) => r.trim())\n    : [];\n  \n  const currentUserName = currentUser?.name || null;\n  \n  //     \n  const [refreshTrigger, setRefreshTrigger] = useState(0)\n  \n  //     \n  const loadPurchases = useCallback(async () => {\n    console.log(' [loadPurchases]   ')\n    setRefreshTrigger(prev => prev + 1)\n  }, []);\n  \n  // Optimistic Update:    \n  const updatePurchaseOptimistic = useCallback((purchaseId: number, updater: (prev: Purchase) => Purchase) => {\n    updatePurchaseInMemory(purchaseId, updater)\n  }, []);\n  \n  const isAdmin = currentUserRoles?.includes('app_admin');\n  \n  //    (hanslwebapp  -  )\n  const [activeTab, setActiveTab] = useState('pending');\n  const [selectedEmployee, setSelectedEmployee] = useState<string>('');\n\n  //    (  )\n  const visiblePurchases = useMemo(() => {\n    return filterByEmployeeVisibility(purchases, currentUserRoles);\n  }, [purchases, currentUserRoles]);\n\n  // roleCase  (   )\n  const roleCase = useMemo(() => getRoleCase(currentUserRoles), [currentUserRoles]);\n\n  //     \n  const computeDefaultEmployee = useCallback((tabKey: string): string => {\n    if (!currentUserName) return 'all';\n    switch (roleCase) {\n      case 1:\n        if (tabKey === 'done') return 'all';\n        return currentUserName;\n      case 2:\n        if (tabKey === 'done') return 'all';\n        return currentUserName;\n      case 3:\n        return 'all';\n      default:\n        return currentUserName;\n    }\n  }, [currentUserName, roleCase]);\n\n  //       \n  useEffect(() => {\n    if (!currentUserName) return;\n    const defaultEmployee = computeDefaultEmployee(activeTab);\n    setSelectedEmployee(defaultEmployee);\n  }, [activeTab, currentUserName, computeDefaultEmployee]);\n\n  // URL    \n  useEffect(() => {\n    const searchParams = new URLSearchParams(location.search);\n    const tab = searchParams.get('tab');\n    if (tab && ['pending', 'purchase', 'receipt', 'done'].includes(tab)) {\n      setActiveTab(tab);\n    }\n  }, [location.search]);\n\n  //       \n  useEffect(() => {\n    const checkAndRefreshCache = async () => {\n      //      \n      if (!isCacheValid() || !purchaseMemoryCache.allPurchases) {\n        console.log(' [PurchaseListMain]   ,   ...', {\n          isCacheValid: isCacheValid(),\n          hasData: !!purchaseMemoryCache.allPurchases,\n          lastFetch: purchaseMemoryCache.lastFetch\n        });\n        \n        try {\n          await loadAllPurchaseData(currentUser?.id);\n          console.log(' [PurchaseListMain]   ');\n        } catch (error) {\n          console.error(' [PurchaseListMain]   :', error);\n        }\n      }\n    };\n    \n    checkAndRefreshCache();\n  }, [currentUser?.id]); // currentUser   \n\n  //    \n  useEffect(() => {\n    const loadFilterOptions = async () => {\n      try {\n        //   (employees )\n        const { data: employees } = await supabase\n          .from('employees')\n          .select('name');\n        \n        if (employees) {\n          const employeeNames = [...new Set(employees.map((e: any) => e.name).filter(Boolean))];\n          setAvailableEmployees(employeeNames as string[]);\n        }\n\n        //   (vendors )\n        const { data: vendors } = await supabase\n          .from('vendors')\n          .select('vendor_name');\n        \n        if (vendors) {\n          const vendorNames = [...new Set(vendors.map((v: any) => v.vendor_name).filter(Boolean))];\n          setAvailableVendors(vendorNames as string[]);\n        }\n\n        //   (vendor_contacts )\n        const { data: contacts } = await supabase\n          .from('vendor_contacts')\n          .select('contact_name');\n        \n        if (contacts) {\n          const contactNames = [...new Set(contacts.map((c: any) => c.contact_name).filter(Boolean))];\n          setAvailableContacts(contactNames as string[]);\n        }\n\n        //   (vendors  vendor_payment_schedule)\n        const { data: schedules } = await supabase\n          .from('vendors')\n          .select('vendor_payment_schedule');\n        \n        if (schedules) {\n          const scheduleNames = [...new Set(schedules.map((s: any) => s.vendor_payment_schedule).filter(Boolean))];\n          setAvailablePaymentSchedules(scheduleNames as string[]);\n        }\n      } catch (error) {\n        logger.error('    ', error);\n      }\n    };\n\n    loadFilterOptions();\n  }, [supabase]);\n\n\n  //     -  \n  const getStatusBadge = useCallback((purchase: Purchase) => {\n    if (purchase.is_received) {\n      return <span className=\"badge-stats bg-green-500 text-white\"></span>;\n    } else if (purchase.middle_manager_status === 'approved' && purchase.final_manager_status === 'approved') {\n      return <span className=\"badge-stats bg-blue-500 text-white\"></span>;\n    } else if (purchase.middle_manager_status === 'rejected' || purchase.final_manager_status === 'rejected') {\n      return <span className=\"badge-stats bg-red-500 text-white\"></span>;\n    } else {\n      return <span className=\"badge-stats bg-yellow-500 text-white\"></span>;\n    }\n  }, []);\n\n  //    \n  const getReceiptProgress = (purchase: Purchase) => {\n    if (!purchase.purchase_request_items || purchase.purchase_request_items.length === 0) {\n      return { received: 0, total: 0, percentage: 0 };\n    }\n    \n    const total = purchase.purchase_request_items.length;\n    const received = purchase.purchase_request_items.filter((item: any) => \n      item.is_received === true\n    ).length;\n    const percentage = total > 0 ? Math.round((received / total) * 100) : 0;\n    \n    return { received, total, percentage };\n  };\n  \n  //    \n  const getPurchaseProgress = (purchase: Purchase) => {\n    if (!purchase.purchase_request_items || purchase.purchase_request_items.length === 0) {\n      return { completed: 0, total: 0, percentage: 0 };\n    }\n    \n    const total = purchase.purchase_request_items.length;\n    const completed = purchase.purchase_request_items.filter((item: any) => \n      item.is_payment_completed === true\n    ).length;\n    const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;\n    \n    return { completed, total, percentage };\n  };\n\n  //   \n  const isAdvancePayment = (progress_type?: string) => {\n    return progress_type === '' || progress_type?.trim() === '' || progress_type?.includes('');\n  };\n\n  //     - useCallback \n  const getFieldValue = useCallback((purchase: Purchase, field: string): any => {\n    switch (field) {\n      case 'purchase_order_number':\n        return purchase.purchase_order_number;\n      case 'payment_category':\n        return purchase.payment_category;\n      case 'requester_name':\n        return purchase.requester_name;\n      case 'vendor_name':\n        return purchase.vendor_name;\n      case 'contact_name':\n        // vendor_contacts JOIN  -    \n        return '-'; // vendor_contacts JOIN \n      case 'item_name':\n        return purchase.purchase_request_items?.[0]?.item_name || '';\n      case 'specification':\n        return purchase.purchase_request_items?.[0]?.specification || '';\n      case 'quantity':\n        return purchase.purchase_request_items?.[0]?.quantity || 0;\n      case 'unit_price_value':\n        return purchase.purchase_request_items?.[0]?.unit_price_value || 0;\n      case 'total_amount':\n        return purchase.total_amount;\n      case 'remark':\n        return purchase.purchase_request_items?.[0]?.remark || '';\n      case 'project_vendor':\n        return purchase.project_vendor;\n      case 'project_item':\n        return purchase.project_item;\n      case 'sales_order_number':\n        return purchase.sales_order_number;\n      case 'payment_schedule':\n        // vendor_payment_schedule vendors   - JOIN \n        return '-';\n      case 'is_payment_completed':\n        //    \n        return purchase.is_payment_completed ? '' : '';\n      case 'is_received':\n        //    \n        return purchase.is_received ? '' : '';\n      case 'is_statement_received':\n        return purchase.is_statement_received ? '' : '';\n      case 'is_utk_checked':\n        return purchase.is_utk_checked ? '' : '';\n      case 'request_date':\n        return purchase.request_date;\n      case 'delivery_request_date':\n        return purchase.delivery_request_date;\n      case 'payment_completed_at':\n        return purchase.payment_completed_at;\n      case 'received_at':\n        return purchase.received_at;\n      case 'created_at':\n        return purchase.created_at;\n      case 'statement_received_at':\n        return purchase.purchase_request_items?.[0]?.statement_received_date || null;\n      default:\n        return null;\n    }\n  }, []);\n\n  //     - useCallback \n  const applyFilterCondition = useCallback((fieldValue: any, condition: string, filterValue: any, filterField?: string): boolean => {\n    if (fieldValue === null || fieldValue === undefined) {\n      return condition === 'is_empty';\n    }\n\n    //      (~)\n    if (filterField === 'date_range' && filterValue && typeof filterValue === 'string' && filterValue.includes('~')) {\n      if (!fieldValue) return false;\n      \n      const [startDate, endDate] = filterValue.split('~');\n      const fieldDate = new Date(fieldValue);\n      const start = new Date(startDate);\n      const end = new Date(endDate);\n      \n      //       \n      return fieldDate >= start && fieldDate <= end;\n    }\n\n    //      (~)\n    if (filterField === 'date_month' && filterValue && typeof filterValue === 'string' && filterValue.includes('~')) {\n      if (!fieldValue) return false;\n      \n      const [startMonth, endMonth] = filterValue.split('~');\n      const fieldDate = new Date(fieldValue);\n      const start = new Date(`${startMonth}-01`);\n      const end = new Date(`${endMonth}-01`);\n      \n      //    (    )\n      const endOfMonth = new Date(end.getFullYear(), end.getMonth() + 1, 0, 23, 59, 59);\n      return fieldDate >= start && fieldDate <= endOfMonth;\n    }\n\n    //     ( )\n    if (filterField && (filterField === 'date_month' || filterField.endsWith('_month'))) {\n      if (!filterValue) return true;\n      \n      const fieldDate = new Date(fieldValue);\n      const [filterYear, filterMonth] = filterValue.split('-');\n      \n      return fieldDate.getFullYear() === parseInt(filterYear) && \n             (fieldDate.getMonth() + 1) === parseInt(filterMonth);\n    }\n\n    const fieldStr = String(fieldValue).toLowerCase();\n    const filterStr = String(filterValue).toLowerCase();\n\n    switch (condition) {\n      case 'contains':\n        return fieldStr.includes(filterStr);\n      case 'equals':\n        //      \n        if (filterField === 'date_range' || filterValue.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}/)) {\n          if (!fieldValue) return false;\n          try {\n            const fieldDate = new Date(fieldValue).toISOString().split('T')[0];\n            const filterDate = filterValue.split('T')[0];\n            return fieldDate === filterDate;\n          } catch (error) {\n            logger.error('  :', error);\n            return false;\n          }\n        }\n        return fieldStr === filterStr;\n      case 'starts_with':\n        return fieldStr.startsWith(filterStr);\n      case 'ends_with':\n        return fieldStr.endsWith(filterStr);\n      case 'is_empty':\n        return !fieldValue || fieldStr.trim() === '';\n      case 'is_not_empty':\n        return !!fieldValue && fieldStr.trim() !== '';\n      case 'greater_than':\n        return Number(fieldValue) > Number(filterValue);\n      case 'less_than':\n        return Number(fieldValue) < Number(filterValue);\n      case 'between':\n        //    \n        return true;\n      case 'after':\n        return new Date(fieldValue) > new Date(filterValue);\n      case 'before':\n        return new Date(fieldValue) < new Date(filterValue);\n      case 'not_equals':\n        return fieldStr !== filterStr;\n      default:\n        return true;\n    }\n  }, []);\n\n\n  //    - 60  \n  const baseFilteredPurchases = useMemo(() => {\n    const hasAnyFilter = activeFilters.length > 0 || searchTerm.trim() !== '' || \n                        (selectedEmployee && selectedEmployee !== 'all' && selectedEmployee !== '');\n\n    let dateStart: string | undefined;\n    let dateEnd: string | undefined;\n    \n    if (!hasAnyFilter) {\n      //    60\n      const sixtyDaysAgo = new Date();\n      sixtyDaysAgo.setDate(sixtyDaysAgo.getDate() - 60);\n      dateStart = sixtyDaysAgo.toISOString().split('T')[0];\n    }\n    \n    const employeeName = selectedEmployee === 'all' || selectedEmployee === '' ? null : selectedEmployee;\n    \n    \n    return getFilteredPurchases({\n      tab: activeTab as any,\n      employeeName,\n      searchTerm,\n      advancedFilters: activeFilters,\n      startDate: dateStart,\n      sortConfig: sortConfig ? { key: sortConfig.field, direction: sortConfig.direction } : undefined\n    });\n  }, [getFilteredPurchases, activeTab, selectedEmployee, searchTerm, activeFilters, sortConfig, purchases]);\n\n  //       \n  const tabFilteredPurchases = baseFilteredPurchases;\n\n\n  //      \n  const filteredTabCounts = useMemo(() => {\n    const hasAnyFilter = activeFilters.length > 0 || searchTerm.trim() !== '' || \n                        (selectedEmployee && selectedEmployee !== 'all' && selectedEmployee !== '');\n\n    let dateStart: string | undefined;\n    \n    if (!hasAnyFilter) {\n      const sixtyDaysAgo = new Date();\n      sixtyDaysAgo.setDate(sixtyDaysAgo.getDate() - 60);\n      dateStart = sixtyDaysAgo.toISOString().split('T')[0];\n    }\n    \n    const employeeName = selectedEmployee === 'all' || selectedEmployee === '' ? null : selectedEmployee;\n    \n    const filterOptions = {\n      employeeName,\n      searchTerm,\n      advancedFilters: activeFilters,\n      startDate: dateStart,\n      sortConfig: sortConfig ? { key: sortConfig.field, direction: sortConfig.direction } : undefined\n    };\n\n    return {\n      pending: getFilteredPurchases({ tab: 'pending', ...filterOptions }).length,\n      purchase: getFilteredPurchases({ tab: 'purchase', ...filterOptions }).length, \n      receipt: getFilteredPurchases({ tab: 'receipt', ...filterOptions }).length,\n      done: getFilteredPurchases({ tab: 'done', ...filterOptions }).length,\n    };\n  }, [getFilteredPurchases, selectedEmployee, searchTerm, activeFilters, sortConfig]);\n\n\n  //      \n  const monthlyFilterSummary = useMemo(() => {\n    //     \n    const monthFilters = activeFilters.filter(filter => \n      filter.field === 'date_month' || \n      (filter.field === 'date_range' && filter.dateField && filter.dateField.includes('_month'))\n    );\n    \n    if (monthFilters.length === 0) return null;\n    \n    const monthFilter = monthFilters[0];\n    const filterValue = monthFilter.value;\n    \n    //       \n    if (filterValue && typeof filterValue === 'string' && filterValue.includes('~')) {\n      //   (: \"2024-04~2024-09\")\n      const [startMonth, endMonth] = filterValue.split('~');\n      const startDate = new Date(`${startMonth}-01`);\n      const endDate = new Date(`${endMonth}-01`);\n      \n      const monthlyTotals = [];\n      let totalSum = 0;\n      \n      //   \n      const currentDate = new Date(startDate);\n      while (currentDate <= endDate) {\n        const year = currentDate.getFullYear();\n        const month = currentDate.getMonth() + 1;\n        const monthStr = `${year}-${month.toString().padStart(2, '0')}`;\n        \n        //    \n        const monthData = tabFilteredPurchases.filter(purchase => {\n          const purchaseDate = new Date(purchase.request_date);\n          return purchaseDate.getFullYear() === year && \n                 (purchaseDate.getMonth() + 1) === month;\n        });\n        \n        //    \n        const monthTotal = monthData.reduce((sum, purchase) => {\n          // items amount_value   total_amount \n          if (purchase.purchase_request_items?.length) {\n            const itemsTotal = purchase.purchase_request_items.reduce((itemSum: number, item: any) => {\n              return itemSum + (item.amount_value || 0);\n            }, 0);\n            return sum + itemsTotal;\n          }\n          return sum + (purchase.total_amount || 0);\n        }, 0);\n        \n        monthlyTotals.push({\n          year,\n          month,\n          monthStr,\n          total: monthTotal,\n          count: monthData.length\n        });\n        \n        totalSum += monthTotal;\n        \n        //   \n        currentDate.setMonth(currentDate.getMonth() + 1);\n      }\n      \n      return {\n        type: 'range',\n        months: monthlyTotals,\n        grandTotal: totalSum\n      };\n    } else {\n      //    (: \"2024-10\")\n      const [year, month] = (typeof filterValue === 'string' ? filterValue : '').split('-');\n      const monthData = tabFilteredPurchases.filter(purchase => {\n        const purchaseDate = new Date(purchase.request_date);\n        return purchaseDate.getFullYear() === parseInt(year) && \n               (purchaseDate.getMonth() + 1) === parseInt(month);\n      });\n      \n      const monthTotal = monthData.reduce((sum, purchase) => {\n        // items amount_value   total_amount \n        if (purchase.purchase_request_items?.length) {\n          const itemsTotal = purchase.purchase_request_items.reduce((itemSum: number, item: any) => {\n            return itemSum + (item.amount_value || 0);\n          }, 0);\n          return sum + itemsTotal;\n        }\n        return sum + (purchase.total_amount || 0);\n      }, 0);\n      \n      return {\n        type: 'single',\n        year: parseInt(year),\n        month: parseInt(month),\n        total: monthTotal,\n        count: monthData.length\n      };\n    }\n  }, [activeFilters, tabFilteredPurchases]);\n\n\n  //  \n  const handleExcelDownload = async (purchase: Purchase) => {\n    try {\n      // DB    \n      const { data: purchaseRequest, error: requestError } = await supabase\n        .from('purchase_requests')\n        .select('*')\n        .eq('purchase_order_number', purchase.purchase_order_number)\n        .single();\n\n      if (requestError || !purchaseRequest) {\n        toast.error('     .');\n        return;\n      }\n\n      //   \n      const { data: orderItems, error: itemsError } = await supabase\n        .from('purchase_request_items')\n        .select('*')\n        .eq('purchase_order_number', purchase.purchase_order_number)\n        .order('line_number');\n\n      if (itemsError || !orderItems || orderItems.length === 0) {\n        toast.error('      .');\n        return;\n      }\n\n      //       \n      const vendorInfo = {\n        vendor_name: purchase.vendor_name,\n        vendor_phone: '',\n        vendor_fax: '',\n        vendor_contact_name: ''\n      };\n\n      try {\n        const vendorId = purchaseRequest.vendor_id || purchase.vendor_id;\n        const contactId = purchaseRequest.contact_id || purchase.contact_id;\n        \n        // vendor  \n        if (vendorId) {\n          const { data: vendorData, error: vendorError } = await supabase\n            .from('vendors')\n            .select('vendor_phone, vendor_fax')\n            .eq('id', vendorId)\n            .single();\n\n          if (vendorData && !vendorError) {\n            vendorInfo.vendor_phone = vendorData.vendor_phone || '';\n            vendorInfo.vendor_fax = vendorData.vendor_fax || '';\n          }\n        }\n\n        // vendor_contacts contact_id   \n        if (contactId) {\n          const { data: contactData, error: contactError } = await supabase\n            .from('vendor_contacts')\n            .select('contact_name, contact_phone, contact_email')\n            .eq('id', contactId)\n            .single();\n          if (contactData && !contactError) {\n            vendorInfo.vendor_contact_name = contactData.contact_name || '';\n          }\n        }\n      } catch (error) {\n      }\n\n      const excelData: PurchaseOrderData = {\n        purchase_order_number: purchaseRequest.purchase_order_number || '',\n        request_date: purchaseRequest.request_date,\n        delivery_request_date: purchaseRequest.delivery_request_date,\n        requester_name: purchaseRequest.requester_name,\n        vendor_name: vendorInfo.vendor_name || '',\n        vendor_contact_name: vendorInfo.vendor_contact_name,\n        vendor_phone: vendorInfo.vendor_phone,\n        vendor_fax: vendorInfo.vendor_fax,\n        project_vendor: purchaseRequest.project_vendor,\n        sales_order_number: purchaseRequest.sales_order_number,\n        project_item: purchaseRequest.project_item,\n        items: orderItems.map((item: any) => ({\n          line_number: item.line_number,\n          item_name: item.item_name,\n          specification: item.specification,\n          quantity: item.quantity,\n          unit_price_value: item.unit_price_value,\n          amount_value: item.amount_value,\n          remark: item.remark,\n          currency: purchaseRequest.currency || 'KRW'\n        }))\n      };\n\n      //   ExcelJS  (    )\n      const blob = await generatePurchaseOrderExcelJS(excelData);\n      \n      //  : _{}_\n      const downloadFilename = `_${excelData.vendor_name}_${excelData.purchase_order_number}.xlsx`;\n\n      //    \n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = downloadFilename;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n      \n      toast.success('  .');\n      \n      // DB   (is_po_download)  - lead buyer \n      try {\n        const isLeadBuyer = currentUserRoles && currentUserRoles.includes('lead buyer');\n\n        if (isLeadBuyer) {\n          const { error: downloadFlagErr } = await supabase\n            .from('purchase_requests')\n            .update({ is_po_download: true })\n            .eq('purchase_order_number', purchase.purchase_order_number);\n          if (downloadFlagErr) {\n          } else {\n            //  \n            await loadPurchases();\n          }\n        }\n      } catch (flagErr) {\n      }\n    } catch (error) {\n      toast.error('  .');\n    }\n  };\n\n  //   -    \n  const handleReceiptComplete = useCallback(async (purchaseId: number) => {\n    try {\n      const currentTime = new Date().toISOString();\n      \n      //    \n      const [requestResult, itemsResult] = await Promise.all([\n        supabase\n          .from('purchase_requests')\n          .update({ \n            is_received: true,\n            received_at: currentTime\n          })\n          .eq('id', purchaseId),\n        supabase\n          .from('purchase_request_items')\n          .update({ \n            is_received: true,\n            delivery_status: 'received'\n          })\n          .eq('purchase_request_id', purchaseId)\n      ]);\n\n      if (requestResult.error) throw requestResult.error;\n      if (itemsResult.error) throw itemsResult.error;\n      \n      //      (UI  )\n      const memoryUpdated = markPurchaseAsReceived(purchaseId);\n      if (!memoryUpdated) {\n        logger.warn('[PurchaseListMain]     ', { purchaseId });\n      }\n      \n      toast.success(' .');\n      await loadPurchases();\n    } catch (error) {\n      toast.error('   .');\n    }\n  }, [supabase, loadPurchases]);\n\n  const handlePaymentComplete = useCallback(async (purchaseId: number) => {\n    try {\n      const currentTime = new Date().toISOString();\n      \n      //    \n      const [requestResult, itemsResult] = await Promise.all([\n        supabase\n          .from('purchase_requests')\n          .update({ \n            is_payment_completed: true,\n            payment_completed_at: currentTime\n          })\n          .eq('id', purchaseId),\n        supabase\n          .from('purchase_request_items')\n          .update({ \n            is_payment_completed: true,\n            payment_completed_at: currentTime\n          })\n          .eq('purchase_request_id', purchaseId)\n      ]);\n\n      if (requestResult.error) throw requestResult.error;\n      if (itemsResult.error) throw itemsResult.error;\n      \n      //      (UI  )\n      const memoryUpdated = markPurchaseAsPaymentCompleted(purchaseId);\n      if (!memoryUpdated) {\n        logger.warn('[PurchaseListMain]    ,  ', { purchaseId });\n        await loadPurchases(); // fallback:      \n      }\n      \n      toast.success(' .');\n    } catch (error) {\n      logger.error('[PurchaseListMain]   :', error);\n      toast.error('   .');\n    }\n  }, [supabase, loadPurchases]);\n\n  const handleItemsClick = useCallback((purchase: Purchase) => {\n    setSelectedPurchase(purchase);\n    setIsModalOpen(true);\n  }, []);\n  \n  //    -   \n  const modalPurchaseData = useMemo(() => {\n    if (!selectedPurchase) return null;\n    return {\n      ...selectedPurchase,\n      vendor_name: selectedPurchase.vendor_name || '',\n      project_vendor: selectedPurchase.project_vendor || '',\n      sales_order_number: selectedPurchase.sales_order_number || '',\n      project_item: selectedPurchase.project_item || ''\n    };\n  }, [selectedPurchase]);\n\n  return (\n    <div className=\"w-full\">\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4\">\n        <div>\n          <h1 className=\"page-title\"> </h1>\n          <p className=\"page-subtitle\" style={{marginTop:'-2px',marginBottom:'-4px'}}>Purchase Management</p>\n        </div>\n        <Button \n          onClick={() => navigate('/purchase/new')}\n          className=\"mt-4 sm:mt-0 bg-hansl-500 hover:bg-hansl-600\"\n        >\n          <Plus className=\"w-4 h-4 mr-2\" />\n            \n        </Button>\n      </div>\n\n      {/*    -       */}\n      <div className=\"mb-3\">\n        <FilterToolbar\n          activeFilters={activeFilters}\n          sortConfig={sortConfig}\n          searchTerm={searchTerm}\n          onFiltersChange={setActiveFilters}\n          onSortChange={setSortConfig}\n          onSearchChange={setSearchTerm}\n          availableEmployees={availableEmployees}\n          availableVendors={availableVendors}\n          availableContacts={availableContacts}\n          availablePaymentSchedules={availablePaymentSchedules}\n          showColumnSettings={true}\n          activeTab={activeTab}\n        />\n        {/*       */}\n        {activeFilters.length === 0 && !searchTerm.trim() && (\n          <div className=\"mt-2 flex items-center gap-1.5 text-xs text-gray-500\">\n            <Info className=\"w-3.5 h-3.5\" />\n            <span> 60  .      .</span>\n          </div>\n        )}\n      </div>\n\n      {/*    (hanslwebapp ) -   */}\n      <div className=\"space-y-3\">\n        {/*   -    */}\n        <div className=\"flex flex-col sm:flex-row sm:space-x-1 space-y-1 sm:space-y-0 bg-gray-50 p-1 business-radius-card border border-gray-200\">\n          {NAV_TABS.map((tab) => (\n            <button\n              key={tab.key}\n              onClick={() => {\n                setActiveTab(tab.key);\n              }}\n              className={`flex-1 flex items-center justify-center space-x-2 py-1.5 px-3 sm:px-4 business-radius-button button-text font-medium transition-colors ${\n                activeTab === tab.key\n                  ? 'text-hansl-600 bg-white shadow-sm border border-gray-200'\n                  : 'text-gray-600 bg-transparent hover:text-gray-900 hover:bg-white/50'\n              }`}\n            >\n              <span className=\"whitespace-nowrap\">{tab.label}</span>\n              <span \n                className={\n                  `badge-stats ${\n                    activeTab === tab.key \n                      ? 'bg-hansl-50 text-hansl-700' \n                      : 'bg-gray-100 text-gray-600'\n                  }`\n                }\n              >\n                {filteredTabCounts[tab.key as keyof typeof filteredTabCounts]}\n              </span>\n            </button>\n          ))}\n        </div>\n\n        {/*       */}\n        {monthlyFilterSummary && (\n          <div className=\"mb-3\">\n            {monthlyFilterSummary.type === 'single' ? (\n              //    -    \n              <div className=\"inline-flex items-center gap-2 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 business-radius-badge px-3 py-2 shadow-sm\">\n                <div className=\"flex items-center gap-1.5\">\n                  <div className=\"w-1.5 h-1.5 bg-blue-500 rounded-full\"></div>\n                  <span className=\"card-subtitle text-gray-700\">\n                    {monthlyFilterSummary.year} {monthlyFilterSummary.month}\n                  </span>\n                  <span className=\"badge-text text-gray-500\">\n                    {monthlyFilterSummary.count}\n                  </span>\n                </div>\n                <div className=\"h-4 w-px bg-blue-300\"></div>\n                <span className=\"modal-value text-blue-700 font-semibold\">\n                  {monthlyFilterSummary.total?.toLocaleString() || '0'}\n                </span>\n              </div>\n            ) : (\n              //   \n              <Card className=\"business-radius-card border border-gray-200 shadow-sm\">\n                <CardHeader className=\"pb-3 pt-4 px-4\">\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"flex items-center gap-2\">\n                      <div className=\"w-1.5 h-1.5 bg-blue-500 rounded-full\"></div>\n                      <CardTitle className=\"section-title text-gray-800\">  </CardTitle>\n                    </div>\n                    {/*      */}\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"badge-text text-gray-600\">\n                        ({monthlyFilterSummary.months?.reduce((sum, m) => sum + m.count, 0) || 0})\n                      </span>\n                      <div className=\"h-4 w-px bg-gray-300\"></div>\n                      <span className=\"modal-value text-gray-500 font-bold\">\n                        {monthlyFilterSummary.grandTotal?.toLocaleString() || '0'}\n                      </span>\n                    </div>\n                  </div>\n                </CardHeader>\n                <CardContent className=\"px-4 pb-4\">\n                  {/*   -     */}\n                  <div className=\"flex gap-2 overflow-x-auto pb-2\">\n                    {monthlyFilterSummary.months?.map((monthData) => (\n                      <div \n                        key={monthData.monthStr} \n                        className=\"bg-gray-50 business-radius-card px-3 py-1.5 border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all flex-shrink-0\"\n                      >\n                        <div className=\"flex items-baseline gap-1.5\">\n                          <span className=\"modal-value font-bold text-gray-800 whitespace-nowrap\">\n                            {monthData.month}\n                          </span>\n                          <span className=\"text-[9px] text-gray-500 whitespace-nowrap\">\n                            ({monthData.count})\n                          </span>\n                          <span className=\"modal-value text-gray-500 font-bold whitespace-nowrap ml-1\">\n                            {monthData.total.toLocaleString()}\n                          </span>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        )}\n\n        {/*   */}\n        <Card className=\"overflow-hidden border border-gray-200\">\n          <CardContent className=\"p-0\">\n            {loading ? (\n              <div className=\"flex items-center justify-center py-12\">\n                <div className=\"w-8 h-8 border-2 border-hansl-500 border-t-transparent rounded-full animate-spin\" />\n                <span className=\"ml-3 card-subtitle\"> ...</span>\n              </div>\n            ) : tabFilteredPurchases.length === 0 ? (\n              <div className=\"text-center py-12\">\n                <Package className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\"> </h3>\n                <p className=\"card-subtitle\">  .</p>\n              </div>\n            ) : (\n              <FastPurchaseTable \n                purchases={tabFilteredPurchases} \n                activeTab={activeTab}\n                currentUserRoles={currentUserRoles}\n                onRefresh={loadPurchases}\n                onOptimisticUpdate={updatePurchaseOptimistic}\n                onPaymentComplete={handlePaymentComplete}\n                onReceiptComplete={handleReceiptComplete}\n              />\n            )}\n          </CardContent>\n        </Card>\n      </div>\n      \n      {/*   -     */}\n      {modalPurchaseData && (\n        <Suspense fallback={<div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\"><div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-white\"></div></div>}>\n          <PurchaseItemsModal\n            isOpen={isModalOpen}\n            onClose={() => {\n              setIsModalOpen(false);\n              setSelectedPurchase(null);\n            }}\n            purchase={modalPurchaseData}\n            isAdmin={isAdmin || false}\n            onUpdate={loadPurchases}\n            activeTab={activeTab}\n          />\n        </Suspense>\n      )}\n    </div>\n  );\n}"],"file":"assets/PurchaseListMain-D9uXeo8a.js"}