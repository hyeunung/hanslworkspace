{"version":3,"file":"TransactionStatementMain-D3jgPb07.js","sources":["../../node_modules/lucide-react/dist/esm/icons/circle-x.js","../../node_modules/lucide-react/dist/esm/icons/refresh-cw.js","../../node_modules/lucide-react/dist/esm/icons/rotate-cw.js","../../node_modules/lucide-react/dist/esm/icons/sliders-horizontal.js","../../node_modules/lucide-react/dist/esm/icons/wand-sparkles.js","../../src/components/transaction-statement/StatementUploadModal.tsx","../../src/components/transaction-statement/StatementImageViewer.tsx","../../src/components/transaction-statement/StatementConfirmModal.tsx","../../src/components/transaction-statement/TransactionStatementMain.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.541.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m15 9-6 6\", key: \"1uzhvr\" }],\n  [\"path\", { d: \"m9 9 6 6\", key: \"z0biqf\" }]\n];\nconst CircleX = createLucideIcon(\"circle-x\", __iconNode);\n\nexport { __iconNode, CircleX as default };\n//# sourceMappingURL=circle-x.js.map\n","/**\n * @license lucide-react v0.541.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n];\nconst RefreshCw = createLucideIcon(\"refresh-cw\", __iconNode);\n\nexport { __iconNode, RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-react v0.541.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8\", key: \"1p45f6\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }]\n];\nconst RotateCw = createLucideIcon(\"rotate-cw\", __iconNode);\n\nexport { __iconNode, RotateCw as default };\n//# sourceMappingURL=rotate-cw.js.map\n","/**\n * @license lucide-react v0.541.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"line\", { x1: \"21\", x2: \"14\", y1: \"4\", y2: \"4\", key: \"obuewd\" }],\n  [\"line\", { x1: \"10\", x2: \"3\", y1: \"4\", y2: \"4\", key: \"1q6298\" }],\n  [\"line\", { x1: \"21\", x2: \"12\", y1: \"12\", y2: \"12\", key: \"1iu8h1\" }],\n  [\"line\", { x1: \"8\", x2: \"3\", y1: \"12\", y2: \"12\", key: \"ntss68\" }],\n  [\"line\", { x1: \"21\", x2: \"16\", y1: \"20\", y2: \"20\", key: \"14d8ph\" }],\n  [\"line\", { x1: \"12\", x2: \"3\", y1: \"20\", y2: \"20\", key: \"m0wm8r\" }],\n  [\"line\", { x1: \"14\", x2: \"14\", y1: \"2\", y2: \"6\", key: \"14e1ph\" }],\n  [\"line\", { x1: \"8\", x2: \"8\", y1: \"10\", y2: \"14\", key: \"1i6ji0\" }],\n  [\"line\", { x1: \"16\", x2: \"16\", y1: \"18\", y2: \"22\", key: \"1lctlv\" }]\n];\nconst SlidersHorizontal = createLucideIcon(\"sliders-horizontal\", __iconNode);\n\nexport { __iconNode, SlidersHorizontal as default };\n//# sourceMappingURL=sliders-horizontal.js.map\n","/**\n * @license lucide-react v0.541.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72\",\n      key: \"ul74o6\"\n    }\n  ],\n  [\"path\", { d: \"m14 7 3 3\", key: \"1r5n42\" }],\n  [\"path\", { d: \"M5 6v4\", key: \"ilb8ba\" }],\n  [\"path\", { d: \"M19 14v4\", key: \"blhpug\" }],\n  [\"path\", { d: \"M10 2v2\", key: \"7u0qdc\" }],\n  [\"path\", { d: \"M7 8H3\", key: \"zfb6yr\" }],\n  [\"path\", { d: \"M21 16h-4\", key: \"1cnmox\" }],\n  [\"path\", { d: \"M11 3H9\", key: \"1obp7u\" }]\n];\nconst WandSparkles = createLucideIcon(\"wand-sparkles\", __iconNode);\n\nexport { __iconNode, WandSparkles as default };\n//# sourceMappingURL=wand-sparkles.js.map\n","import { useState, useRef } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Upload, X, Image as ImageIcon, Loader2 } from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport transactionStatementService from \"@/services/transactionStatementService\";\n\ninterface StatementUploadModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: (statementId: string, imageUrl: string) => void;\n}\n\n/**\n * ê±°ë˜ëª…ì„¸ì„œ ì´ë¯¸ì§€ ì—…ë¡œë“œ ëª¨ë‹¬\n */\nexport default function StatementUploadModal({\n  isOpen,\n  onClose,\n  onSuccess,\n}: StatementUploadModalProps) {\n  const [file, setFile] = useState<File | null>(null);\n  const [preview, setPreview] = useState<string | null>(null);\n  const [uploading, setUploading] = useState(false);\n  const [uploaderName, setUploaderName] = useState<string>(\"\");\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const supabase = createClient();\n\n  // í˜„ì¬ ì‚¬ìš©ì ì´ë¦„ ê°€ì ¸ì˜¤ê¸°\n  const loadUserName = async () => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (user?.email) {\n        const { data: employee } = await supabase\n          .from('employees')\n          .select('name')\n          .eq('email', user.email)\n          .single();\n        \n        if (employee?.name) {\n          setUploaderName(employee.name);\n        }\n      }\n    } catch (e) {\n      console.warn('Failed to load user name:', e);\n    }\n  };\n\n  // ëª¨ë‹¬ ì—´ë¦´ ë•Œ ì‚¬ìš©ì ì´ë¦„ ë¡œë“œ\n  useState(() => {\n    if (isOpen) {\n      loadUserName();\n    }\n  });\n\n  // íŒŒì¼ ì„ íƒ ì²˜ë¦¬\n  const handleFileSelect = (selectedFile: File) => {\n    if (!selectedFile.type.startsWith('image/')) {\n      toast.error('ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');\n      return;\n    }\n\n    if (selectedFile.size > 10 * 1024 * 1024) {\n      toast.error('íŒŒì¼ í¬ê¸°ëŠ” 10MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.');\n      return;\n    }\n\n    setFile(selectedFile);\n\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      setPreview(reader.result as string);\n    };\n    reader.readAsDataURL(selectedFile);\n  };\n\n  // ë“œë˜ê·¸ì•¤ë“œë¡­ ì²˜ë¦¬\n  const handleDrop = (e: React.DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const droppedFile = e.dataTransfer.files[0];\n    if (droppedFile) {\n      handleFileSelect(droppedFile);\n    }\n  };\n\n  const handleDragOver = (e: React.DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  const handleClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFile = e.target.files?.[0];\n    if (selectedFile) {\n      handleFileSelect(selectedFile);\n    }\n  };\n\n  const handleRemoveFile = () => {\n    setFile(null);\n    setPreview(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const handleUpload = async () => {\n    if (!file) {\n      toast.error('íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n      return;\n    }\n\n    try {\n      setUploading(true);\n\n      const result = await transactionStatementService.uploadStatement(\n        file,\n        uploaderName || 'ì•Œ ìˆ˜ ì—†ìŒ'\n      );\n\n      if (result.success && result.data) {\n        toast.success('ì—…ë¡œë“œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');\n        onSuccess(result.data.statementId, result.data.imageUrl);\n        handleClose();\n      } else {\n        toast.error(result.error || 'ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n      }\n    } catch (error) {\n      toast.error('ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const handleClose = () => {\n    if (uploading) return;\n    \n    setFile(null);\n    setPreview(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n    onClose();\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={handleClose}>\n      <DialogContent className=\"sm:max-w-[480px] business-radius-modal\">\n        <DialogHeader className=\"border-b border-gray-100 pb-3\">\n          <DialogTitle className=\"flex items-center gap-2 text-[13px] font-bold text-gray-900\">\n            <Upload className=\"w-4 h-4 text-hansl-600\" />\n            ê±°ë˜ëª…ì„¸ì„œ ì—…ë¡œë“œ\n          </DialogTitle>\n        </DialogHeader>\n\n        <div className=\"py-4\">\n          {/* ë“œë˜ê·¸ì•¤ë“œë¡­ ì˜ì—­ */}\n          <div\n            className={`\n              border-2 border-dashed business-radius-card p-6 text-center cursor-pointer transition-colors\n              ${preview \n                ? 'border-hansl-300 bg-hansl-50' \n                : 'border-gray-200 hover:border-hansl-300 hover:bg-gray-50'\n              }\n            `}\n            onDrop={handleDrop}\n            onDragOver={handleDragOver}\n            onClick={handleClick}\n          >\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={handleInputChange}\n              className=\"hidden\"\n            />\n\n            {preview ? (\n              <div className=\"relative\">\n                <img\n                  src={preview}\n                  alt=\"ë¯¸ë¦¬ë³´ê¸°\"\n                  className=\"max-h-52 mx-auto business-radius-card shadow-sm\"\n                />\n                <button\n                  className=\"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleRemoveFile();\n                  }}\n                >\n                  <X className=\"w-3.5 h-3.5\" />\n                </button>\n                <p className=\"mt-3 text-[11px] text-gray-600 truncate px-4\">\n                  {file?.name}\n                </p>\n              </div>\n            ) : (\n              <>\n                <ImageIcon className=\"w-10 h-10 text-gray-300 mx-auto mb-3\" />\n                <p className=\"text-[11px] text-gray-600 mb-1\">\n                  ê±°ë˜ëª…ì„¸ì„œ ì´ë¯¸ì§€ë¥¼ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì„ íƒí•˜ì„¸ìš”\n                </p>\n                <p className=\"text-[10px] text-gray-400\">\n                  ì§€ì› í˜•ì‹: JPG, PNG, GIF, WEBP (ìµœëŒ€ 10MB)\n                </p>\n              </>\n            )}\n          </div>\n\n          {/* ì•ˆë‚´ ë¬¸êµ¬ */}\n          <div className=\"mt-3 p-2.5 bg-blue-50 business-radius-card border border-blue-100\">\n            <p className=\"text-[10px] text-blue-700 leading-relaxed\">\n              ğŸ’¡ ê±°ë˜ëª…ì„¸ì„œë¥¼ ì´¬ì˜í•˜ê±°ë‚˜ ìŠ¤ìº”í•œ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ì„¸ìš”.\n              ì—…ë¡œë“œ í›„ OCRë¡œ í’ˆëª©, ìˆ˜ëŸ‰, ê¸ˆì•¡, ë°œì£¼ë²ˆí˜¸ ë“±ì„ ìë™ìœ¼ë¡œ ì¶”ì¶œí•©ë‹ˆë‹¤.\n            </p>\n          </div>\n        </div>\n\n        <DialogFooter className=\"border-t border-gray-100 pt-3 gap-2\">\n          <Button\n            variant=\"outline\"\n            onClick={handleClose}\n            disabled={uploading}\n            className=\"button-base h-8 text-[11px]\"\n          >\n            ì·¨ì†Œ\n          </Button>\n          <Button\n            onClick={handleUpload}\n            disabled={!file || uploading}\n            className=\"button-base h-8 text-[11px] bg-hansl-600 hover:bg-hansl-700 text-white\"\n          >\n            {uploading ? (\n              <>\n                <Loader2 className=\"w-3.5 h-3.5 mr-1.5 animate-spin\" />\n                ì—…ë¡œë“œ ì¤‘...\n              </>\n            ) : (\n              <>\n                <Upload className=\"w-3.5 h-3.5 mr-1.5\" />\n                ì—…ë¡œë“œ\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import {\n  Dialog,\n  DialogContent,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { X, ZoomIn, ZoomOut, RotateCw, Download } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { toast } from \"sonner\";\n\ninterface StatementImageViewerProps {\n  isOpen: boolean;\n  imageUrl: string;\n  onClose: () => void;\n}\n\n/**\n * ê±°ë˜ëª…ì„¸ì„œ ì´ë¯¸ì§€ ë·°ì–´ (ë¼ì´íŠ¸ë°•ìŠ¤)\n */\nexport default function StatementImageViewer({\n  isOpen,\n  imageUrl,\n  onClose,\n}: StatementImageViewerProps) {\n  const [scale, setScale] = useState(1);\n  const [rotation, setRotation] = useState(0);\n\n  const handleZoomIn = () => {\n    setScale((prev) => Math.min(prev + 0.25, 3));\n  };\n\n  const handleZoomOut = () => {\n    setScale((prev) => Math.max(prev - 0.25, 0.5));\n  };\n\n  const handleRotate = () => {\n    setRotation((prev) => (prev + 90) % 360);\n  };\n\n  const handleDownload = async () => {\n    try {\n      const response = await fetch(imageUrl);\n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `ê±°ë˜ëª…ì„¸ì„œ_${new Date().toISOString().split('T')[0]}.jpg`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n      toast.success('ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');\n    } catch (error) {\n      toast.error('ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n    }\n  };\n\n  const handleClose = () => {\n    setScale(1);\n    setRotation(0);\n    onClose();\n  };\n\n  if (!imageUrl) return null;\n\n  return (\n    <Dialog open={isOpen} onOpenChange={handleClose}>\n      <DialogContent className=\"max-w-[90vw] max-h-[90vh] p-0 bg-black/95 border-none\">\n        {/* ì»¨íŠ¸ë¡¤ ë°” */}\n        <div className=\"absolute top-0 left-0 right-0 z-50 flex items-center justify-between px-4 py-3 bg-gradient-to-b from-black/80 to-transparent\">\n          <div className=\"flex items-center gap-1.5\">\n            <button\n              onClick={handleZoomOut}\n              disabled={scale <= 0.5}\n              className=\"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white disabled:opacity-40 transition-colors\"\n            >\n              <ZoomOut className=\"w-4 h-4\" />\n            </button>\n            <span className=\"text-[11px] text-white min-w-[50px] text-center font-medium\">\n              {Math.round(scale * 100)}%\n            </span>\n            <button\n              onClick={handleZoomIn}\n              disabled={scale >= 3}\n              className=\"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white disabled:opacity-40 transition-colors\"\n            >\n              <ZoomIn className=\"w-4 h-4\" />\n            </button>\n            <div className=\"w-px h-5 bg-white/30 mx-1.5\" />\n            <button\n              onClick={handleRotate}\n              className=\"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-colors\"\n            >\n              <RotateCw className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={handleDownload}\n              className=\"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-colors\"\n            >\n              <Download className=\"w-4 h-4\" />\n            </button>\n          </div>\n          <button\n            onClick={handleClose}\n            className=\"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-colors\"\n          >\n            <X className=\"w-4 h-4\" />\n          </button>\n        </div>\n\n        {/* ì´ë¯¸ì§€ */}\n        <div className=\"flex items-center justify-center w-full h-[80vh] overflow-auto p-4 pt-16\">\n          <img\n            src={imageUrl}\n            alt=\"ê±°ë˜ëª…ì„¸ì„œ\"\n            className=\"max-w-full max-h-full object-contain transition-transform duration-200\"\n            style={{\n              transform: `scale(${scale}) rotate(${rotation}deg)`,\n            }}\n          />\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import { useState, useEffect, useCallback, useMemo } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  CheckCircle, \n  XCircle, \n  Image as ImageIcon, \n  Loader2,\n  ChevronDown,\n  Check,\n  Wand2\n} from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport transactionStatementService from \"@/services/transactionStatementService\";\nimport type { \n  TransactionStatement, \n  TransactionStatementWithItems,\n  TransactionStatementItemWithMatch,\n  ConfirmItemRequest,\n  MatchCandidate,\n  OCRFieldType\n} from \"@/types/transactionStatement\";\nimport { normalizeOrderNumber } from \"@/types/transactionStatement\";\nimport StatementImageViewer from \"./StatementImageViewer\";\n\ninterface StatementConfirmModalProps {\n  isOpen: boolean;\n  statement: TransactionStatement;\n  onClose: () => void;\n  onConfirm: () => void;\n}\n\n// ì‹œìŠ¤í…œ ë°œì£¼ í’ˆëª© íƒ€ì…\ninterface SystemPurchaseItem {\n  purchase_id: number;\n  item_id: number;\n  purchase_order_number: string;\n  sales_order_number?: string;\n  item_name: string;\n  specification?: string;  // ê·œê²© ì¶”ê°€ - êµì°¨ ë¹„êµìš©\n  quantity?: number;\n  unit_price?: number;\n  amount?: number;\n  vendor_name?: string;\n}\n\n// Levenshtein ê±°ë¦¬ ê³„ì‚° í•¨ìˆ˜\nfunction levenshteinDistance(str1: string, str2: string): number {\n  const s1 = str1.toLowerCase().replace(/\\s+/g, '');\n  const s2 = str2.toLowerCase().replace(/\\s+/g, '');\n  \n  if (s1 === s2) return 0;\n  if (s1.length === 0) return s2.length;\n  if (s2.length === 0) return s1.length;\n\n  const matrix: number[][] = [];\n\n  for (let i = 0; i <= s1.length; i++) {\n    matrix[i] = [i];\n  }\n  for (let j = 0; j <= s2.length; j++) {\n    matrix[0][j] = j;\n  }\n\n  for (let i = 1; i <= s1.length; i++) {\n    for (let j = 1; j <= s2.length; j++) {\n      const cost = s1[i - 1] === s2[j - 1] ? 0 : 1;\n      matrix[i][j] = Math.min(\n        matrix[i - 1][j] + 1,\n        matrix[i][j - 1] + 1,\n        matrix[i - 1][j - 1] + cost\n      );\n    }\n  }\n\n  return matrix[s1.length][s2.length];\n}\n\n// ë‹¨ì¼ ë¬¸ìì—´ ìœ ì‚¬ë„ ê³„ì‚° (ë‚´ë¶€ í—¬í¼)\nfunction calculateStringSimilarity(ocrName: string, targetName: string): number {\n  const ocr = ocrName?.toLowerCase().replace(/\\s+/g, '') || '';\n  const target = targetName?.toLowerCase().replace(/\\s+/g, '') || '';\n  \n  if (!ocr || !target) return 0;\n  \n  // ì™„ì „ ì¼ì¹˜\n  if (ocr === target) return 100;\n  \n  // ë¶€ë¶„ í¬í•¨\n  if (ocr.includes(target) || target.includes(ocr)) return 80;\n  \n  // Levenshtein ê±°ë¦¬ ê¸°ë°˜\n  const distance = levenshteinDistance(ocr, target);\n  const maxLen = Math.max(ocr.length, target.length);\n  const similarity = ((maxLen - distance) / maxLen) * 100;\n  \n  // ë‹¨ì–´ ì¼ë¶€ ì¼ì¹˜ ì²´í¬\n  const ocrWords = ocrName?.split(/\\s+/) || [];\n  const targetWords = targetName?.split(/\\s+/) || [];\n  const commonWords = ocrWords.filter(w => \n    targetWords.some(tw => tw.toLowerCase().includes(w.toLowerCase()) || w.toLowerCase().includes(tw.toLowerCase()))\n  );\n  const wordMatchBonus = (commonWords.length / Math.max(ocrWords.length, targetWords.length)) * 30;\n  \n  return Math.min(100, similarity + wordMatchBonus);\n}\n\n// í’ˆëª©ëª… ìœ ì‚¬ë„ ì ìˆ˜ ê³„ì‚° - item_nameê³¼ specification êµì°¨ ë¹„êµ\nfunction calculateItemSimilarity(ocrName: string, systemItemName: string, systemSpec?: string): number {\n  // item_nameê³¼ ë¹„êµ\n  const itemNameScore = calculateStringSimilarity(ocrName, systemItemName);\n  \n  // specificationê³¼ë„ ë¹„êµ (ìˆìœ¼ë©´)\n  const specScore = systemSpec ? calculateStringSimilarity(ocrName, systemSpec) : 0;\n  \n  // ë‘˜ ì¤‘ ë†’ì€ ì ìˆ˜ ë°˜í™˜\n  return Math.max(itemNameScore, specScore);\n}\n\n/**\n * ê±°ë˜ëª…ì„¸ì„œ í™•ì¸/ìˆ˜ì •/í™•ì • ëª¨ë‹¬ - 3ë‹¨ ë¹„êµ ë ˆì´ì•„ì›ƒ\n */\nexport default function StatementConfirmModal({\n  isOpen,\n  statement,\n  onClose,\n  onConfirm,\n}: StatementConfirmModalProps) {\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [statementWithItems, setStatementWithItems] = useState<TransactionStatementWithItems | null>(null);\n  const [isImageViewerOpen, setIsImageViewerOpen] = useState(false);\n  const [confirmerName, setConfirmerName] = useState(\"\");\n  \n  // ì„ íƒëœ ë°œì£¼/ìˆ˜ì£¼ë²ˆí˜¸ (Case 1: ì „ì²´ ì ìš©ìš©)\n  const [selectedPONumber, setSelectedPONumber] = useState<string>(\"\");\n  \n  // ê° OCR í’ˆëª©ë³„ ì„ íƒëœ ë°œì£¼/ìˆ˜ì£¼ë²ˆí˜¸ (Case 2: ê°œë³„ ì ìš©ìš©)\n  const [itemPONumbers, setItemPONumbers] = useState<Map<string, string>>(new Map());\n  \n  // ê° OCR í’ˆëª©ë³„ ë§¤ì¹­ëœ ì‹œìŠ¤í…œ í’ˆëª©\n  const [itemMatches, setItemMatches] = useState<Map<string, SystemPurchaseItem | null>>(new Map());\n  \n  // ë“œë¡­ë‹¤ìš´ ì—´ë¦¼ ìƒíƒœ\n  const [openDropdowns, setOpenDropdowns] = useState<Set<string>>(new Set());\n  \n  // OCR í’ˆëª© í¸ì§‘ ìƒíƒœ (í•™ìŠµìš©)\n  // key: itemId, value: ìˆ˜ì •ëœ ê°’ë“¤\n  interface EditedOCRItem {\n    item_name?: string;\n    quantity?: number;\n    unit_price?: number;\n    amount?: number;\n    po_number?: string;\n  }\n  const [editedOCRItems, setEditedOCRItems] = useState<Map<string, EditedOCRItem>>(new Map());\n  \n  // ë§¤ì¹­ ìƒì„¸ ì •ë³´ íŒì—…\n  const [matchDetailPopup, setMatchDetailPopup] = useState<{\n    isOpen: boolean;\n    ocrItemId: string;\n    ocrItemName: string;\n    systemItemName: string;\n    systemSpec: string;\n    similarity: number;\n    status: 'high' | 'med' | 'low' | 'unmatched';\n    reasons: string[];\n  } | null>(null);\n  \n  // ì„¸íŠ¸ ë§¤ì¹­ ê²°ê³¼ (Case 1ìš©)\n  const [setMatchResult, setSetMatchResult] = useState<{\n    bestMatch: {\n      purchase_id: number;\n      purchase_order_number: string;\n      sales_order_number?: string;\n      vendor_name?: string;\n      matchScore: number;\n      matchedItemCount: number;\n      totalItemCount: number;\n      confidence: 'high' | 'medium' | 'low';\n      itemMatches: Array<{\n        ocrItemId: string;\n        systemItemId: number;\n        systemItemName: string;\n        similarity: number;\n      }>;\n    } | null;\n    candidates: Array<{\n      purchase_id: number;\n      purchase_order_number: string;\n      sales_order_number?: string;\n      vendor_name?: string;\n      matchScore: number;\n      matchedItemCount: number;\n    }>;\n  } | null>(null);\n  \n  const supabase = createClient();\n\n  // ëª¨ë“  í’ˆëª©ì˜ ë°œì£¼/ìˆ˜ì£¼ë²ˆí˜¸ê°€ ë™ì¼í•œì§€ í™•ì¸\n  const isSamePONumber = useMemo(() => {\n    if (!statementWithItems?.items.length) return true;\n    \n    const poNumbers = statementWithItems.items\n      .map(item => item.extracted_po_number ? normalizeOrderNumber(item.extracted_po_number) : null)\n      .filter(Boolean);\n    \n    if (poNumbers.length === 0) return true;\n    \n    return poNumbers.every(po => po === poNumbers[0]);\n  }, [statementWithItems]);\n\n  // ê³µí†µ ë°œì£¼/ìˆ˜ì£¼ë²ˆí˜¸ (Case 1ìš©)\n  const commonPONumber = useMemo(() => {\n    if (!statementWithItems?.items.length) return null;\n    \n    const poNumber = statementWithItems.items.find(item => item.extracted_po_number)?.extracted_po_number;\n    return poNumber ? normalizeOrderNumber(poNumber) : null;\n  }, [statementWithItems]);\n\n  // ë°ì´í„° ë¡œë“œ\n  const loadData = useCallback(async () => {\n    try {\n      setLoading(true);\n      \n      const { data: { user } } = await supabase.auth.getUser();\n      if (user?.email) {\n        const { data: employee } = await supabase\n          .from('employees')\n          .select('name')\n          .eq('email', user.email)\n          .single();\n        \n        if (employee?.name) {\n          setConfirmerName(employee.name);\n        }\n      }\n\n      const result = await transactionStatementService.getStatementWithItems(statement.id);\n      \n      if (result.success && result.data) {\n        setStatementWithItems(result.data);\n        \n        // ì´ˆê¸° ë°œì£¼ë²ˆí˜¸ ì„¤ì • ë° ìë™ ë§¤ì¹­\n        const initialPONumbers = new Map<string, string>();\n        const initialMatches = new Map<string, SystemPurchaseItem | null>();\n        \n        result.data.items.forEach(item => {\n          // ì¶”ì¶œëœ ë°œì£¼ë²ˆí˜¸ ì„¤ì • (ì‹œìŠ¤í…œ í˜•ì‹ìœ¼ë¡œ ì •ê·œí™”)\n          let poNumber = '';\n          if (item.extracted_po_number) {\n            poNumber = normalizeOrderNumber(item.extracted_po_number);\n            initialPONumbers.set(item.id, poNumber);\n          }\n          \n          // ê¸°ì¡´ ë§¤ì¹­ ì •ë³´ê°€ ìˆìœ¼ë©´ ì„¤ì •\n          if (item.matched_purchase && item.matched_item_id) {\n            initialMatches.set(item.id, {\n              purchase_id: item.matched_purchase_id!,\n              item_id: item.matched_item_id!,\n              purchase_order_number: item.matched_purchase.purchase_order_number || '',\n              sales_order_number: item.matched_purchase.sales_order_number,\n              item_name: (item as any).matched_item_name || '',\n              quantity: (item as any).matched_item_quantity,\n              unit_price: (item as any).matched_item_unit_price,\n              amount: (item as any).matched_item_amount,\n              vendor_name: item.matched_purchase.vendor_name\n            });\n          } else {\n            // ìë™ ë§¤ì¹­: í•´ë‹¹ ë°œì£¼ë²ˆí˜¸ì˜ í›„ë³´ ì¤‘ì—ì„œ ê°€ì¥ ìœ ì‚¬í•œ í’ˆëª© ì°¾ê¸°\n            let bestMatch: SystemPurchaseItem | null = null;\n            let bestScore = -1;\n            \n            // 1. í•´ë‹¹ ë°œì£¼ë²ˆí˜¸ì™€ ì¼ì¹˜í•˜ëŠ” í›„ë³´ ê²€ìƒ‰\n            const matchingCandidates = item.match_candidates?.filter(c => \n              c.purchase_order_number === poNumber || c.sales_order_number === poNumber\n            ) || [];\n            \n            matchingCandidates.forEach(c => {\n              const score = calculateItemSimilarity(item.extracted_item_name || '', c.item_name, c.specification);\n              if (score > bestScore) {\n                bestScore = score;\n                bestMatch = {\n                  purchase_id: c.purchase_id,\n                  item_id: c.item_id,\n                  purchase_order_number: c.purchase_order_number || '',\n                  sales_order_number: c.sales_order_number,\n                  item_name: c.item_name,\n                  specification: c.specification,\n                  quantity: c.quantity,\n                  unit_price: c.unit_price,\n                  amount: (c as any).amount,\n                  vendor_name: c.vendor_name\n                };\n              }\n            });\n            \n            // 2. ë°œì£¼ë²ˆí˜¸ë¡œ ëª» ì°¾ìœ¼ë©´ ëª¨ë“  í›„ë³´ì—ì„œ ìµœê³  ìœ ì‚¬ë„ë¡œ ê²€ìƒ‰ (fallback)\n            if (!bestMatch && item.match_candidates && item.match_candidates.length > 0) {\n              item.match_candidates.forEach(c => {\n                const score = calculateItemSimilarity(item.extracted_item_name || '', c.item_name, c.specification);\n                if (score > bestScore && score >= 30) { // ìµœì†Œ 30ì  ì´ìƒ\n                  bestScore = score;\n                  bestMatch = {\n                    purchase_id: c.purchase_id,\n                    item_id: c.item_id,\n                    purchase_order_number: c.purchase_order_number || '',\n                    sales_order_number: c.sales_order_number,\n                    item_name: c.item_name,\n                    specification: c.specification,\n                    quantity: c.quantity,\n                    unit_price: c.unit_price,\n                    amount: (c as any).amount,\n                    vendor_name: c.vendor_name\n                  };\n                }\n              });\n              \n              // fallbackìœ¼ë¡œ ì°¾ì•˜ìœ¼ë©´ ë°œì£¼ë²ˆí˜¸ë„ ì‹œìŠ¤í…œ ê²ƒìœ¼ë¡œ ì—…ë°ì´íŠ¸ (OCR ì˜¤ë¥˜ ìˆ˜ì •)\n              if (bestMatch) {\n                const matchedPO = bestMatch.purchase_order_number || bestMatch.sales_order_number || '';\n                if (matchedPO) {\n                  initialPONumbers.set(item.id, matchedPO);\n                }\n              }\n            }\n            \n            initialMatches.set(item.id, bestMatch);\n          }\n        });\n        \n        setItemPONumbers(initialPONumbers);\n        setItemMatches(initialMatches);\n        \n        // Case 1: ê³µí†µ ë°œì£¼ë²ˆí˜¸ ì„¤ì •\n        const firstPO = result.data.items.find(i => i.extracted_po_number)?.extracted_po_number;\n        if (firstPO) {\n          setSelectedPONumber(normalizeOrderNumber(firstPO));\n        }\n        \n        // ì„¸íŠ¸ ë§¤ì¹­ ì‹¤í–‰ (Case 1: ëª¨ë“  í’ˆëª©ì´ ê°™ì€ ë°œì£¼ë²ˆí˜¸ì¼ ë•Œ)\n        // ë°œì£¼ë²ˆí˜¸ê°€ ë™ì¼í•œì§€ í™•ì¸\n        const poNumbers = result.data.items\n          .map(item => item.extracted_po_number ? normalizeOrderNumber(item.extracted_po_number) : null)\n          .filter(Boolean);\n        const allSamePO = poNumbers.length === 0 || poNumbers.every(po => po === poNumbers[0]);\n        \n        if (allSamePO) {\n          // ì„¸íŠ¸ ë§¤ì¹­ í˜¸ì¶œ - ì „ì²´ í’ˆëª© ë¹„êµ (ê±°ë˜ì²˜ í•„í„°ë§ í¬í•¨)\n          const setMatchResponse = await transactionStatementService.findBestMatchingPurchaseOrderSet(\n            result.data.items,\n            firstPO,\n            result.data.vendor_name // ê±°ë˜ì²˜ëª… ì „ë‹¬\n          );\n          \n          if (setMatchResponse.success && setMatchResponse.data) {\n            setSetMatchResult(setMatchResponse.data);\n            \n            // ì„¸íŠ¸ ë§¤ì¹­ ê²°ê³¼ë¡œ ìµœì  ë°œì£¼ë²ˆí˜¸ ìë™ ì„ íƒ\n            if (setMatchResponse.data.bestMatch) {\n              const bestPO = setMatchResponse.data.bestMatch.purchase_order_number || \n                            setMatchResponse.data.bestMatch.sales_order_number || '';\n              setSelectedPONumber(bestPO);\n              \n              // ì„¸íŠ¸ ë§¤ì¹­ ê²°ê³¼ë¡œ í’ˆëª©ë“¤ ìë™ ë§¤ì¹­\n              const autoMatchedItems = new Map<string, SystemPurchaseItem | null>();\n              \n              setMatchResponse.data.bestMatch.itemMatches.forEach(match => {\n                // í•´ë‹¹ ì‹œìŠ¤í…œ í’ˆëª© ì •ë³´ ì°¾ê¸°\n                for (const item of result.data!.items) {\n                  const candidate = item.match_candidates?.find(c => c.item_id === match.systemItemId);\n                  if (candidate) {\n                    autoMatchedItems.set(match.ocrItemId, {\n                      purchase_id: candidate.purchase_id,\n                      item_id: candidate.item_id,\n                      purchase_order_number: candidate.purchase_order_number || '',\n                      sales_order_number: candidate.sales_order_number,\n                      item_name: candidate.item_name,\n                      specification: candidate.specification,\n                      quantity: candidate.quantity,\n                      unit_price: candidate.unit_price,\n                      amount: (candidate as any).amount,\n                      vendor_name: candidate.vendor_name\n                    });\n                    break;\n                  }\n                }\n              });\n              \n              // ê¸°ì¡´ ë§¤ì¹­ì— ì„¸íŠ¸ ë§¤ì¹­ ê²°ê³¼ ë³‘í•© (ì„¸íŠ¸ ë§¤ì¹­ ìš°ì„ )\n              const mergedMatches = new Map(initialMatches);\n              autoMatchedItems.forEach((value, key) => {\n                if (value) mergedMatches.set(key, value);\n              });\n              setItemMatches(mergedMatches);\n              \n              // ì„¸íŠ¸ ë§¤ì¹­ ì„±ê³µ ì•Œë¦¼\n              const confidence = setMatchResponse.data.bestMatch.confidence;\n              const confText = confidence === 'high' ? 'ë†’ìŒ' : confidence === 'medium' ? 'ë³´í†µ' : 'ë‚®ìŒ';\n              toast.success(\n                `ì„¸íŠ¸ ë§¤ì¹­ ì™„ë£Œ! ${setMatchResponse.data.bestMatch.matchedItemCount}/${result.data.items.length}ê°œ í’ˆëª© ë§¤ì¹­ (ì‹ ë¢°ë„: ${confText})`\n              );\n            }\n          }\n        }\n      } else {\n        toast.error(result.error || 'ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n      }\n    } catch (error) {\n      toast.error('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n    } finally {\n      setLoading(false);\n    }\n  }, [statement.id, supabase]);\n\n  useEffect(() => {\n    if (isOpen && statement) {\n      loadData();\n    }\n  }, [isOpen, statement, loadData]);\n\n  // ë°œì£¼ë²ˆí˜¸ ë³€ê²½ ì‹œ itemMatches ìë™ ë™ê¸°í™” + ë§¤ì¹­ëœ ì‹œìŠ¤í…œ ë°œì£¼ë²ˆí˜¸ë¡œ ì—…ë°ì´íŠ¸\n  useEffect(() => {\n    if (!statementWithItems || !isOpen) return;\n    \n    // ì•„ì§ ì´ˆê¸° ë¡œë“œ ì¤‘ì´ë©´ ìŠ¤í‚µ\n    if (loading) return;\n    \n    const newMatches = new Map<string, SystemPurchaseItem | null>();\n    const newPONumbers = new Map<string, string>(itemPONumbers);\n    let hasMatchChanges = false;\n    let hasPOChanges = false;\n    \n    statementWithItems.items.forEach(ocrItem => {\n      const currentMatch = itemMatches.get(ocrItem.id);\n      \n      // í˜„ì¬ ì ìš©í•´ì•¼ í•  ë°œì£¼ë²ˆí˜¸\n      const poNumber = isSamePONumber \n        ? selectedPONumber \n        : (itemPONumbers.get(ocrItem.id) || (ocrItem.extracted_po_number ? normalizeOrderNumber(ocrItem.extracted_po_number) : ''));\n      \n      // í˜„ì¬ ë§¤ì¹­ì´ ìˆê³  ë°œì£¼ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ë©´ ìœ ì§€\n      if (currentMatch && (currentMatch.purchase_order_number === poNumber || currentMatch.sales_order_number === poNumber)) {\n        newMatches.set(ocrItem.id, currentMatch);\n        return;\n      }\n      \n      // ìƒˆë¡œìš´ ë§¤ì¹­ ì°¾ê¸°\n      let bestMatch: SystemPurchaseItem | null = null;\n      let bestScore = -1;\n      \n      // í•´ë‹¹ ë°œì£¼ë²ˆí˜¸ í›„ë³´ì—ì„œ ê²€ìƒ‰\n      const matchingCandidates = poNumber \n        ? ocrItem.match_candidates?.filter(c => \n            c.purchase_order_number === poNumber || c.sales_order_number === poNumber\n          ) || []\n        : [];\n      \n      matchingCandidates.forEach(c => {\n        const score = calculateItemSimilarity(ocrItem.extracted_item_name || '', c.item_name, c.specification);\n        if (score > bestScore) {\n          bestScore = score;\n          bestMatch = {\n            purchase_id: c.purchase_id,\n            item_id: c.item_id,\n            purchase_order_number: c.purchase_order_number || '',\n            sales_order_number: c.sales_order_number,\n            item_name: c.item_name,\n            specification: c.specification,\n            quantity: c.quantity,\n            unit_price: c.unit_price,\n            amount: (c as any).amount,\n            vendor_name: c.vendor_name\n          };\n        }\n      });\n      \n      // ëª» ì°¾ìœ¼ë©´ ì „ì²´ í›„ë³´ì—ì„œ ê²€ìƒ‰ (fallback)\n      if (!bestMatch && ocrItem.match_candidates) {\n        ocrItem.match_candidates.forEach(c => {\n          const score = calculateItemSimilarity(ocrItem.extracted_item_name || '', c.item_name, c.specification);\n          if (score > bestScore && score >= 30) {\n            bestScore = score;\n            bestMatch = {\n              purchase_id: c.purchase_id,\n              item_id: c.item_id,\n              purchase_order_number: c.purchase_order_number || '',\n              sales_order_number: c.sales_order_number,\n              item_name: c.item_name,\n              specification: c.specification,\n              quantity: c.quantity,\n              unit_price: c.unit_price,\n              amount: (c as any).amount,\n              vendor_name: c.vendor_name\n            };\n          }\n        });\n      }\n      \n      newMatches.set(ocrItem.id, bestMatch);\n      \n      // ë§¤ì¹­ëœ ì‹œìŠ¤í…œ í’ˆëª©ì˜ ë°œì£¼ë²ˆí˜¸ë¡œ í‘œì‹œ ë²ˆí˜¸ ì—…ë°ì´íŠ¸ (OCR ì˜¤ë¥˜ ìˆ˜ì •)\n      if (bestMatch) {\n        const matchedPO = bestMatch.purchase_order_number || bestMatch.sales_order_number || '';\n        const currentDisplayPO = itemPONumbers.get(ocrItem.id) || '';\n        \n        // í˜„ì¬ í‘œì‹œ ë²ˆí˜¸ì™€ ë‹¤ë¥´ë©´ ì‹œìŠ¤í…œ ë²ˆí˜¸ë¡œ ì—…ë°ì´íŠ¸\n        if (matchedPO && matchedPO !== currentDisplayPO) {\n          newPONumbers.set(ocrItem.id, matchedPO);\n          hasPOChanges = true;\n        }\n      }\n      \n      // ë³€ê²½ ê°ì§€\n      if (currentMatch !== bestMatch) {\n        hasMatchChanges = true;\n      }\n    });\n    \n    // ë³€ê²½ì´ ìˆì„ ë•Œë§Œ ìƒíƒœ ì—…ë°ì´íŠ¸ (ë¬´í•œ ë£¨í”„ ë°©ì§€)\n    if (hasMatchChanges) {\n      setItemMatches(newMatches);\n    }\n    \n    // ë°œì£¼ë²ˆí˜¸ í‘œì‹œë„ ì‹œìŠ¤í…œ ê²ƒìœ¼ë¡œ ì—…ë°ì´íŠ¸\n    if (hasPOChanges) {\n      setItemPONumbers(newPONumbers);\n    }\n  }, [selectedPONumber, isSamePONumber, statementWithItems, isOpen, loading]);\n\n  // ë°œì£¼/ìˆ˜ì£¼ë²ˆí˜¸ í›„ë³´ ëª©ë¡ (ì„¸íŠ¸ ë§¤ì¹­ ê²°ê³¼ + ê¸°ì¡´ í›„ë³´)\n  // - ì„¸íŠ¸ ë§¤ì¹­ ê²°ê³¼ê°€ ìˆìœ¼ë©´ ì ìˆ˜ í¬í•¨í•˜ì—¬ ì •ë ¬\n  // - OCRì—ì„œ Fë¡œ ì‹œì‘í•˜ëŠ” ë²ˆí˜¸ ì¶”ì¶œ â†’ ë°œì£¼ë²ˆí˜¸ë§Œ í‘œì‹œ\n  // - OCRì—ì„œ HSë¡œ ì‹œì‘í•˜ëŠ” ë²ˆí˜¸ ì¶”ì¶œ â†’ ìˆ˜ì£¼ë²ˆí˜¸ë§Œ í‘œì‹œ\n  // - OCRì—ì„œ ë²ˆí˜¸ ì—†ìŒ â†’ ë°œì£¼ë²ˆí˜¸ ê¸°ë³¸ê°’\n  const allPONumberCandidates = useMemo(() => {\n    if (!statementWithItems) return [];\n    \n    // ì²« ë²ˆì§¸ OCR ì¶”ì¶œ ë²ˆí˜¸ë¡œ íƒ€ì… ê²°ì • (F vs HS)\n    const firstExtracted = statementWithItems.items.find(i => i.extracted_po_number)?.extracted_po_number || '';\n    const normalizedFirst = firstExtracted ? normalizeOrderNumber(firstExtracted).toUpperCase() : '';\n    const useSONumber = normalizedFirst.startsWith('HS');\n    \n    const candidateMap = new Map<string, { \n      poNumber: string; \n      salesOrderNumber?: string;\n      itemCount: number; \n      items: MatchCandidate[];\n      vendorName?: string;\n      setMatchScore?: number; // ì„¸íŠ¸ ë§¤ì¹­ ì ìˆ˜\n      matchedItemCount?: number;\n    }>();\n    \n    // 1. ì„¸íŠ¸ ë§¤ì¹­ ê²°ê³¼ê°€ ìˆìœ¼ë©´ ë¨¼ì € ì¶”ê°€ (ì ìˆ˜ í¬í•¨)\n    if (setMatchResult?.candidates) {\n      setMatchResult.candidates.forEach(candidate => {\n        const key = useSONumber \n          ? (candidate.sales_order_number || candidate.purchase_order_number)\n          : candidate.purchase_order_number;\n        \n        if (key) {\n          candidateMap.set(key, {\n            poNumber: candidate.purchase_order_number || '',\n            salesOrderNumber: candidate.sales_order_number,\n            itemCount: candidate.matchedItemCount,\n            items: [],\n            vendorName: candidate.vendor_name,\n            setMatchScore: candidate.matchScore,\n            matchedItemCount: candidate.matchedItemCount\n          });\n        }\n      });\n    }\n    \n    // 2. ê¸°ì¡´ ê°œë³„ ë§¤ì¹­ í›„ë³´ë„ ì¶”ê°€ (ì„¸íŠ¸ ë§¤ì¹­ì— ì—†ëŠ” ê²ƒë§Œ)\n    statementWithItems.items.forEach(item => {\n      item.match_candidates?.forEach(candidate => {\n        const key = useSONumber \n          ? (candidate.sales_order_number || '') \n          : (candidate.purchase_order_number || '');\n        \n        if (key && !candidateMap.has(key)) {\n          candidateMap.set(key, {\n            poNumber: candidate.purchase_order_number || '',\n            salesOrderNumber: candidate.sales_order_number,\n            itemCount: 0,\n            items: [],\n            vendorName: candidate.vendor_name\n          });\n        }\n        \n        if (key && candidateMap.has(key)) {\n          const existing = candidateMap.get(key)!;\n          existing.items.push(candidate);\n          if (!existing.setMatchScore) {\n            existing.itemCount = existing.items.length;\n          }\n        }\n      });\n    });\n    \n    // 3. ì„¸íŠ¸ ë§¤ì¹­ ì ìˆ˜ìˆœìœ¼ë¡œ ì •ë ¬ (ì ìˆ˜ ìˆëŠ” ê²ƒ ìš°ì„ )\n    const result = Array.from(candidateMap.values());\n    result.sort((a, b) => {\n      if (a.setMatchScore && b.setMatchScore) {\n        return b.setMatchScore - a.setMatchScore;\n      }\n      if (a.setMatchScore) return -1;\n      if (b.setMatchScore) return 1;\n      return b.itemCount - a.itemCount;\n    });\n    \n    return result;\n  }, [statementWithItems, setMatchResult]);\n\n  // íŠ¹ì • ë°œì£¼ë²ˆí˜¸ì— í•´ë‹¹í•˜ëŠ” ì‹œìŠ¤í…œ í’ˆëª©ë“¤\n  const getSystemItemsForPO = useCallback((poNumber: string): SystemPurchaseItem[] => {\n    if (!statementWithItems || !poNumber) return [];\n    \n    const items: SystemPurchaseItem[] = [];\n    \n    statementWithItems.items.forEach(item => {\n      item.match_candidates?.forEach(candidate => {\n        if (candidate.purchase_order_number === poNumber || \n            candidate.sales_order_number === poNumber) {\n          items.push({\n            purchase_id: candidate.purchase_id,\n            item_id: candidate.item_id,\n            purchase_order_number: candidate.purchase_order_number || '',\n            sales_order_number: candidate.sales_order_number,\n            item_name: candidate.item_name,\n            specification: candidate.specification,\n            quantity: candidate.quantity,\n            unit_price: candidate.unit_price,\n            amount: (candidate as any).amount, // amountëŠ” ì¼ë¶€ í›„ë³´ì—ë§Œ ì¡´ì¬\n            vendor_name: candidate.vendor_name\n          });\n        }\n      });\n    });\n    \n    // ì¤‘ë³µ ì œê±°\n    return items.filter((item, index, self) => \n      index === self.findIndex(t => t.item_id === item.item_id)\n    );\n  }, [statementWithItems]);\n\n  // íŠ¹ì • OCR í’ˆëª©ì— ëŒ€í•œ ë°œì£¼ë²ˆí˜¸ í›„ë³´ ëª©ë¡ (ì‹œìŠ¤í…œ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê°€ì ¸ì˜¨ ê²ƒë§Œ)\n  // - OCRì—ì„œ Fë¡œ ì‹œì‘í•˜ëŠ” ë²ˆí˜¸ ì¶”ì¶œ â†’ ë°œì£¼ë²ˆí˜¸(purchase_order_number)ë§Œ í‘œì‹œ\n  // - OCRì—ì„œ HSë¡œ ì‹œì‘í•˜ëŠ” ë²ˆí˜¸ ì¶”ì¶œ â†’ ìˆ˜ì£¼ë²ˆí˜¸(sales_order_number)ë§Œ í‘œì‹œ\n  // - OCRì—ì„œ ë²ˆí˜¸ ì—†ìŒ â†’ ë°œì£¼ë²ˆí˜¸(purchase_order_number) ê¸°ë³¸ê°’\n  const getPOCandidatesForItem = useCallback((ocrItemId: string): string[] => {\n    if (!statementWithItems) return [];\n    \n    const item = statementWithItems.items.find(i => i.id === ocrItemId);\n    if (!item) return [];\n    \n    const poNumbers = new Set<string>();\n    \n    // OCR ì¶”ì¶œ ë²ˆí˜¸ ì •ê·œí™”\n    const extractedNumber = item.extracted_po_number \n      ? normalizeOrderNumber(item.extracted_po_number).toUpperCase() \n      : '';\n    \n    // ì¶”ì¶œëœ ë²ˆí˜¸ê°€ HSë¡œ ì‹œì‘í•˜ë©´ ìˆ˜ì£¼ë²ˆí˜¸, ê·¸ ì™¸(F ë˜ëŠ” ì—†ìŒ)ëŠ” ë°œì£¼ë²ˆí˜¸\n    const useSONumber = extractedNumber.startsWith('HS');\n    \n    // ë§¤ì¹­ í›„ë³´ë“¤ì—ì„œ ì ì ˆí•œ ë²ˆí˜¸ë§Œ ì¶”ê°€\n    item.match_candidates?.forEach(c => {\n      if (useSONumber) {\n        // ìˆ˜ì£¼ë²ˆí˜¸ë§Œ ì¶”ê°€\n        if (c.sales_order_number) poNumbers.add(c.sales_order_number);\n      } else {\n        // ë°œì£¼ë²ˆí˜¸ë§Œ ì¶”ê°€ (ê¸°ë³¸ê°’)\n        if (c.purchase_order_number) poNumbers.add(c.purchase_order_number);\n      }\n    });\n    \n    return Array.from(poNumbers);\n  }, [statementWithItems]);\n\n  // OCR í’ˆëª© í¸ì§‘ í•¨ìˆ˜\n  const handleEditOCRItem = (itemId: string, field: keyof EditedOCRItem, value: string | number) => {\n    setEditedOCRItems(prev => {\n      const newMap = new Map(prev);\n      const existing = newMap.get(itemId) || {};\n      newMap.set(itemId, { ...existing, [field]: value });\n      return newMap;\n    });\n  };\n\n  // OCR í’ˆëª©ì˜ í˜„ì¬ ê°’ ê°€ì ¸ì˜¤ê¸° (ìˆ˜ì •ëœ ê°’ ìš°ì„ )\n  const getOCRItemValue = (ocrItem: TransactionStatementItemWithMatch, field: 'item_name' | 'quantity' | 'unit_price' | 'amount' | 'po_number') => {\n    const edited = editedOCRItems.get(ocrItem.id);\n    if (edited && edited[field] !== undefined) {\n      return edited[field];\n    }\n    \n    switch (field) {\n      case 'item_name': return ocrItem.extracted_item_name || '';\n      case 'quantity': return ocrItem.extracted_quantity ?? '';\n      case 'unit_price': return ocrItem.extracted_unit_price ?? '';\n      case 'amount': return ocrItem.extracted_amount ?? '';\n      case 'po_number': return ocrItem.extracted_po_number ? normalizeOrderNumber(ocrItem.extracted_po_number) : '';\n      default: return '';\n    }\n  };\n\n  // ìˆ˜ì • ì—¬ë¶€ í™•ì¸ (ì›ë³¸ê³¼ ë‹¤ë¥¸ì§€)\n  const isOCRItemEdited = (ocrItem: TransactionStatementItemWithMatch, field: 'item_name' | 'quantity' | 'unit_price' | 'amount' | 'po_number'): boolean => {\n    const edited = editedOCRItems.get(ocrItem.id);\n    if (!edited || edited[field] === undefined) return false;\n    \n    switch (field) {\n      case 'item_name': return edited.item_name !== ocrItem.extracted_item_name;\n      case 'quantity': return edited.quantity !== ocrItem.extracted_quantity;\n      case 'unit_price': return edited.unit_price !== ocrItem.extracted_unit_price;\n      case 'amount': return edited.amount !== ocrItem.extracted_amount;\n      case 'po_number': {\n        const original = ocrItem.extracted_po_number ? normalizeOrderNumber(ocrItem.extracted_po_number) : '';\n        return edited.po_number !== original;\n      }\n      default: return false;\n    }\n  };\n\n  // í•™ìŠµ ë°ì´í„° ì €ì¥ (í™•ì • ì‹œ í˜¸ì¶œ)\n  const saveOCRCorrections = async () => {\n    if (!statementWithItems) return;\n    \n    const corrections: Array<{\n      statement_id: string;\n      statement_item_id: string;\n      original_text: string;\n      corrected_text: string;\n      field_type: OCRFieldType;\n    }> = [];\n    \n    statementWithItems.items.forEach(ocrItem => {\n      const edited = editedOCRItems.get(ocrItem.id);\n      if (!edited) return;\n      \n      // ê° í•„ë“œë³„ë¡œ ìˆ˜ì • ì‚¬í•­ í™•ì¸\n      if (edited.item_name !== undefined && edited.item_name !== ocrItem.extracted_item_name) {\n        corrections.push({\n          statement_id: statementWithItems.id,\n          statement_item_id: ocrItem.id,\n          original_text: ocrItem.extracted_item_name || '',\n          corrected_text: edited.item_name,\n          field_type: 'item_name'\n        });\n      }\n      \n      if (edited.quantity !== undefined && edited.quantity !== ocrItem.extracted_quantity) {\n        corrections.push({\n          statement_id: statementWithItems.id,\n          statement_item_id: ocrItem.id,\n          original_text: String(ocrItem.extracted_quantity ?? ''),\n          corrected_text: String(edited.quantity),\n          field_type: 'quantity'\n        });\n      }\n      \n      if (edited.unit_price !== undefined && edited.unit_price !== ocrItem.extracted_unit_price) {\n        corrections.push({\n          statement_id: statementWithItems.id,\n          statement_item_id: ocrItem.id,\n          original_text: String(ocrItem.extracted_unit_price ?? ''),\n          corrected_text: String(edited.unit_price),\n          field_type: 'unit_price'\n        });\n      }\n      \n      if (edited.amount !== undefined && edited.amount !== ocrItem.extracted_amount) {\n        corrections.push({\n          statement_id: statementWithItems.id,\n          statement_item_id: ocrItem.id,\n          original_text: String(ocrItem.extracted_amount ?? ''),\n          corrected_text: String(edited.amount),\n          field_type: 'amount'\n        });\n      }\n      \n      if (edited.po_number !== undefined) {\n        const original = ocrItem.extracted_po_number ? normalizeOrderNumber(ocrItem.extracted_po_number) : '';\n        if (edited.po_number !== original) {\n          corrections.push({\n            statement_id: statementWithItems.id,\n            statement_item_id: ocrItem.id,\n            original_text: original,\n            corrected_text: edited.po_number,\n            field_type: 'po_number'\n          });\n        }\n      }\n    });\n    \n    // í•™ìŠµ ë°ì´í„° ì €ì¥\n    if (corrections.length > 0) {\n      console.log(`ğŸ“š í•™ìŠµ ë°ì´í„° ì €ì¥: ${corrections.length}ê±´ì˜ ìˆ˜ì •ì‚¬í•­`);\n      for (const correction of corrections) {\n        await transactionStatementService.saveCorrection(correction);\n      }\n      toast.success(`${corrections.length}ê±´ì˜ OCR ìˆ˜ì •ì‚¬í•­ì´ í•™ìŠµ ë°ì´í„°ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.`);\n    }\n  };\n\n  // ë§¤ì¹­ ìƒíƒœ ê³„ì‚° (item_nameê³¼ specification êµì°¨ ë¹„êµ)\n  // itemMatchesì— ì—†ì–´ë„ í˜„ì¬ í‘œì‹œëœ ì‹œìŠ¤í…œ í’ˆëª©ìœ¼ë¡œ fallback\n  const getMatchStatus = (ocrItem: TransactionStatementItemWithMatch): 'high' | 'med' | 'low' | 'unmatched' => {\n    // 1. ë¨¼ì € itemMatchesì—ì„œ í™•ì¸\n    const matched = itemMatches.get(ocrItem.id);\n    \n    // 2. itemMatchesì— ì—†ìœ¼ë©´ í˜„ì¬ í‘œì‹œëœ ì‹œìŠ¤í…œ í’ˆëª©ì—ì„œ ì°¾ê¸°\n    let effectiveMatch: SystemPurchaseItem | null = matched || null;\n    let hasSystemItems = false;\n    \n    if (!effectiveMatch) {\n      const poNumber = isSamePONumber \n        ? selectedPONumber \n        : (itemPONumbers.get(ocrItem.id) || (ocrItem.extracted_po_number ? normalizeOrderNumber(ocrItem.extracted_po_number) : ''));\n      \n      if (poNumber) {\n        const systemItems = getSystemItemsForPO(poNumber);\n        hasSystemItems = systemItems.length > 0;\n        \n        // ê°€ì¥ ìœ ì‚¬í•œ í’ˆëª© ì°¾ê¸°\n        let bestScore = 0;\n        systemItems.forEach(sysItem => {\n          const score = calculateItemSimilarity(ocrItem.extracted_item_name || '', sysItem.item_name, sysItem.specification);\n          if (score > bestScore) {\n            bestScore = score;\n            effectiveMatch = sysItem;\n          }\n        });\n      }\n    }\n    \n    if (!effectiveMatch) return 'unmatched';\n    \n    const similarity = calculateItemSimilarity(ocrItem.extracted_item_name || '', effectiveMatch.item_name || '', effectiveMatch.specification);\n    \n    if (similarity >= 80) return 'high';\n    if (similarity >= 50) return 'med';\n    if (similarity >= 30) return 'low';\n    \n    // ì‹œìŠ¤í…œ í’ˆëª©ì´ ìˆìœ¼ë©´ ìœ ì‚¬ë„ê°€ ë‚®ì•„ë„ ìµœì†Œ 'ë‚®ìŒ' í‘œì‹œ (ì™„ì „ ë¯¸ë§¤ì¹­ ì•„ë‹˜)\n    if (hasSystemItems || matched) return 'low';\n    \n    return 'unmatched';\n  };\n\n  // ë°œì£¼ë²ˆí˜¸ ì„ íƒ ì‹œ (Case 1: ì „ì²´ ì ìš©)\n  const handleSelectGlobalPO = (poNumber: string) => {\n    setSelectedPONumber(poNumber);\n    \n    // í•´ë‹¹ ë°œì£¼ë²ˆí˜¸ì˜ ì‹œìŠ¤í…œ í’ˆëª©ë“¤ ê°€ì ¸ì˜¤ê¸°\n    const systemItems = getSystemItemsForPO(poNumber);\n    \n    // ìë™ ë§¤ì¹­ ìˆ˜í–‰\n    if (statementWithItems) {\n      const newMatches = new Map<string, SystemPurchaseItem | null>();\n      \n      statementWithItems.items.forEach(ocrItem => {\n        // ê°€ì¥ ìœ ì‚¬í•œ ì‹œìŠ¤í…œ í’ˆëª© ì°¾ê¸° (item_nameê³¼ specification êµì°¨ ë¹„êµ)\n        let bestMatch: SystemPurchaseItem | null = null;\n        let bestScore = 0;\n        \n        systemItems.forEach(sysItem => {\n          const score = calculateItemSimilarity(ocrItem.extracted_item_name || '', sysItem.item_name, sysItem.specification);\n          if (score > bestScore && score >= 30) {\n            bestScore = score;\n            bestMatch = sysItem;\n          }\n        });\n        \n        newMatches.set(ocrItem.id, bestMatch);\n      });\n      \n      setItemMatches(newMatches);\n    }\n  };\n\n  // ë°œì£¼ë²ˆí˜¸ ì„ íƒ ì‹œ (Case 2: ê°œë³„ í’ˆëª©ìš©)\n  const handleSelectItemPO = (ocrItemId: string, poNumber: string) => {\n    setItemPONumbers(prev => {\n      const newMap = new Map(prev);\n      newMap.set(ocrItemId, poNumber);\n      return newMap;\n    });\n    \n    const ocrItem = statementWithItems?.items.find(i => i.id === ocrItemId);\n    \n    if (ocrItem) {\n      // 1. match_candidatesì—ì„œ í•´ë‹¹ ë°œì£¼ë²ˆí˜¸ í›„ë³´ ì°¾ê¸°\n      const matchingCandidates = ocrItem.match_candidates?.filter(c => \n        c.purchase_order_number === poNumber || c.sales_order_number === poNumber\n      ) || [];\n      \n      let bestMatch: SystemPurchaseItem | null = null;\n      let bestScore = -1;\n      \n      if (matchingCandidates.length > 0) {\n        // match_candidatesì—ì„œ ê°€ì¥ ìœ ì‚¬í•œ ê²ƒ ì„ íƒ\n        matchingCandidates.forEach(c => {\n          const score = calculateItemSimilarity(ocrItem.extracted_item_name || '', c.item_name, c.specification);\n          if (score > bestScore) {\n            bestScore = score;\n            bestMatch = {\n              purchase_id: c.purchase_id,\n              item_id: c.item_id,\n              purchase_order_number: c.purchase_order_number || '',\n              sales_order_number: c.sales_order_number,\n              item_name: c.item_name,\n              specification: c.specification,\n              quantity: c.quantity,\n              unit_price: c.unit_price,\n              amount: (c as any).amount,\n              vendor_name: c.vendor_name\n            };\n          }\n        });\n      }\n      \n      // 2. match_candidatesì—ì„œ ëª» ì°¾ìœ¼ë©´ getSystemItemsForPOë¡œ ì§ì ‘ ê²€ìƒ‰\n      if (!bestMatch) {\n        const systemItems = getSystemItemsForPO(poNumber);\n        systemItems.forEach(sysItem => {\n          const score = calculateItemSimilarity(ocrItem.extracted_item_name || '', sysItem.item_name, sysItem.specification);\n          if (score > bestScore) {\n            bestScore = score;\n            bestMatch = sysItem;\n          }\n        });\n      }\n      \n      // íƒ€ì… ì²´í¬ë¥¼ ìœ„í•´ final ë³€ìˆ˜ ì‚¬ìš©\n      const finalMatch = bestMatch as SystemPurchaseItem | null;\n      const matchedName = finalMatch?.item_name || 'ì—†ìŒ';\n      console.log(`ğŸ”„ ë°œì£¼ë²ˆí˜¸ ì„ íƒ: ${poNumber} â†’ ë§¤ì¹­: ${matchedName} (ì ìˆ˜: ${bestScore})`);\n      \n      setItemMatches(prev => {\n        const newMap = new Map(prev);\n        newMap.set(ocrItemId, bestMatch);\n        return newMap;\n      });\n    }\n    \n    setOpenDropdowns(prev => {\n      const newSet = new Set(prev);\n      newSet.delete(`po-${ocrItemId}`);\n      return newSet;\n    });\n  };\n\n  // ì‹œìŠ¤í…œ í’ˆëª© ì§ì ‘ ì„ íƒ\n  const handleSelectSystemItem = (ocrItemId: string, systemItem: SystemPurchaseItem | null) => {\n    setItemMatches(prev => {\n      const newMap = new Map(prev);\n      newMap.set(ocrItemId, systemItem);\n      return newMap;\n    });\n    \n    setOpenDropdowns(prev => {\n      const newSet = new Set(prev);\n      newSet.delete(`item-${ocrItemId}`);\n      return newSet;\n    });\n  };\n\n  // ìë™ ë§¤ì¹­ (ì „ì²´)\n  const handleAutoMatch = () => {\n    if (!statementWithItems) return;\n    \n    const newMatches = new Map<string, SystemPurchaseItem | null>();\n    let matchedCount = 0;\n    \n    statementWithItems.items.forEach(ocrItem => {\n      // í•´ë‹¹ í’ˆëª©ì˜ ë°œì£¼ë²ˆí˜¸ë¡œ í•„í„°ë§\n      const poNumber = isSamePONumber ? selectedPONumber : (itemPONumbers.get(ocrItem.id) || (ocrItem.extracted_po_number ? normalizeOrderNumber(ocrItem.extracted_po_number) : ''));\n      \n      let bestMatch: SystemPurchaseItem | null = null;\n      let bestScore = -1;\n      \n      // 1. match_candidatesì—ì„œ ê²€ìƒ‰\n      const matchingCandidates = poNumber \n        ? ocrItem.match_candidates?.filter(c => \n            c.purchase_order_number === poNumber || c.sales_order_number === poNumber\n          ) || []\n        : ocrItem.match_candidates || [];\n      \n      matchingCandidates.forEach(c => {\n        const score = calculateItemSimilarity(ocrItem.extracted_item_name || '', c.item_name, c.specification);\n        if (score > bestScore) {\n          bestScore = score;\n          bestMatch = {\n            purchase_id: c.purchase_id,\n            item_id: c.item_id,\n            purchase_order_number: c.purchase_order_number || '',\n            sales_order_number: c.sales_order_number,\n            item_name: c.item_name,\n            specification: c.specification,\n            quantity: c.quantity,\n            unit_price: c.unit_price,\n            amount: (c as any).amount,\n            vendor_name: c.vendor_name\n          };\n        }\n      });\n      \n      // 2. match_candidatesì—ì„œ ëª» ì°¾ìœ¼ë©´ getSystemItemsForPOë¡œ fallback\n      if (!bestMatch && poNumber) {\n        const systemItems = getSystemItemsForPO(poNumber);\n        systemItems.forEach(sysItem => {\n          const score = calculateItemSimilarity(ocrItem.extracted_item_name || '', sysItem.item_name, sysItem.specification);\n          if (score > bestScore) {\n            bestScore = score;\n            bestMatch = sysItem;\n          }\n        });\n      }\n      \n      // 3. ê·¸ë˜ë„ ëª» ì°¾ìœ¼ë©´ ëª¨ë“  í›„ë³´ì—ì„œ ìµœê³  ìœ ì‚¬ë„ë¡œ ê²€ìƒ‰\n      if (!bestMatch) {\n        ocrItem.match_candidates?.forEach(candidate => {\n          const score = calculateItemSimilarity(ocrItem.extracted_item_name || '', candidate.item_name, candidate.specification);\n          if (score > bestScore && score >= 30) { // ìµœì†Œ 30ì  ì´ìƒ\n            bestScore = score;\n            bestMatch = {\n              purchase_id: candidate.purchase_id,\n              item_id: candidate.item_id,\n              purchase_order_number: candidate.purchase_order_number || '',\n              sales_order_number: candidate.sales_order_number,\n              item_name: candidate.item_name,\n              specification: candidate.specification,\n              quantity: candidate.quantity,\n              unit_price: candidate.unit_price,\n              amount: (candidate as any).amount,\n              vendor_name: candidate.vendor_name\n            };\n          }\n        });\n      }\n      \n      if (bestMatch) matchedCount++;\n      newMatches.set(ocrItem.id, bestMatch);\n    });\n    \n    setItemMatches(newMatches);\n    console.log(`ğŸ¯ ìë™ ë§¤ì¹­ ê²°ê³¼: ${matchedCount}/${statementWithItems.items.length}ê±´ ë§¤ì¹­ë¨`);\n    toast.success(`ìë™ ë§¤ì¹­ ì™„ë£Œ: ${matchedCount}/${statementWithItems.items.length}ê±´`);\n  };\n\n  // í™•ì •\n  const handleConfirm = async () => {\n    if (!statementWithItems) return;\n\n    try {\n      setSaving(true);\n\n      // 1. OCR ìˆ˜ì •ì‚¬í•­ í•™ìŠµ ë°ì´í„°ë¡œ ì €ì¥\n      await saveOCRCorrections();\n\n      // 2. í™•ì • ë°ì´í„° ìƒì„± (ìˆ˜ì •ëœ ê°’ ìš°ì„  ì‚¬ìš©)\n      const confirmItems: ConfirmItemRequest[] = statementWithItems.items.map(item => {\n        const matched = itemMatches.get(item.id);\n        const edited = editedOCRItems.get(item.id);\n        \n        // ìˆ˜ì •ëœ ê°’ì´ ìˆìœ¼ë©´ ìˆ˜ì •ëœ ê°’ ì‚¬ìš©, ì—†ìœ¼ë©´ ì›ë³¸ ì‚¬ìš©\n        const confirmedQuantity = edited?.quantity !== undefined \n          ? edited.quantity \n          : item.extracted_quantity;\n        const confirmedUnitPrice = edited?.unit_price !== undefined \n          ? edited.unit_price \n          : item.extracted_unit_price;\n        const confirmedAmount = edited?.amount !== undefined \n          ? edited.amount \n          : item.extracted_amount;\n        \n        return {\n          itemId: item.id,\n          matched_purchase_id: matched?.purchase_id,\n          matched_item_id: matched?.item_id,\n          confirmed_quantity: confirmedQuantity,\n          confirmed_unit_price: confirmedUnitPrice,\n          confirmed_amount: confirmedAmount\n        };\n      });\n\n      const result = await transactionStatementService.confirmStatement(\n        {\n          statementId: statement.id,\n          items: confirmItems\n        },\n        confirmerName\n      );\n\n      if (result.success) {\n        toast.success('ê±°ë˜ëª…ì„¸ì„œê°€ í™•ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');\n        onConfirm();\n      } else {\n        toast.error(result.error || 'í™•ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n      }\n    } catch (error) {\n      toast.error('í™•ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // ê±°ë¶€\n  const handleReject = async () => {\n    if (!confirm('ì´ ê±°ë˜ëª…ì„¸ì„œë¥¼ ê±°ë¶€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;\n\n    try {\n      setSaving(true);\n      \n      const result = await transactionStatementService.rejectStatement(statement.id);\n      \n      if (result.success) {\n        toast.success('ê±°ë˜ëª…ì„¸ì„œê°€ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤.');\n        onClose();\n      } else {\n        toast.error(result.error || 'ê±°ë¶€ ì²˜ë¦¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n      }\n    } catch (error) {\n      toast.error('ê±°ë¶€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const formatAmount = (amount?: number) => {\n    if (amount === undefined || amount === null) return '-';\n    return amount.toLocaleString('ko-KR');\n  };\n\n  // ë§¤ì¹­ ìƒì„¸ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\n  const getMatchDetails = (ocrItem: TransactionStatementItemWithMatch) => {\n    const matched = itemMatches.get(ocrItem.id);\n    let effectiveMatch: SystemPurchaseItem | null = matched || null;\n    let hasSystemItems = false;\n    \n    if (!effectiveMatch) {\n      const poNumber = isSamePONumber \n        ? selectedPONumber \n        : (itemPONumbers.get(ocrItem.id) || (ocrItem.extracted_po_number ? normalizeOrderNumber(ocrItem.extracted_po_number) : ''));\n      \n      if (poNumber) {\n        const systemItems = getSystemItemsForPO(poNumber);\n        hasSystemItems = systemItems.length > 0;\n        \n        let bestScore = 0;\n        systemItems.forEach(sysItem => {\n          const score = calculateItemSimilarity(ocrItem.extracted_item_name || '', sysItem.item_name, sysItem.specification);\n          if (score > bestScore) {\n            bestScore = score;\n            effectiveMatch = sysItem;\n          }\n        });\n      }\n    }\n    \n    if (!effectiveMatch) {\n      return {\n        ocrItemName: ocrItem.extracted_item_name || '-',\n        systemItemName: '-',\n        systemSpec: '-',\n        similarity: 0,\n        status: 'unmatched' as const,\n        reasons: ['ì‹œìŠ¤í…œì—ì„œ ë§¤ì¹­í•  ë°œì£¼ í’ˆëª©ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.']\n      };\n    }\n    \n    const similarity = calculateItemSimilarity(ocrItem.extracted_item_name || '', effectiveMatch.item_name || '', effectiveMatch.specification);\n    \n    let status: 'high' | 'med' | 'low' | 'unmatched' = 'unmatched';\n    if (similarity >= 80) status = 'high';\n    else if (similarity >= 50) status = 'med';\n    else if (similarity >= 30) status = 'low';\n    else if (hasSystemItems || matched) status = 'low';\n    \n    const reasons: string[] = [];\n    \n    // ìœ ì‚¬ë„ ì„¤ëª…\n    if (similarity >= 80) {\n      reasons.push(`âœ… í’ˆëª©ëª…/ê·œê²© ìœ ì‚¬ë„ ${similarity.toFixed(0)}% (ë†’ìŒ)`);\n    } else if (similarity >= 50) {\n      reasons.push(`âš ï¸ í’ˆëª©ëª…/ê·œê²© ìœ ì‚¬ë„ ${similarity.toFixed(0)}% (ë³´í†µ)`);\n    } else if (similarity >= 30) {\n      reasons.push(`âš ï¸ í’ˆëª©ëª…/ê·œê²© ìœ ì‚¬ë„ ${similarity.toFixed(0)}% (ë‚®ìŒ)`);\n    } else {\n      reasons.push(`âŒ í’ˆëª©ëª…/ê·œê²© ìœ ì‚¬ë„ ${similarity.toFixed(0)}% (ë§¤ìš° ë‚®ìŒ)`);\n    }\n    \n    // í’ˆëª©ëª… vs ê·œê²© ìƒì„¸ ë¹„êµ (ìœ ì‚¬ë„ì™€ ì¼ê´€ë˜ê²Œ)\n    const ocrName = (ocrItem.extracted_item_name || '').toLowerCase().replace(/\\s+/g, '');\n    const sysName = (effectiveMatch.item_name || '').toLowerCase().replace(/\\s+/g, '');\n    const sysSpec = (effectiveMatch.specification || '').toLowerCase().replace(/\\s+/g, '');\n    \n    // ê·œê²© ì¼ì¹˜ ì—¬ë¶€ ë¨¼ì € í™•ì¸\n    const specMatch = sysSpec && (ocrName === sysSpec || ocrName.includes(sysSpec) || sysSpec.includes(ocrName));\n    const nameMatch = ocrName === sysName || ocrName.includes(sysName) || sysName.includes(ocrName);\n    \n    if (similarity >= 80) {\n      // ìœ ì‚¬ë„ ë†’ìœ¼ë©´ ë¬´ì—‡ì´ ì¼ì¹˜í–ˆëŠ”ì§€ ì„¤ëª…\n      if (nameMatch && specMatch) {\n        reasons.push('âœ… í’ˆëª©ëª…ê³¼ ê·œê²© ëª¨ë‘ ì¼ì¹˜');\n      } else if (specMatch) {\n        reasons.push('âœ… ê·œê²©ìœ¼ë¡œ ë§¤ì¹­ë¨');\n      } else if (nameMatch) {\n        reasons.push('âœ… í’ˆëª©ëª…ìœ¼ë¡œ ë§¤ì¹­ë¨');\n      } else {\n        reasons.push('âœ… ë¬¸ìì—´ ìœ ì‚¬ë„ë¡œ ë§¤ì¹­ë¨');\n      }\n    } else if (similarity >= 50) {\n      if (specMatch) {\n        reasons.push('âš ï¸ ê·œê²© ë¶€ë¶„ ì¼ì¹˜');\n      } else if (nameMatch) {\n        reasons.push('âš ï¸ í’ˆëª©ëª… ë¶€ë¶„ ì¼ì¹˜');\n      } else {\n        reasons.push('âš ï¸ ë¶€ë¶„ì ìœ¼ë¡œ ìœ ì‚¬');\n      }\n    } else {\n      // ìœ ì‚¬ë„ ë‚®ì€ ê²½ìš°ë§Œ ë¶ˆì¼ì¹˜ í‘œì‹œ\n      reasons.push('âŒ í’ˆëª©ëª…/ê·œê²© ë¶ˆì¼ì¹˜ - í•œê¸€/ì˜ì–´ ì°¨ì´ ë˜ëŠ” ë‹¤ë¥¸ í’ˆëª©ì¼ ìˆ˜ ìˆìŒ');\n    }\n    \n    // ë°œì£¼ë²ˆí˜¸ ì„¤ëª…\n    reasons.push(`ğŸ“¦ ë°œì£¼ë²ˆí˜¸: ${effectiveMatch.purchase_order_number || effectiveMatch.sales_order_number || '-'}`);\n    \n    // ì‹œìŠ¤í…œ í’ˆëª© ìƒì„¸\n    if (effectiveMatch.specification) {\n      reasons.push(`ğŸ“‹ ì‹œìŠ¤í…œ ê·œê²©: ${effectiveMatch.specification}`);\n    }\n    \n    return {\n      ocrItemName: ocrItem.extracted_item_name || '-',\n      systemItemName: effectiveMatch.item_name || '-',\n      systemSpec: effectiveMatch.specification || '-',\n      similarity,\n      status,\n      reasons\n    };\n  };\n  \n  // ë§¤ì¹­ ìƒíƒœ ë±ƒì§€ í´ë¦­ í•¸ë“¤ëŸ¬\n  const handleMatchStatusClick = (ocrItem: TransactionStatementItemWithMatch) => {\n    const details = getMatchDetails(ocrItem);\n    setMatchDetailPopup({\n      isOpen: true,\n      ocrItemId: ocrItem.id,\n      ...details\n    });\n  };\n\n  const renderMatchStatusBadge = (status: 'high' | 'med' | 'low' | 'unmatched', ocrItem?: TransactionStatementItemWithMatch) => {\n    const onClick = ocrItem ? () => handleMatchStatusClick(ocrItem) : undefined;\n    const clickableClass = ocrItem ? \"cursor-pointer hover:opacity-80 transition-opacity\" : \"\";\n    \n    switch (status) {\n      case 'high':\n        return <span className={`badge-stats bg-green-500 text-white ${clickableClass}`} onClick={onClick} title=\"í´ë¦­í•˜ì—¬ ìƒì„¸ ë³´ê¸°\"><Check className=\"w-3 h-3\" />ë†’ìŒ</span>;\n      case 'med':\n        return <span className={`badge-stats bg-yellow-500 text-white ${clickableClass}`} onClick={onClick} title=\"í´ë¦­í•˜ì—¬ ìƒì„¸ ë³´ê¸°\">ë³´í†µ</span>;\n      case 'low':\n        return <span className={`badge-stats bg-orange-500 text-white ${clickableClass}`} onClick={onClick} title=\"í´ë¦­í•˜ì—¬ ìƒì„¸ ë³´ê¸°\">ë‚®ìŒ</span>;\n      case 'unmatched':\n        return <span className={`badge-stats bg-gray-500 text-white ${clickableClass}`} onClick={onClick} title=\"í´ë¦­í•˜ì—¬ ìƒì„¸ ë³´ê¸°\">ë¯¸ë§¤ì¹­</span>;\n    }\n  };\n\n  const toggleDropdown = (key: string) => {\n    setOpenDropdowns(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(key)) {\n        newSet.delete(key);\n      } else {\n        newSet.clear(); // ë‹¤ë¥¸ ë“œë¡­ë‹¤ìš´ ë‹«ê¸°\n        newSet.add(key);\n      }\n      return newSet;\n    });\n  };\n\n  if (!statement) return null;\n\n  return (\n    <>\n      <Dialog open={isOpen} onOpenChange={onClose}>\n        <DialogContent className=\"max-w-[95vw] md:max-w-[1200px] max-h-[90vh] overflow-hidden flex flex-col business-radius-modal\" showCloseButton={false}>\n          <DialogHeader className=\"border-b border-gray-100 pb-3\">\n            <DialogTitle className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-2 modal-title\">\n                <CheckCircle className=\"w-4 h-4 text-hansl-600\" />\n                ê±°ë˜ëª…ì„¸ì„œ í™•ì¸ ë° í™•ì •\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={handleAutoMatch}\n                  className=\"button-base h-7 text-[10px] border-blue-300 text-blue-600 hover:bg-blue-50\"\n                >\n                  <Wand2 className=\"w-3.5 h-3.5 mr-1\" />\n                  ìë™ ë§¤ì¹­\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => setIsImageViewerOpen(true)}\n                  className=\"button-base h-7 text-[10px]\"\n                >\n                  <ImageIcon className=\"w-3.5 h-3.5 mr-1\" />\n                  ì›ë³¸ ë³´ê¸°\n                </Button>\n              </div>\n            </DialogTitle>\n          </DialogHeader>\n\n          {loading ? (\n            <div className=\"flex items-center justify-center py-12\">\n              <Loader2 className=\"w-6 h-6 animate-spin text-hansl-600\" />\n              <span className=\"ml-3 modal-subtitle\">ë¡œë”© ì¤‘...</span>\n            </div>\n          ) : statementWithItems ? (\n            <div className=\"flex-1 overflow-hidden flex flex-col py-3\">\n              {/* ìš”ì•½ ì •ë³´ */}\n              <div className=\"flex items-center gap-6 p-3 bg-gray-50 business-radius-card mb-4\">\n                <div>\n                  <p className=\"modal-label\">ê±°ë˜ì²˜</p>\n                  <p className=\"modal-value\">{statementWithItems.vendor_name || '-'}</p>\n                </div>\n                <div>\n                  <p className=\"modal-label\">ê±°ë˜ì¼</p>\n                  <p className=\"modal-value\">\n                    {statementWithItems.statement_date \n                      ? new Date(statementWithItems.statement_date).toLocaleDateString('ko-KR')\n                      : '-'\n                    }\n                  </p>\n                </div>\n                <div>\n                  <p className=\"modal-label\">í•©ê³„ê¸ˆì•¡</p>\n                  <p className=\"modal-value-large\">\n                    {formatAmount(statementWithItems.grand_total)}ì›\n                  </p>\n                </div>\n                <div>\n                  <p className=\"modal-label\">í’ˆëª© ìˆ˜</p>\n                  <p className=\"modal-value\">{statementWithItems.items.length}ê±´</p>\n                </div>\n              </div>\n\n              {/* 3ë‹¨ ë¹„êµ í…Œì´ë¸” */}\n              <div className=\"flex-1 overflow-auto border border-gray-200 business-radius-card\">\n                <table className=\"modal-value table-auto min-w-full\">\n                  <thead className=\"bg-gray-100 sticky top-0 z-10\">\n                    <tr>\n                      {/* ì¢Œì¸¡: ì‹œìŠ¤í…œ ë°œì£¼í’ˆëª© í—¤ë” */}\n                      <th colSpan={isSamePONumber ? 4 : 5} className=\"border-b border-r-2 border-gray-300 p-2 text-left w-[45%]\">\n                        <div className=\"flex items-center gap-2 flex-wrap\">\n                          <span className=\"modal-section-title text-gray-700\">ğŸ“‹ ì‹œìŠ¤í…œ ë°œì£¼í’ˆëª©</span>\n                          {/* ì„¸íŠ¸ ë§¤ì¹­ ì‹ ë¢°ë„ í‘œì‹œ */}\n                          {isSamePONumber && setMatchResult?.bestMatch && (\n                            <span className={`text-[9px] px-1.5 py-0.5 rounded font-medium ${\n                              setMatchResult.bestMatch.confidence === 'high' \n                                ? 'bg-green-100 text-green-700' \n                                : setMatchResult.bestMatch.confidence === 'medium'\n                                ? 'bg-yellow-100 text-yellow-700'\n                                : 'bg-red-100 text-red-700'\n                            }`}>\n                              ì„¸íŠ¸ ë§¤ì¹­ {setMatchResult.bestMatch.matchScore}%\n                              ({setMatchResult.bestMatch.matchedItemCount}/{setMatchResult.bestMatch.totalItemCount})\n                            </span>\n                          )}\n                          {isSamePONumber && allPONumberCandidates.length > 0 && (\n                            <div className=\"relative\">\n                              <button\n                                onClick={() => toggleDropdown('global-po')}\n                                className=\"inline-flex items-center gap-1 px-2 py-1 text-[10px] font-medium bg-white border border-blue-300 rounded-md hover:bg-blue-50 text-blue-700\"\n                              >\n                                {selectedPONumber || 'ë°œì£¼ë²ˆí˜¸ ì„ íƒ'}\n                                <ChevronDown className=\"w-3 h-3\" />\n                              </button>\n                              {openDropdowns.has('global-po') && (\n                                <div className=\"absolute left-0 top-full mt-1 z-30 bg-white border border-gray-200 rounded-md shadow-lg min-w-[240px] max-h-[250px] overflow-auto\">\n                                  {allPONumberCandidates.map((c, idx) => {\n                                    const displayNumber = c.poNumber || c.salesOrderNumber || '';\n                                    const isSelected = selectedPONumber === displayNumber;\n                                    const isBestMatch = setMatchResult?.bestMatch?.purchase_order_number === c.poNumber ||\n                                                       setMatchResult?.bestMatch?.sales_order_number === c.salesOrderNumber;\n                                    \n                                    return (\n                                      <div\n                                        key={idx}\n                                        onClick={() => {\n                                          handleSelectGlobalPO(displayNumber);\n                                          toggleDropdown('global-po');\n                                        }}\n                                        className={`p-2 cursor-pointer border-b border-gray-100 last:border-0 ${\n                                          isSelected ? 'bg-blue-50' : 'hover:bg-gray-100'\n                                        } ${isBestMatch ? 'ring-1 ring-green-400' : ''}`}\n                                      >\n                                        <div className=\"flex items-center justify-between\">\n                                          <p className=\"modal-label text-gray-900\">\n                                            {displayNumber}\n                                          </p>\n                                          {c.setMatchScore !== undefined && (\n                                            <span className={`text-[9px] px-1.5 py-0.5 rounded ${\n                                              c.setMatchScore >= 80 ? 'bg-green-100 text-green-700' :\n                                              c.setMatchScore >= 50 ? 'bg-yellow-100 text-yellow-700' :\n                                              'bg-gray-100 text-gray-600'\n                                            }`}>\n                                              {c.setMatchScore}%\n                                            </span>\n                                          )}\n                                        </div>\n                                        <p className=\"text-[9px] text-gray-500\">\n                                          {c.matchedItemCount !== undefined \n                                            ? `${c.matchedItemCount}/${statementWithItems?.items.length || 0}ê°œ ë§¤ì¹­`\n                                            : `${c.itemCount}ê°œ í’ˆëª©`\n                                          } Â· {c.vendorName || 'ê±°ë˜ì²˜ ë¯¸ìƒ'}\n                                        </p>\n                                        {isBestMatch && (\n                                          <p className=\"text-[8px] text-green-600 font-medium mt-0.5\">\n                                            âœ… ì„¸íŠ¸ ë§¤ì¹­ ì¶”ì²œ\n                                          </p>\n                                        )}\n                                      </div>\n                                    );\n                                  })}\n                                </div>\n                              )}\n                            </div>\n                          )}\n                        </div>\n                      </th>\n                      \n                      {/* ì¤‘ì•™: ë§¤ì¹­ í›„ë³´ */}\n                      <th className=\"border-b border-r-2 border-gray-300 p-2 text-center bg-blue-50 w-[10%]\">\n                        <span className=\"modal-section-title text-blue-700\">ğŸ”— ë§¤ì¹­ í›„ë³´</span>\n                      </th>\n                      \n                      {/* ìš°ì¸¡: OCR ì¶”ì¶œ í’ˆëª© í—¤ë” */}\n                      <th colSpan={isSamePONumber ? 4 : 5} className=\"border-b border-gray-200 p-2 text-left w-[45%]\">\n                        <span className=\"modal-section-title text-gray-700\">\n                          ğŸ“„ OCR ì¶”ì¶œ í’ˆëª©\n                          {isSamePONumber && commonPONumber && (\n                            <span className=\"ml-2 px-2 py-0.5 bg-blue-100 text-blue-700 text-[10px] font-medium rounded\">\n                              {commonPONumber}\n                            </span>\n                          )}\n                        </span>\n                      </th>\n                    </tr>\n                    <tr className=\"modal-label\">\n                      {/* ì¢Œì¸¡ ì»¬ëŸ¼ */}\n                      {!isSamePONumber && (\n                        <th className=\"border-b border-r border-gray-100 p-1 text-left whitespace-nowrap modal-label\">ë°œì£¼/ìˆ˜ì£¼ë²ˆí˜¸</th>\n                      )}\n                      <th className=\"border-b border-r border-gray-100 p-2 text-left modal-label\">í’ˆëª©ëª…</th>\n                      <th className=\"border-b border-r border-gray-100 p-2 text-right modal-label\">ìˆ˜ëŸ‰</th>\n                      <th className=\"border-b border-r border-gray-100 p-2 text-right modal-label\">ë‹¨ê°€</th>\n                      <th className=\"border-b border-r-2 border-gray-300 p-2 text-right modal-label\">í•©ê³„</th>\n                      \n                      {/* ì¤‘ì•™ */}\n                      <th className=\"border-b border-r-2 border-gray-300 p-2 text-center bg-blue-50\"></th>\n                      \n                      {/* ìš°ì¸¡ ì»¬ëŸ¼ */}\n                      <th className=\"border-b border-r border-gray-100 p-2 text-left whitespace-nowrap modal-label\">í’ˆëª©ëª…</th>\n                      <th className=\"border-b border-r border-gray-100 p-2 text-right whitespace-nowrap w-16 modal-label\">ìˆ˜ëŸ‰</th>\n                      <th className=\"border-b border-r border-gray-100 p-2 text-right whitespace-nowrap w-20 modal-label\">ë‹¨ê°€</th>\n                      <th className={`border-b p-2 text-right whitespace-nowrap w-24 modal-label ${!isSamePONumber ? 'border-r border-gray-100' : ''}`}>í•©ê³„</th>\n                      {!isSamePONumber && (\n                        <th className=\"border-b p-1 text-left whitespace-nowrap modal-label\">ë°œì£¼/ìˆ˜ì£¼ë²ˆí˜¸</th>\n                      )}\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {statementWithItems.items.map((ocrItem) => {\n                      const matchedSystem = itemMatches.get(ocrItem.id);\n                      const matchStatus = getMatchStatus(ocrItem);\n                      // OCR ì¶”ì¶œ ë²ˆí˜¸ë¥¼ ì‹œìŠ¤í…œ í˜•ì‹ìœ¼ë¡œ ì •ê·œí™” (ì˜ˆ: _01 â†’ _001, -1 â†’ -01)\n                      const normalizedExtractedPO = ocrItem.extracted_po_number \n                        ? normalizeOrderNumber(ocrItem.extracted_po_number) \n                        : undefined;\n                      const itemPO = itemPONumbers.get(ocrItem.id) || normalizedExtractedPO;\n                      const poCandidates = getPOCandidatesForItem(ocrItem.id);\n                      const systemCandidates = getSystemItemsForPO(isSamePONumber ? selectedPONumber : (itemPO || ''));\n                      \n                      return (\n                        <tr key={ocrItem.id} className=\"hover:bg-gray-50 border-b border-gray-100\">\n                          {/* Case 2: ë°œì£¼ë²ˆí˜¸ ì»¬ëŸ¼ */}\n                          {!isSamePONumber && (\n                            <td className=\"border-r border-gray-100 p-1 whitespace-nowrap\">\n                              <div className=\"relative\">\n                                <button\n                                  onClick={() => toggleDropdown(`po-${ocrItem.id}`)}\n                                  className=\"inline-flex items-center gap-1 px-2 py-1 text-[11px] font-medium bg-blue-50 border border-blue-200 business-radius hover:bg-blue-100 text-blue-700 whitespace-nowrap\"\n                                  style={{ fontSize: '11px' }}\n                                >\n                                  <span>{itemPO || 'ì„ íƒ'}</span>\n                                  <ChevronDown className=\"w-3 h-3 flex-shrink-0\" />\n                                </button>\n                                {openDropdowns.has(`po-${ocrItem.id}`) && poCandidates.length > 0 && (\n                                  <div className=\"absolute left-0 top-full mt-1 z-20 bg-white border border-gray-200 rounded-md shadow-lg min-w-[150px] max-h-[150px] overflow-auto\">\n                                    {poCandidates.map((po, idx) => (\n                                      <div\n                                        key={idx}\n                                        onClick={() => handleSelectItemPO(ocrItem.id, po)}\n                                        className={`px-2 py-1.5 hover:bg-gray-100 cursor-pointer text-[11px] font-medium ${po === itemPO ? 'bg-blue-50 text-blue-700' : 'text-gray-700'}`}\n                                        style={{ fontSize: '11px' }}\n                                      >\n                                        {po}\n                                      </div>\n                                    ))}\n                                  </div>\n                                )}\n                              </div>\n                            </td>\n                          )}\n                          \n                          {/* ì¢Œì¸¡: ì‹œìŠ¤í…œ í’ˆëª© */}\n                          <td className=\"border-r border-gray-100 p-1\">\n                            {matchedSystem ? (\n                              <div className=\"flex items-center gap-1 whitespace-nowrap\">\n                                <span className=\"text-[11px] font-medium text-gray-900\" style={{ fontSize: '11px' }}>{matchedSystem.item_name}</span>\n                                <button\n                                  onClick={() => handleSelectSystemItem(ocrItem.id, null)}\n                                  className=\"text-gray-400 hover:text-red-500 flex-shrink-0\"\n                                  title=\"ë§¤ì¹­ í•´ì œ\"\n                                >\n                                  <XCircle className=\"w-3 h-3\" />\n                                </button>\n                              </div>\n                            ) : systemCandidates.length > 0 ? (\n                              <div className=\"relative\">\n                                <button\n                                  onClick={() => toggleDropdown(`item-${ocrItem.id}`)}\n                                  className=\"flex items-center gap-1 text-blue-600 hover:text-blue-700 text-[11px]\"\n                                  style={{ fontSize: '11px' }}\n                                >\n                                  <span>â–¼ í›„ë³´ ì„ íƒ</span>\n                                  <span className=\"text-gray-400\">({systemCandidates.length})</span>\n                                </button>\n                                \n                                {openDropdowns.has(`item-${ocrItem.id}`) && (\n                                  <div className=\"absolute left-0 top-full mt-1 z-20 bg-white border border-gray-200 rounded-md shadow-lg min-w-[280px] max-h-[200px] overflow-auto\">\n                                    {systemCandidates.map((candidate, cidx) => {\n                                      const score = calculateItemSimilarity(ocrItem.extracted_item_name || '', candidate.item_name, candidate.specification);\n                                      return (\n                                        <div\n                                          key={cidx}\n                                          onClick={() => handleSelectSystemItem(ocrItem.id, candidate)}\n                                          className=\"px-2 py-1.5 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-0\"\n                                        >\n                                          <div className=\"flex items-center justify-between\">\n                                            <p className=\"text-[11px] font-medium text-gray-900\" style={{ fontSize: '11px' }}>{candidate.item_name}</p>\n                                            <span className={`text-[10px] px-1.5 py-0.5 rounded ${\n                                              score >= 80 ? 'bg-green-100 text-green-700' :\n                                              score >= 50 ? 'bg-yellow-100 text-yellow-700' :\n                                              'bg-gray-100 text-gray-600'\n                                            }`}>\n                                              {Math.round(score)}%\n                                            </span>\n                                          </div>\n                                          <p className=\"text-[10px] text-gray-500\">\n                                            {candidate.quantity ?? '-'}ê°œ Ã— {formatAmount(candidate.unit_price)} = {formatAmount(candidate.amount)}\n                                          </p>\n                                        </div>\n                                      );\n                                    })}\n                                  </div>\n                                )}\n                              </div>\n                            ) : (\n                              <span className=\"text-[11px] text-gray-400\" style={{ fontSize: '11px' }}>í›„ë³´ ì—†ìŒ</span>\n                            )}\n                          </td>\n                          <td className=\"border-r border-gray-100 p-1 text-right\">\n                            <span className=\"text-[11px] text-gray-700\" style={{ fontSize: '11px' }}>{matchedSystem?.quantity ?? '-'}</span>\n                          </td>\n                          <td className=\"border-r border-gray-100 p-1 text-right\">\n                            <span className=\"text-[11px] text-gray-700\" style={{ fontSize: '11px' }}>{matchedSystem ? formatAmount(matchedSystem.unit_price) : '-'}</span>\n                          </td>\n                          <td className=\"border-r-2 border-gray-300 p-1 text-right\">\n                            <span className=\"text-[11px] font-bold text-gray-900\" style={{ fontSize: '11px', fontWeight: 700 }}>{matchedSystem ? formatAmount(matchedSystem.amount) : '-'}</span>\n                          </td>\n                          \n                          {/* ì¤‘ì•™: ë§¤ì¹­ ìƒíƒœ (í´ë¦­í•˜ì—¬ ìƒì„¸ ë³´ê¸°) */}\n                          <td className=\"border-r-2 border-gray-300 p-2 text-center bg-blue-50/50\">\n                            {renderMatchStatusBadge(matchStatus, ocrItem)}\n                          </td>\n                          \n                          {/* ìš°ì¸¡: OCR í’ˆëª© (í¸ì§‘ ê°€ëŠ¥) */}\n                          <td className=\"border-r border-gray-100 p-1 whitespace-nowrap\">\n                            <input\n                              type=\"text\"\n                              value={getOCRItemValue(ocrItem, 'item_name') as string}\n                              onChange={(e) => handleEditOCRItem(ocrItem.id, 'item_name', e.target.value)}\n                              className={`min-w-[180px] w-auto px-1.5 py-0.5 !text-[11px] !font-medium text-gray-900 border business-radius focus:outline-none focus:ring-1 focus:ring-blue-400 ${\n                                isOCRItemEdited(ocrItem, 'item_name') \n                                  ? 'border-orange-400 bg-orange-50' \n                                  : 'border-gray-200 bg-white'\n                              }`}\n                              style={{ fontSize: '11px', fontWeight: 500, width: `${Math.max(180, (getOCRItemValue(ocrItem, 'item_name') as string).length * 8)}px` }}\n                              title={isOCRItemEdited(ocrItem, 'item_name') ? `ì›ë³¸: ${ocrItem.extracted_item_name}` : undefined}\n                            />\n                          </td>\n                          <td className=\"border-r border-gray-100 p-1\">\n                            <input\n                              type=\"number\"\n                              value={getOCRItemValue(ocrItem, 'quantity') as number}\n                              onChange={(e) => handleEditOCRItem(ocrItem.id, 'quantity', e.target.value ? Number(e.target.value) : 0)}\n                              className={`w-16 px-1.5 py-0.5 !text-[11px] !font-medium text-gray-900 text-right border business-radius focus:outline-none focus:ring-1 focus:ring-blue-400 ${\n                                isOCRItemEdited(ocrItem, 'quantity') \n                                  ? 'border-orange-400 bg-orange-50' \n                                  : 'border-gray-200 bg-white'\n                              }`}\n                              style={{ fontSize: '11px', fontWeight: 500 }}\n                              title={isOCRItemEdited(ocrItem, 'quantity') ? `ì›ë³¸: ${ocrItem.extracted_quantity}` : undefined}\n                            />\n                          </td>\n                          <td className=\"border-r border-gray-100 p-1\">\n                            <input\n                              type=\"number\"\n                              value={getOCRItemValue(ocrItem, 'unit_price') as number}\n                              onChange={(e) => handleEditOCRItem(ocrItem.id, 'unit_price', e.target.value ? Number(e.target.value) : 0)}\n                              className={`w-20 px-1.5 py-0.5 !text-[11px] !font-medium text-gray-900 text-right border business-radius focus:outline-none focus:ring-1 focus:ring-blue-400 ${\n                                isOCRItemEdited(ocrItem, 'unit_price') \n                                  ? 'border-orange-400 bg-orange-50' \n                                  : 'border-gray-200 bg-white'\n                              }`}\n                              style={{ fontSize: '11px', fontWeight: 500 }}\n                              title={isOCRItemEdited(ocrItem, 'unit_price') ? `ì›ë³¸: ${ocrItem.extracted_unit_price}` : undefined}\n                            />\n                          </td>\n                          <td className={`p-1 ${!isSamePONumber ? 'border-r border-gray-100' : ''}`}>\n                            <input\n                              type=\"number\"\n                              value={getOCRItemValue(ocrItem, 'amount') as number}\n                              onChange={(e) => handleEditOCRItem(ocrItem.id, 'amount', e.target.value ? Number(e.target.value) : 0)}\n                              className={`w-24 px-1.5 py-0.5 !text-[11px] !font-bold text-gray-900 text-right border business-radius focus:outline-none focus:ring-1 focus:ring-blue-400 ${\n                                isOCRItemEdited(ocrItem, 'amount') \n                                  ? 'border-orange-400 bg-orange-50' \n                                  : 'border-gray-200 bg-white'\n                              }`}\n                              style={{ fontSize: '11px', fontWeight: 700 }}\n                              title={isOCRItemEdited(ocrItem, 'amount') ? `ì›ë³¸: ${ocrItem.extracted_amount}` : undefined}\n                            />\n                          </td>\n                          \n                          {/* Case 2: OCR ë°œì£¼ë²ˆí˜¸ í‘œì‹œ (í¸ì§‘ ê°€ëŠ¥) */}\n                          {!isSamePONumber && (\n                            <td className=\"p-1 whitespace-nowrap\">\n                              <input\n                                type=\"text\"\n                                value={getOCRItemValue(ocrItem, 'po_number') as string}\n                                onChange={(e) => handleEditOCRItem(ocrItem.id, 'po_number', e.target.value)}\n                                className={`w-full px-1.5 py-0.5 !text-[11px] !font-medium text-gray-900 border business-radius focus:outline-none focus:ring-1 focus:ring-blue-400 ${\n                                  isOCRItemEdited(ocrItem, 'po_number') \n                                    ? 'border-orange-400 bg-orange-50' \n                                    : 'border-gray-200 bg-white'\n                                }`}\n                                style={{ fontSize: '11px', fontWeight: 500 }}\n                                title={isOCRItemEdited(ocrItem, 'po_number') ? `ì›ë³¸: ${ocrItem.extracted_po_number}` : undefined}\n                              />\n                            </td>\n                          )}\n                        </tr>\n                      );\n                    })}\n                    \n                    {/* í•©ê³„ í–‰ */}\n                    <tr className=\"bg-gray-50 font-medium\">\n                      <td colSpan={isSamePONumber ? 3 : 4} className=\"border-t border-gray-200 p-2 text-right text-gray-600\">\n                        ì‹œìŠ¤í…œ í•©ê³„\n                      </td>\n                      <td className=\"border-r-2 border-t border-gray-300 p-2 text-right text-gray-900\">\n                        {formatAmount(\n                          Array.from(itemMatches.values())\n                            .filter(Boolean)\n                            .reduce((sum, item) => sum + (item?.amount || 0), 0)\n                        )}\n                      </td>\n                      <td className=\"border-r-2 border-t border-gray-300 p-2 bg-blue-50/50\"></td>\n                      <td colSpan={isSamePONumber ? 3 : 4} className=\"border-t border-gray-200 p-2 text-right text-gray-600\">\n                        OCR í•©ê³„\n                        {editedOCRItems.size > 0 && (\n                          <span className=\"ml-1 text-[9px] text-orange-600\">(ìˆ˜ì •ë¨)</span>\n                        )}\n                      </td>\n                      <td className=\"border-t border-gray-200 p-2 text-right text-gray-900\">\n                        {formatAmount(\n                          statementWithItems.items.reduce((sum, item) => {\n                            const edited = editedOCRItems.get(item.id);\n                            const amount = edited?.amount !== undefined ? edited.amount : (item.extracted_amount || 0);\n                            return sum + amount;\n                          }, 0)\n                        )}\n                      </td>\n                      {!isSamePONumber && <td className=\"border-t border-gray-200\"></td>}\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          ) : (\n            <div className=\"text-center py-12\">\n              <p className=\"modal-subtitle\">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>\n            </div>\n          )}\n\n          <DialogFooter className=\"border-t border-gray-100 pt-3 gap-2\">\n            <Button\n              variant=\"outline\"\n              onClick={handleReject}\n              disabled={saving}\n              className=\"button-base h-8 text-[11px] text-red-500 border-red-200 hover:bg-red-50\"\n            >\n              <XCircle className=\"w-3.5 h-3.5 mr-1\" />\n              ê±°ë¶€\n            </Button>\n            <Button\n              variant=\"outline\"\n              onClick={onClose}\n              disabled={saving}\n              className=\"button-base h-8 text-[11px]\"\n            >\n              ë‹«ê¸°\n            </Button>\n            <Button\n              onClick={handleConfirm}\n              disabled={saving || !statementWithItems}\n              className=\"button-base h-8 text-[11px] bg-hansl-600 hover:bg-hansl-700 text-white\"\n            >\n              {saving ? (\n                <>\n                  <Loader2 className=\"w-3.5 h-3.5 mr-1 animate-spin\" />\n                  ì²˜ë¦¬ ì¤‘...\n                </>\n              ) : (\n                <>\n                  <CheckCircle className=\"w-3.5 h-3.5 mr-1\" />\n                  í™•ì •\n                </>\n              )}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* ë§¤ì¹­ ìƒì„¸ ì •ë³´ íŒì—… */}\n      {matchDetailPopup && (\n        <Dialog open={matchDetailPopup.isOpen} onOpenChange={() => setMatchDetailPopup(null)}>\n          <DialogContent className=\"max-w-md\">\n            <DialogHeader>\n              <DialogTitle className=\"text-[14px] font-semibold text-gray-800\">\n                ë§¤ì¹­ ìƒì„¸ ì •ë³´\n              </DialogTitle>\n            </DialogHeader>\n            \n            <div className=\"space-y-4 py-2\">\n              {/* ë§¤ì¹­ ìƒíƒœ ë±ƒì§€ */}\n              <div className=\"flex items-center justify-center\">\n                {renderMatchStatusBadge(matchDetailPopup.status)}\n                <span className=\"ml-2 text-[12px] text-gray-600\">\n                  ìœ ì‚¬ë„: {matchDetailPopup.similarity.toFixed(1)}%\n                </span>\n              </div>\n              \n              {/* ë¹„êµ í…Œì´ë¸” */}\n              <div className=\"bg-gray-50 rounded-lg p-3 space-y-2\">\n                <div className=\"flex items-start gap-2\">\n                  <span className=\"text-[11px] font-medium text-gray-500 w-20 shrink-0\">OCR í’ˆëª©:</span>\n                  <span className=\"text-[11px] text-gray-800 break-all\">{matchDetailPopup.ocrItemName}</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <span className=\"text-[11px] font-medium text-gray-500 w-20 shrink-0\">ì‹œìŠ¤í…œ í’ˆëª©:</span>\n                  <span className=\"text-[11px] text-gray-800 break-all\">{matchDetailPopup.systemItemName}</span>\n                </div>\n                {matchDetailPopup.systemSpec && matchDetailPopup.systemSpec !== '-' && (\n                  <div className=\"flex items-start gap-2\">\n                    <span className=\"text-[11px] font-medium text-gray-500 w-20 shrink-0\">ì‹œìŠ¤í…œ ê·œê²©:</span>\n                    <span className=\"text-[11px] text-gray-800 break-all\">{matchDetailPopup.systemSpec}</span>\n                  </div>\n                )}\n              </div>\n              \n              {/* ë§¤ì¹­ ì´ìœ  */}\n              <div className=\"space-y-1\">\n                <span className=\"text-[11px] font-medium text-gray-600\">ë§¤ì¹­ íŒì • ì´ìœ :</span>\n                <ul className=\"space-y-1\">\n                  {matchDetailPopup.reasons.map((reason, idx) => (\n                    <li key={idx} className=\"text-[11px] text-gray-700 pl-2\">\n                      {reason}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            </div>\n            \n            <DialogFooter>\n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                onClick={() => setMatchDetailPopup(null)}\n                className=\"text-[11px]\"\n              >\n                ë‹«ê¸°\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      )}\n\n      {/* ì´ë¯¸ì§€ ë·°ì–´ */}\n      <StatementImageViewer\n        isOpen={isImageViewerOpen}\n        imageUrl={statement.image_url}\n        onClose={() => setIsImageViewerOpen(false)}\n      />\n    </>\n  );\n}\n","import { useState, useEffect, useCallback, useRef } from \"react\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { \n  Search, \n  FileCheck, \n  Plus, \n  Trash2, \n  Eye,\n  CheckCircle,\n  Clock,\n  AlertCircle,\n  XCircle,\n  Loader2,\n  RefreshCw,\n  Image as ImageIcon,\n  SlidersHorizontal\n} from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport transactionStatementService from \"@/services/transactionStatementService\";\nimport type { \n  TransactionStatement, \n  TransactionStatementStatus \n} from \"@/types/transactionStatement\";\nimport StatementUploadModal from \"./StatementUploadModal\";\nimport StatementConfirmModal from \"./StatementConfirmModal\";\nimport StatementImageViewer from \"./StatementImageViewer\";\n\n/**\n * ê±°ë˜ëª…ì„¸ì„œ í™•ì¸ ë©”ì¸ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸\n * \n * ê±°ë˜ëª…ì„¸ì„œ ëª©ë¡ ì¡°íšŒ, ì—…ë¡œë“œ, OCR ì¶”ì¶œ, ë°œì£¼ ë§¤ì¹­, í™•ì • ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.\n */\nexport default function TransactionStatementMain() {\n  const [statements, setStatements] = useState<TransactionStatement[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\n  const [dateFilter, setDateFilter] = useState(\"\");\n  const [totalCount, setTotalCount] = useState(0);\n  const [showFilters, setShowFilters] = useState(false);\n  \n  // ëª¨ë‹¬ ìƒíƒœ\n  const [isUploadModalOpen, setIsUploadModalOpen] = useState(false);\n  const [selectedStatement, setSelectedStatement] = useState<TransactionStatement | null>(null);\n  const [isConfirmModalOpen, setIsConfirmModalOpen] = useState(false);\n  const [isImageViewerOpen, setIsImageViewerOpen] = useState(false);\n  const [viewerImageUrl, setViewerImageUrl] = useState<string>(\"\");\n  \n  // OCR ì¶”ì¶œ ì§„í–‰ ì¤‘ì¸ IDë“¤\n  const [extractingIds, setExtractingIds] = useState<Set<string>>(new Set());\n\n  // ë°ì´í„° ë¡œë“œ\n  const loadStatements = useCallback(async () => {\n    try {\n      setLoading(true);\n      const result = await transactionStatementService.getStatements({\n        status: statusFilter !== 'all' ? statusFilter : undefined,\n        dateFrom: dateFilter || undefined,\n        search: searchTerm || undefined,\n        limit: 50\n      });\n\n      if (result.success) {\n        setStatements(result.data || []);\n        setTotalCount(result.count || 0);\n      } else {\n        toast.error(result.error || 'ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n      }\n    } catch (error) {\n      toast.error('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n    } finally {\n      setLoading(false);\n    }\n  }, [statusFilter, dateFilter, searchTerm]);\n\n  useEffect(() => {\n    loadStatements();\n  }, [loadStatements]);\n\n  // Supabase Realtime êµ¬ë… - ìƒíƒœ ë³€ê²½ ì‹œ ìë™ ê°±ì‹ \n  const supabaseRef = useRef(createClient());\n  \n  useEffect(() => {\n    const supabase = supabaseRef.current;\n    \n    // transaction_statements í…Œì´ë¸”ì˜ ë³€ê²½ì‚¬í•­ êµ¬ë…\n    const channel = supabase\n      .channel('transaction-statements-changes')\n      .on(\n        'postgres_changes',\n        {\n          event: '*', // INSERT, UPDATE, DELETE ëª¨ë‘ êµ¬ë…\n          schema: 'public',\n          table: 'transaction_statements'\n        },\n        (payload) => {\n          console.log('[Realtime] Statement changed:', payload);\n          \n          // ìƒíƒœê°€ ë³€ê²½ë˜ë©´ ëª©ë¡ ê°±ì‹ \n          if (payload.eventType === 'UPDATE') {\n            const newStatus = payload.new?.status;\n            const oldStatus = payload.old?.status;\n            \n            // ìƒíƒœê°€ processing â†’ extracted ë˜ëŠ” ë‹¤ë¥¸ ìƒíƒœë¡œ ë³€ê²½ëì„ ë•Œ\n            if (newStatus !== oldStatus) {\n              console.log(`[Realtime] Status changed: ${oldStatus} â†’ ${newStatus}`);\n              loadStatements();\n            }\n          } else if (payload.eventType === 'INSERT' || payload.eventType === 'DELETE') {\n            loadStatements();\n          }\n        }\n      )\n      .subscribe();\n\n    return () => {\n      supabase.removeChannel(channel);\n    };\n  }, [loadStatements]);\n\n  // ìƒíƒœ ë°°ì§€ ë Œë”ë§\n  const renderStatusBadge = (status: TransactionStatementStatus) => {\n    const baseClass = \"inline-flex items-center gap-1 business-radius-badge px-2 py-0.5 text-[10px] font-medium leading-tight\";\n    \n    switch (status) {\n      case 'pending':\n        return (\n          <span className={`${baseClass} bg-gray-100 text-gray-600 border border-gray-200`}>\n            <Clock className=\"w-3 h-3\" />\n            ëŒ€ê¸°ì¤‘\n          </span>\n        );\n      case 'processing':\n        return (\n          <span className={`${baseClass} bg-blue-50 text-blue-600 border border-blue-200`}>\n            <Loader2 className=\"w-3 h-3 animate-spin\" />\n            ì²˜ë¦¬ì¤‘\n          </span>\n        );\n      case 'extracted':\n        return (\n          <span className={`${baseClass} bg-yellow-50 text-yellow-600 border border-yellow-200`}>\n            <AlertCircle className=\"w-3 h-3\" />\n            í™•ì¸í•„ìš”\n          </span>\n        );\n      case 'confirmed':\n        return (\n          <span className={`${baseClass} bg-green-50 text-green-600 border border-green-200`}>\n            <CheckCircle className=\"w-3 h-3\" />\n            í™•ì •ë¨\n          </span>\n        );\n      case 'rejected':\n        return (\n          <span className={`${baseClass} bg-red-50 text-red-600 border border-red-200`}>\n            <XCircle className=\"w-3 h-3\" />\n            ê±°ë¶€ë¨\n          </span>\n        );\n      default:\n        return <span className={`${baseClass} bg-gray-100 text-gray-600`}>{status}</span>;\n    }\n  };\n\n  // ìƒì„¸ ëª¨ë‹¬ ì—´ê¸°\n  const handleViewStatement = (statement: TransactionStatement) => {\n    setSelectedStatement(statement);\n    \n    if (statement.status === 'extracted') {\n      setIsConfirmModalOpen(true);\n    } else if (statement.status === 'confirmed' || statement.status === 'pending') {\n      setViewerImageUrl(statement.image_url);\n      setIsImageViewerOpen(true);\n    }\n  };\n\n  // ì´ë¯¸ì§€ ë·°ì–´ ì—´ê¸°\n  const handleViewImage = (e: React.MouseEvent, imageUrl: string) => {\n    e.stopPropagation();\n    setViewerImageUrl(imageUrl);\n    setIsImageViewerOpen(true);\n  };\n\n  // OCR ì¶”ì¶œ ì‹œì‘\n  const handleStartExtraction = async (e: React.MouseEvent, statement: TransactionStatement) => {\n    e.stopPropagation();\n    console.log('[OCR] Button clicked, statement:', statement);\n    \n    if (statement.status !== 'pending' || extractingIds.has(statement.id)) {\n      console.log('[OCR] Status is not pending or already extracting:', statement.status);\n      toast.info('ì´ë¯¸ ì²˜ë¦¬ ì¤‘ì´ê±°ë‚˜ ì™„ë£Œëœ ê±´ì…ë‹ˆë‹¤.');\n      return;\n    }\n\n    // ì¶”ì¶œ ì‹œì‘ - ID ì¶”ê°€\n    setExtractingIds(prev => new Set(prev).add(statement.id));\n\n    try {\n      console.log('[OCR] Starting extraction...');\n      toast.loading('OCR ì¶”ì¶œ ì¤‘... (ì•½ 10~30ì´ˆ ì†Œìš”)', { id: `extraction-${statement.id}` });\n      \n      const result = await transactionStatementService.extractStatementData(\n        statement.id,\n        statement.image_url\n      );\n      console.log('[OCR] Result:', result);\n\n      if (result.success) {\n        toast.success('OCR ì¶”ì¶œì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!', { id: `extraction-${statement.id}` });\n        loadStatements();\n        \n        if (result.data) {\n          setSelectedStatement(result.data);\n          setIsConfirmModalOpen(true);\n        }\n      } else {\n        console.error('[OCR] Failed:', result.error);\n        toast.error(result.error || 'OCR ì¶”ì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', { id: `extraction-${statement.id}` });\n      }\n    } catch (error) {\n      console.error('[OCR] Error:', error);\n      toast.error('OCR ì¶”ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', { id: `extraction-${statement.id}` });\n    } finally {\n      // ì¶”ì¶œ ì™„ë£Œ - ID ì œê±°\n      setExtractingIds(prev => {\n        const next = new Set(prev);\n        next.delete(statement.id);\n        return next;\n      });\n    }\n  };\n\n  // ì‚­ì œ\n  const handleDelete = async (e: React.MouseEvent, statement: TransactionStatement) => {\n    e.stopPropagation();\n    \n    if (!confirm(`\"${statement.file_name || 'ì´ ê±°ë˜ëª…ì„¸ì„œ'}\"ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {\n      return;\n    }\n\n    try {\n      const result = await transactionStatementService.deleteStatement(statement.id);\n      \n      if (result.success) {\n        toast.success('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');\n        loadStatements();\n      } else {\n        toast.error(result.error || 'ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n      }\n    } catch (error) {\n      toast.error('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n    }\n  };\n\n  // ì—…ë¡œë“œ ì„±ê³µ í›„ ì²˜ë¦¬ - ìë™ìœ¼ë¡œ OCR ì‹œì‘\n  const handleUploadSuccess = async (statementId: string, imageUrl: string) => {\n    setIsUploadModalOpen(false);\n    \n    // 1. ì—…ë¡œë“œ ì§í›„ ë°”ë¡œ ëª©ë¡ ê°±ì‹  (ëª©ë¡ì— ì¦‰ì‹œ í‘œì‹œ)\n    await loadStatements();\n    \n    // 2. ì²˜ë¦¬ì¤‘ í‘œì‹œë¥¼ ìœ„í•´ extractingIdsì— ì¶”ê°€\n    setExtractingIds(prev => new Set(prev).add(statementId));\n    \n    // 3. OCR ì¶”ì¶œ ì‹œì‘\n    try {\n      toast.loading('OCR ì¶”ì¶œ ì¤‘... (ì•½ 10~30ì´ˆ ì†Œìš”)', { id: `extraction-${statementId}` });\n      \n      const result = await transactionStatementService.extractStatementData(statementId, imageUrl);\n      \n      if (result.success) {\n        toast.success('OCR ì¶”ì¶œì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ê²°ê³¼ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.', { id: `extraction-${statementId}` });\n        loadStatements();\n        \n        // ì¶”ì¶œ ì™„ë£Œ í›„ ë°”ë¡œ í™•ì¸ ëª¨ë‹¬ ì—´ê¸°\n        if (result.data) {\n          setSelectedStatement(result.data);\n          setIsConfirmModalOpen(true);\n        }\n      } else {\n        toast.error(result.error || 'OCR ì¶”ì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', { id: `extraction-${statementId}` });\n        loadStatements();\n      }\n    } catch (error) {\n      toast.error('OCR ì¶”ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', { id: `extraction-${statementId}` });\n      loadStatements();\n    } finally {\n      // ì¶”ì¶œ ì™„ë£Œ - extractingIdsì—ì„œ ì œê±°\n      setExtractingIds(prev => {\n        const next = new Set(prev);\n        next.delete(statementId);\n        return next;\n      });\n    }\n  };\n\n  // í™•ì • ëª¨ë‹¬ ë‹«ê¸°\n  const handleConfirmModalClose = () => {\n    setIsConfirmModalOpen(false);\n    setSelectedStatement(null);\n    loadStatements();\n  };\n\n  // ë‚ ì§œ í¬ë§·\n  const formatDate = (dateString: string) => {\n    if (!dateString) return '-';\n    return new Date(dateString).toLocaleDateString('ko-KR', {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit'\n    });\n  };\n\n  // ê¸ˆì•¡ í¬ë§·\n  const formatAmount = (amount?: number) => {\n    if (amount === undefined || amount === null) return '-';\n    return amount.toLocaleString('ko-KR') + 'ì›';\n  };\n\n  return (\n    <div className=\"w-full\">\n      {/* Header - ë°œì£¼ìš”ì²­ ê´€ë¦¬ì™€ ë™ì¼ */}\n      <div className=\"mb-4\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"page-title\">ê±°ë˜ëª…ì„¸ì„œ í™•ì¸</h1>\n            <p className=\"page-subtitle\" style={{ marginTop: '-2px', marginBottom: '-4px' }}>\n              Transaction Statement Verification\n            </p>\n          </div>\n          \n          <div className=\"flex items-center gap-2\">\n            <Button\n              onClick={() => setIsUploadModalOpen(true)}\n              className=\"!h-auto button-base bg-hansl-600 hover:bg-hansl-700 text-white\"\n            >\n              <Plus className=\"w-3.5 h-3.5\" />\n              <span className=\"hidden sm:inline\">ì—…ë¡œë“œ</span>\n            </Button>\n            <Button\n              variant=\"outline\"\n              onClick={loadStatements}\n              disabled={loading}\n              className=\"!h-auto button-base\"\n            >\n              <RefreshCw className={`w-3.5 h-3.5 ${loading ? 'animate-spin' : ''}`} />\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      {/* í•„í„° íˆ´ë°” - ë°œì£¼ìš”ì²­ ê´€ë¦¬ì™€ ë™ì¼í•œ ìŠ¤íƒ€ì¼ */}\n      <div className=\"mb-3\">\n        <div className=\"flex flex-wrap items-center gap-2\">\n          {/* ê²€ìƒ‰ */}\n          <div className=\"relative min-w-[140px] max-w-[200px]\">\n            <Search className=\"absolute left-1.5 top-1/2 transform -translate-y-1/2 w-2.5 h-2.5 text-gray-400\" />\n            <Input\n              placeholder=\"ê±°ë˜ì²˜ëª…, íŒŒì¼ëª… ê²€ìƒ‰...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"!h-auto !py-px !pr-1.5 !pl-5 !text-[11px] !min-h-[20px] business-radius-input border border-gray-300 bg-white text-gray-700\"\n            />\n          </div>\n          \n          {/* ìƒíƒœ í•„í„° */}\n          <Select value={statusFilter} onValueChange={setStatusFilter}>\n            <SelectTrigger className=\"!h-auto !py-[1px] !px-2 !text-[12px] !min-h-[22px] w-[100px] business-radius-input border border-gray-300 bg-white text-gray-700 [&>svg]:h-3 [&>svg]:w-3\">\n              <SelectValue placeholder=\"ìƒíƒœ\" />\n            </SelectTrigger>\n            <SelectContent className=\"min-w-[100px]\">\n              <SelectItem value=\"all\" className=\"text-[12px] py-1.5\">ì „ì²´ ìƒíƒœ</SelectItem>\n              <SelectItem value=\"pending\" className=\"text-[12px] py-1.5\">ëŒ€ê¸°ì¤‘</SelectItem>\n              <SelectItem value=\"extracted\" className=\"text-[12px] py-1.5\">í™•ì¸í•„ìš”</SelectItem>\n              <SelectItem value=\"confirmed\" className=\"text-[12px] py-1.5\">í™•ì •ë¨</SelectItem>\n              <SelectItem value=\"rejected\" className=\"text-[12px] py-1.5\">ê±°ë¶€ë¨</SelectItem>\n            </SelectContent>\n          </Select>\n          \n          {/* ë‚ ì§œ í•„í„° í† ê¸€ */}\n          <Button\n            variant=\"outline\"\n            onClick={() => setShowFilters(!showFilters)}\n            className={`!h-auto button-base border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 ${showFilters ? 'bg-hansl-50 border-hansl-300 text-hansl-700' : ''}`}\n          >\n            <SlidersHorizontal className=\"w-3.5 h-3.5 mr-1\" />\n            <span className=\"button-text\">í•„í„°</span>\n          </Button>\n          \n          {/* ê±´ìˆ˜ í‘œì‹œ */}\n          <span className=\"badge-stats bg-gray-100 text-gray-600\">\n            ì´ {totalCount}ê±´\n          </span>\n        </div>\n        \n        {/* í™•ì¥ í•„í„° */}\n        {showFilters && (\n          <div className=\"mt-2 p-3 bg-gray-50 business-radius-card border border-gray-200\">\n            <div className=\"flex flex-wrap items-center gap-3\">\n              <div className=\"flex items-center gap-2\">\n                <label className=\"text-[12px] font-medium text-gray-500\">ì—…ë¡œë“œ ë‚ ì§œ</label>\n                <Input\n                  type=\"date\"\n                  value={dateFilter}\n                  onChange={(e) => setDateFilter(e.target.value)}\n                  className=\"!h-auto !py-[2px] !px-2.5 !text-[12px] !min-h-[24px] w-[140px] business-radius-input border border-gray-300 bg-white text-gray-700\"\n                />\n              </div>\n              <Button\n                variant=\"outline\"\n                onClick={() => {\n                  setSearchTerm(\"\");\n                  setStatusFilter(\"all\");\n                  setDateFilter(\"\");\n                }}\n                className=\"!h-auto button-base border border-gray-300 bg-white text-blue-600 hover:bg-blue-50 hover:border-blue-300\"\n              >\n                â†» <span className=\"button-text text-blue-600\">ì´ˆê¸°í™”</span>\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* ëª©ë¡ ì¹´ë“œ */}\n      <Card className=\"overflow-hidden border border-gray-200 business-radius-card\">\n        <CardContent className=\"p-0\">\n          {loading ? (\n            <div className=\"flex items-center justify-center py-12\">\n              <div className=\"w-6 h-6 border-2 border-hansl-500 border-t-transparent rounded-full animate-spin\" />\n              <span className=\"ml-3 text-[11px] text-gray-500\">ë¡œë”© ì¤‘...</span>\n            </div>\n          ) : statements.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <FileCheck className=\"w-10 h-10 text-gray-300 mx-auto mb-3\" />\n              <h3 className=\"text-[12px] font-medium text-gray-700 mb-1\">ê±°ë˜ëª…ì„¸ì„œê°€ ì—†ìŠµë‹ˆë‹¤</h3>\n              <p className=\"text-[11px] text-gray-500\">ì—…ë¡œë“œëœ ê±°ë˜ëª…ì„¸ì„œê°€ ì—†ê±°ë‚˜ ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>\n            </div>\n          ) : (\n            <>\n              {/* ë°ìŠ¤í¬í†± í…Œì´ë¸” ë·° */}\n              <div className=\"hidden md:block overflow-x-auto\">\n                <table className=\"w-full min-w-fit\">\n                  <thead className=\"bg-gray-50 border-b border-gray-200\">\n                    <tr>\n                      <th className=\"px-3 py-2.5 text-center text-[10px] font-semibold text-gray-500 uppercase tracking-wider\">ìƒíƒœ</th>\n                      <th className=\"px-3 py-2.5 text-center text-[10px] font-semibold text-gray-500 uppercase tracking-wider\">ì—…ë¡œë“œì¼</th>\n                      <th className=\"px-3 py-2.5 text-center text-[10px] font-semibold text-gray-500 uppercase tracking-wider\">ëª…ì„¸ì„œì¼</th>\n                      <th className=\"px-3 py-2.5 text-left text-[10px] font-semibold text-gray-500 uppercase tracking-wider\">ê±°ë˜ì²˜ëª…</th>\n                      <th className=\"px-3 py-2.5 text-left text-[10px] font-semibold text-gray-500 uppercase tracking-wider\">íŒŒì¼ëª…</th>\n                      <th className=\"px-3 py-2.5 text-right text-[10px] font-semibold text-gray-500 uppercase tracking-wider\">í•©ê³„ê¸ˆì•¡</th>\n                      <th className=\"px-3 py-2.5 text-center text-[10px] font-semibold text-gray-500 uppercase tracking-wider\">ë“±ë¡ì</th>\n                      <th className=\"px-3 py-2.5 text-center text-[10px] font-semibold text-gray-500 uppercase tracking-wider\">ì•¡ì…˜</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-white divide-y divide-gray-100\">\n                    {statements.map((statement) => (\n                      <tr\n                        key={statement.id}\n                        className=\"hover:bg-gray-50 transition-colors cursor-pointer\"\n                        onClick={() => handleViewStatement(statement)}\n                      >\n                        <td className=\"px-3 py-2.5 text-center\">\n                          {extractingIds.has(statement.id) \n                            ? renderStatusBadge('processing') \n                            : renderStatusBadge(statement.status)}\n                        </td>\n                        <td className=\"px-3 py-2.5 text-[11px] text-center text-gray-600\">\n                          {formatDate(statement.uploaded_at)}\n                        </td>\n                        <td className=\"px-3 py-2.5 text-[11px] text-center text-gray-600\">\n                          {statement.statement_date ? formatDate(statement.statement_date) : '-'}\n                        </td>\n                        <td className=\"px-3 py-2.5 text-[11px] font-medium text-gray-900\">\n                          {statement.vendor_name || '-'}\n                        </td>\n                        <td className=\"px-3 py-2.5 text-[11px] text-gray-700 max-w-[180px] truncate\">\n                          {statement.file_name || '-'}\n                        </td>\n                        <td className=\"px-3 py-2.5 text-[11px] font-medium text-right text-gray-900\">\n                          {formatAmount(statement.grand_total)}\n                        </td>\n                        <td className=\"px-3 py-2.5 text-[11px] text-center text-gray-600\">\n                          {statement.uploaded_by_name || '-'}\n                        </td>\n                        <td className=\"px-3 py-2.5 text-center\">\n                          <div className=\"flex items-center justify-center gap-1\">\n                            <button\n                              onClick={(e) => handleViewImage(e, statement.image_url)}\n                              className=\"p-1.5 rounded-md hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors\"\n                              title=\"ì´ë¯¸ì§€ ë³´ê¸°\"\n                            >\n                              <ImageIcon className=\"w-3.5 h-3.5\" />\n                            </button>\n                            <button\n                              onClick={(e) => handleDelete(e, statement)}\n                              className=\"p-1.5 rounded-md hover:bg-red-50 text-red-400 hover:text-red-600 transition-colors\"\n                              title=\"ì‚­ì œ\"\n                            >\n                              <Trash2 className=\"w-3.5 h-3.5\" />\n                            </button>\n                          </div>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n\n              {/* ëª¨ë°”ì¼ ì¹´ë“œ ë·° */}\n              <div className=\"md:hidden divide-y divide-gray-100\">\n                {statements.map((statement) => (\n                  <div\n                    key={statement.id}\n                    className=\"p-3 hover:bg-gray-50 transition-colors cursor-pointer\"\n                    onClick={() => handleViewStatement(statement)}\n                  >\n                    <div className=\"flex items-start justify-between mb-2\">\n                      {extractingIds.has(statement.id) \n                        ? renderStatusBadge('processing') \n                        : renderStatusBadge(statement.status)}\n                      <span className=\"text-[10px] text-gray-400\">\n                        {formatDate(statement.uploaded_at)}\n                      </span>\n                    </div>\n                    <div className=\"mb-2\">\n                      <p className=\"text-[11px] font-medium text-gray-900\">\n                        {statement.vendor_name || 'ê±°ë˜ì²˜ ë¯¸í™•ì¸'}\n                      </p>\n                      <p className=\"text-[10px] text-gray-500 truncate\">\n                        {statement.file_name}\n                      </p>\n                    </div>\n                    {statement.grand_total && (\n                      <p className=\"text-[12px] font-bold text-gray-900\">\n                        {formatAmount(statement.grand_total)}\n                      </p>\n                    )}\n                    <div className=\"flex items-center justify-end gap-2 mt-2 pt-2 border-t border-gray-100\">\n                      <button\n                        onClick={(e) => handleViewImage(e, statement.image_url)}\n                        className=\"button-base px-2 py-1 text-[10px] border border-gray-200 text-gray-600 hover:bg-gray-50\"\n                      >\n                        <ImageIcon className=\"w-3 h-3 mr-1\" />\n                        ë³´ê¸°\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* ì—…ë¡œë“œ ëª¨ë‹¬ */}\n      <StatementUploadModal\n        isOpen={isUploadModalOpen}\n        onClose={() => setIsUploadModalOpen(false)}\n        onSuccess={handleUploadSuccess}\n      />\n\n      {/* í™•ì¸/ìˆ˜ì •/í™•ì • ëª¨ë‹¬ */}\n      {selectedStatement && (\n        <StatementConfirmModal\n          isOpen={isConfirmModalOpen}\n          statement={selectedStatement}\n          onClose={handleConfirmModalClose}\n          onConfirm={handleConfirmModalClose}\n        />\n      )}\n\n      {/* ì´ë¯¸ì§€ ë·°ì–´ */}\n      <StatementImageViewer\n        isOpen={isImageViewerOpen}\n        imageUrl={viewerImageUrl}\n        onClose={() => {\n          setIsImageViewerOpen(false);\n          setViewerImageUrl(\"\");\n        }}\n      />\n    </div>\n  );\n}\n"],"names":["CircleX","createLucideIcon","cx","cy","r","key","d","RefreshCw","RotateCw","SlidersHorizontal","x1","x2","y1","y2","WandSparkles","StatementUploadModal","isOpen","onClose","onSuccess","file","setFile","useState","preview","setPreview","uploading","setUploading","uploaderName","setUploaderName","fileInputRef","useRef","supabase","createClient","async","data","user","auth","getUser","email","employee","from","select","eq","single","name","e","loadUserName","handleFileSelect","selectedFile","type","startsWith","toast","error","size","reader","FileReader","onloadend","result","readAsDataURL","handleClose","current","value","jsx","Dialog","open","onOpenChange","children","jsxs","DialogContent","className","DialogHeader","DialogTitle","Upload","onDrop","preventDefault","stopPropagation","droppedFile","dataTransfer","files","onDragOver","onClick","click","ref","accept","onChange","target","src","alt","X","Fragment","ImageIcon","DialogFooter","Button","variant","disabled","transactionStatementService","uploadStatement","success","statementId","imageUrl","Loader2","StatementImageViewer","scale","setScale","rotation","setRotation","prev","Math","max","ZoomOut","round","min","ZoomIn","response","fetch","blob","url","window","URL","createObjectURL","a","document","createElement","href","download","Date","toISOString","split","body","appendChild","removeChild","revokeObjectURL","Download","style","transform","calculateStringSimilarity","ocrName","targetName","ocr","toLowerCase","replace","includes","distance","str1","str2","s1","s2","length","matrix","i","j","cost","levenshteinDistance","maxLen","similarity","ocrWords","targetWords","wordMatchBonus","filter","some","tw","w","calculateItemSimilarity","systemItemName","systemSpec","itemNameScore","specScore","StatementConfirmModal","statement","onConfirm","loading","setLoading","saving","setSaving","statementWithItems","setStatementWithItems","isImageViewerOpen","setIsImageViewerOpen","confirmerName","setConfirmerName","selectedPONumber","setSelectedPONumber","itemPONumbers","setItemPONumbers","Map","itemMatches","setItemMatches","openDropdowns","setOpenDropdowns","Set","editedOCRItems","setEditedOCRItems","matchDetailPopup","setMatchDetailPopup","setMatchResult","setSetMatchResult","isSamePONumber","useMemo","items","poNumbers","map","item","extracted_po_number","normalizeOrderNumber","Boolean","every","po","commonPONumber","poNumber","find","loadData","useCallback","getStatementWithItems","id","initialPONumbers","initialMatches","forEach","set","matched_purchase","matched_item_id","purchase_id","matched_purchase_id","item_id","purchase_order_number","sales_order_number","item_name","matched_item_name","quantity","matched_item_quantity","unit_price","matched_item_unit_price","amount","matched_item_amount","vendor_name","bestMatch","bestScore","match_candidates","c","score","extracted_item_name","specification","matchedPO","firstPO","setMatchResponse","findBestMatchingPurchaseOrderSet","bestPO","autoMatchedItems","match","candidate","systemItemId","ocrItemId","mergedMatches","confidence","confText","matchedItemCount","useEffect","newMatches","newPONumbers","hasMatchChanges","hasPOChanges","ocrItem","currentMatch","get","currentDisplayPO","allPONumberCandidates","firstExtracted","useSONumber","toUpperCase","candidateMap","candidates","salesOrderNumber","itemCount","vendorName","setMatchScore","matchScore","has","existing","push","Array","values","sort","b","getSystemItemsForPO","index","self","findIndex","t","getPOCandidatesForItem","add","handleEditOCRItem","itemId","field","newMap","getOCRItemValue","edited","extracted_quantity","extracted_unit_price","extracted_amount","isOCRItemEdited","original","po_number","handleSelectSystemItem","systemItem","newSet","delete","formatAmount","toLocaleString","handleMatchStatusClick","details","matched","effectiveMatch","hasSystemItems","systemItems","sysItem","ocrItemName","status","reasons","toFixed","sysName","sysSpec","specMatch","nameMatch","getMatchDetails","renderMatchStatusBadge","clickableClass","title","Check","toggleDropdown","clear","showCloseButton","CheckCircle","matchedCount","Wand2","statement_date","toLocaleDateString","grand_total","colSpan","totalItemCount","ChevronDown","idx","displayNumber","isSelected","isBestMatch","handleSelectGlobalPO","matchedSystem","matchStatus","getMatchStatus","normalizedExtractedPO","itemPO","poCandidates","systemCandidates","fontSize","matchingCandidates","handleSelectItemPO","XCircle","cidx","fontWeight","width","Number","reduce","sum","confirm","rejectStatement","corrections","statement_id","statement_item_id","original_text","corrected_text","field_type","String","correction","saveCorrection","saveOCRCorrections","confirmItems","confirmedQuantity","confirmedUnitPrice","confirmedAmount","confirmed_quantity","confirmed_unit_price","confirmed_amount","confirmStatement","reason","image_url","TransactionStatementMain","statements","setStatements","searchTerm","setSearchTerm","statusFilter","setStatusFilter","dateFilter","setDateFilter","totalCount","setTotalCount","showFilters","setShowFilters","isUploadModalOpen","setIsUploadModalOpen","selectedStatement","setSelectedStatement","isConfirmModalOpen","setIsConfirmModalOpen","viewerImageUrl","setViewerImageUrl","extractingIds","setExtractingIds","loadStatements","getStatements","dateFrom","search","limit","count","supabaseRef","channel","on","event","schema","table","payload","eventType","newStatus","new","oldStatus","old","subscribe","removeChannel","renderStatusBadge","baseClass","Clock","AlertCircle","handleViewStatement","handleViewImage","handleConfirmModalClose","formatDate","dateString","year","month","day","marginTop","marginBottom","Plus","Search","Input","placeholder","Select","onValueChange","SelectTrigger","SelectValue","SelectContent","SelectItem","Card","CardContent","FileCheck","uploaded_at","file_name","uploaded_by_name","deleteStatement","handleDelete","Trash2","extractStatementData","next"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4]}