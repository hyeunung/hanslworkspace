import{r as e,j as t}from"./ui-components-CWOoty1N.js";import{a,l as s,k as i,m as r,n,o as l,B as c,P as m,X as o,I as d,t as u,$ as p}from"./index-BoCLkSMB.js";import{u as x}from"./useConfirmDateAction-CRS4IpTm.js";import{P as h}from"./pen-D0DAF3mt.js";import{S as g}from"./save-BakkRVdz.js";import{T as _}from"./trash-2-DArXqw6O.js";import{f as y}from"./date-utils-DDl0vnal.js";import"./excel-libs-CEylypxp.js";import"./supabase-BBTAdlcZ.js";import"./react-vendor-DlOlWAvO.js";function b({isOpen:b,onClose:v,purchase:f,isAdmin:j,onUpdate:w,activeTab:N="done"}){const[k,q]=e.useState(f.items||[]),[C,T]=e.useState(!1),[M,S]=e.useState(""),D=a();e.useEffect(()=>{b&&(async()=>{try{const{data:{user:e}}=await D.auth.getUser();if(e?.email){const{data:t}=await D.from("employees").select("name").eq("email",e.email).single();S(t?.name?t.name:e.email)}if(f.id){const{data:e}=await D.from("purchase_request_items").select("*").eq("purchase_request_id",f.id).order("line_number");e&&q(e)}}catch(e){s.error("Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ïã§Ìå®",e),S("ÏÇ¨Ïö©Ïûê")}})()},[b,D,f.id]);const z=f?.requester_name===M,I=j||z;s.debug("üîê PurchaseItemsModal Í∂åÌïú Ï≤¥ÌÅ¨ Ï†ïÎ≥¥",{currentUserName:M,isAdmin:j,isRequester:z,canReceiptCheck:I,purchaseRequesterName:f?.requester_name,activeTab:N});const A=e.useCallback(async()=>{if(f.id)try{const{data:e}=await D.from("purchase_request_items").select("*").eq("purchase_request_id",f.id).order("line_number");e&&(q(e),s.debug("Î™®Îã¨ ÏïÑÏù¥ÌÖú Îç∞Ïù¥ÌÑ∞ ÏÉàÎ°úÍ≥†Ïπ® ÏôÑÎ£å - Î™®Îã¨ ÏÉÅÌÉú Ïú†ÏßÄ"))}catch(e){s.error("Î™®Îã¨ Îç∞Ïù¥ÌÑ∞ ÏÉàÎ°úÍ≥†Ïπ® Ïã§Ìå®",e)}},[f.id,D]),L=x({config:{field:"statement_received",confirmMessage:{confirm:"Í±∞ÎûòÎ™ÖÏÑ∏ÏÑú ÌôïÏù∏ÏùÑ Ï≤òÎ¶¨ÌïòÏãúÍ≤†ÏäµÎãàÍπå?",cancel:"Í±∞ÎûòÎ™ÖÏÑ∏ÏÑú ÌôïÏù∏ÏùÑ Ï∑®ÏÜåÌïòÏãúÍ≤†ÏäµÎãàÍπå?"},successMessage:{confirm:"Í±∞ÎûòÎ™ÖÏÑ∏ÏÑú ÌôïÏù∏Ïù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.",cancel:"Í±∞ÎûòÎ™ÖÏÑ∏ÏÑú ÌôïÏù∏Ïù¥ Ï∑®ÏÜåÎêòÏóàÏäµÎãàÎã§."},completedText:"‚úì ÏôÑÎ£å",waitingText:"ÎåÄÍ∏∞"},currentUserName:M,canPerformAction:I,onUpdate:A}),U=x({config:{field:"actual_received",confirmMessage:{confirm:"Ïã§Ï†ú ÏûÖÍ≥† Ï≤òÎ¶¨Î•º ÏßÑÌñâÌïòÏãúÍ≤†ÏäµÎãàÍπå?",cancel:"Ïã§Ï†ú ÏûÖÍ≥† Ï≤òÎ¶¨Î•º Ï∑®ÏÜåÌïòÏãúÍ≤†ÏäµÎãàÍπå?"},successMessage:{confirm:"Ïã§Ï†ú ÏûÖÍ≥† Ï≤òÎ¶¨Í∞Ä ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.",cancel:"Ïã§Ï†ú ÏûÖÍ≥† Ï≤òÎ¶¨Í∞Ä Ï∑®ÏÜåÎêòÏóàÏäµÎãàÎã§."},completedText:"ÏûÖÍ≥†ÏôÑÎ£å",waitingText:"ÏûÖÍ≥†ÎåÄÍ∏∞"},currentUserName:M,canPerformAction:I,onUpdate:A}),$=(e,t,a)=>{const s=[...k];if(s[e]={...s[e],[t]:"quantity"===t||"unit_price_value"===t||"amount_value"===t?Number(a):a},"quantity"===t||"unit_price_value"===t){const t=s[e].quantity||0,a=s[e].unit_price_value||0;s[e].amount_value=a>0?t*a:0}q(s)},E=k.length>0?k:f.items||[],P=C?k:E,B=e.useMemo(()=>{const e=P.length>0?P:E;if(!e||0===e.length)return 960;const t=[{key:"index",base:64,header:"No.",accessor:(e,t)=>`${t+1}`},{key:"item_name",base:150,max:320,header:"ÌíàÎ™©",accessor:e=>e.item_name},{key:"specification",base:150,max:320,header:"Í∑úÍ≤©",accessor:e=>e.specification},{key:"quantity",base:90,header:"ÏàòÎüâ",accessor:e=>null!=e.quantity?e.quantity.toLocaleString():""},{key:"unit_price_value",base:120,header:"Îã®Í∞Ä",accessor:e=>null!=e.unit_price_value?e.unit_price_value.toLocaleString():""},{key:"amount_value",base:140,header:"Í∏àÏï°",accessor:e=>null!=e.amount_value?e.amount_value.toLocaleString():""},{key:"remark",base:140,max:320,header:"ÎπÑÍ≥†",accessor:e=>e.remark}].map((t,a)=>{const s=e.map((e,a)=>t.accessor?t.accessor(e,a)??"":""),i=t.header?t.header.length:0,r=8*Math.max(i,...s.map(e=>e?String(e).length:0))+32,n=t.max?Math.min(t.max,r):r;return Math.max(t.base,n)});"purchase"===N&&t.push(120),"receipt"!==N&&"done"!==N||t.push(120),"receipt"===N&&t.push(140),"done"===N&&t.push(140,140,110),C&&t.push(100);const a=t.length>1?16*(t.length-1):0,s=t.reduce((e,t)=>e+t,0)+a+48;return Math.max(s,960)},[P,E,N,C]),F=P.reduce((e,t)=>e+(t.amount_value||0),0);return t.jsx(i,{open:b,onOpenChange:v,children:t.jsxs(r,{className:"w-full sm:w-auto max-w-[92vw] sm:max-w-[88vw] lg:max-w-[90vw] xl:max-w-[85vw] h-[95vh] sm:h-auto max-h-[90vh] flex flex-col bg-white p-3 sm:p-6",maxWidth:"max-w-none",showCloseButton:!1,children:[t.jsx(n,{className:"flex-shrink-0",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(l,{className:"modal-title",children:["Î∞úÏ£º ÏÉÅÏÑ∏ Ìï≠Î™© - ",f.purchase_order_number]}),t.jsxs("div",{className:"flex items-center gap-2",children:[j&&!C&&t.jsxs(c,{variant:"outline",size:"sm",onClick:()=>{T(!0),q([...f.items||[]])},children:[t.jsx(h,{className:"h-4 w-4 mr-1"}),"Ìé∏Ïßë"]}),C&&t.jsxs(t.Fragment,{children:[t.jsxs(c,{variant:"outline",size:"sm",onClick:()=>{const e={line_number:k.reduce((e,t)=>{const a=t.line_number||0;return a>e?a:e},0)+1,item_name:"",specification:"",quantity:1,unit_price_value:void 0,amount_value:0,remark:"",is_received:!1},t=[...k,e].sort((e,t)=>(e.line_number||999999)-(t.line_number||999999));q(t)},children:[t.jsx(m,{className:"h-4 w-4 mr-1"}),"ÌíàÎ™© Ï∂îÍ∞Ä"]}),t.jsxs(c,{variant:"default",size:"sm",onClick:async()=>{try{s.debug("ÌíàÎ™© Ï†ÄÏû• ÏãúÏûë",{editingItems:k.length,purchaseId:f.id});if(k.filter(e=>!e.item_name||!e.item_name.trim()).length>0)return void u.error("ÌíàÎ™©Î™ÖÏùÄ ÌïÑÏàò ÏûÖÎ†• Ìï≠Î™©ÏûÖÎãàÎã§.");const{error:e}=await D.from("purchase_request_items").delete().eq("purchase_request_id",f.id);if(e)throw s.error("Í∏∞Ï°¥ ÌíàÎ™© ÏÇ≠Ï†ú Ïã§Ìå®",e),e;const t=k.map(e=>({purchase_request_id:f.id,purchase_order_number:f.purchase_order_number,line_number:e.line_number,item_name:e.item_name.trim(),specification:e.specification||"",quantity:Number(e.quantity)||0,unit_price_value:null!==e.unit_price_value&&void 0!==e.unit_price_value?Number(e.unit_price_value):null,amount_value:Number(e.amount_value)||0,remark:e.remark||"",link:e.link||null,is_received:e.is_received||!1,delivery_status:e.delivery_status||"pending"}));s.debug("ÌíàÎ™© ÏÇΩÏûÖ Îç∞Ïù¥ÌÑ∞",{itemsToInsert:t});const{error:a}=await D.from("purchase_request_items").insert(t);if(a)throw s.error("ÌíàÎ™© ÏÇΩÏûÖ Ïã§Ìå®",a),a;const i=k.reduce((e,t)=>e+(Number(t.amount_value)||0),0),{error:r}=await D.from("purchase_requests").update({total_amount:i}).eq("id",f.id);if(r)throw s.error("Ï¥ùÍ∏àÏï° ÏóÖÎç∞Ïù¥Ìä∏ Ïã§Ìå®",r),r;s.debug("ÌíàÎ™© Ï†ÄÏû• ÏôÑÎ£å"),u.success("ÌíàÎ™©Ïù¥ ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§."),T(!1),w(),v()}catch(e){s.error("ÌíàÎ™© Ï†ÄÏû• Ï§ë Ïò§Î•ò",e),u.error(`Ï†ÄÏû• Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: ${e instanceof Error?e.message:e}`)}},children:[t.jsx(g,{className:"h-4 w-4 mr-1"}),"Ï†ÄÏû•"]}),t.jsx(c,{variant:"ghost",size:"sm",onClick:()=>{T(!1),q(f.items||[])},children:"Ï∑®ÏÜå"})]}),t.jsx(c,{variant:"ghost",size:"icon",onClick:v,className:"h-6 w-6",children:t.jsx(o,{className:"h-4 w-4"})})]})]})}),t.jsxs("div",{className:"flex-shrink-0 grid grid-cols-2 md:grid-cols-4 gap-3 py-3 border-b",children:[t.jsxs("div",{children:[t.jsx("p",{className:"modal-label",children:"ÏóÖÏ≤¥Î™Ö"}),t.jsx("p",{className:"modal-value",children:f.vendor_name})]}),t.jsxs("div",{children:[t.jsx("p",{className:"modal-label",children:"ÏöîÏ≤≠Ïûê"}),t.jsx("p",{className:"modal-value",children:f.requester_name})]}),t.jsxs("div",{children:[t.jsx("p",{className:"modal-label",children:"ÌîÑÎ°úÏ†ùÌä∏"}),t.jsx("p",{className:"modal-value truncate",title:f.project_vendor,children:f.project_vendor})]}),t.jsxs("div",{children:[t.jsx("p",{className:"modal-label",children:"ÎÇ©Í∏∞Ïùº"}),t.jsx("p",{className:"modal-value",children:f.delivery_request_date&&y(new Date(f.delivery_request_date),"yyyy-MM-dd")})]})]}),t.jsx("div",{className:"flex-1 min-h-0",children:t.jsx("div",{className:"h-full overflow-x-auto",children:t.jsx("div",{className:"inline-block align-top",style:{minWidth:`${B}px`},children:t.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:t.jsxs("table",{className:"w-full text-[13px] leading-[1.6] border-collapse",style:{minWidth:`${B}px`},children:[t.jsx("thead",{className:"sticky top-0 bg-white z-10 shadow-sm",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 w-16 min-w-[64px]",children:"No."}),t.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 min-w-[140px]",children:"ÌíàÎ™©"}),t.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 min-w-[120px]",children:"Í∑úÍ≤©"}),t.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 min-w-[80px]",children:"ÏàòÎüâ"}),t.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 min-w-[110px]",children:"Îã®Í∞Ä"}),t.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 min-w-[130px]",children:"Í∏àÏï°"}),"purchase"===N&&t.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 min-w-[110px]",children:"Íµ¨Îß§ÏÉÅÌÉú"}),("receipt"===N||"done"===N)&&t.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 min-w-[110px]",children:"ÏûÖÍ≥†ÏÉÅÌÉú"}),"done"===N&&t.jsxs(t.Fragment,{children:[t.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-600 min-w-[130px]",children:"Í±∞ÎûòÎ™ÖÏÑ∏ÏÑú ÌôïÏù∏"}),t.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-600 min-w-[130px]",children:"ÌöåÍ≥ÑÏÉÅ ÏûÖÍ≥†Ïùº"}),t.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-600 min-w-[90px]",children:"Ï≤òÎ¶¨Ïûê"})]}),"receipt"===N&&t.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-600 min-w-[130px]",children:"Ïã§Ï†ú ÏûÖÍ≥†Ïùº"}),t.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 min-w-[110px]",children:"ÎπÑÍ≥†"}),C&&t.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 w-20 min-w-[90px]",children:"ÏÇ≠Ï†ú"})]})}),t.jsx("tbody",{children:(C?k:P).map((e,a)=>t.jsxs("tr",{className:"border-b last:border-b-0",children:[t.jsx("td",{className:"px-3 py-2 text-center align-top modal-value",children:e.line_number||a+1}),t.jsx("td",{className:"px-3 py-2 align-top min-w-[140px]",children:C?t.jsx(d,{value:e.item_name,onChange:e=>$(a,"item_name",e.target.value),className:"h-7 modal-label w-full"}):t.jsx("div",{className:"max-w-[200px]",children:t.jsx("p",{className:"modal-value truncate",title:e.item_name,children:e.item_name})})}),t.jsx("td",{className:"px-3 py-2 align-top min-w-[120px]",children:C?t.jsx(d,{value:e.specification,onChange:e=>$(a,"specification",e.target.value),className:"h-7 modal-label w-full"}):t.jsx("div",{className:"max-w-[150px] truncate",title:e.specification,children:e.specification})}),t.jsx("td",{className:"px-3 py-2 text-right align-top min-w-[80px]",children:C?t.jsx(d,{type:"number",value:e.quantity,onChange:e=>$(a,"quantity",e.target.value),className:"h-7 text-xs text-right w-full"}):t.jsx("div",{className:"text-right",children:t.jsx("span",{className:"modal-value",style:{display:"block",textAlign:"right"},children:e.quantity.toLocaleString()})})}),t.jsx("td",{className:"px-3 py-2 text-right align-top min-w-[110px]",children:C?t.jsx(d,{type:"number",value:e.unit_price_value,onChange:e=>$(a,"unit_price_value",e.target.value),className:"h-7 text-xs text-right w-full"}):t.jsx("div",{className:"text-right",children:t.jsxs("span",{className:"modal-subtitle",style:{display:"block",textAlign:"right"},children:[(e.unit_price_value||0).toLocaleString()," ",f.currency]})})}),t.jsx("td",{className:"px-3 py-2 text-right align-top min-w-[130px]",children:C?t.jsx(d,{type:"number",value:e.amount_value,onChange:e=>$(a,"amount_value",e.target.value),className:"h-7 modal-label text-right w-full"}):t.jsx("div",{className:"text-right",children:t.jsxs("span",{className:"modal-value",style:{display:"block",textAlign:"right"},children:[(e.amount_value||0).toLocaleString()," ",f.currency]})})}),"purchase"===N&&t.jsx("td",{className:"px-3 py-2 align-top min-w-[110px]",children:I?e.is_payment_completed?t.jsx("button",{onClick:async()=>{try{if(s.debug("Íµ¨Îß§Ï∑®ÏÜå Î≤ÑÌäº ÌÅ¥Î¶≠",{itemId:e.id,itemName:e.item_name,currentStatus:e.is_payment_completed}),!e.id)throw new Error("ÌíàÎ™© IDÍ∞Ä ÏóÜÏäµÎãàÎã§.");const{error:t,data:a}=await D.from("purchase_request_items").update({is_payment_completed:!1}).eq("id",e.id).select();if(t)throw s.error("Íµ¨Îß§Ï∑®ÏÜå ÏóÖÎç∞Ïù¥Ìä∏ Ïã§Ìå®",t),t;s.debug("Íµ¨Îß§Ï∑®ÏÜå ÏóÖÎç∞Ïù¥Ìä∏ ÏÑ±Í≥µ",{data:a}),u.success("Íµ¨Îß§ Ï∑®ÏÜå Ï≤òÎ¶¨ÎêòÏóàÏäµÎãàÎã§."),await A()}catch(t){s.error("Íµ¨Îß§Ï∑®ÏÜå Ï≤òÎ¶¨ Ï§ë Ïò§Î•ò",t),u.error(`Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: ${t instanceof Error?t.message:t}`)}},className:"button-base bg-green-500 hover:bg-green-600 text-white transition-colors",title:"ÌÅ¥Î¶≠ÌïòÏó¨ Íµ¨Îß§ Ï∑®ÏÜå",children:"Íµ¨Îß§ÏôÑÎ£å"}):t.jsx("button",{onClick:async()=>{try{if(s.debug("Íµ¨Îß§ÏôÑÎ£å Î≤ÑÌäº ÌÅ¥Î¶≠",{itemId:e.id,itemName:e.item_name,currentStatus:e.is_payment_completed}),!e.id)throw new Error("ÌíàÎ™© IDÍ∞Ä ÏóÜÏäµÎãàÎã§.");const{error:t,data:a}=await D.from("purchase_request_items").update({is_payment_completed:!0}).eq("id",e.id).select();if(t)throw s.error("Íµ¨Îß§ÏôÑÎ£å ÏóÖÎç∞Ïù¥Ìä∏ Ïã§Ìå®",t),t;s.debug("Íµ¨Îß§ÏôÑÎ£å ÏóÖÎç∞Ïù¥Ìä∏ ÏÑ±Í≥µ",{data:a}),u.success("Íµ¨Îß§ÏôÑÎ£å Ï≤òÎ¶¨ÎêòÏóàÏäµÎãàÎã§."),await A()}catch(t){s.error("Íµ¨Îß§ÏôÑÎ£å Ï≤òÎ¶¨ Ï§ë Ïò§Î•ò",t),u.error(`Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: ${t instanceof Error?t.message:t}`)}},className:"button-base border border-gray-300 text-gray-600 bg-white hover:bg-gray-50",children:"Íµ¨Îß§ÎåÄÍ∏∞"}):t.jsx("span",{className:"button-base "+(e.is_payment_completed?"bg-green-500 text-white":"border border-gray-300 text-gray-400 bg-white"),children:e.is_payment_completed?"Íµ¨Îß§ÏôÑÎ£å":"Íµ¨Îß§ÎåÄÍ∏∞"})}),("receipt"===N||"done"===N)&&t.jsx("td",{className:"px-3 py-2 align-top min-w-[110px]",children:"receipt"===N?I?U.isCompleted(e)?t.jsx("button",{onClick:()=>{U.handleCancel(e.id,{item_name:e.item_name,specification:e.specification,quantity:e.quantity,unit_price_value:e.unit_price_value,amount_value:e.amount_value,remark:e.remark})},className:"button-base bg-green-500 hover:bg-green-600 text-white transition-colors",title:"ÌÅ¥Î¶≠ÌïòÏó¨ Ïã§Ï†ú ÏûÖÍ≥† Ï≤òÎ¶¨ Ï∑®ÏÜå",children:U.config.completedText}):t.jsx(p,{onDateSelect:t=>{U.handleConfirm(e.id,t,{item_name:e.item_name,specification:e.specification,quantity:e.quantity,unit_price_value:e.unit_price_value,amount_value:e.amount_value,remark:e.remark})},placeholder:"Ïã§Ï†ú ÏûÖÍ≥† ÎÇ†Ïßú ÏÑ†ÌÉù",children:t.jsx(c,{variant:"outline",size:"sm",className:"button-base border border-gray-300 text-gray-600 bg-white hover:bg-gray-50",children:U.config.waitingText})}):t.jsx("span",{className:"button-base "+(U.isCompleted(e)?"bg-green-500 text-white":"border border-gray-300 text-gray-400 bg-white"),children:U.isCompleted(e)?U.config.completedText:U.config.waitingText}):t.jsx("span",{className:"button-base "+(U.isCompleted(e)?"bg-green-500 text-white":"border border-gray-300 text-gray-600 bg-white"),children:U.isCompleted(e)?U.config.completedText:U.config.waitingText})}),"receipt"===N&&t.jsx("td",{className:"px-3 py-2 text-center align-top min-w-[130px]",children:U.getCompletedDate(e)?t.jsx("span",{className:"modal-subtitle text-green-600",children:y(new Date(U.getCompletedDate(e)),"yyyy-MM-dd HH:mm")}):t.jsx("span",{className:"modal-subtitle",children:"-"})}),"done"===N&&t.jsxs(t.Fragment,{children:[t.jsx("td",{className:"px-3 py-2 text-center align-top min-w-[130px]",children:I?L.isCompleted(e)?t.jsx("button",{onClick:()=>{L.handleCancel(e.id,{item_name:e.item_name,specification:e.specification,quantity:e.quantity,unit_price_value:e.unit_price_value,amount_value:e.amount_value,remark:e.remark})},className:"button-base bg-green-500 hover:bg-green-600 text-white transition-colors",title:"ÌÅ¥Î¶≠ÌïòÏó¨ Í±∞ÎûòÎ™ÖÏÑ∏ÏÑú ÌôïÏù∏ Ï∑®ÏÜå",children:L.config.completedText}):t.jsx(p,{onDateSelect:t=>{L.handleConfirm(e.id,t,{item_name:e.item_name,specification:e.specification,quantity:e.quantity,unit_price_value:e.unit_price_value,amount_value:e.amount_value,remark:e.remark})},placeholder:"ÎÇ†Ïßú ÏÑ†ÌÉù",children:t.jsx(c,{variant:"outline",size:"sm",className:"button-base border border-gray-300 text-gray-600 bg-white hover:bg-gray-50",children:L.config.waitingText})}):t.jsx("span",{className:"button-base "+(L.isCompleted(e)?"bg-green-500 text-white":"border border-gray-300 text-gray-400 bg-white"),children:L.isCompleted(e)?L.config.completedText:L.config.waitingText})}),t.jsx("td",{className:"px-3 py-2 text-center align-top min-w-[130px]",children:L.getCompletedDate(e)?t.jsx("span",{className:"modal-subtitle",children:y(new Date(L.getCompletedDate(e)),"yyyy-MM-dd")}):t.jsx("span",{className:"modal-subtitle",children:"-"})}),t.jsx("td",{className:"px-3 py-2 text-center align-top min-w-[90px]",children:L.getCompletedByName(e)?t.jsx("span",{className:"modal-subtitle",children:L.getCompletedByName(e)}):t.jsx("span",{className:"modal-subtitle",children:"-"})})]}),t.jsx("td",{className:"px-3 py-2 align-top min-w-[110px]",children:C?t.jsx(d,{value:e.remark||"",onChange:e=>$(a,"remark",e.target.value),className:"h-7 modal-label w-full",placeholder:"ÎπÑÍ≥†"}):t.jsx("div",{className:"max-w-[150px]",children:t.jsx("span",{className:"modal-subtitle truncate block",title:e.remark,children:e.remark||"-"})})}),C&&t.jsx("td",{className:"px-3 py-2 align-top min-w-[90px]",children:t.jsx(c,{variant:"ghost",size:"icon",onClick:()=>(e=>{const t=k.filter((t,a)=>a!==e).sort((e,t)=>(e.line_number||999999)-(t.line_number||999999));q(t)})(a),className:"h-7 w-7 text-red-500 hover:text-red-700",children:t.jsx(_,{className:"h-4 w-4"})})})]},e.id||a))})]})})})})}),t.jsxs("div",{className:"flex-shrink-0 border-t pt-4 flex justify-between items-center",children:[t.jsxs("div",{className:"modal-subtitle",children:["Ï¥ù ",P.length,"Í∞ú ÌíàÎ™©"]}),t.jsxs("div",{className:"modal-value-large",children:["Ï¥ù Í∏àÏï°: ",F.toLocaleString()," ",f.currency]})]})]})})}export{b as default};
//# sourceMappingURL=PurchaseItemsModal-BGSysHd_.js.map
