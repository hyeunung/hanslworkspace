import{a as ae,l as f,r as j,j as e,b as p,X as te,_ as re}from"./index-EP82slyc.js";import{I as k}from"./input-CuXXVWBe.js";import{S as ce,a as ne,b as le,c as ie,d as q}from"./select-CSq1qa_E.js";import{D as oe}from"./download-CNBu_UDF.js";import{P as de}from"./plus-Cli-NSE3.js";import{S as me}from"./search-DHFc16AA.js";import{f as D}from"./helpers-CWDchwQL.js";import{B as M,t as h}from"./index-DHm7zFeV.js";import{T as xe,a as he,b as I,c as E,d as ue,e as w}from"./table-CSxiI64g.js";import{u as je,S as H,D as P,a as O,E as X,b as A,c as N,d as L,T as $,e as R,M as pe,f as ge,g as G,h as fe,F as Ne,i as _,j as y,k as v,l as S,m as C}from"./form-BfmfbMiG.js";import{E as B}from"./eye-CTzvN81M.js";import{T as K}from"./trash-2-BasS5Ceg.js";import{D as be,a as we,b as _e,c as ye,e as ve}from"./dialog-B0SH0L2M.js";import{T as Se}from"./textarea-Dx2hHpcv.js";import{u as Ce}from"./index.esm-BA5u1DXW.js";import"./chevron-down-DoYIZkzs.js";import"./card-BZUSDckl.js";import"./label-BSjxl3pW.js";class ke{constructor(){this.supabase=ae()}async getVendors(t){try{let a=this.supabase.from("vendors").select("*,vendor_contacts(*)").order("vendor_name");t?.search&&(a=a.or(`
          vendor_name.ilike.%${t.search}%,
          business_number.ilike.%${t.search}%,
          representative.ilike.%${t.search}%,
          contact_phone.ilike.%${t.search}%,
          email.ilike.%${t.search}%
        `)),t?.is_active!==void 0&&(a=a.eq("is_active",t.is_active));const{data:c,error:r}=await a;if(r)throw r;return{success:!0,data:c||[]}}catch(a){return f.error("업체 목록 조회 실패",a),{success:!1,error:a instanceof Error?a.message:"알 수 없는 오류가 발생했습니다."}}}async getVendor(t){try{const{data:a,error:c}=await this.supabase.from("vendors").select("*").eq("id",t).single();if(c)throw c;return{success:!0,data:a}}catch(a){return f.error("업체 조회 실패",a),{success:!1,error:a instanceof Error?a.message:"알 수 없는 오류가 발생했습니다."}}}async createVendor(t){try{if(t.business_number){const{data:l}=await this.supabase.from("vendors").select("id").eq("business_number",t.business_number).single();if(l)return{success:!1,error:"이미 등록된 사업자번호입니다."}}const{data:a}=await this.supabase.from("vendors").select("id").eq("vendor_name",t.vendor_name).single();if(a)return{success:!1,error:"이미 등록된 업체명입니다."};const{data:c,error:r}=await this.supabase.from("vendors").insert({...t,is_active:!0}).select().single();if(r)throw r;return{success:!0,data:c}}catch(a){return f.error("업체 생성 실패",a),{success:!1,error:a instanceof Error?a.message:"알 수 없는 오류가 발생했습니다."}}}async updateVendor(t,a){try{if(a.business_number){const{data:l}=await this.supabase.from("vendors").select("id").eq("business_number",a.business_number).neq("id",t).single();if(l)return{success:!1,error:"이미 등록된 사업자번호입니다."}}if(a.vendor_name){const{data:l}=await this.supabase.from("vendors").select("id").eq("vendor_name",a.vendor_name).neq("id",t).single();if(l)return{success:!1,error:"이미 등록된 업체명입니다."}}const{data:c,error:r}=await this.supabase.from("vendors").update(a).eq("id",t).select().single();if(r)throw r;return{success:!0,data:c}}catch(c){return f.error("업체 수정 실패",c),{success:!1,error:c instanceof Error?c.message:"알 수 없는 오류가 발생했습니다."}}}async deleteVendor(t){try{const{data:a}=await this.supabase.from("purchase_requests").select("id").eq("vendor_id",t).limit(1);if(a&&a.length>0){const{error:c}=await this.supabase.from("vendors").update({is_active:!1}).eq("id",t);if(c)throw c;return{success:!0}}else{const{error:c}=await this.supabase.from("vendors").delete().eq("id",t);if(c)throw c;return{success:!0}}}catch(a){return f.error("업체 삭제 실패",a),{success:!1,error:a instanceof Error?a.message:"알 수 없는 오류가 발생했습니다."}}}async toggleVendorStatus(t){try{const{data:a,error:c}=await this.supabase.from("vendors").select("is_active").eq("id",t).single();if(c)throw c;const{data:r,error:l}=await this.supabase.from("vendors").update({is_active:!a.is_active}).eq("id",t).select().single();if(l)throw l;return{success:!0,data:r}}catch(a){return f.error("업체 상태 변경 실패",a),{success:!1,error:a instanceof Error?a.message:"알 수 없는 오류가 발생했습니다."}}}async getVendorContacts(t){try{const{data:a,error:c}=await this.supabase.from("vendor_contacts").select("*").eq("vendor_id",t).order("contact_name");if(c)throw c;return{success:!0,data:a||[]}}catch(a){return f.error("업체 연락처 조회 실패",a),{success:!1,error:a instanceof Error?a.message:"알 수 없는 오류가 발생했습니다."}}}async getVendorsForExport(){try{const{data:t,error:a}=await this.supabase.from("vendors").select("*").order("vendor_name");if(a)throw a;return{success:!0,data:(t||[]).map(r=>({업체명:r.vendor_name,사업자번호:r.business_number||"",대표자:r.representative||"",연락처:r.contact_phone||"",주소:r.address||"",이메일:r.email||"",상태:r.is_active?"활성":"비활성",등록일:r.created_at?new Date(r.created_at).toLocaleDateString("ko-KR"):""}))}}catch(t){return f.error("업체 Excel 내보내기 실패",t),{success:!1,error:t instanceof Error?t.message:"알 수 없는 오류가 발생했습니다."}}}}const V=new ke;function Ve({filters:d,onFiltersChange:t,onExport:a,onCreateNew:c}){const[r,l]=j.useState(d.search||""),x=o=>{o.preventDefault(),t({...d,search:r.trim()||void 0})},i=o=>{t({...d,is_active:o==="all"?void 0:o==="active"})},g=()=>{l(""),t({})},u=d.search||d.is_active!==void 0;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"업체 관리"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(p,{variant:"outline",onClick:a,className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",children:[e.jsx(oe,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Excel 내보내기"}),e.jsx("span",{className:"sm:hidden",children:"Excel"})]}),e.jsxs(p,{onClick:c,className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",children:[e.jsx(de,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"업체 등록"]})]})]}),e.jsx("div",{className:"bg-white p-3 sm:p-4 rounded-lg border space-y-4",children:e.jsxs("form",{onSubmit:x,className:"flex flex-col sm:flex-row gap-3 sm:gap-4 sm:items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"검색"}),e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-3 h-3 sm:w-4 sm:h-4"}),e.jsx(k,{type:"text",placeholder:"업체명, 사업자번호, 연락처 검색",value:r,onChange:o=>l(o.target.value),className:"pl-8 sm:pl-10 text-sm h-9"})]})]}),e.jsxs("div",{className:"w-full sm:w-auto sm:min-w-[120px]",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"상태"}),e.jsxs(ce,{value:d.is_active===void 0?"all":d.is_active?"active":"inactive",onValueChange:i,children:[e.jsx(ne,{className:"h-9",children:e.jsx(le,{})}),e.jsxs(ie,{children:[e.jsx(q,{value:"all",children:"전체"}),e.jsx(q,{value:"active",children:"활성"}),e.jsx(q,{value:"inactive",children:"비활성"})]})]})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsx(p,{type:"submit",className:"flex-1 sm:flex-none h-9 text-sm",children:"검색"}),u&&e.jsxs(p,{type:"button",variant:"outline",onClick:g,className:"flex items-center gap-1 h-9 text-sm",children:[e.jsx(te,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"초기화"}),e.jsx("span",{className:"sm:hidden",children:"초기"})]})]})]})})]})}function Ee({vendors:d,onEdit:t,onView:a,onRefresh:c}){const[r,l]=j.useState(null),{sortedData:x,sortConfig:i,handleSort:g}=je(d,"vendor_name","asc"),u=async s=>{l(s.id);try{const n=await V.toggleVendorStatus(s.id);n.success?(h.success(`업체가 ${s.is_active?"비활성화":"활성화"}되었습니다.`),c()):h.error(n.error||"상태 변경에 실패했습니다.")}catch{h.error("상태 변경 중 오류가 발생했습니다.")}finally{l(null)}},o=async s=>{if(confirm(`정말로 '${s.vendor_name}' 업체를 삭제하시겠습니까?`)){l(s.id);try{const n=await V.deleteVendor(s.id);n.success?(h.success("업체가 삭제되었습니다."),c()):h.error(n.error||"삭제에 실패했습니다.")}catch{h.error("삭제 중 오류가 발생했습니다.")}finally{l(null)}}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:block border rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(xe,{children:[e.jsx(he,{children:e.jsxs(I,{children:[e.jsx(E,{className:"w-24 min-w-[80px] lg:w-32",children:e.jsx(H,{sortKey:"vendor_name",currentSortKey:i.key,sortDirection:i.direction,onSort:()=>g("vendor_name"),children:"업체명"})}),e.jsx(E,{className:"w-16 min-w-[50px] text-center",children:"담당자"}),e.jsx(E,{className:"min-w-[200px]",children:"담당자 정보"}),e.jsx(E,{className:"w-20 min-w-[60px]",children:e.jsx(H,{sortKey:"created_at",currentSortKey:i.key,sortDirection:i.direction,onSort:()=>g("created_at"),children:"등록일"})}),e.jsx(E,{className:"w-14 min-w-[45px] text-center",children:"작업"})]})}),e.jsx(ue,{children:d.length===0?e.jsx(I,{children:e.jsx(w,{colSpan:5,className:"text-center py-8 text-gray-500",children:"등록된 업체가 없습니다."})}):x.map(s=>e.jsxs(I,{children:[e.jsx(w,{className:"font-medium text-[11px] px-2 py-1.5",children:s.vendor_name}),e.jsx(w,{className:"text-center text-[11px] px-1 py-1.5",children:e.jsxs(M,{variant:"outline",className:"text-[10px] px-1 py-0",children:[s.vendor_contacts?.length||0,"명"]})}),e.jsx(w,{className:"px-2 py-1.5",children:e.jsxs("div",{className:"space-y-0.5",children:[s.vendor_contacts&&s.vendor_contacts.length>0?s.vendor_contacts.slice(0,2).map((n,b)=>e.jsxs("div",{className:"text-[10px]",children:[e.jsx("span",{className:"font-medium",children:n.contact_name}),e.jsx("span",{className:"text-gray-500 ml-1",children:n.contact_phone}),n.contact_email&&e.jsx("span",{className:"text-gray-500 ml-1 truncate inline-block max-w-[180px]",children:n.contact_email})]},b)):e.jsx("span",{className:"text-gray-400 text-[10px]",children:"담당자 없음"}),s.vendor_contacts&&s.vendor_contacts.length>2&&e.jsxs("span",{className:"text-[10px] text-gray-500",children:["외 ",s.vendor_contacts.length-2,"명"]})]})}),e.jsx(w,{className:"text-[11px] px-2 py-1.5",children:D(s.created_at)}),e.jsx(w,{className:"px-1 py-1.5 text-center",children:e.jsxs(P,{children:[e.jsx(O,{asChild:!0,children:e.jsx(p,{variant:"ghost",className:"h-7 w-7 p-0",disabled:r===s.id,children:e.jsx(X,{className:"h-3 w-3"})})}),e.jsxs(A,{align:"end",children:[e.jsxs(N,{onClick:()=>a(s),children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"상세 보기"]}),e.jsxs(N,{onClick:()=>t(s),children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"수정"]}),e.jsx(N,{onClick:()=>u(s),children:s.is_active?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"비활성화"]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"활성화"]})}),e.jsxs(N,{onClick:()=>o(s),className:"text-red-600",children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"삭제"]})]})]})})]},s.id))})]})})}),e.jsx("div",{className:"hidden md:block lg:hidden",children:e.jsx("div",{className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"w-full min-w-[600px]",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 font-medium text-gray-900 text-sm",children:"업체명"}),e.jsx("th",{className:"text-center p-3 font-medium text-gray-900 text-sm w-20",children:"담당자"}),e.jsx("th",{className:"text-left p-3 font-medium text-gray-900 text-sm",children:"연락처"}),e.jsx("th",{className:"text-left p-3 font-medium text-gray-900 text-sm w-24",children:"등록일"}),e.jsx("th",{className:"text-center p-3 font-medium text-gray-900 text-sm w-16",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center py-8 text-gray-500",children:"등록된 업체가 없습니다."})}):x.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-3 font-medium text-sm",children:s.vendor_name}),e.jsx("td",{className:"p-3 text-center",children:e.jsxs(M,{variant:"outline",className:"text-xs",children:[s.vendor_contacts?.length||0,"명"]})}),e.jsx("td",{className:"p-3 text-sm",children:s.vendor_contacts&&s.vendor_contacts.length>0?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.vendor_contacts[0].contact_name}),e.jsx("div",{className:"text-gray-500 text-xs",children:s.vendor_contacts[0].contact_phone})]}):e.jsx("span",{className:"text-gray-400",children:"담당자 없음"})}),e.jsx("td",{className:"p-3 text-sm",children:D(s.created_at)}),e.jsx("td",{className:"p-3 text-center",children:e.jsxs(P,{children:[e.jsx(O,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(X,{className:"h-4 w-4"})})}),e.jsxs(A,{align:"end",children:[e.jsxs(N,{onClick:()=>a(s),children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"상세 보기"]}),e.jsxs(N,{onClick:()=>t(s),children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"수정"]}),e.jsx(N,{onClick:()=>u(s),children:s.is_active?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"비활성화"]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"활성화"]})}),e.jsxs(N,{onClick:()=>o(s),className:"text-red-600",children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"삭제"]})]})]})})]},s.id))})]})})}),e.jsx("div",{className:"block md:hidden space-y-3",children:x.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"등록된 업체가 없습니다."}):x.map(s=>e.jsxs(pe,{children:[e.jsx(ge,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:s.vendor_name}),e.jsxs(M,{variant:"outline",children:[s.vendor_contacts?.length||0,"명"]})]})}),e.jsx(G,{label:"담당자",value:e.jsxs("div",{className:"space-y-1",children:[s.vendor_contacts&&s.vendor_contacts.length>0?s.vendor_contacts.slice(0,2).map((n,b)=>e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:n.contact_name}),e.jsx("div",{className:"text-gray-500 text-xs",children:n.contact_phone}),n.contact_email&&e.jsx("div",{className:"text-gray-500 text-xs",children:n.contact_email})]},b)):e.jsx("span",{className:"text-gray-400",children:"담당자 없음"}),s.vendor_contacts&&s.vendor_contacts.length>2&&e.jsxs("span",{className:"text-sm text-gray-500",children:["외 ",s.vendor_contacts.length-2,"명"]})]})}),e.jsx(G,{label:"등록일",value:D(s.created_at)}),e.jsxs(fe,{children:[e.jsx(p,{size:"sm",variant:"outline",onClick:()=>a(s),children:e.jsx(B,{className:"w-4 h-4"})}),e.jsx(p,{size:"sm",variant:"outline",onClick:()=>t(s),children:e.jsx(L,{className:"w-4 h-4"})}),e.jsx(p,{size:"sm",variant:"outline",onClick:()=>u(s),disabled:r===s.id,children:s.is_active?e.jsx($,{className:"w-4 h-4"}):e.jsx(R,{className:"w-4 h-4"})}),e.jsx(p,{size:"sm",variant:"outline",className:"text-red-600",onClick:()=>o(s),disabled:r===s.id,children:e.jsx(K,{className:"w-4 h-4"})})]})]},s.id))})]})}function Fe({isOpen:d,onClose:t,vendor:a,onSave:c,mode:r}){const[l,x]=j.useState(!1),i=Ce({defaultValues:{vendor_name:"",business_number:"",representative:"",contact_phone:"",address:"",email:""}});j.useEffect(()=>{a&&d?i.reset({vendor_name:a.vendor_name||"",business_number:a.business_number||"",representative:a.representative||"",contact_phone:a.contact_phone||"",address:a.address||"",email:a.email||""}):!a&&d&&i.reset({vendor_name:"",business_number:"",representative:"",contact_phone:"",address:"",email:""})},[a,d,i]);const g=async s=>{x(!0);try{let n;r==="create"?n=await V.createVendor(s):r==="edit"&&a&&(n=await V.updateVendor(a.id,s)),n?.success?(h.success(r==="create"?"업체가 등록되었습니다.":"업체 정보가 수정되었습니다."),c(),t()):h.error(n?.error||"처리 중 오류가 발생했습니다.")}catch{h.error("처리 중 오류가 발생했습니다.")}finally{x(!1)}},u=()=>{switch(r){case"create":return"업체 등록";case"edit":return"업체 수정";case"view":return"업체 상세";default:return"업체"}},o=r==="view";return e.jsx(be,{open:d,onOpenChange:t,children:e.jsxs(we,{className:"w-full max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(_e,{children:e.jsx(ye,{children:u()})}),e.jsx(Ne,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(g),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(_,{control:i.control,name:"vendor_name",rules:{required:"업체명을 입력해주세요."},render:({field:s})=>e.jsxs(y,{children:[e.jsx(v,{children:"업체명 *"}),e.jsx(S,{children:e.jsx(k,{...s,placeholder:"업체명을 입력하세요",disabled:o})}),e.jsx(C,{})]})}),e.jsx(_,{control:i.control,name:"business_number",render:({field:s})=>e.jsxs(y,{children:[e.jsx(v,{children:"사업자번호"}),e.jsx(S,{children:e.jsx(k,{...s,placeholder:"000-00-00000",disabled:o})}),e.jsx(C,{})]})}),e.jsx(_,{control:i.control,name:"representative",render:({field:s})=>e.jsxs(y,{children:[e.jsx(v,{children:"대표자"}),e.jsx(S,{children:e.jsx(k,{...s,placeholder:"대표자명을 입력하세요",disabled:o})}),e.jsx(C,{})]})}),e.jsx(_,{control:i.control,name:"contact_phone",render:({field:s})=>e.jsxs(y,{children:[e.jsx(v,{children:"연락처"}),e.jsx(S,{children:e.jsx(k,{...s,placeholder:"010-0000-0000",disabled:o})}),e.jsx(C,{})]})}),e.jsx(_,{control:i.control,name:"email",render:({field:s})=>e.jsxs(y,{children:[e.jsx(v,{children:"이메일"}),e.jsx(S,{children:e.jsx(k,{...s,type:"email",placeholder:"company@example.com",disabled:o})}),e.jsx(C,{})]})})]}),e.jsx(_,{control:i.control,name:"address",render:({field:s})=>e.jsxs(y,{children:[e.jsx(v,{children:"주소"}),e.jsx(S,{children:e.jsx(Se,{...s,placeholder:"주소를 입력하세요",className:"min-h-[80px]",disabled:o})}),e.jsx(C,{})]})}),r==="view"&&a&&e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"상태:"}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs ${a.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:a.is_active?"활성":"비활성"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"등록일:"}),e.jsx("span",{className:"ml-2",children:a.created_at?new Date(a.created_at).toLocaleDateString("ko-KR"):"-"})]})]})}),e.jsxs(ve,{className:"gap-2",children:[e.jsx(p,{type:"button",variant:"outline",onClick:t,children:r==="view"?"닫기":"취소"}),!o&&e.jsx(p,{type:"submit",disabled:l,children:l?r==="create"?"등록 중...":"수정 중...":r==="create"?"등록":"수정"})]})]})})]})})}function Ue(){const[d,t]=j.useState([]),[a,c]=j.useState([]),[r,l]=j.useState(!0),[x,i]=j.useState({}),[g,u]=j.useState(!1),[o,s]=j.useState(null),[n,b]=j.useState("create"),T=async()=>{l(!0);try{const m=await V.getVendors(x);m.success&&m.data?(t(m.data),c(m.data)):h.error(m.error||"업체 목록을 불러오는데 실패했습니다.")}catch{h.error("업체 목록을 불러오는 중 오류가 발생했습니다.")}finally{l(!1)}};j.useEffect(()=>{T()},[x]);const J=()=>{s(null),b("create"),u(!0)},Q=m=>{s(m),b("edit"),u(!0)},U=m=>{s(m),b("view"),u(!0)},W=()=>{u(!1),s(null)},Y=()=>{T()},Z=async()=>{try{const m=await V.getVendorsForExport();if(m.success&&m.data){const F=await re(()=>import("./xlsx-DGuHH-KN.js"),[]),ee=F.utils.json_to_sheet(m.data),z=F.utils.book_new();F.utils.book_append_sheet(z,ee,"업체 목록");const se=`업체_목록_${new Date().toISOString().slice(0,10)}.xlsx`;F.writeFile(z,se),h.success("Excel 파일이 다운로드되었습니다.")}else h.error(m.error||"Excel 내보내기에 실패했습니다.")}catch{h.error("Excel 내보내기 중 오류가 발생했습니다.")}};return r&&d.length===0?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"업체 목록을 불러오는 중..."})]})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ve,{filters:x,onFiltersChange:i,onExport:Z,onCreateNew:J}),e.jsxs("div",{className:"bg-white rounded-lg border",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-medium",children:"업체 목록"}),e.jsxs("span",{className:"px-3 py-1 bg-blue-50 text-blue-600 text-sm font-semibold rounded-full",children:["총 ",a.length,"개"]})]}),e.jsx("div",{className:"text-sm text-gray-500",children:r&&"업데이트 중..."})]})}),e.jsx(Ee,{vendors:a,onEdit:Q,onView:U,onRefresh:T})]}),e.jsx(Fe,{isOpen:g,onClose:W,vendor:o,onSave:Y,mode:n})]})})}export{Ue as default};
//# sourceMappingURL=VendorMain-y_IFrArb.js.map
