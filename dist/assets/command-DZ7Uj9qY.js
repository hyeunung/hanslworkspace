import{r as e,i as t,P as r,k as n,j as l,h as a}from"./index-B-4QaAWl.js";import{R as i,P as u,O as o,C as c}from"./input-ypdwQkAp.js";import{S as d}from"./card-ytt0jc3t.js";var s=.999,f=/[\\\/_+.#"@\[\(\{&]/,m=/[\\\/_+.#"@\[\(\{&]/g,p=/[\s-]/,v=/[\s-]/g;function h(e,t,r,n,l,a,i){if(a===t.length)return l===e.length?1:.99;var u=`${l},${a}`;if(void 0!==i[u])return i[u];for(var o,c,d,g,b=n.charAt(a),y=r.indexOf(b,l),w=0;y>=0;)(o=h(e,t,r,n,y+1,a+1,i))>w&&(y===l?o*=1:f.test(e.charAt(y-1))?(o*=.8,(d=e.slice(l,y-1).match(m))&&l>0&&(o*=Math.pow(s,d.length))):p.test(e.charAt(y-1))?(o*=.9,(g=e.slice(l,y-1).match(v))&&l>0&&(o*=Math.pow(s,g.length))):(o*=.17,l>0&&(o*=Math.pow(s,y-l))),e.charAt(y)!==t.charAt(a)&&(o*=.9999)),(o<.1&&r.charAt(y-1)===n.charAt(a+1)||n.charAt(a+1)===n.charAt(a)&&r.charAt(y-1)!==n.charAt(a))&&(.1*(c=h(e,t,r,n,y+1,a+2,i))>o&&(o=.1*c)),o>w&&(w=o),y=r.indexOf(b,y+1);return i[u]=w,w}function g(e){return e.toLowerCase().replace(v," ")}function b(e,t,r){return h(e=r&&r.length>0?""+(e+" "+r.join(" ")):e,t,g(e),g(t),0,0,{})}var y='[cmdk-group=""]',w='[cmdk-group-items=""]',x='[cmdk-item=""]',E=`${x}:not([aria-disabled="true"])`,k="cmdk-item-select",S="data-value",I=(e,t,r)=>b(e,t,r),N=e.createContext(void 0),R=()=>e.useContext(N),C=e.createContext(void 0),A=()=>e.useContext(C),j=e.createContext(void 0),M=e.forwardRef((n,l)=>{let a=H(()=>{var e,t;return{search:"",value:null!=(t=null!=(e=n.value)?e:n.defaultValue)?t:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),i=H(()=>new Set),u=H(()=>new Map),o=H(()=>new Map),c=H(()=>new Set),d=B(n),{label:s,children:f,value:m,onValueChange:p,filter:v,shouldFilter:h,loop:g,disablePointerSelection:b=!1,vimBindings:R=!0,...A}=n,j=t(),M=t(),P=t(),D=e.useRef(null),_=J();G(()=>{if(void 0!==m){let e=m.trim();a.current.value=e,L.emit()}},[m]),G(()=>{_(6,U)},[]);let L=e.useMemo(()=>({subscribe:e=>(c.current.add(e),()=>c.current.delete(e)),snapshot:()=>a.current,setState:(e,t,r)=>{var n,l,i,u;if(!Object.is(a.current[e],t)){if(a.current[e]=t,"search"===e)V(),K(),_(1,O);else if("value"===e){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let e=document.getElementById(P);e?e.focus():null==(n=document.getElementById(j))||n.focus()}if(_(7,()=>{var e;a.current.selectedItemId=null==(e=W())?void 0:e.id,L.emit()}),r||_(5,U),void 0!==(null==(l=d.current)?void 0:l.value)){let e=null!=t?t:"";return void(null==(u=(i=d.current).onValueChange)||u.call(i,e))}}L.emit()}},emit:()=>{c.current.forEach(e=>e())}}),[]),$=e.useMemo(()=>({value:(e,t,r)=>{var n;t!==(null==(n=o.current.get(e))?void 0:n.value)&&(o.current.set(e,{value:t,keywords:r}),a.current.filtered.items.set(e,F(t,r)),_(2,()=>{K(),L.emit()}))},item:(e,t)=>(i.current.add(e),t&&(u.current.has(t)?u.current.get(t).add(e):u.current.set(t,new Set([e]))),_(3,()=>{V(),K(),a.current.value||O(),L.emit()}),()=>{o.current.delete(e),i.current.delete(e),a.current.filtered.items.delete(e);let t=W();_(4,()=>{V(),(null==t?void 0:t.getAttribute("id"))===e&&O(),L.emit()})}),group:e=>(u.current.has(e)||u.current.set(e,new Set),()=>{o.current.delete(e),u.current.delete(e)}),filter:()=>d.current.shouldFilter,label:s||n["aria-label"],getDisablePointerSelection:()=>d.current.disablePointerSelection,listId:j,inputId:P,labelId:M,listInnerRef:D}),[]);function F(e,t){var r,n;let l=null!=(n=null==(r=d.current)?void 0:r.filter)?n:I;return e?l(e,a.current.search,t):0}function K(){if(!a.current.search||!1===d.current.shouldFilter)return;let e=a.current.filtered.items,t=[];a.current.filtered.groups.forEach(r=>{let n=u.current.get(r),l=0;n.forEach(t=>{let r=e.get(t);l=Math.max(r,l)}),t.push([r,l])});let r=D.current;X().sort((t,r)=>{var n,l;let a=t.getAttribute("id"),i=r.getAttribute("id");return(null!=(n=e.get(i))?n:0)-(null!=(l=e.get(a))?l:0)}).forEach(e=>{let t=e.closest(w);t?t.appendChild(e.parentElement===t?e:e.closest(`${w} > *`)):r.appendChild(e.parentElement===r?e:e.closest(`${w} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{var t;let r=null==(t=D.current)?void 0:t.querySelector(`${y}[${S}="${encodeURIComponent(e[0])}"]`);null==r||r.parentElement.appendChild(r)})}function O(){let e=X().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(S);L.setState("value",t||void 0)}function V(){var e,t,r,n;if(!a.current.search||!1===d.current.shouldFilter)return void(a.current.filtered.count=i.current.size);a.current.filtered.groups=new Set;let l=0;for(let u of i.current){let i=F(null!=(t=null==(e=o.current.get(u))?void 0:e.value)?t:"",null!=(n=null==(r=o.current.get(u))?void 0:r.keywords)?n:[]);a.current.filtered.items.set(u,i),i>0&&l++}for(let[i,o]of u.current)for(let e of o)if(a.current.filtered.items.get(e)>0){a.current.filtered.groups.add(i);break}a.current.filtered.count=l}function U(){var e,t,r;let n=W();n&&((null==(e=n.parentElement)?void 0:e.firstChild)===n&&(null==(r=null==(t=n.closest(y))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),n.scrollIntoView({block:"nearest"}))}function W(){var e;return null==(e=D.current)?void 0:e.querySelector(`${x}[aria-selected="true"]`)}function X(){var e;return Array.from((null==(e=D.current)?void 0:e.querySelectorAll(E))||[])}function Y(e){let t=X()[e];t&&L.setState("value",t.getAttribute(S))}function Z(e){var t;let r=W(),n=X(),l=n.findIndex(e=>e===r),a=n[l+e];null!=(t=d.current)&&t.loop&&(a=l+e<0?n[n.length-1]:l+e===n.length?n[0]:n[l+e]),a&&L.setState("value",a.getAttribute(S))}function ee(e){let t,r=W(),n=null==r?void 0:r.closest(y);for(;n&&!t;)n=e>0?q(n,y):z(n,y),t=null==n?void 0:n.querySelector(E);t?L.setState("value",t.getAttribute(S)):Z(e)}let te=()=>Y(X().length-1),re=e=>{e.preventDefault(),e.metaKey?te():e.altKey?ee(1):Z(1)},ne=e=>{e.preventDefault(),e.metaKey?Y(0):e.altKey?ee(-1):Z(-1)};return e.createElement(r.div,{ref:l,tabIndex:-1,...A,"cmdk-root":"",onKeyDown:e=>{var t;null==(t=A.onKeyDown)||t.call(A,e);let r=e.nativeEvent.isComposing||229===e.keyCode;if(!e.defaultPrevented&&!r)switch(e.key){case"n":case"j":R&&e.ctrlKey&&re(e);break;case"ArrowDown":re(e);break;case"p":case"k":R&&e.ctrlKey&&ne(e);break;case"ArrowUp":ne(e);break;case"Home":e.preventDefault(),Y(0);break;case"End":e.preventDefault(),te();break;case"Enter":{e.preventDefault();let t=W();if(t){let e=new Event(k);t.dispatchEvent(e)}}}}},e.createElement("label",{"cmdk-label":"",htmlFor:$.inputId,id:$.labelId,style:T},s),Q(n,t=>e.createElement(C.Provider,{value:L},e.createElement(N.Provider,{value:$},t))))}),P=e.forwardRef((l,a)=>{var i,u;let o=t(),c=e.useRef(null),d=e.useContext(j),s=R(),f=B(l),m=null!=(u=null==(i=f.current)?void 0:i.forceMount)?u:null==d?void 0:d.forceMount;G(()=>{if(!m)return s.item(o,null==d?void 0:d.id)},[m]);let p=W(o,c,[l.value,l.children,c],l.keywords),v=A(),h=U(e=>e.value&&e.value===p.current),g=U(e=>!(!m&&!1!==s.filter())||(!e.search||e.filtered.items.get(o)>0));function b(){var e,t;y(),null==(t=(e=f.current).onSelect)||t.call(e,p.current)}function y(){v.setState("value",p.current,!0)}if(e.useEffect(()=>{let e=c.current;if(e&&!l.disabled)return e.addEventListener(k,b),()=>e.removeEventListener(k,b)},[g,l.onSelect,l.disabled]),!g)return null;let{disabled:w,value:x,onSelect:E,forceMount:S,keywords:I,...N}=l;return e.createElement(r.div,{ref:n(c,a),...N,id:o,"cmdk-item":"",role:"option","aria-disabled":!!w,"aria-selected":!!h,"data-disabled":!!w,"data-selected":!!h,onPointerMove:w||s.getDisablePointerSelection()?void 0:y,onClick:w?void 0:b},l.children)}),D=e.forwardRef((l,a)=>{let{heading:i,children:u,forceMount:o,...c}=l,d=t(),s=e.useRef(null),f=e.useRef(null),m=t(),p=R(),v=U(e=>!(!o&&!1!==p.filter())||(!e.search||e.filtered.groups.has(d)));G(()=>p.group(d),[]),W(d,s,[l.value,l.heading,f]);let h=e.useMemo(()=>({id:d,forceMount:o}),[o]);return e.createElement(r.div,{ref:n(s,a),...c,"cmdk-group":"",role:"presentation",hidden:!v||void 0},i&&e.createElement("div",{ref:f,"cmdk-group-heading":"","aria-hidden":!0,id:m},i),Q(l,t=>e.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":i?m:void 0},e.createElement(j.Provider,{value:h},t))))}),_=e.forwardRef((t,l)=>{let{alwaysRender:a,...i}=t,u=e.useRef(null),o=U(e=>!e.search);return a||o?e.createElement(r.div,{ref:n(u,l),...i,"cmdk-separator":"",role:"separator"}):null}),L=e.forwardRef((t,n)=>{let{onValueChange:l,...a}=t,i=null!=t.value,u=A(),o=U(e=>e.search),c=U(e=>e.selectedItemId),d=R();return e.useEffect(()=>{null!=t.value&&u.setState("search",t.value)},[t.value]),e.createElement(r.input,{ref:n,...a,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":c,id:d.inputId,type:"text",value:i?t.value:o,onChange:e=>{i||u.setState("search",e.target.value),null==l||l(e.target.value)}})}),$=e.forwardRef((t,l)=>{let{children:a,label:i="Suggestions",...u}=t,o=e.useRef(null),c=e.useRef(null),d=U(e=>e.selectedItemId),s=R();return e.useEffect(()=>{if(c.current&&o.current){let e,t=c.current,r=o.current,n=new ResizeObserver(()=>{e=requestAnimationFrame(()=>{let e=t.offsetHeight;r.style.setProperty("--cmdk-list-height",e.toFixed(1)+"px")})});return n.observe(t),()=>{cancelAnimationFrame(e),n.unobserve(t)}}},[]),e.createElement(r.div,{ref:n(o,l),...u,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":d,"aria-label":i,id:s.listId},Q(t,t=>e.createElement("div",{ref:n(c,s.listInnerRef),"cmdk-list-sizer":""},t)))}),F=e.forwardRef((t,r)=>{let{open:n,onOpenChange:l,overlayClassName:a,contentClassName:d,container:s,...f}=t;return e.createElement(i,{open:n,onOpenChange:l},e.createElement(u,{container:s},e.createElement(o,{"cmdk-overlay":"",className:a}),e.createElement(c,{"aria-label":t.label,"cmdk-dialog":"",className:d},e.createElement(M,{ref:r,...f}))))}),K=e.forwardRef((t,n)=>U(e=>0===e.filtered.count)?e.createElement(r.div,{ref:n,...t,"cmdk-empty":"",role:"presentation"}):null),O=e.forwardRef((t,n)=>{let{progress:l,children:a,label:i="Loading...",...u}=t;return e.createElement(r.div,{ref:n,...u,"cmdk-loading":"",role:"progressbar","aria-valuenow":l,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},Q(t,t=>e.createElement("div",{"aria-hidden":!0},t)))}),V=Object.assign(M,{List:$,Item:P,Input:L,Group:D,Separator:_,Dialog:F,Empty:K,Loading:O});function q(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function z(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function B(t){let r=e.useRef(t);return G(()=>{r.current=t}),r}var G="undefined"==typeof window?e.useEffect:e.useLayoutEffect;function H(t){let r=e.useRef();return void 0===r.current&&(r.current=t()),r}function U(t){let r=A(),n=()=>t(r.snapshot());return e.useSyncExternalStore(r.subscribe,n,n)}function W(t,r,n,l=[]){let a=e.useRef(),i=R();return G(()=>{var e;let u=(()=>{var e;for(let t of n){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():a.current}})(),o=l.map(e=>e.trim());i.value(t,u,o),null==(e=r.current)||e.setAttribute(S,u),a.current=u}),a}var J=()=>{let[t,r]=e.useState(),n=H(()=>new Map);return G(()=>{n.current.forEach(e=>e()),n.current=new Map},[t]),(e,t)=>{n.current.set(e,t),r({})}};function Q({asChild:t,children:r},n){return t&&e.isValidElement(r)?e.cloneElement(function(e){let t=e.type;return"function"==typeof t?t(e.props):"render"in t?t.render(e.props):e}(r),{ref:r.ref},n(r.props.children)):n(r)}var T={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const X=e.forwardRef(({className:e,...t},r)=>l.jsx(V,{ref:r,className:a("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));X.displayName=V.displayName;const Y=e.forwardRef(({className:e,...t},r)=>l.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[l.jsx(d,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),l.jsx(V.Input,{ref:r,className:a("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));Y.displayName=V.Input.displayName;e.forwardRef(({className:e,...t},r)=>l.jsx(V.List,{ref:r,className:a("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t})).displayName=V.List.displayName;const Z=e.forwardRef((e,t)=>l.jsx(V.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));Z.displayName=V.Empty.displayName;const ee=e.forwardRef(({className:e,...t},r)=>l.jsx(V.Group,{ref:r,className:a("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));ee.displayName=V.Group.displayName;e.forwardRef(({className:e,...t},r)=>l.jsx(V.Separator,{ref:r,className:a("-mx-1 h-px bg-border",e),...t})).displayName=V.Separator.displayName;const te=e.forwardRef(({className:e,...t},r)=>l.jsx(V.Item,{ref:r,className:a("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...t}));te.displayName=V.Item.displayName;export{X as C,Y as a,Z as b,ee as c,te as d};
//# sourceMappingURL=command-DZ7Uj9qY.js.map
