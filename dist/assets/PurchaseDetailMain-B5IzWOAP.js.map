{"version":3,"file":"PurchaseDetailMain-B5IzWOAP.js","sources":["../../node_modules/lucide-react/dist/esm/icons/arrow-left.js","../../src/components/purchase/PurchaseDetailMain.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.541.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n];\nconst ArrowLeft = createLucideIcon(\"arrow-left\", __iconNode);\n\nexport { __iconNode, ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n","\nimport { useEffect, useState } from 'react'\nimport { useParams, useNavigate } from 'react-router-dom'\nimport { createClient } from '@/lib/supabase/client'\nimport { PurchaseRequestWithDetails } from '@/types/purchase'\nimport { ArrowLeft, Calendar, User, Building2, Package, CreditCard } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { toast } from 'sonner'\n\nexport default function PurchaseDetailMain() {\n  const { id } = useParams<{ id: string }>()\n  const navigate = useNavigate()\n  const [loading, setLoading] = useState(true)\n  const [purchase, setPurchase] = useState<PurchaseRequestWithDetails | null>(null)\n\n  useEffect(() => {\n    if (id) {\n      loadPurchaseDetail(id)\n    }\n  }, [id])\n\n  const loadPurchaseDetail = async (purchaseId: string) => {\n    try {\n      const supabase = createClient()\n      \n      \n      const { data, error } = await supabase\n        .from('purchase_requests')\n        .select('*,vendors(id,vendor_name),purchase_request_items(*)')\n        .eq('id', purchaseId)\n        .single()\n\n\n      if (error) throw error\n\n      if (data) {\n        setPurchase({\n          ...data,\n          items: data.purchase_request_items || [],\n          vendor: data.vendors || { id: 0, vendor_name: '알 수 없음' },\n          vendor_contacts: []\n        } as PurchaseRequestWithDetails)\n      }\n    } catch (error) {\n      toast.error('발주 상세 정보를 불러오는데 실패했습니다.')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const getStatusBadge = (status: string | null) => {\n    switch (status) {\n      case 'approved':\n        return <Badge className=\"bg-green-100 text-green-800\">승인</Badge>\n      case 'rejected':\n        return <Badge className=\"bg-red-100 text-red-800\">반려</Badge>\n      case 'pending':\n        return <Badge className=\"bg-yellow-100 text-yellow-800\">대기</Badge>\n      default:\n        return <Badge className=\"bg-gray-100 text-gray-800\">-</Badge>\n    }\n  }\n\n  const getDeliveryStatusBadge = (status: string | null) => {\n    switch (status) {\n      case 'completed':\n        return <Badge className=\"bg-hansl-100 text-hansl-800\">납품완료</Badge>\n      case 'partial':\n        return <Badge className=\"bg-purple-100 text-purple-800\">부분납품</Badge>\n      case 'pending':\n        return <Badge className=\"bg-orange-100 text-orange-800\">납품대기</Badge>\n      default:\n        return <Badge className=\"bg-gray-100 text-gray-800\">-</Badge>\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n      </div>\n    )\n  }\n\n  if (!purchase) {\n    return (\n      <div className=\"text-center py-12\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">발주 정보를 찾을 수 없습니다</h3>\n        <Button onClick={() => navigate('/purchase/list')} className=\"mt-4\">\n          <ArrowLeft className=\"w-4 h-4 mr-2\" />\n          목록으로 돌아가기\n        </Button>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-4\">\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => navigate('/purchase/list')}\n          >\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            목록으로\n          </Button>\n          <h1 className=\"text-2xl font-semibold text-gray-900\">\n            발주 상세 - {purchase.order_number}\n          </h1>\n        </div>\n      </div>\n\n      {/* Status Overview */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <div className=\"bg-white p-4 rounded-lg border\">\n          <p className=\"text-sm text-gray-600 mb-1\">1차 승인</p>\n          {getStatusBadge(purchase.middle_manager_status)}\n        </div>\n        <div className=\"bg-white p-4 rounded-lg border\">\n          <p className=\"text-sm text-gray-600 mb-1\">최종 승인</p>\n          {getStatusBadge(purchase.final_manager_status)}\n        </div>\n        <div className=\"bg-white p-4 rounded-lg border\">\n          <p className=\"text-sm text-gray-600 mb-1\">구매 처리</p>\n          {getStatusBadge(purchase.purchase_status || 'pending')}\n        </div>\n        <div className=\"bg-white p-4 rounded-lg border\">\n          <p className=\"text-sm text-gray-600 mb-1\">납품 상태</p>\n          {getDeliveryStatusBadge(purchase.delivery_status || 'pending')}\n        </div>\n      </div>\n\n      {/* Basic Info */}\n      <div className=\"bg-white rounded-lg border p-6 space-y-4\">\n        <h2 className=\"text-lg font-semibold text-gray-900\">기본 정보</h2>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <div className=\"flex items-center text-sm text-gray-600 mb-1\">\n              <Calendar className=\"w-4 h-4 mr-2\" />\n              요청일\n            </div>\n            <p className=\"font-medium\">\n              {purchase.created_at ? new Date(purchase.created_at).toLocaleDateString('ko-KR') : '-'}\n            </p>\n          </div>\n          \n          <div>\n            <div className=\"flex items-center text-sm text-gray-600 mb-1\">\n              <User className=\"w-4 h-4 mr-2\" />\n              요청자\n            </div>\n            <p className=\"font-medium\">{purchase.requester_name || '-'}</p>\n          </div>\n          \n          <div>\n            <div className=\"flex items-center text-sm text-gray-600 mb-1\">\n              <Building2 className=\"w-4 h-4 mr-2\" />\n              업체명\n            </div>\n            <p className=\"font-medium\">{purchase.vendor?.vendor_name || '-'}</p>\n          </div>\n          \n          <div>\n            <div className=\"flex items-center text-sm text-gray-600 mb-1\">\n              <CreditCard className=\"w-4 h-4 mr-2\" />\n              총 금액\n            </div>\n            <p className=\"font-medium\">\n              {purchase.total_amount?.toLocaleString('ko-KR')}원\n            </p>\n          </div>\n        </div>\n\n        {purchase.purpose && (\n          <div>\n            <p className=\"text-sm text-gray-600 mb-1\">구매 목적</p>\n            <p className=\"text-gray-900\">{purchase.purpose}</p>\n          </div>\n        )}\n      </div>\n\n      {/* Items */}\n      <div className=\"bg-white rounded-lg border p-6\">\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">구매 품목</h2>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  품목명\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  수량\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  단가\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  금액\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {(purchase.items || []).map((item, index) => (\n                <tr key={index}>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                    {item.item_name}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                    {item.quantity} {item.unit || '개'}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                    {item.unit_price?.toLocaleString('ko-KR')}원\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                    {((item.quantity || 0) * (item.unit_price || 0)).toLocaleString('ko-KR')}원\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Comments */}\n      {(purchase.middle_manager_comment || purchase.final_manager_comment || purchase.purchase_comment) && (\n        <div className=\"bg-white rounded-lg border p-6 space-y-4\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">처리 내역</h2>\n          \n          {purchase.middle_manager_comment && (\n            <div>\n              <p className=\"text-sm font-medium text-gray-600 mb-1\">1차 승인자 코멘트</p>\n              <p className=\"text-gray-900\">{purchase.middle_manager_comment}</p>\n            </div>\n          )}\n          \n          {purchase.final_manager_comment && (\n            <div>\n              <p className=\"text-sm font-medium text-gray-600 mb-1\">최종 승인자 코멘트</p>\n              <p className=\"text-gray-900\">{purchase.final_manager_comment}</p>\n            </div>\n          )}\n          \n          {purchase.purchase_comment && (\n            <div>\n              <p className=\"text-sm font-medium text-gray-600 mb-1\">구매담당자 코멘트</p>\n              <p className=\"text-gray-900\">{purchase.purchase_comment}</p>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  )\n}"],"names":["__iconNode","ArrowLeft","createLucideIcon","PurchaseDetailMain","id","useParams","navigate","useNavigate","loading","setLoading","useState","purchase","setPurchase","useEffect","loadPurchaseDetail","purchaseId","supabase","createClient","data","error","toast","getStatusBadge","status","jsx","Badge","getDeliveryStatusBadge","jsxs","Button","Calendar","User","Building2","CreditCard","item","index"],"mappings":"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","x_google_ignoreList":[0]}