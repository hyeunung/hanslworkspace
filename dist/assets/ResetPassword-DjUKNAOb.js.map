{"version":3,"file":"ResetPassword-DjUKNAOb.js","sources":["../../src/components/auth/ResetPassword.tsx"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport { createClient } from '@/lib/supabase/client'\n\n/**\n * 비밀번호 재설정 페이지\n * 이메일 링크를 통해 인증된 사용자가 새 비밀번호를 설정할 수 있습니다.\n */\nexport default function ResetPassword() {\n  const navigate = useNavigate()\n  const [password, setPassword] = useState('')\n  const [confirmPassword, setConfirmPassword] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [success, setSuccess] = useState(false)\n\n  useEffect(() => {\n    // 인증 상태 확인\n    const checkAuth = async () => {\n      const supabase = createClient()\n      const { data: { user } } = await supabase.auth.getUser()\n      \n      if (!user) {\n        setError('인증이 필요합니다. 이메일 링크를 다시 확인해주세요.')\n      }\n    }\n\n    checkAuth()\n  }, [])\n\n  const handleResetPassword = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setError(null)\n\n    // 비밀번호 확인\n    if (password !== confirmPassword) {\n      setError('비밀번호가 일치하지 않습니다.')\n      return\n    }\n\n    if (password.length < 6) {\n      setError('비밀번호는 최소 6자 이상이어야 합니다.')\n      return\n    }\n\n    setLoading(true)\n\n    try {\n      const supabase = createClient()\n      \n      // 비밀번호 업데이트\n      const { error: updateError } = await supabase.auth.updateUser({\n        password: password,\n      })\n\n      if (updateError) {\n        setError(`비밀번호 변경 실패: ${updateError.message}`)\n        setLoading(false)\n        return\n      }\n\n      setSuccess(true)\n      \n      // 2초 후 로그인 페이지로 리다이렉트\n      setTimeout(() => {\n        navigate('/')\n      }, 2000)\n    } catch (err) {\n      setError(`오류가 발생했습니다: ${err instanceof Error ? err.message : '알 수 없는 오류'}`)\n      setLoading(false)\n    }\n  }\n\n  if (success) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full\">\n          <div className=\"text-center\">\n            <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <span className=\"text-2xl\">✅</span>\n            </div>\n            <h2 className=\"text-xl font-semibold text-gray-800 mb-2\">비밀번호 변경 완료</h2>\n            <p className=\"text-gray-600 mb-6\">비밀번호가 성공적으로 변경되었습니다.</p>\n            <p className=\"text-sm text-gray-500\">잠시 후 로그인 페이지로 이동합니다...</p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n      <div className=\"w-full max-w-md\">\n        <div className=\"bg-white rounded-2xl shadow-xl p-8\">\n          <div className=\"flex flex-col items-center mb-8\">\n            <img\n              src=\"/logo_eng.svg\"\n              alt=\"HANSL Logo\"\n              className=\"w-[150px] h-[60px] mb-4\"\n            />\n            <h2 className=\"text-2xl font-semibold text-gray-800\">\n              비밀번호 재설정\n            </h2>\n          </div>\n\n          <form onSubmit={handleResetPassword} className=\"space-y-6\">\n            <div>\n              <label \n                htmlFor=\"password\" \n                className=\"block text-sm font-medium text-gray-700 mb-2\"\n              >\n                새 비밀번호\n              </label>\n              <input\n                id=\"password\"\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all\"\n                placeholder=\"최소 6자 이상\"\n                required\n                minLength={6}\n              />\n            </div>\n\n            <div>\n              <label \n                htmlFor=\"confirmPassword\" \n                className=\"block text-sm font-medium text-gray-700 mb-2\"\n              >\n                비밀번호 확인\n              </label>\n              <input\n                id=\"confirmPassword\"\n                type=\"password\"\n                value={confirmPassword}\n                onChange={(e) => setConfirmPassword(e.target.value)}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all\"\n                placeholder=\"비밀번호를 다시 입력하세요\"\n                required\n                minLength={6}\n              />\n            </div>\n\n            {error && (\n              <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg\">\n                <p className=\"text-sm text-red-600\">{error}</p>\n              </div>\n            )}\n\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full py-3 px-4 bg-primary text-white font-medium rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {loading ? '처리 중...' : '비밀번호 변경'}\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n\n\n\n\n"],"names":["ResetPassword","navigate","useNavigate","password","setPassword","useState","confirmPassword","setConfirmPassword","loading","setLoading","error","setError","success","setSuccess","useEffect","async","supabase","createClient","data","user","auth","getUser","checkAuth","jsx","className","children","jsxs","src","alt","onSubmit","e","preventDefault","length","updateError","updateUser","message","setTimeout","err","Error","htmlFor","id","type","value","onChange","target","placeholder","required","minLength","disabled"],"mappings":"6DAQA,SAAwBA,IACtB,MAAMC,EAAWC,KACVC,EAAUC,GAAeC,EAAAA,SAAS,KAClCC,EAAiBC,GAAsBF,EAAAA,SAAS,KAChDG,EAASC,GAAcJ,EAAAA,UAAS,IAChCK,EAAOC,GAAYN,EAAAA,SAAwB,OAC3CO,EAASC,GAAcR,EAAAA,UAAS,GAEvCS,EAAAA,UAAU,KAEUC,WAChB,MAAMC,EAAWC,KACTC,MAAMC,KAAEA,UAAiBH,EAASI,KAAKC,UAE1CF,GACHR,EAAS,kCAIbW,IACC,IA6CH,OAAIV,EAEAW,EAAAA,IAAC,MAAA,CAAIC,UAAU,2DACbC,WAAAF,IAAC,MAAA,CAAIC,UAAU,qDACbC,SAAAC,EAAAA,KAAC,MAAA,CAAIF,UAAU,cACbC,SAAA,GAAAF,IAAC,MAAA,CAAIC,UAAU,oFACbC,SAAAF,EAAAA,IAAC,QAAKC,UAAU,WAAWC,iBAE7BF,EAAAA,IAAC,KAAA,CAAGC,UAAU,2CAA2CC,SAAA,eACzDF,EAAAA,IAAC,IAAA,CAAEC,UAAU,qBAAqBC,SAAA,yBAClCF,EAAAA,IAAC,IAAA,CAAEC,UAAU,wBAAwBC,SAAA,kCAQ7CF,EAAAA,IAAC,MAAA,CAAIC,UAAU,2DACbC,WAAAF,IAAC,MAAA,CAAIC,UAAU,kBACbC,SAAAC,EAAAA,KAAC,MAAA,CAAIF,UAAU,qCACbC,SAAA,GAAAC,KAAC,MAAA,CAAIF,UAAU,kCACbC,SAAA,CAAAF,EAAAA,IAAC,MAAA,CACCI,IAAI,gBACJC,IAAI,aACJJ,UAAU,4BAEZD,EAAAA,IAAC,KAAA,CAAGC,UAAU,uCAAuCC,SAAA,gBAKvDC,EAAAA,KAAC,OAAA,CAAKG,SA3Ecd,MAAOe,IAKjC,GAJAA,EAAEC,iBACFpB,EAAS,MAGLR,IAAaG,EAKjB,GAAIH,EAAS6B,OAAS,EACpBrB,EAAS,8BADX,CAKAF,GAAW,GAEX,IACE,MAAMO,EAAWC,KAGTP,MAAOuB,SAAsBjB,EAASI,KAAKc,WAAW,CAC5D/B,aAGF,GAAI8B,EAGF,OAFAtB,EAAS,eAAesB,EAAYE,gBACpC1B,GAAW,GAIbI,GAAW,GAGXuB,WAAW,KACTnC,EAAS,MACR,IACL,OAASoC,GACP1B,EAAS,eAAe0B,aAAeC,MAAQD,EAAIF,QAAU,eAC7D1B,GAAW,EACb,CA3BA,MAPEE,EAAS,qBAqEgCa,UAAU,YAC7CC,SAAA,CAAAC,OAAC,MAAA,CACCD,SAAA,CAAAF,EAAAA,IAAC,QAAA,CACCgB,QAAQ,WACRf,UAAU,+CACXC,SAAA,WAGDF,EAAAA,IAAC,QAAA,CACCiB,GAAG,WACHC,KAAK,WACLC,MAAOvC,EACPwC,SAAWb,GAAM1B,EAAY0B,EAAEc,OAAOF,OACtClB,UAAU,6HACVqB,YAAY,WACZC,UAAQ,EACRC,UAAW,cAId,MAAA,CACCtB,SAAA,CAAAF,EAAAA,IAAC,QAAA,CACCgB,QAAQ,kBACRf,UAAU,+CACXC,SAAA,YAGDF,EAAAA,IAAC,QAAA,CACCiB,GAAG,kBACHC,KAAK,WACLC,MAAOpC,EACPqC,SAAWb,GAAMvB,EAAmBuB,EAAEc,OAAOF,OAC7ClB,UAAU,6HACVqB,YAAY,iBACZC,UAAQ,EACRC,UAAW,OAIdrC,GACCa,EAAAA,IAAC,MAAA,CAAIC,UAAU,iDACbC,eAAC,IAAA,CAAED,UAAU,uBAAwBC,SAAAf,MAIzCa,EAAAA,IAAC,SAAA,CACCkB,KAAK,SACLO,SAAUxC,EACVgB,UAAU,sJAETC,WAAU,UAAY,qBAOrC"}