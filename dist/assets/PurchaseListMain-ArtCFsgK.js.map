{"version":3,"mappings":"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","names":["__iconNode","ChevronsUpDown","createLucideIcon","Funnel","usePurchaseData","purchases","setPurchases","useState","vendors","setVendors","employees","setEmployees","loading","setLoading","currentUserRoles","setCurrentUserRoles","currentUserName","setCurrentUserName","currentUserEmail","setCurrentUserEmail","currentUserId","setCurrentUserId","supabase","createClient","useEffect","vendorResult","employeeResult","userResult","employeeData","roles","r","error","logger","loadPurchases","useCallback","employeeList","empData","user","authError","toast","data","processedData","request","firstItem","requesterEmployee","emp","sum","item","useDebounce","value","delay","debouncedValue","setDebouncedValue","handler","HIDDEN_EMPLOYEES","useFastPurchaseFilters","activeTab","setActiveTab","searchTerm","setSearchTerm","vendorFilter","setVendorFilter","selectedEmployee","setSelectedEmployee","purchaseNumberFilter","setPurchaseNumberFilter","itemNameFilter","setItemNameFilter","specificationFilter","setSpecificationFilter","approvalStatusFilter","setApprovalStatusFilter","remarkFilter","setRemarkFilter","thisYear","defaultStart","defaultEnd","dateFromFilter","setDateFromFilter","dateToFilter","setDateToFilter","debouncedSearchTerm","isAdmin","isPurchaseManager","isLeadBuyer","roleCase","useMemo","computeDefaultEmployee","tabKey","defaultEmployee","visiblePurchases","p","dateFilteredPurchases","purchase","requestDate","matchesDateFrom","matchesDateTo","tabFilteredPurchases","matches","isRequest","notPaid","isSeonJin","isIlban","finalApproved","notReceived","employeeFilteredPurchases","vendorFilteredPurchases","additionalFilteredPurchases","filtered","term","searchFilteredPurchases","filteredPurchases","a","b","dateA","tabCounts","dateFilteredForCount","getUniqueOrderCount","getFilteredDataForTab","pendingData","purchaseData","receiptData","doneData","pendingFiltered","purchaseFiltered","receiptFiltered","ps","pe","formatDate","dateStr","date","getReceiptProgress","total","received","percentage","StatusBadge","memo","status","config","text","className","Badge","MobilePurchaseCard","onClick","receiptProgress","isAdvance","jsxs","jsx","Eye","d","getCurrencySymbol","currency","generatePurchaseOrderExcelJS","ExcelJS","__vitePreload","n","workbook","sheet","baseRow","minRows","sortedItems","itemRows","sumRow","i","rowIdx","unitSymbol","unitWithCurrency","amountSymbol","amountWithCurrency","c","sumMergeRange","actualSumRow","totalSymbol","totalAmount","lastRow","cellAddr","cell","isPriceCol","isSpecCol","isItemRow","currentBorder","sumCellBorder","buffer","ROOT_NAME","createAlertDialogContext","createAlertDialogScope","createContextScope","createDialogScope","useDialogScope","AlertDialog","props","__scopeAlertDialog","alertDialogProps","dialogScope","DialogPrimitive.Root","TRIGGER_NAME","AlertDialogTrigger","React.forwardRef","forwardedRef","triggerProps","DialogPrimitive.Trigger","PORTAL_NAME","AlertDialogPortal","portalProps","DialogPrimitive.Portal","OVERLAY_NAME","AlertDialogOverlay","overlayProps","DialogPrimitive.Overlay","CONTENT_NAME","AlertDialogContentProvider","useAlertDialogContentContext","Slottable","createSlottable","AlertDialogContent","children","contentProps","contentRef","React.useRef","composedRefs","useComposedRefs","cancelRef","DialogPrimitive.WarningProvider","TITLE_NAME","DialogPrimitive.Content","composeEventHandlers","event","DescriptionWarning","AlertDialogTitle","titleProps","DialogPrimitive.Title","DESCRIPTION_NAME","AlertDialogDescription","descriptionProps","DialogPrimitive.Description","ACTION_NAME","AlertDialogAction","actionProps","DialogPrimitive.Close","CANCEL_NAME","AlertDialogCancel","cancelProps","ref","MESSAGE","React.useEffect","Root2","Portal2","Overlay2","Content2","Action","Cancel","Title2","Description2","AlertDialogPrimitive.Root","AlertDialogPrimitive.Portal","AlertDialogPrimitive.Overlay","cn","AlertDialogPrimitive.Content","AlertDialogHeader","AlertDialogFooter","AlertDialogPrimitive.Title","AlertDialogPrimitive.Description","AlertDialogPrimitive.Action","buttonVariants","AlertDialogPrimitive.Cancel","COMMON_COLUMN_CLASSES","ApprovalStatusBadge","middleApproved","middleRejected","finalRejected","getPaymentProgress","completed","ProgressTypeBadge","type","TableRow","onPaymentComplete","onReceiptComplete","onExcelDownload","paymentProgress","e","Fragment","FastPurchaseTable","onRefresh","selectedPurchaseId","setSelectedPurchaseId","isModalOpen","setIsModalOpen","deleteConfirmOpen","setDeleteConfirmOpen","purchaseToDelete","setPurchaseToDelete","handleRowClick","handleCloseModal","handleExcelDownload","purchaseRequest","requestError","orderItems","itemsError","vendorInfo","vendorId","contactId","vendorData","contactData","excelData","blob","downloadFilename","url","downloadFlagErr","handleConfirmDelete","tableHeader","baseHeaders","additionalHeaders","PurchaseDetailModal","U","Y","H","J","u","$","k","m","B","K","X","G","_","C","h","P","A","f","O","T","L","S","E","N","R","M","D","W","be","le","ce","Z","Re","o","ae","ue","t.createContext","t.useContext","de","ee","fe","me","t.forwardRef","x","ge","j","q","I","t.useRef","v","ke","ne","t.useMemo","s","l","g","y","z","te","F","Q","re","we","De","oe","ie","se","t.createElement","Te","he","ve","t.useEffect","Ee","ye","Se","Ce","xe","w.Root","w.Portal","w.Overlay","w.Content","Ie","Pe","_e","t.useLayoutEffect","t.useSyncExternalStore","t.useState","Me","t.isValidElement","t.cloneElement","Command","CommandPrimitive","CommandInput","Search","CommandList","CommandEmpty","CommandGroup","CommandSeparator","CommandItem","Combobox","options","onValueChange","placeholder","searchPlaceholder","emptyText","open","setOpen","React.useState","Popover","PopoverTrigger","Button","option","PopoverContent","Check","PurchaseItemsModal","lazy","NAV_TABS","PurchaseListMain","onEmailToggle","showEmailButton","navigate","useNavigate","location","useLocation","editingId","setEditingId","editingData","setEditingData","selectedPurchase","setSelectedPurchase","handleReceiptComplete","purchaseId","handlePaymentComplete","Plus","Card","CardHeader","CardTitle","Filter","CardContent","Input","employee","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","vendor","tab","Package","Suspense"],"ignoreList":[0,1,7,10,11],"sources":["../../node_modules/lucide-react/dist/esm/icons/chevrons-up-down.js","../../node_modules/lucide-react/dist/esm/icons/funnel.js","../../src/hooks/usePurchaseData.ts","../../src/hooks/useDebounce.ts","../../src/hooks/useFastPurchaseFilters.ts","../../src/components/purchase/MobilePurchaseCard.tsx","../../src/utils/exceljs/generatePurchaseOrderExcel.ts","../../node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","../../src/components/ui/alert-dialog.tsx","../../src/components/purchase/FastPurchaseTable.tsx","../../node_modules/cmdk/dist/chunk-NZJY6EH4.mjs","../../node_modules/cmdk/dist/index.mjs","../../src/components/ui/command.tsx","../../src/components/ui/combobox.tsx","../../src/components/purchase/PurchaseListMain.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.541.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m7 15 5 5 5-5\", key: \"1hf1tw\" }],\n  [\"path\", { d: \"m7 9 5-5 5 5\", key: \"sgt6xg\" }]\n];\nconst ChevronsUpDown = createLucideIcon(\"chevrons-up-down\", __iconNode);\n\nexport { __iconNode, ChevronsUpDown as default };\n//# sourceMappingURL=chevrons-up-down.js.map\n","/**\n * @license lucide-react v0.541.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z\",\n      key: \"sc7q7i\"\n    }\n  ]\n];\nconst Funnel = createLucideIcon(\"funnel\", __iconNode);\n\nexport { __iconNode, Funnel as default };\n//# sourceMappingURL=funnel.js.map\n","import { useState, useEffect, useCallback } from 'react';\nimport { createClient } from '@/lib/supabase/client';\nimport { logger } from '@/lib/logger';\nimport { toast } from 'sonner';\n\nexport interface Purchase {\n  id: number;\n  purchase_order_number?: string;\n  request_date: string;\n  delivery_request_date?: string;\n  progress_type: string;\n  is_payment_completed: boolean;\n  payment_category: string;\n  payment_completed_at?: string;\n  currency: string;\n  request_type: string;\n  vendor?: {\n    vendor_name: string;\n    vendor_payment_schedule?: string;\n  };\n  vendor_name: string;\n  vendor_payment_schedule?: string;\n  vendor_id?: number;\n  contact_id?: number;\n  vendor_contacts?: {\n    contact_name: string;\n  } | Array<{\n    contact_name: string;\n  }>;\n  contact_name?: string;\n  requester_id: string;\n  requester_name: string;\n  requester_full_name: string;\n  project_vendor: string;\n  sales_order_number: string;\n  project_item: string;\n  middle_manager_status?: string;\n  final_manager_status?: string;\n  total_amount: number;\n  is_received: boolean;\n  received_at?: string;\n\n  is_po_download?: boolean;\n  items?: any[];\n  purchase_request_items?: any[];\n  item_name?: string;\n  specification?: string;\n  quantity?: number;\n  unit_price_value?: number;\n  amount_value?: number;\n  remark?: string;\n  line_number?: number;\n  link?: string;\n  purchase_status?: string;\n}\n\nexport interface Vendor {\n  id: number;\n  vendor_name: string;\n  vendor_contacts?: any[];\n}\n\nexport interface Employee {\n  id: string;\n  name: string;\n  email: string;\n  full_name?: string;\n}\n\nexport const usePurchaseData = () => {\n  const [purchases, setPurchases] = useState<Purchase[]>([]);\n  const [vendors, setVendors] = useState<Vendor[]>([]);\n  const [employees, setEmployees] = useState<Employee[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [currentUserRoles, setCurrentUserRoles] = useState<string[]>([]);\n  const [currentUserName, setCurrentUserName] = useState<string>('');\n  const [currentUserEmail, setCurrentUserEmail] = useState<string>('');\n  const [currentUserId, setCurrentUserId] = useState<string>('');\n  \n  const supabase = createClient();\n\n  // 초기 데이터 로드 (업체 목록, 사용자 권한)\n  useEffect(() => {\n    const loadInitialData = async () => {\n      try {\n        // 업체 목록, 직원 목록, 사용자 정보를 병렬로 로드\n        const [vendorResult, employeeResult, userResult] = await Promise.all([\n          supabase.from('vendors').select('*'),\n          supabase.from('employees').select('*'),\n          supabase.auth.getUser()\n        ]);\n\n        if (vendorResult.error) {\n          // Vendor fetch error - will throw\n          throw vendorResult.error;\n        }\n        setVendors(vendorResult.data || []);\n        \n        if (employeeResult.error) {\n          // Employee fetch error - will throw\n          throw employeeResult.error;\n        }\n        setEmployees(employeeResult.data || []);\n\n        // 사용자 권한 및 이름 로드\n        if (userResult.data.user && !userResult.error) {\n          // email로 직원 정보 찾기 (올바른 방법)\n          let employeeData = null;\n          if (userResult.data.user.email) {\n            const emailResult = await supabase\n              .from('employees')\n              .select('*')\n              .eq('email', userResult.data.user.email)\n              .maybeSingle();\n            \n            employeeData = emailResult.data;\n          }\n          \n          if (employeeData) {\n            // purchase_role을 쉼표로 분할하고 각 role의 공백을 제거\n            let roles: string[] = [];\n            \n            // purchase_role이 배열인지 문자열인지 확인\n            if (employeeData.purchase_role) {\n              if (Array.isArray(employeeData.purchase_role)) {\n                // 배열인 경우\n                roles = employeeData.purchase_role.map((r: any) => String(r).trim());\n              } else {\n                // 문자열인 경우 (일반적)\n                const roleString = String(employeeData.purchase_role);\n                // 쉼표로 분할하고 공백 제거\n                roles = roleString\n                  .split(',')\n                  .map((r: string) => r.trim())\n                  .filter((r: string) => r.length > 0);\n              }\n            }\n            \n            setCurrentUserRoles(roles);\n            // name을 우선 사용 (필터링과 일치시키기 위해)\n            setCurrentUserName(employeeData.name || employeeData.full_name || '');\n            setCurrentUserEmail(employeeData.email || '');\n            setCurrentUserId(employeeData.id || '');\n          }\n        }\n      } catch (error) {\n        logger.error('초기 데이터 로드 실패', error);\n      }\n    };\n\n    loadInitialData();\n  }, []);\n\n  // 발주 목록 로드\n  const loadPurchases = useCallback(async () => {\n    setLoading(true);\n    \n    try {\n      // employees 데이터가 없으면 먼저 로드\n      let employeeList = employees;\n      if (employeeList.length === 0) {\n        const { data: empData } = await supabase\n          .from('employees')\n          .select('*');\n        employeeList = empData || [];\n      }\n      \n      const { data: { user }, error: authError } = await supabase.auth.getUser();\n      \n      if (authError || !user) {\n        logger.error('사용자 인증 실패', authError);\n        toast.error('로그인이 필요합니다.');\n        setLoading(false);\n        return;\n      }\n\n      // 발주 데이터 조회 (hanslwebapp과 완전히 동일) - 전체 데이터 로드\n      const { data, error } = await supabase\n        .from('purchase_requests')\n        .select('*,vendors(vendor_name,vendor_payment_schedule),vendor_contacts(contact_name),purchase_request_items(*)')\n        .order('request_date', { ascending: false })\n        .limit(2000); // 충분한 수의 데이터 로드\n\n      if (error) {\n        // Purchase data fetch error - will throw\n        throw error;\n      }\n\n\n      // 데이터 변환 (hanslwebapp과 동일)\n      const processedData = (data || []).map((request: any) => {\n        // 첫 번째 품목 정보 (기존 방식과 호환성 유지)\n        const firstItem = request.purchase_request_items?.[0] || {};\n        \n        // requester_id로 employee 찾기\n        const requesterEmployee = employeeList.find(emp => emp.id === request.requester_id);\n        \n        return {\n          id: Number(request.id),\n          purchase_order_number: request.purchase_order_number as string,\n          request_date: request.request_date as string,\n          delivery_request_date: request.delivery_request_date as string,\n          progress_type: request.progress_type as string,\n          payment_completed_at: request.payment_completed_at as string,\n          payment_category: request.payment_category as string,\n          currency: request.currency as string,\n          request_type: request.request_type as string,\n          vendor: request.vendors || null,\n          vendor_name: request.vendors?.vendor_name || '',\n          vendor_payment_schedule: request.vendors?.vendor_payment_schedule || '',\n          vendor_contacts: request.vendor_contacts || [],\n          requester_id: request.requester_id as string,\n          requester_name: request.requester_name as string,\n          requester_full_name: requesterEmployee?.full_name || requesterEmployee?.name || request.requester_name || '',\n          item_name: firstItem.item_name as string || '',\n          specification: firstItem.specification as string || '',\n          quantity: Number(firstItem.quantity) || 0,\n          unit_price_value: Number(firstItem.unit_price_value) || 0,\n          amount_value: Number(firstItem.amount_value) || 0,\n          remark: firstItem.remark as string || '',\n          project_vendor: request.project_vendor as string,\n          sales_order_number: request.sales_order_number as string,\n          project_item: request.project_item as string,\n          line_number: Number(firstItem.line_number) || 1,\n          contact_name: request.vendor_contacts?.contact_name || '',\n          middle_manager_status: request.middle_manager_status as string,\n          final_manager_status: request.final_manager_status as string,\n          is_received: !!request.is_received,\n          received_at: request.received_at as string,\n          is_payment_completed: !!request.is_payment_completed,\n          is_po_download: !!request.is_po_download,\n          link: firstItem.link as string | undefined,\n          // 전체 품목 리스트 추가 (hanslwebapp과 동일하게 items로 통일)\n          items: request.purchase_request_items || [],\n          // 총 금액 계산\n          total_amount: request.purchase_request_items?.reduce((sum: number, item: any) => \n            sum + (Number(item.amount_value) || 0), 0) || 0,\n          purchase_status: request.purchase_status || 'pending'\n        };\n      });\n\n      // 데이터 로드 완료\n      setPurchases(processedData);\n    } catch (error) {\n      logger.error('발주 목록 로드 실패', error);\n      toast.error('발주 목록을 불러올 수 없습니다.');\n    } finally {\n      setLoading(false);\n    }\n  }, [employees]);\n\n  useEffect(() => {\n    loadPurchases();\n  }, [loadPurchases]);\n\n  return {\n    purchases,\n    vendors,\n    employees,\n    loading,\n    currentUserRoles,\n    currentUserName,\n    currentUserEmail,\n    currentUserId,\n    refreshPurchases: loadPurchases\n  };\n};","import { useEffect, useState } from 'react';\n\n/**\n * Hook to debounce a value\n * Useful for search inputs and other expensive operations\n */\nexport function useDebounce<T>(value: T, delay: number = 500): T {\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\n\n  useEffect(() => {\n    // Set up the timeout\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    // Clean up the timeout if value changes\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}","import { useState, useMemo, useEffect, useCallback } from 'react';\nimport { useDebounce } from '@/hooks/useDebounce';\nimport { Purchase } from './usePurchaseData';\nimport { createClient } from '@/lib/supabase/client';\n\n// 상수 정의 - 특정 직원의 발주요청 숨김 (본인이 아닌 경우에만)\nconst HIDDEN_EMPLOYEES = ['정희웅'];  // 정현웅 제거\n\nexport const useFastPurchaseFilters = (purchases: Purchase[], currentUserRoles: string[], currentUserName: string, currentUserId?: string, currentUserEmail?: string) => {\n  const supabase = createClient();\n  const [activeTab, setActiveTab] = useState('pending');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [vendorFilter, setVendorFilter] = useState('');\n  // 초기값 설정 - hanslwebapp과 동일하게 빈 문자열로 시작\n  const [selectedEmployee, setSelectedEmployee] = useState<string>('');\n  const [purchaseNumberFilter, setPurchaseNumberFilter] = useState('');\n  const [itemNameFilter, setItemNameFilter] = useState('');\n  const [specificationFilter, setSpecificationFilter] = useState('');\n  const [approvalStatusFilter, setApprovalStatusFilter] = useState('');\n  const [remarkFilter, setRemarkFilter] = useState('');\n  \n  // 기간 필터 초기값 설정 (올해 1월 1일 ~ 오늘)\n  const thisYear = new Date().getFullYear();\n  const defaultStart = new Date(thisYear, 0, 1).toISOString().split('T')[0];\n  const defaultEnd = new Date().toISOString().split('T')[0];\n  const [dateFromFilter, setDateFromFilter] = useState(defaultStart);\n  const [dateToFilter, setDateToFilter] = useState(defaultEnd);\n  \n  const debouncedSearchTerm = useDebounce(searchTerm, 300);\n  \n  // 권한별 로직 계산\n  const isAdmin = currentUserRoles?.includes('app_admin');\n  const isFinalApprover = currentUserRoles?.includes('final_approver');\n  const isMiddleManager = currentUserRoles?.includes('middle_manager');\n  const isPurchaseManager = currentUserRoles?.includes('purchase_manager');\n  const hasApprovalRole = isAdmin || isFinalApprover || isMiddleManager;\n  \n  // lead buyer 권한 체크 추가\n  const isLeadBuyer = currentUserRoles?.includes('raw_material_manager') || \n                      currentUserRoles?.includes('consumable_manager') || \n                      currentUserRoles?.includes('purchase_manager');\n\n  // hanslwebapp과 동일한 로직 - roleCase 계산 (lead buyer 추가)\n  const roleCase = useMemo(() => {\n    if (!currentUserRoles || currentUserRoles.length === 0) return 1; // null\n    if (isPurchaseManager) return 2; // purchase_manager\n    if (currentUserRoles.some(r => ['middle_manager', 'final_approver', 'app_admin', 'ceo'].includes(r))) return 3;\n    return 1;\n  }, [currentUserRoles, isPurchaseManager]);\n  \n  // 탭별 기본 직원 필터 계산 (구매현황은 lead buyer와 app_admin만 전체 보기)\n  const computeDefaultEmployee = useCallback(\n    (tabKey: string): string => {\n      if (!currentUserName) return 'all';\n      \n      // 구매현황 탭은 lead buyer와 app_admin만 전체 보기\n      if (tabKey === 'purchase') {\n        if (isLeadBuyer || isAdmin) {\n          return 'all';\n        }\n        return currentUserName;\n      }\n      \n      switch (roleCase) {\n        case 1: // role null\n          if (tabKey === 'done') return 'all';\n          return currentUserName;\n        case 2: // purchase_manager\n          if (tabKey === 'done') return 'all';\n          return currentUserName; // pending & receipt\n        case 3: // 관리자 권한\n          return 'all';\n        default:\n          return currentUserName;\n      }\n    },\n    [currentUserName, roleCase, isLeadBuyer, isAdmin]\n  );\n  \n  // 탭 변경 또는 사용자/역할 로딩 시 기본값 설정 (hanslwebapp과 동일)\n  useEffect(() => {\n    if (!currentUserName) return;\n    const defaultEmployee = computeDefaultEmployee(activeTab);\n    setSelectedEmployee(defaultEmployee);\n  }, [activeTab, currentUserName, roleCase, computeDefaultEmployee]);\n  \n  // 1단계: 권한별 필터링 (한번만 실행)\n  const visiblePurchases = useMemo(() => {\n    if (currentUserRoles.includes('purchase_manager') || currentUserRoles.includes('app_admin')) {\n      return purchases;\n    }\n    return purchases.filter(p => !HIDDEN_EMPLOYEES.includes(p.requester_name));\n  }, [purchases, currentUserRoles]);\n\n  // 2단계: 날짜 필터링 (날짜 변경시만 실행)\n  const dateFilteredPurchases = useMemo(() => {\n    return visiblePurchases.filter((purchase) => {\n      const requestDate = purchase.request_date ? purchase.request_date.split('T')[0] : '';\n      const matchesDateFrom = !dateFromFilter || requestDate >= dateFromFilter;\n      const matchesDateTo = !dateToFilter || requestDate <= dateToFilter;\n      return matchesDateFrom && matchesDateTo;\n    });\n  }, [visiblePurchases, dateFromFilter, dateToFilter]);\n\n  // 3단계: 탭별 필터링 (hanslwebapp과 100% 동일)\n  const tabFilteredPurchases = useMemo(() => {\n    \n    const result = dateFilteredPurchases.filter((purchase) => {\n      let matches = false;\n      \n      switch (activeTab) {\n        case 'pending':\n          // pending, 대기, 빈값, null 모두 승인대기로 처리\n          matches = ['pending', '대기', '', null].includes(purchase.final_manager_status as any);\n          return matches;\n          \n        case 'purchase': {\n          // DB 확인 결과: '구매 요청' (띄어쓰기 있음) 또는 '발주'\n          const isRequest = purchase.payment_category === '구매 요청';\n          const notPaid = !purchase.is_payment_completed;\n          const isSeonJin = (purchase.progress_type || '').includes('선진행');\n          const isIlban = (purchase.progress_type || '').includes('일반');\n          const finalApproved = purchase.final_manager_status === 'approved';\n          \n          if (!isRequest || !notPaid) {\n            matches = false;\n          } else {\n            matches = (isSeonJin) || (isIlban && finalApproved);\n          }\n          \n          return matches;\n        }\n        \n        case 'receipt': {\n          // 입고현황: 미입고 & (선진행 or 최종승인)\n          const notReceived = !purchase.is_received;\n          const isSeonJin = (purchase.progress_type || '').includes('선진행');\n          const finalApproved = purchase.final_manager_status === 'approved';\n          matches = notReceived && (isSeonJin || finalApproved);\n          return matches;\n        }\n        \n        case 'done':\n          matches = true;\n          return matches;\n          \n        default:\n          return true;\n      }\n    });\n    \n    return result;\n  }, [dateFilteredPurchases, activeTab]);\n\n  // 4단계: 직원 필터링 (hanslwebapp과 동일한 로직 - 이름 기반)\n  const employeeFilteredPurchases = useMemo(() => {\n    // hanslwebapp 로직과 100% 동일\n    if (selectedEmployee && selectedEmployee !== 'all' && selectedEmployee !== '전체') {\n      // 특정 직원 선택 시 해당 직원의 요청만 표시\n      const filtered = tabFilteredPurchases.filter(purchase => purchase.requester_name === selectedEmployee);\n      return filtered;\n    }\n    \n    // selectedEmployee가 없거나 'all' 또는 '전체'인 경우 전체 표시\n    return tabFilteredPurchases;\n  }, [tabFilteredPurchases, selectedEmployee]);\n\n  // 5단계: 업체 필터링 (업체 선택시만 실행)\n  const vendorFilteredPurchases = useMemo(() => {\n    if (!vendorFilter) {\n      return employeeFilteredPurchases;\n    }\n    return employeeFilteredPurchases.filter(purchase => purchase.vendor_name === vendorFilter);\n  }, [employeeFilteredPurchases, vendorFilter]);\n\n  // 6단계: 추가 필터 적용\n  const additionalFilteredPurchases = useMemo(() => {\n    let filtered = vendorFilteredPurchases;\n    \n    // 발주요청번호 필터\n    if (purchaseNumberFilter) {\n      const term = purchaseNumberFilter.trim().toLowerCase();\n      filtered = filtered.filter(p => p.purchase_order_number?.toLowerCase().includes(term));\n    }\n    \n    // 품명 필터\n    if (itemNameFilter) {\n      const term = itemNameFilter.trim().toLowerCase();\n      filtered = filtered.filter(p => {\n        if (p.items && p.items.length > 0) {\n          return p.items.some(item => item.item_name?.toLowerCase().includes(term));\n        }\n        return false;\n      });\n    }\n    \n    // 규격 필터\n    if (specificationFilter) {\n      const term = specificationFilter.trim().toLowerCase();\n      filtered = filtered.filter(p => {\n        if (p.items && p.items.length > 0) {\n          return p.items.some(item => item.specification?.toLowerCase().includes(term));\n        }\n        return false;\n      });\n    }\n    \n    // 승인상태 필터\n    if (approvalStatusFilter && approvalStatusFilter !== 'all') {\n      filtered = filtered.filter(p => {\n        switch (approvalStatusFilter) {\n          case 'pending':\n            return !p.final_manager_status || p.final_manager_status === 'pending' || p.final_manager_status === '대기';\n          case 'approved':\n            return p.final_manager_status === 'approved';\n          case 'rejected':\n            return p.final_manager_status === 'rejected' || p.middle_manager_status === 'rejected';\n          default:\n            return true;\n        }\n      });\n    }\n    \n    // 비고 필터\n    if (remarkFilter) {\n      const term = remarkFilter.trim().toLowerCase();\n      filtered = filtered.filter(p => {\n        if (p.items && p.items.length > 0) {\n          return p.items.some(item => item.remark?.toLowerCase().includes(term));\n        }\n        return false;\n      });\n    }\n    \n    return filtered;\n  }, [vendorFilteredPurchases, purchaseNumberFilter, itemNameFilter, specificationFilter, approvalStatusFilter, remarkFilter]);\n\n  // 7단계: 검색 필터링 (검색어 변경시만 실행)\n  const searchFilteredPurchases = useMemo(() => {\n    if (!debouncedSearchTerm) {\n      return additionalFilteredPurchases;\n    }\n    \n    const term = debouncedSearchTerm.trim().toLowerCase();\n    \n    return additionalFilteredPurchases.filter(purchase => {\n      // 빠른 검색 (기본 필드만)\n      if (purchase.purchase_order_number?.toLowerCase().includes(term) ||\n          purchase.vendor_name?.toLowerCase().includes(term) ||\n          purchase.requester_name?.toLowerCase().includes(term) ||\n          purchase.project_vendor?.toLowerCase().includes(term)) {\n        return true;\n      }\n      \n      // 품목 검색 (필요할 때만)\n      if (purchase.items && purchase.items.length > 0) {\n        return purchase.items.some(item => \n          (item.item_name && item.item_name.toLowerCase().includes(term)) ||\n          (item.specification && item.specification.toLowerCase().includes(term))\n        );\n      }\n      \n      return false;\n    });\n  }, [additionalFilteredPurchases, debouncedSearchTerm]);\n\n  // 8단계: 최종 정렬 - 최신순 (내림차순)\n  const filteredPurchases = useMemo(() => {\n    return [...searchFilteredPurchases].sort((a, b) => {\n      // request_date를 기준으로 내림차순 정렬 (최신이 위로)\n      const dateA = a.request_date ? new Date(a.request_date).getTime() : 0;\n      const dateB = b.request_date ? new Date(b.request_date).getTime() : 0;\n      return dateB - dateA;\n    });\n  }, [searchFilteredPurchases]);\n\n  // 탭 카운트 (hanslwebapp과 동일한 조건)\n  const tabCounts = useMemo(() => {\n    // 특정 직원 발주요청 숨김 처리\n    const countPurchases = visiblePurchases;\n    \n    // 기간 필터 적용\n    const dateFilteredForCount = countPurchases.filter((purchase) => {\n      const requestDate = purchase.request_date ? purchase.request_date.split('T')[0] : '';\n      const matchesDateFrom = !dateFromFilter || requestDate >= dateFromFilter;\n      const matchesDateTo = !dateToFilter || requestDate <= dateToFilter;\n      return matchesDateFrom && matchesDateTo;\n    });\n    \n    // 각 탭의 고유 발주요청번호 카운트 (중복 제거)\n    const getUniqueOrderCount = (filtered: Purchase[]) => {\n      return new Set(filtered.map(p => p.purchase_order_number)).size;\n    };\n    \n    // 각 탭별로 기본 직원 필터 계산 (카운트용)\n    const getFilteredDataForTab = (tabKey: string) => {\n      // 구매현황 탭은 특별 처리\n      if (tabKey === 'purchase') {\n        if (isLeadBuyer || isAdmin) {\n          return dateFilteredForCount;\n        } else {\n          return dateFilteredForCount.filter(p => p.requester_name === currentUserName);\n        }\n      }\n      \n      const defaultEmployee = computeDefaultEmployee(tabKey);\n      \n      if (defaultEmployee === 'all' || defaultEmployee === '전체') {\n        return dateFilteredForCount;\n      } else {\n        return dateFilteredForCount.filter(p => p.requester_name === defaultEmployee);\n      }\n    };\n    \n    // 각 탭별 데이터 필터링\n    const pendingData = getFilteredDataForTab('pending');\n    const purchaseData = getFilteredDataForTab('purchase');\n    const receiptData = getFilteredDataForTab('receipt');\n    const doneData = getFilteredDataForTab('done');\n    \n    const pendingFiltered = pendingData.filter(p => {\n      const matches = ['pending', '대기', '', null].includes(p.final_manager_status as any);\n      return matches;\n    });\n    \n    const purchaseFiltered = purchaseData.filter(p => {\n      const isRequest = p.payment_category === '구매 요청';\n      const notPaid = !p.is_payment_completed;\n      if (!isRequest || !notPaid) return false;\n      const isSeonJin = (p.progress_type || '').includes('선진행');\n      const isIlban = (p.progress_type || '').includes('일반');\n      const finalApproved = p.final_manager_status === 'approved';\n      return (isSeonJin) || (isIlban && finalApproved);\n    });\n    \n    const receiptFiltered = receiptData.filter(p => {\n      const notReceived = !p.is_received;\n      const isSeonJin = (p.progress_type || '').includes('선진행');\n      const finalApproved = p.final_manager_status === 'approved';\n      return notReceived && (isSeonJin || finalApproved);\n    });\n    \n    const counts = {\n      pending: getUniqueOrderCount(pendingFiltered),\n      purchase: getUniqueOrderCount(purchaseFiltered),\n      receipt: getUniqueOrderCount(receiptFiltered),\n      done: getUniqueOrderCount(doneData)  // done 탭의 기본값에 따른 전체\n    };\n    \n    return counts;\n  }, [visiblePurchases, dateFromFilter, dateToFilter, roleCase, currentUserName, computeDefaultEmployee, isLeadBuyer, isAdmin]);\n\n  // 사용자별 저장된 기간 불러오기\n  useEffect(() => {\n    (async () => {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n      \n      const { data } = await supabase\n        .from('user_preferences')\n        .select('period_start, period_end')\n        .eq('user_id', user.id)\n        .single();\n        \n      if (data) {\n        const ps = data.period_start ? new Date(data.period_start).toISOString().split('T')[0] : defaultStart;\n        const pe = data.period_end ? new Date(data.period_end).toISOString().split('T')[0] : defaultEnd;\n        setDateFromFilter(ps);\n        setDateToFilter(pe);\n      }\n    })();\n  }, []);\n  \n  // 기간 변경 시 즉시 저장 (사용자별)\n  useEffect(() => {\n    (async () => {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n      if (!dateFromFilter || !dateToFilter) return;\n      \n      await supabase.from('user_preferences').upsert({\n        user_id: user.id,\n        period_start: dateFromFilter,\n        period_end: dateToFilter,\n        updated_at: new Date().toISOString()\n      });\n    })();\n  }, [dateFromFilter, dateToFilter]);\n\n  return {\n    // States\n    activeTab,\n    searchTerm,\n    vendorFilter,\n    dateFromFilter,\n    dateToFilter,\n    selectedEmployee,\n    purchaseNumberFilter,\n    itemNameFilter,\n    specificationFilter,\n    approvalStatusFilter,\n    remarkFilter,\n    \n    // Setters\n    setActiveTab,\n    setSearchTerm,\n    setVendorFilter,\n    setDateFromFilter,\n    setDateToFilter,\n    setSelectedEmployee,\n    setPurchaseNumberFilter,\n    setItemNameFilter,\n    setSpecificationFilter,\n    setApprovalStatusFilter,\n    setRemarkFilter,\n    \n    // Computed values\n    filteredPurchases,\n    tabCounts\n  };\n};","import { memo } from 'react'\nimport { Eye } from 'lucide-react'\nimport { Badge } from '@/components/ui/badge'\nimport { Purchase } from '@/types/purchase'\n\ninterface MobilePurchaseCardProps {\n  purchase: Purchase\n  onClick: (purchase: Purchase) => void\n}\n\nconst formatDate = (dateStr?: string) => {\n  if (!dateStr) return '-'\n  const date = new Date(dateStr)\n  return `${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`\n}\n\nconst getReceiptProgress = (purchase: Purchase) => {\n  if (!purchase.items || purchase.items.length === 0) return { received: 0, total: 0, percentage: 0 }\n  \n  const total = purchase.items.length\n  const received = purchase.items.filter((item: any) => item.is_received || item.delivery_status === 'received').length\n  const percentage = total > 0 ? Math.round((received / total) * 100) : 0\n  \n  return { received, total, percentage }\n}\n\nconst StatusBadge = memo(({ purchase }: { purchase: Purchase }) => {\n  const status = purchase.is_received \n    ? 'completed'\n    : (purchase.middle_manager_status === 'approved' && purchase.final_manager_status === 'approved')\n    ? 'inProgress'\n    : (purchase.middle_manager_status === 'rejected' || purchase.final_manager_status === 'rejected')\n    ? 'rejected'\n    : 'pending'\n  \n  const config = {\n    completed: { text: '입고완료', className: 'bg-green-100 text-green-800' },\n    inProgress: { text: '구매진행', className: 'bg-hansl-100 text-hansl-800' },\n    rejected: { text: '반려', className: 'bg-red-100 text-red-800' },\n    pending: { text: '승인대기', className: 'bg-yellow-100 text-yellow-800' }\n  }\n  \n  const { text, className } = config[status]\n  return <Badge className={`${className} text-xs`}>{text}</Badge>\n})\n\nStatusBadge.displayName = 'StatusBadge'\n\nconst MobilePurchaseCard = memo(({ purchase, onClick }: MobilePurchaseCardProps) => {\n  const receiptProgress = getReceiptProgress(purchase)\n  const isAdvance = purchase.progress_type === '선진행' || purchase.progress_type?.includes('선진행')\n  \n  return (\n    <div \n      className={`bg-white rounded-lg border p-4 space-y-3 cursor-pointer transition-all hover:shadow-md ${isAdvance ? 'border-red-400 bg-red-50 hover:bg-red-100' : 'hover:bg-gray-50'}`}\n      onClick={() => onClick(purchase)}\n    >\n      {/* 헤더 */}\n      <div className=\"flex items-start justify-between\">\n        <div>\n          <div className=\"flex items-center gap-2\">\n            {isAdvance ? (\n              <Badge className=\"bg-red-500 text-white font-bold text-xs px-2 py-0.5\">\n                선진행\n              </Badge>\n            ) : (\n              <Badge className=\"bg-gray-200 text-gray-700 text-xs px-2 py-0.5\">\n                일반\n              </Badge>\n            )}\n            <span className=\"font-semibold text-sm text-gray-900\">\n              {purchase.purchase_order_number || '-'}\n            </span>\n          </div>\n          <div className=\"text-xs text-gray-500 mt-1\">\n            {formatDate(purchase.request_date)} 요청\n          </div>\n        </div>\n        <StatusBadge purchase={purchase} />\n      </div>\n\n      {/* 중간 정보 */}\n      <div className=\"space-y-2\">\n        <div className=\"flex items-center justify-between text-sm\">\n          <span className=\"text-gray-600\">요청자</span>\n          <span className=\"font-medium\">{purchase.requester_name}</span>\n        </div>\n        <div className=\"flex items-center justify-between text-sm\">\n          <span className=\"text-gray-600\">업체</span>\n          <span className=\"font-medium\">{purchase.vendor_name}</span>\n        </div>\n        {purchase.project_vendor && (\n          <div className=\"flex items-center justify-between text-sm\">\n            <span className=\"text-gray-600\">PJ업체</span>\n            <span className=\"font-medium truncate max-w-[150px]\">{purchase.project_vendor}</span>\n          </div>\n        )}\n        {purchase.project_item && (\n          <div className=\"flex items-center justify-between text-sm\">\n            <span className=\"text-gray-600\">PJ ITEM</span>\n            <span className=\"font-medium truncate max-w-[150px]\">{purchase.project_item}</span>\n          </div>\n        )}\n        {purchase.sales_order_number && (\n          <div className=\"flex items-center justify-between text-sm\">\n            <span className=\"text-gray-600\">수주번호</span>\n            <span className=\"font-medium truncate max-w-[150px]\">{purchase.sales_order_number}</span>\n          </div>\n        )}\n        {purchase.item_name && (\n          <div className=\"flex items-center justify-between text-sm\">\n            <span className=\"text-gray-600\">품목</span>\n            <span className=\"font-medium truncate max-w-[150px]\">{purchase.item_name}</span>\n          </div>\n        )}\n        <div className=\"flex items-center justify-between text-sm\">\n          <span className=\"text-gray-600\">금액</span>\n          <span className=\"font-semibold text-gray-900\">\n            {(purchase.amount_value || purchase.total_amount)?.toLocaleString()} {purchase.currency}\n          </span>\n        </div>\n      </div>\n\n      {/* 입고 현황 */}\n      <div className=\"space-y-1\">\n        <div className=\"flex items-center justify-between text-xs\">\n          <span className=\"text-gray-600\">입고현황</span>\n          <span className=\"text-gray-700\">\n            {receiptProgress.received}/{receiptProgress.total} ({receiptProgress.percentage}%)\n          </span>\n        </div>\n        <div className=\"bg-gray-200 rounded-full h-2\">\n          <div \n            className={`h-2 rounded-full transition-all ${\n              receiptProgress.percentage === 100 ? 'bg-green-500' : \n              receiptProgress.percentage > 0 ? 'bg-hansl-500' : 'bg-gray-300'\n            }`}\n            style={{ width: `${receiptProgress.percentage}%` }}\n          />\n        </div>\n      </div>\n\n      {/* 결제 상태 */}\n      {purchase.is_payment_completed !== undefined && (\n        <div className=\"flex items-center justify-between text-sm\">\n          <span className=\"text-gray-600\">결제</span>\n          {purchase.is_payment_completed ? (\n            <Badge className=\"bg-green-100 text-green-800 text-xs\">완료</Badge>\n          ) : (\n            <Badge className=\"bg-gray-100 text-gray-800 text-xs\">대기</Badge>\n          )}\n        </div>\n      )}\n\n      {/* 카드 전체가 클릭 가능하므로 버튼 제거 */}\n      <div className=\"pt-2 border-t\">\n        <div className=\"flex items-center justify-center text-xs text-gray-500\">\n          <Eye className=\"w-3 h-3 mr-1\" />\n          클릭하여 상세보기\n        </div>\n      </div>\n    </div>\n  )\n})\n\nMobilePurchaseCard.displayName = 'MobilePurchaseCard'\n\nexport default MobilePurchaseCard","// ExcelJS를 dynamic import로 변경하여 번들 크기 최적화\n\nexport interface PurchaseOrderData {\n  purchase_order_number: string;\n  request_date: string;\n  delivery_request_date: string;\n  requester_name: string;\n  vendor_name: string;\n  vendor_contact_name?: string;\n  vendor_phone?: string;\n  vendor_fax?: string;\n  project_vendor: string;\n  sales_order_number: string;\n  project_item: string;\n  items: PurchaseOrderItem[];\n  vendor_payment_schedule?: string;\n}\n\nexport interface PurchaseOrderItem {\n  line_number: number;\n  item_name: string;\n  specification: string;\n  quantity: number;\n  unit_price_value: number;\n  amount_value: number;\n  remark: string;\n  currency: string;\n}\n\nfunction formatDate(dateStr: string): string {\n  if (!dateStr) return '';\n  const d = new Date(dateStr);\n  if (isNaN(d.getTime())) return dateStr;\n  return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;\n}\n\n// Helper: currency code to symbol\nfunction getCurrencySymbol(currency: string) {\n  if (!currency) return '';\n  if (['KRW', '원', '₩'].includes(currency)) return '₩';\n  if (['USD', '$', '달러'].includes(currency)) return '$';\n  if (['EUR', '€'].includes(currency)) return '€';\n  if (['JPY', '엔', '¥'].includes(currency)) return '¥';\n  if (['CNY', '위안', '元'].includes(currency)) return '¥';\n  return currency;\n}\n\n/**\n * 엑셀 발주서 생성 (ExcelJS)\n * @param data PurchaseOrderData\n * @returns Blob (xlsx)\n */\nexport async function generatePurchaseOrderExcelJS(data: PurchaseOrderData): Promise<Blob> {\n  // ExcelJS를 동적으로 import하여 초기 번들 크기 감소\n  const ExcelJS = await import('exceljs');\n  const workbook = new ExcelJS.default.Workbook();\n  const sheet = workbook.addWorksheet('발주서', {\n    pageSetup: {\n      paperSize: 9, // A4\n      orientation: 'portrait',\n      fitToPage: true,\n      fitToWidth: 1,\n      fitToHeight: 1,\n      horizontalCentered: true,\n      verticalCentered: true,\n      margins: {\n        left: 0.3,\n        right: 0.3,\n        top: 0.5,\n        bottom: 0.5,\n        header: 0.2,\n        footer: 0.2\n      }\n    }\n  });\n\n  // 행 높이 고정: 1행 39.75pt, 2행부터 15.75pt\n  sheet.getRow(1).height = 39.75;\n  for (let r = 2; r <= 60; r++) {\n    sheet.getRow(r).height = 15.75;\n  }\n  // 폰트 기본값 설정은 나중에 개별 적용\n\n  // 1. 병합 범위 템플릿과 1:1 적용\n  sheet.mergeCells('A1:G1');\n  sheet.mergeCells('A2:B2'); sheet.mergeCells('C2:D2'); sheet.mergeCells('F2:G2');\n  sheet.mergeCells('A3:B3'); sheet.mergeCells('C3:D3'); sheet.mergeCells('F3:G3');\n  sheet.mergeCells('A4:B4'); sheet.mergeCells('C4:D4'); sheet.mergeCells('F4:G4');\n  sheet.mergeCells('A5:B5'); sheet.mergeCells('C5:D5'); sheet.mergeCells('F5:G5');\n  sheet.mergeCells('A6:B6'); sheet.mergeCells('C6:D6'); sheet.mergeCells('F6:G6');\n  sheet.mergeCells('A7:B7'); sheet.mergeCells('C7:D7'); sheet.mergeCells('E7:F7');\n  // 8~46행(헤더/품목/합계) 병합 없음\n  // 합계가 들어가는 행에 맞춰 병합 범위도 동적으로 이동\n  // (아래에서 sumRow 계산 후 병합)\n\n  // 로고 이미지 처리 (필요 시 활성화)\n  // 현재는 로고 없이 템플릿과 동일한 형식으로 처리\n\n  // 2. 제목 (A1:G1 병합, 중앙정렬)\n  sheet.getCell('A1').value = '             발 주 서';\n  sheet.getCell('A1').alignment = { horizontal: 'center', vertical: 'middle' };\n  sheet.getCell('A1').font = { name: 'GulimChe', size: 25, bold: true };\n\n  // 3. 상단 정보 고정 라벨 적용 (템플릿과 동일한 형식)\n  sheet.getCell('A2').value = '업 체 명';\n  sheet.getCell('A2').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('A2').alignment = { horizontal: 'center', vertical: 'middle' };\n  sheet.getCell('A3').value = '담 당 자';\n  sheet.getCell('A3').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('A3').alignment = { horizontal: 'center', vertical: 'middle' };\n  sheet.getCell('A4').value = '청 구 일';\n  sheet.getCell('A4').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('A4').alignment = { horizontal: 'center', vertical: 'middle' };\n  sheet.getCell('A5').value = '전화 번호';\n  sheet.getCell('A5').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('A5').alignment = { horizontal: 'center', vertical: 'middle' };\n  sheet.getCell('A6').value = '팩스 번호';\n  sheet.getCell('A6').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('A6').alignment = { horizontal: 'center', vertical: 'middle' };\n  sheet.getCell('A7').value = '입고 요청일';\n  sheet.getCell('A7').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('A7').alignment = { horizontal: 'center', vertical: 'middle' };\n\n  sheet.getCell('E2').value = '구매요구자';\n  sheet.getCell('E2').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('E2').alignment = { horizontal: 'center', vertical: 'middle' };\n  sheet.getCell('E3').value = '주  소';\n  sheet.getCell('E3').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('E3').alignment = { horizontal: 'center', vertical: 'middle' };\n  sheet.getCell('E4').value = '발주 번호';\n  sheet.getCell('E4').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('E4').alignment = { horizontal: 'center', vertical: 'middle' };\n  sheet.getCell('E5').value = '전화 번호';\n  sheet.getCell('E5').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('E5').alignment = { horizontal: 'center', vertical: 'middle' };\n  sheet.getCell('E6').value = '팩스 번호';\n  sheet.getCell('E6').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('E6').alignment = { horizontal: 'center', vertical: 'middle' };\n  sheet.getCell('E7').value = '지출 예정일';\n  sheet.getCell('E7').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('E7').alignment = { horizontal: 'center', vertical: 'middle' };\n\n  // E7:F7 병합됨 - 지출 예정일 값은 F7에\n  sheet.getCell('F7').value = data.vendor_payment_schedule || '익월말 결제';\n  sheet.getCell('F7').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('F7').alignment = { horizontal: 'center', vertical: 'middle' };\n\n  // 데이터 매핑 (템플릿과 동일한 형식)\n  sheet.getCell('C2').value = data.vendor_name;\n  sheet.getCell('C2').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('C2').alignment = { horizontal: 'center', vertical: 'middle' };\n  \n  sheet.getCell('C3').value = data.vendor_contact_name || '';\n  sheet.getCell('C3').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('C3').alignment = { horizontal: 'center', vertical: 'middle' };\n  \n  sheet.getCell('C4').value = formatDate(data.request_date);\n  sheet.getCell('C4').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('C4').alignment = { horizontal: 'center', vertical: 'middle' };\n  \n  sheet.getCell('C5').value = data.vendor_phone || '';\n  sheet.getCell('C5').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('C5').alignment = { horizontal: 'center', vertical: 'middle' };\n  \n  sheet.getCell('C6').value = data.vendor_fax || '';\n  sheet.getCell('C6').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('C6').alignment = { horizontal: 'center', vertical: 'middle' };\n  \n  sheet.getCell('C7').value = formatDate(data.delivery_request_date);\n  sheet.getCell('C7').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('C7').alignment = { horizontal: 'center', vertical: 'middle' };\n\n  sheet.getCell('F2').value = data.requester_name;\n  sheet.getCell('F2').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('F2').alignment = { horizontal: 'center', vertical: 'middle' };\n  \n  sheet.getCell('F3').value = '대구광역시 달서구 성서공단북로 305';\n  sheet.getCell('F3').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('F3').alignment = { horizontal: 'center', vertical: 'middle' };\n  \n  sheet.getCell('F4').value = data.purchase_order_number;\n  sheet.getCell('F4').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('F4').alignment = { horizontal: 'center', vertical: 'middle' };\n  \n  sheet.getCell('F5').value = '(053) 626 - 7805';\n  sheet.getCell('F5').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('F5').alignment = { horizontal: 'center', vertical: 'middle' };\n  \n  sheet.getCell('F6').value = '(053) 657 - 7905';\n  sheet.getCell('F6').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('F6').alignment = { horizontal: 'center', vertical: 'middle' };\n\n  // 8행: 테이블 헤더 (템플릿과 동일)\n  sheet.getCell('A8').value = '번호';\n  sheet.getCell('A8').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('A8').alignment = { horizontal: 'center', vertical: 'middle' };\n  \n  sheet.getCell('B8').value = '품명';\n  sheet.getCell('B8').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('B8').alignment = { horizontal: 'center', vertical: 'middle' };\n  \n  sheet.getCell('C8').value = '규  격';\n  sheet.getCell('C8').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('C8').alignment = { horizontal: 'center', vertical: 'middle' };\n  \n  sheet.getCell('D8').value = '수 량';\n  sheet.getCell('D8').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('D8').alignment = { horizontal: 'center', vertical: 'middle' };\n  \n  sheet.getCell('E8').value = '단  가';\n  sheet.getCell('E8').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('E8').alignment = { horizontal: 'center', vertical: 'middle' };\n  \n  sheet.getCell('F8').value = '금  액';\n  sheet.getCell('F8').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('F8').alignment = { horizontal: 'center', vertical: 'middle' };\n  \n  sheet.getCell('G8').value = '비고 (사용 용도)';\n  sheet.getCell('G8').font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('G8').alignment = { horizontal: 'center', vertical: 'middle' };\n\n  // 품목이 38개를 넘으면 아래로 밀어서 합계/하단 정보 출력 (템플릿에서는 47행에 합계)\n  const baseRow = 9;\n  const minRows = 38; // 템플릿에서는 A47에 합계가 있으므로 9~46행이 38개\n  // --- 품목 데이터 line_number 기준 정렬 ---\n  const sortedItems = [...data.items].sort((a, b) => a.line_number - b.line_number);\n  const itemRows = sortedItems.length;\n  const sumRow = baseRow + Math.max(itemRows, minRows); // 합계 위치\n\n  // 품목 데이터\n  for (let i = 0; i < sortedItems.length; i++) {\n    const item = sortedItems[i];\n    const rowIdx = baseRow + i;\n    \n    sheet.getCell('A' + rowIdx).value = item.line_number;\n    sheet.getCell('A' + rowIdx).font = { name: 'GulimChe', size: 11 };\n    sheet.getCell('A' + rowIdx).alignment = { horizontal: 'center', vertical: 'middle' };\n    \n    sheet.getCell('B' + rowIdx).value = item.item_name;\n    sheet.getCell('B' + rowIdx).font = { name: 'GulimChe', size: 11 };\n    sheet.getCell('B' + rowIdx).alignment = { horizontal: 'left', vertical: 'middle' };\n    \n    sheet.getCell('C' + rowIdx).value = item.specification;\n    sheet.getCell('C' + rowIdx).font = { name: 'GulimChe', size: 11 };\n    sheet.getCell('C' + rowIdx).alignment = { horizontal: 'left', vertical: 'middle' };\n    \n    sheet.getCell('D' + rowIdx).value = item.quantity;\n    sheet.getCell('D' + rowIdx).font = { name: 'GulimChe', size: 11 };\n    sheet.getCell('D' + rowIdx).alignment = { horizontal: 'center', vertical: 'middle' };\n    \n    // 단가(E열) - 통화 기호 포함\n    const unitSymbol = getCurrencySymbol(item.currency);\n    const unitWithCurrency = (item.unit_price_value !== undefined && item.unit_price_value !== null)\n      ? `${item.unit_price_value.toLocaleString()} ${unitSymbol}`.trim()\n      : '';\n    sheet.getCell('E' + rowIdx).value = unitWithCurrency;\n    sheet.getCell('E' + rowIdx).font = { name: 'GulimChe', size: 11 };\n    sheet.getCell('E' + rowIdx).alignment = { horizontal: 'right', vertical: 'middle' };\n\n    // 금액(F열) - 통화 기호 포함\n    const amountSymbol = getCurrencySymbol(item.currency);\n    const amountWithCurrency = (item.amount_value !== undefined && item.amount_value !== null)\n      ? `${item.amount_value.toLocaleString()} ${amountSymbol}`.trim()\n      : '';\n    sheet.getCell('F' + rowIdx).value = amountWithCurrency;\n    sheet.getCell('F' + rowIdx).font = { name: 'GulimChe', size: 11 };\n    sheet.getCell('F' + rowIdx).alignment = { horizontal: 'right', vertical: 'middle' };\n    \n    // 비고(G열)\n    sheet.getCell('G' + rowIdx).value = (item.remark !== undefined && item.remark !== null) ? String(item.remark) : '';\n    sheet.getCell('G' + rowIdx).font = { name: 'GulimChe', size: 11 };\n    sheet.getCell('G' + rowIdx).alignment = { horizontal: 'center', vertical: 'middle' };\n  }\n\n  // 품목이 38개보다 적으면 빈 행 추가\n  for (let i = itemRows; i < minRows; i++) {\n    const rowIdx = baseRow + i;\n    for (let c = 0; c < 7; c++) {\n      sheet.getCell(String.fromCharCode(65 + c) + rowIdx).value = '';\n    }\n  }\n\n  // 합계 (템플릿과 동일한 형식으로 A47처럼 병합)\n  const sumMergeRange = itemRows < 38 ? 'A47:E47' : `A${sumRow}:E${sumRow}`;\n  sheet.mergeCells(sumMergeRange);\n  const actualSumRow = itemRows < 38 ? 47 : sumRow;\n  sheet.getCell('A' + actualSumRow).value = '합계';\n  sheet.getCell('A' + actualSumRow).font = { name: 'GulimChe', size: 11, bold: true };\n  sheet.getCell('A' + actualSumRow).alignment = { horizontal: 'center', vertical: 'middle' };\n  \n  const totalSymbol = getCurrencySymbol(data.items[0]?.currency);\n  const totalAmount = data.items.reduce((sum, item) => sum + (item.amount_value || 0), 0);\n  sheet.getCell('F' + actualSumRow).value = `${totalAmount.toLocaleString()} ${totalSymbol}`.trim();\n  sheet.getCell('F' + actualSumRow).font = { name: 'GulimChe', size: 11 };\n  sheet.getCell('F' + actualSumRow).alignment = { horizontal: 'right', vertical: 'middle' };\n\n  // 실제 마지막 데이터가 들어간 행까지 동적으로 테두리 적용 (합계까지만)\n  const lastRow = actualSumRow;\n  for (let r = 1; r <= lastRow; r++) {\n    for (let c = 1; c <= 7; c++) {\n      const col = String.fromCharCode(64 + c); // A~G\n      const cellAddr = col + r;\n      const cell = sheet.getCell(cellAddr);\n      // E(5), F(6)열의 품목 데이터 행(단가/금액)과 합계행, C(3)열의 품목 데이터 행(규격)은 alignment를 덮어쓰지 않음\n      const isPriceCol = (c === 5 || c === 6);\n      const isSpecCol = (c === 3);\n      const isItemRow = (r >= baseRow && r < sumRow);\n      const isSumRow = (r === sumRow);\n      if (!((isPriceCol && (isItemRow || isSumRow)) || (isSpecCol && isItemRow))) {\n        // 나머지 셀만 중앙 정렬\n        cell.alignment = { horizontal: 'center', vertical: 'middle' };\n      }\n      // 기존 스타일: 2행/8행/합계행(sumRow) 위, 8행 아래, 마지막행만 굵은선\n      cell.border = {\n        top:    { style: (r === 1) ? 'medium' : (r === 2 || r === 8 || r === actualSumRow) ? 'medium' : 'thin' },\n        left:   { style: c === 1 ? 'medium' : 'thin' },\n        right:  { style: c === 7 ? 'medium' : 'thin' },\n        bottom: { style: (r === 8 || r === actualSumRow || r === lastRow) ? 'medium' : 'thin' }\n      };\n    }\n  }\n  // 품목 데이터 정렬은 이미 위에서 설정했으므로 삭제\n\n  // B2:B7, D2:D7, E2:E6 오른쪽 테두리 굵게\n  for (let r = 2; r <= 7; r++) {\n    sheet.getCell('B' + r).border = {\n      ...sheet.getCell('B' + r).border,\n      right: { style: 'medium' }\n    };\n    sheet.getCell('D' + r).border = {\n      ...sheet.getCell('D' + r).border,\n      right: { style: 'medium' }\n    };\n    if (r <= 6) {\n      sheet.getCell('E' + r).border = {\n        ...sheet.getCell('E' + r).border,\n        right: { style: 'medium' }\n      };\n    }\n  }\n  // E7, G7 위쪽 테두리 일반(얇게)\n  sheet.getCell('E7').border = {\n    ...sheet.getCell('E7').border,\n    top: { style: 'thin' },\n    right: { style: 'medium' }\n  };\n  sheet.getCell('G7').border = {\n    ...sheet.getCell('G7').border,\n    top: { style: 'thin' }\n  };\n\n  // A1~A7 왼쪽 테두리 굵게 명시적 설정 (덮어쓰기 방지)\n  for (let r = 1; r <= 7; r++) {\n    const currentBorder = sheet.getCell('A' + r).border || {};\n    sheet.getCell('A' + r).border = {\n      ...currentBorder,\n      left: { style: 'medium' }\n    };\n  }\n\n  // 합계 행(A열) 왼쪽 테두리 굵게 명시적 설정\n  const sumCellBorder = sheet.getCell('A' + actualSumRow).border || {};\n  sheet.getCell('A' + actualSumRow).border = {\n    ...sumCellBorder,\n    left: { style: 'medium' }\n  };\n\n  // 열 너비 (템플릿 기준 정확히 매칭)\n  sheet.getColumn('A').width = 6.33203125;\n  sheet.getColumn('B').width = 12.6640625;\n  sheet.getColumn('C').width = 31.6640625;\n  sheet.getColumn('D').width = 12.6640625;\n  sheet.getColumn('E').width = 15.6640625;\n  sheet.getColumn('F').width = 17.6640625;\n  sheet.getColumn('G').width = 39;\n\n  /* -----------------------------------\n      행 높이 최종 설정\n      1행 : 39.75pt\n      2행~lastRow : 15.75pt\n  ----------------------------------- */\n  sheet.getRow(1).height = 39.75;\n  for (let r = 2; r <= lastRow; r++) {\n    sheet.getRow(r).height = 15.75;\n  }\n\n  // 품목 데이터 행의 폰트 및 정렬은 이미 위에서 설정했으므로 삭제\n\n  // 9. 파일 생성\n  const buffer = await workbook.xlsx.writeBuffer();\n  return new Blob([buffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\n}","\"use client\";\n\n// src/alert-dialog.tsx\nimport * as React from \"react\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\";\nimport { createDialogScope } from \"@radix-ui/react-dialog\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { createSlottable } from \"@radix-ui/react-slot\";\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nvar ROOT_NAME = \"AlertDialog\";\nvar [createAlertDialogContext, createAlertDialogScope] = createContextScope(ROOT_NAME, [\n  createDialogScope\n]);\nvar useDialogScope = createDialogScope();\nvar AlertDialog = (props) => {\n  const { __scopeAlertDialog, ...alertDialogProps } = props;\n  const dialogScope = useDialogScope(__scopeAlertDialog);\n  return /* @__PURE__ */ jsx(DialogPrimitive.Root, { ...dialogScope, ...alertDialogProps, modal: true });\n};\nAlertDialog.displayName = ROOT_NAME;\nvar TRIGGER_NAME = \"AlertDialogTrigger\";\nvar AlertDialogTrigger = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, ...triggerProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    return /* @__PURE__ */ jsx(DialogPrimitive.Trigger, { ...dialogScope, ...triggerProps, ref: forwardedRef });\n  }\n);\nAlertDialogTrigger.displayName = TRIGGER_NAME;\nvar PORTAL_NAME = \"AlertDialogPortal\";\nvar AlertDialogPortal = (props) => {\n  const { __scopeAlertDialog, ...portalProps } = props;\n  const dialogScope = useDialogScope(__scopeAlertDialog);\n  return /* @__PURE__ */ jsx(DialogPrimitive.Portal, { ...dialogScope, ...portalProps });\n};\nAlertDialogPortal.displayName = PORTAL_NAME;\nvar OVERLAY_NAME = \"AlertDialogOverlay\";\nvar AlertDialogOverlay = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, ...overlayProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    return /* @__PURE__ */ jsx(DialogPrimitive.Overlay, { ...dialogScope, ...overlayProps, ref: forwardedRef });\n  }\n);\nAlertDialogOverlay.displayName = OVERLAY_NAME;\nvar CONTENT_NAME = \"AlertDialogContent\";\nvar [AlertDialogContentProvider, useAlertDialogContentContext] = createAlertDialogContext(CONTENT_NAME);\nvar Slottable = createSlottable(\"AlertDialogContent\");\nvar AlertDialogContent = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, children, ...contentProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    const contentRef = React.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, contentRef);\n    const cancelRef = React.useRef(null);\n    return /* @__PURE__ */ jsx(\n      DialogPrimitive.WarningProvider,\n      {\n        contentName: CONTENT_NAME,\n        titleName: TITLE_NAME,\n        docsSlug: \"alert-dialog\",\n        children: /* @__PURE__ */ jsx(AlertDialogContentProvider, { scope: __scopeAlertDialog, cancelRef, children: /* @__PURE__ */ jsxs(\n          DialogPrimitive.Content,\n          {\n            role: \"alertdialog\",\n            ...dialogScope,\n            ...contentProps,\n            ref: composedRefs,\n            onOpenAutoFocus: composeEventHandlers(contentProps.onOpenAutoFocus, (event) => {\n              event.preventDefault();\n              cancelRef.current?.focus({ preventScroll: true });\n            }),\n            onPointerDownOutside: (event) => event.preventDefault(),\n            onInteractOutside: (event) => event.preventDefault(),\n            children: [\n              /* @__PURE__ */ jsx(Slottable, { children }),\n              /* @__PURE__ */ jsx(DescriptionWarning, { contentRef })\n            ]\n          }\n        ) })\n      }\n    );\n  }\n);\nAlertDialogContent.displayName = CONTENT_NAME;\nvar TITLE_NAME = \"AlertDialogTitle\";\nvar AlertDialogTitle = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, ...titleProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    return /* @__PURE__ */ jsx(DialogPrimitive.Title, { ...dialogScope, ...titleProps, ref: forwardedRef });\n  }\n);\nAlertDialogTitle.displayName = TITLE_NAME;\nvar DESCRIPTION_NAME = \"AlertDialogDescription\";\nvar AlertDialogDescription = React.forwardRef((props, forwardedRef) => {\n  const { __scopeAlertDialog, ...descriptionProps } = props;\n  const dialogScope = useDialogScope(__scopeAlertDialog);\n  return /* @__PURE__ */ jsx(DialogPrimitive.Description, { ...dialogScope, ...descriptionProps, ref: forwardedRef });\n});\nAlertDialogDescription.displayName = DESCRIPTION_NAME;\nvar ACTION_NAME = \"AlertDialogAction\";\nvar AlertDialogAction = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, ...actionProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    return /* @__PURE__ */ jsx(DialogPrimitive.Close, { ...dialogScope, ...actionProps, ref: forwardedRef });\n  }\n);\nAlertDialogAction.displayName = ACTION_NAME;\nvar CANCEL_NAME = \"AlertDialogCancel\";\nvar AlertDialogCancel = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, ...cancelProps } = props;\n    const { cancelRef } = useAlertDialogContentContext(CANCEL_NAME, __scopeAlertDialog);\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    const ref = useComposedRefs(forwardedRef, cancelRef);\n    return /* @__PURE__ */ jsx(DialogPrimitive.Close, { ...dialogScope, ...cancelProps, ref });\n  }\n);\nAlertDialogCancel.displayName = CANCEL_NAME;\nvar DescriptionWarning = ({ contentRef }) => {\n  const MESSAGE = `\\`${CONTENT_NAME}\\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \\`${CONTENT_NAME}\\` by passing a \\`${DESCRIPTION_NAME}\\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \\`id\\` and passing the same value to the \\`aria-describedby\\` prop in \\`${CONTENT_NAME}\\`. If the description is confusing or duplicative for sighted users, you can use the \\`@radix-ui/react-visually-hidden\\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;\n  React.useEffect(() => {\n    const hasDescription = document.getElementById(\n      contentRef.current?.getAttribute(\"aria-describedby\")\n    );\n    if (!hasDescription) console.warn(MESSAGE);\n  }, [MESSAGE, contentRef]);\n  return null;\n};\nvar Root2 = AlertDialog;\nvar Trigger2 = AlertDialogTrigger;\nvar Portal2 = AlertDialogPortal;\nvar Overlay2 = AlertDialogOverlay;\nvar Content2 = AlertDialogContent;\nvar Action = AlertDialogAction;\nvar Cancel = AlertDialogCancel;\nvar Title2 = AlertDialogTitle;\nvar Description2 = AlertDialogDescription;\nexport {\n  Action,\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogOverlay,\n  AlertDialogPortal,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n  Cancel,\n  Content2 as Content,\n  Description2 as Description,\n  Overlay2 as Overlay,\n  Portal2 as Portal,\n  Root2 as Root,\n  Title2 as Title,\n  Trigger2 as Trigger,\n  createAlertDialogScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm\",\n      \"data-[state=open]:animate-in data-[state=closed]:animate-out\",\n      \"data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50\",\n        \"w-full max-w-md translate-x-[-50%] translate-y-[-50%]\",\n        \"grid gap-4 bg-white border border-gray-200\",\n        \"rounded-lg p-6 shadow-professional-xl\",\n        \"duration-200\",\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out\",\n        \"data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n        \"data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95\",\n        \"data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%]\",\n        \"data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end gap-3\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-gray-800 tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-gray-600\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}","import { memo, useMemo, useState } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport PurchaseDetailModal from \"./PurchaseDetailModal\";\nimport MobilePurchaseCard from \"./MobilePurchaseCard\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { toast } from \"sonner\";\nimport { generatePurchaseOrderExcelJS, PurchaseOrderData } from \"@/utils/exceljs/generatePurchaseOrderExcel\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { Purchase, PurchaseRequestWithDetails } from \"@/types/purchase\";\n\ninterface FastPurchaseTableProps {\n  purchases: Purchase[];\n  activeTab?: string; // 현재 활성 탭\n  currentUserRoles?: string[];\n  onRefresh?: () => void;\n  onPaymentComplete?: (purchaseId: number) => Promise<void>;\n  onReceiptComplete?: (purchaseId: number) => Promise<void>;\n}\n\n// 상태 배지 컴포넌트 (더 빠르게)\nconst StatusBadge = memo(({ purchase }: { purchase: Purchase }) => {\n  const status = purchase.is_received \n    ? 'completed'\n    : (purchase.middle_manager_status === 'approved' && purchase.final_manager_status === 'approved')\n    ? 'inProgress'\n    : (purchase.middle_manager_status === 'rejected' || purchase.final_manager_status === 'rejected')\n    ? 'rejected'\n    : 'pending';\n  \n  const config = {\n    completed: { text: '입고완료', className: 'bg-green-100 text-green-800' },\n    inProgress: { text: '구매진행', className: 'bg-hansl-100 text-hansl-800' },\n    rejected: { text: '반려', className: 'bg-red-100 text-red-800' },\n    pending: { text: '승인대기', className: 'bg-yellow-100 text-yellow-800' }\n  };\n  \n  const { text, className } = config[status];\n  return <Badge className={className}>{text}</Badge>;\n});\n\nStatusBadge.displayName = 'StatusBadge';\n\n// 반응형 칼럼 클래스 - Tailwind 클래스로 유연한 너비 관리\nconst COMMON_COLUMN_CLASSES = {\n  approvalStatus: \"text-center w-20 min-w-[70px]\",\n  purchaseOrderNumber: \"pl-2 w-32 min-w-[110px] sm:w-36 lg:w-40 xl:w-44\",\n  paymentCategory: \"text-center w-20 min-w-[70px]\",\n  requesterName: \"w-20 min-w-[60px]\",\n  requestDate: \"w-20 min-w-[70px] lg:w-24\",\n  vendorName: \"w-28 min-w-[90px] lg:w-32\",\n  contactName: \"w-20 min-w-[60px]\",\n  deliveryRequestDate: \"w-20 min-w-[70px] lg:w-24\",\n  itemName: \"w-36 min-w-[120px] lg:w-44 xl:w-48\",\n  specification: \"w-40 min-w-[140px] lg:w-48 xl:w-52\",\n  quantity: \"text-center w-14 min-w-[45px]\",\n  unitPrice: \"text-right w-20 min-w-[70px]\",\n  amount: \"text-right w-24 min-w-[80px]\",\n  remark: \"min-w-[150px] lg:min-w-[200px]\",\n  paymentSchedule: \"w-20 min-w-[70px]\",\n  purchaseStatus: \"text-center w-20 min-w-[70px]\",\n  projectVendor: \"w-28 min-w-[90px] lg:w-32\",\n  salesOrderNumber: \"w-24 min-w-[80px] lg:w-28\",\n  projectItem: \"w-28 min-w-[90px] lg:w-32\",\n  receiptProgress: \"text-center w-20 min-w-[70px]\",\n  status: \"text-center w-20 min-w-[70px]\",\n  receipt: \"text-center w-20 min-w-[70px]\",\n  paymentStatus: \"text-center w-16 min-w-[60px]\",\n  link: \"w-20 min-w-[70px]\"\n};\n\n// 승인 상태 상세 표시 컴포넌트 (승인대기 탭용)\nconst ApprovalStatusBadge = memo(({ purchase }: { purchase: Purchase }) => {\n  const middleApproved = purchase.middle_manager_status === 'approved';\n  const middleRejected = purchase.middle_manager_status === 'rejected';\n  const finalApproved = purchase.final_manager_status === 'approved';\n  const finalRejected = purchase.final_manager_status === 'rejected';\n\n  // 전체 상태 결정\n  if (middleRejected || finalRejected) {\n    // 하나라도 반려면 반려 표시\n    return (\n      <div className=\"flex flex-col items-center gap-0.5\">\n        <div className=\"flex items-center gap-0.5\">\n          <div className=\"w-1.5 h-1.5 bg-red-500 rounded-full animate-pulse\"></div>\n        </div>\n        <Badge className=\"bg-red-100 text-red-800 text-[11px] font-medium px-1.5 py-0\">\n          반려\n        </Badge>\n      </div>\n    );\n  }\n  \n  if (middleApproved && finalApproved) {\n    // 둘 다 승인이면 완료\n    return (\n      <div className=\"flex flex-col items-center gap-0.5\">\n        <div className=\"flex items-center gap-0.5\">\n          <div className=\"w-1.5 h-1.5 bg-green-500 rounded-full\"></div>\n        </div>\n        <Badge className=\"bg-green-100 text-green-800 text-[11px] font-medium px-1.5 py-0\">\n          승인완료\n        </Badge>\n      </div>\n    );\n  }\n  \n  if (middleApproved && !finalApproved && !finalRejected) {\n    // 중간승인만 완료\n    return (\n      <div className=\"flex flex-col items-center gap-0.5\">\n        <div className=\"flex items-center gap-1\">\n          <div className=\"w-1.5 h-1.5 bg-green-500 rounded-full\"></div>\n          <div className=\"w-3 h-0.5 bg-gray-300\"></div>\n          <div className=\"w-1.5 h-1.5 bg-gray-300 rounded-full\"></div>\n        </div>\n        <Badge className=\"bg-yellow-100 text-yellow-800 text-[11px] font-medium px-1.5 py-0\">\n          1차 승인\n        </Badge>\n      </div>\n    );\n  }\n  \n  // 둘 다 대기\n  return (\n    <div className=\"flex flex-col items-center gap-0.5\">\n      <div className=\"flex items-center gap-1\">\n        <div className=\"w-1.5 h-1.5 bg-gray-300 rounded-full\"></div>\n        <div className=\"w-3 h-0.5 bg-gray-300\"></div>\n        <div className=\"w-1.5 h-1.5 bg-gray-300 rounded-full\"></div>\n      </div>\n      <Badge className=\"bg-gray-100 text-gray-600 text-[11px] font-medium px-1.5 py-0\">\n        승인대기\n      </Badge>\n    </div>\n  );\n});\n\nApprovalStatusBadge.displayName = 'ApprovalStatusBadge';\n\n// 입고 현황 계산 함수\nconst getReceiptProgress = (purchase: Purchase) => {\n  // purchase_requests 테이블의 is_received 필드 우선 체크\n  if (purchase.is_received) {\n    return { received: 1, total: 1, percentage: 100 };\n  }\n  \n  // items 배열이 없으면 전체 미입고로 처리\n  if (!purchase.items || purchase.items.length === 0) {\n    return { received: 0, total: 1, percentage: 0 };\n  }\n  \n  // 개별 아이템 입고 상태 계산\n  const total = purchase.items.length;\n  const received = purchase.items.filter((item: any) => \n    item.is_received === true\n  ).length;\n  const percentage = total > 0 ? Math.round((received / total) * 100) : 0;\n  \n  return { received, total, percentage };\n};\n\n// 구매완료 현황 계산 함수\nconst getPaymentProgress = (purchase: Purchase) => {\n  // purchase_requests 테이블의 is_payment_completed 필드 우선 체크\n  if (purchase.is_payment_completed) {\n    return { completed: 1, total: 1, percentage: 100 };\n  }\n  \n  // items 배열이 없으면 전체 미완료로 처리\n  if (!purchase.items || purchase.items.length === 0) {\n    return { completed: 0, total: 1, percentage: 0 };\n  }\n  \n  // 개별 아이템 구매완료 상태 계산\n  const total = purchase.items.length;\n  const completed = purchase.items.filter((item: any) => \n    item.is_payment_completed === true\n  ).length;\n  const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;\n  \n  return { completed, total, percentage };\n};\n\n// 날짜 포맷 함수\nconst formatDate = (dateStr?: string) => {\n  if (!dateStr) return '-';\n  const date = new Date(dateStr);\n  return `${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;\n};\n\n// 선진행 구분 배지\nconst ProgressTypeBadge = memo(({ type }: { type?: string }) => {\n  const isAdvance = type === '선진행' || type?.includes('선진행');\n  \n  if (isAdvance) {\n    return (\n      <Badge className=\"bg-red-500 text-white font-bold text-[11px] px-2 py-0.5\">\n        선진행\n      </Badge>\n    );\n  }\n  \n  return (\n    <Badge className=\"bg-gray-200 text-gray-700 text-[11px] px-2 py-0.5\">\n      일반\n    </Badge>\n  );\n});\n\nProgressTypeBadge.displayName = 'ProgressTypeBadge';\n\n// 테이블 행 컴포넌트 메모화\nconst TableRow = memo(({ purchase, onClick, activeTab, isLeadBuyer, onPaymentComplete, onReceiptComplete, onExcelDownload }: { \n  purchase: Purchase; \n  onClick: (purchase: Purchase) => void;\n  activeTab?: string;\n  isLeadBuyer?: boolean;\n  onPaymentComplete?: (purchaseId: number) => Promise<void>;\n  onReceiptComplete?: (purchaseId: number) => Promise<void>;\n  onExcelDownload?: (purchase: Purchase) => Promise<void>;\n}) => {\n  const receiptProgress = getReceiptProgress(purchase);\n  const paymentProgress = getPaymentProgress(purchase);\n  const isAdvance = purchase.progress_type === '선진행' || purchase.progress_type?.includes('선진행');\n  \n  return (\n    <tr \n      className={`border-b hover:bg-gray-100 cursor-pointer transition-colors ${isAdvance ? 'bg-red-50 hover:bg-red-100' : ''}`}\n      onClick={() => onClick(purchase)}\n    >\n      {/* 승인대기 탭에서는 승인상태를 맨 앞에 표시 */}\n      {activeTab === 'pending' && (\n        <td className={`px-2 py-1.5 whitespace-nowrap ${COMMON_COLUMN_CLASSES.approvalStatus}`}>\n          <ApprovalStatusBadge purchase={purchase} />\n        </td>\n      )}\n      {/* 구매현황 탭에서는 구매완료 진행률만 표시 */}\n      {activeTab === 'purchase' && (\n        <td className={`px-2 py-1.5 ${COMMON_COLUMN_CLASSES.receiptProgress}`}>\n          <div className=\"flex items-center justify-center gap-1\">\n            <div className=\"bg-gray-200 rounded-full h-1.5 w-8\">\n              <div \n                className={`h-1.5 rounded-full ${\n                  paymentProgress.percentage === 100 ? 'bg-blue-500' : \n                  paymentProgress.percentage > 0 ? 'bg-blue-400' : 'bg-gray-300'\n                }`}\n                style={{ width: `${paymentProgress.percentage}%` }}\n              />\n            </div>\n            <span className=\"text-[11px] text-gray-600\">\n              {paymentProgress.percentage}%\n            </span>\n          </div>\n        </td>\n      )}\n      {/* 입고현황 탭에서는 입고진행을 맨 앞에 표시 */}\n      {activeTab === 'receipt' && (\n        <td className={`px-2 py-1.5 ${COMMON_COLUMN_CLASSES.receiptProgress}`}>\n          <div className=\"flex items-center justify-center gap-1\">\n            <div className=\"bg-gray-200 rounded-full h-1.5 w-8\">\n              <div \n                className={`h-1.5 rounded-full ${\n                  receiptProgress.percentage === 100 ? 'bg-green-500' : \n                  receiptProgress.percentage > 0 ? 'bg-hansl-500' : 'bg-gray-300'\n                }`}\n                style={{ width: `${receiptProgress.percentage}%` }}\n              />\n            </div>\n            <span className=\"text-[11px] text-gray-600\">\n              {receiptProgress.percentage}%\n            </span>\n          </div>\n        </td>\n      )}\n      <td className={`px-2 py-1.5 font-medium text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.purchaseOrderNumber}`}>\n        <div className=\"flex items-center gap-1\">\n          {/* 엑셀 다운로드 아이콘 - 항상 표시, 조건에 따라 활성화/비활성화 */}\n          {onExcelDownload && (\n            <img\n              src=\"/excels-icon.svg\"\n              alt=\"엑셀 다운로드\"\n              width=\"16\"\n              height=\"16\"\n              className={`inline-block align-middle transition-transform p-0.5 rounded\n                ${purchase.is_po_download ? 'border border-gray-400' : ''}\n                ${(purchase.progress_type === '선진행' || purchase.progress_type?.includes('선진행') ||\n                  (purchase.middle_manager_status === 'approved' && purchase.final_manager_status === 'approved'))\n                  ? (purchase.is_po_download ? 'cursor-pointer' : 'cursor-pointer hover:scale-110')\n                  : 'opacity-40 grayscale cursor-not-allowed'}`}\n              onClick={async (e: React.MouseEvent) => {\n                if (purchase.progress_type === '선진행' || purchase.progress_type?.includes('선진행') ||\n                    (purchase.middle_manager_status === 'approved' && purchase.final_manager_status === 'approved')) {\n                  e.stopPropagation();\n                  await onExcelDownload(purchase);\n                }\n              }}\n              style={{\n                pointerEvents: (purchase.progress_type === '선진행' || purchase.progress_type?.includes('선진행') ||\n                  (purchase.middle_manager_status === 'approved' && purchase.final_manager_status === 'approved'))\n                  ? 'auto' : 'none'\n              }}\n              title={purchase.is_po_download ? '다운로드 완료' : '엑셀 발주서 다운로드'}\n            />\n          )}\n          <span className=\"block truncate\" title={purchase.purchase_order_number || ''}>\n            {purchase.purchase_order_number || '-'}\n          </span>\n        </div>\n      </td>\n      {/* 승인대기, 입고현황, 전체항목 탭에서만 결제종류 표시 */}\n      {(activeTab === 'pending' || activeTab === 'receipt' || activeTab === 'done' || !activeTab) && (\n        <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.paymentCategory}`}>\n          <Badge className={`text-[11px] ${\n            purchase.payment_category === '구매 요청' ? 'bg-blue-100 text-blue-800' : \n            purchase.payment_category === '발주' ? 'bg-green-100 text-green-800' :\n            purchase.payment_category === '경비 청구' ? 'bg-yellow-100 text-yellow-800' :\n            'bg-gray-100 text-gray-800'\n          }`}>\n            {(() => {\n              // 표시 텍스트 통일\n              if (purchase.payment_category === '구매 요청') return '구매요청';\n              if (purchase.payment_category === '발주') return '발주요청';\n              return purchase.payment_category || '-';\n            })()}\n          </Badge>\n        </td>\n      )}\n      <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.requesterName}`}>\n        <span className=\"block truncate\" title={purchase.requester_name || ''}>\n          {purchase.requester_name || '-'}\n        </span>\n      </td>\n      <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.requestDate}`}>\n        {formatDate(purchase.request_date)}\n      </td>\n      <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.vendorName}`}>\n        <span className=\"block truncate\" title={purchase.vendor_name || ''}>\n          {purchase.vendor_name || '-'}\n        </span>\n      </td>\n      <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.contactName}`}>\n        <span className=\"block truncate\" title={purchase.contact_name || ''}>\n          {purchase.contact_name || '-'}\n        </span>\n      </td>\n      <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.deliveryRequestDate}`}>\n        {formatDate(purchase.delivery_request_date)}\n      </td>\n      <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.itemName}`}>\n        <span className=\"block truncate\" title={purchase.item_name || ''}>\n          {purchase.item_name || '-'}\n        </span>\n      </td>\n      <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.specification}`}>\n        <span className=\"block truncate\" title={purchase.specification || ''}>\n          {purchase.specification || '-'}\n        </span>\n      </td>\n      <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.quantity}`}>\n        {purchase.quantity || 0}\n      </td>\n      <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.unitPrice}`}>\n        {purchase.unit_price_value?.toLocaleString() || 0}\n      </td>\n      <td className={`px-2 py-1.5 text-[11px] font-medium whitespace-nowrap ${COMMON_COLUMN_CLASSES.amount}`}>\n        {purchase.amount_value?.toLocaleString() || purchase.total_amount?.toLocaleString() || 0}\n      </td>\n      \n      {/* 탭별 다른 칼럼 표시 */}\n      {activeTab === 'pending' && (\n        <>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.remark}`}>\n            <span className=\"block truncate\" title={purchase.remark || ''}>\n              {purchase.remark || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.projectVendor}`}>\n            <span className=\"block truncate\" title={purchase.project_vendor || ''}>\n              {purchase.project_vendor || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.projectItem}`}>\n            <span className=\"block truncate\" title={purchase.project_item || ''}>\n              {purchase.project_item || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.salesOrderNumber}`}>\n            <span className=\"block truncate\" title={purchase.sales_order_number || ''}>\n              {purchase.sales_order_number || '-'}\n            </span>\n          </td>\n        </>\n      )}\n      \n      {activeTab === 'purchase' && (\n        <>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.remark}`}>\n            <span className=\"block truncate\" title={purchase.remark || ''}>\n              {purchase.remark || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.link}`}>\n            {purchase.link ? (\n              <a \n                href={purchase.link} \n                target=\"_blank\" \n                rel=\"noopener noreferrer\" \n                className=\"text-blue-600 hover:text-blue-800 underline truncate block\"\n                title={purchase.link}\n              >\n                링크 보기\n              </a>\n            ) : (\n              <span className=\"text-gray-400\">-</span>\n            )}\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.paymentSchedule}`}>\n            <span className=\"block truncate\" title={purchase.vendor_payment_schedule || ''}>\n              {purchase.vendor_payment_schedule || '-'}\n            </span>\n          </td>\n        </>\n      )}\n      \n      {activeTab === 'receipt' && (\n        <>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.remark}`}>\n            <span className=\"block truncate\" title={purchase.remark || ''}>\n              {purchase.remark || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.projectVendor}`}>\n            <span className=\"block truncate\" title={purchase.project_vendor || ''}>\n              {purchase.project_vendor || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.projectItem}`}>\n            <span className=\"block truncate\" title={purchase.project_item || ''}>\n              {purchase.project_item || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.salesOrderNumber}`}>\n            <span className=\"block truncate\" title={purchase.sales_order_number || ''}>\n              {purchase.sales_order_number || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.paymentSchedule}`}>\n            <span className=\"block truncate\" title={purchase.vendor_payment_schedule || ''}>\n              {purchase.vendor_payment_schedule || '-'}\n            </span>\n          </td>\n        </>\n      )}\n      \n      {(activeTab === 'done' || !activeTab) && (\n        <>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.remark}`}>\n            <span className=\"block truncate\" title={purchase.remark || ''}>\n              {purchase.remark || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.link}`}>\n            {purchase.link ? (\n              <a \n                href={purchase.link} \n                target=\"_blank\" \n                rel=\"noopener noreferrer\" \n                className=\"text-blue-600 hover:text-blue-800 underline truncate block\"\n                title={purchase.link}\n              >\n                링크 보기\n              </a>\n            ) : (\n              <span className=\"text-gray-400\">-</span>\n            )}\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.projectVendor}`}>\n            <span className=\"block truncate\" title={purchase.project_vendor || ''}>\n              {purchase.project_vendor || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.projectItem}`}>\n            <span className=\"block truncate\" title={purchase.project_item || ''}>\n              {purchase.project_item || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.salesOrderNumber}`}>\n            <span className=\"block truncate\" title={purchase.sales_order_number || ''}>\n              {purchase.sales_order_number || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.paymentSchedule}`}>\n            <span className=\"block truncate\" title={purchase.vendor_payment_schedule || ''}>\n              {purchase.vendor_payment_schedule || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 ${COMMON_COLUMN_CLASSES.status}`}>\n            <StatusBadge purchase={purchase} />\n          </td>\n          <td className={`px-2 py-1.5 ${COMMON_COLUMN_CLASSES.receipt}`}>\n            <div className=\"flex items-center justify-center gap-1\">\n              <div className=\"bg-gray-200 rounded-full h-1.5 w-8\">\n                <div \n                  className={`h-1.5 rounded-full ${\n                    receiptProgress.percentage === 100 ? 'bg-green-500' : \n                    receiptProgress.percentage > 0 ? 'bg-hansl-500' : 'bg-gray-300'\n                  }`}\n                  style={{ width: `${receiptProgress.percentage}%` }}\n                />\n              </div>\n              <span className=\"text-[11px] text-gray-600\">\n                {receiptProgress.percentage}%\n              </span>\n            </div>\n          </td>\n          <td className={`px-2 py-1.5 ${COMMON_COLUMN_CLASSES.paymentStatus}`}>\n            {purchase.is_payment_completed ? (\n              <Badge className=\"bg-green-100 text-green-800 text-[11px]\">완료</Badge>\n            ) : (\n              <Badge className=\"bg-gray-100 text-gray-800 text-[11px]\">대기</Badge>\n            )}\n          </td>\n        </>\n      )}\n      \n    </tr>\n  );\n});\n\nTableRow.displayName = 'TableRow';\n\n// 메인 테이블 컴포넌트\nconst FastPurchaseTable = memo(({ \n  purchases, \n  activeTab = 'done', \n  currentUserRoles = [], \n  onRefresh,\n  onPaymentComplete,\n  onReceiptComplete \n}: FastPurchaseTableProps) => {\n  const [selectedPurchaseId, setSelectedPurchaseId] = useState<number | null>(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [deleteConfirmOpen, setDeleteConfirmOpen] = useState(false);\n  const [purchaseToDelete, setPurchaseToDelete] = useState<Purchase | null>(null);\n  const supabase = createClient();\n\n  // 권한 체크 - lead buyer와 app_admin만 구매완료/입고완료 버튼 사용 가능\n  const isLeadBuyer = currentUserRoles && (\n    currentUserRoles.includes('raw_material_manager') || \n    currentUserRoles.includes('consumable_manager') ||\n    currentUserRoles.includes('purchase_manager') ||\n    currentUserRoles.includes('app_admin')\n  );\n  \n\n  // 권한 체크\n  const canEdit = currentUserRoles.includes('final_approver') || \n                  currentUserRoles.includes('app_admin') || \n                  currentUserRoles.includes('ceo');\n  \n  const canDelete = canEdit;\n\n  const handleRowClick = (purchase: Purchase) => {\n    setSelectedPurchaseId(purchase.id);\n    setIsModalOpen(true);\n  };\n\n  const handleCloseModal = () => {\n    setIsModalOpen(false);\n    setSelectedPurchaseId(null);\n  };\n\n  // 엑셀 다운로드 핸들러\n  const handleExcelDownload = async (purchase: Purchase) => {\n    try {\n      // DB에서 직접 모든 품목 조회\n      const { data: purchaseRequest, error: requestError } = await supabase\n        .from('purchase_requests')\n        .select('*')\n        .eq('purchase_order_number', purchase.purchase_order_number)\n        .single();\n\n      if (requestError || !purchaseRequest) {\n        toast.error('해당 발주요청번호의 데이터를 찾을 수 없습니다.');\n        return;\n      }\n\n      // 품목 데이터 조회\n      const { data: orderItems, error: itemsError } = await supabase\n        .from('purchase_request_items')\n        .select('*')\n        .eq('purchase_order_number', purchase.purchase_order_number)\n        .order('line_number');\n\n      if (itemsError || !orderItems || orderItems.length === 0) {\n        toast.error('해당 발주요청번호의 품목 데이터를 찾을 수 없습니다.');\n        return;\n      }\n\n      // 업체 상세 정보 및 담당자 정보 조회\n      const vendorInfo = {\n        vendor_name: purchase.vendor_name,\n        vendor_phone: '',\n        vendor_fax: '',\n        vendor_contact_name: '',\n        vendor_payment_schedule: ''\n      };\n\n      try {\n        const vendorId = purchaseRequest.vendor_id || purchase.vendor_id;\n        const contactId = purchaseRequest.contact_id || purchase.contact_id;\n        \n        // vendor 정보 조회\n        if (vendorId) {\n          const { data: vendorData } = await supabase\n            .from('vendors')\n            .select('vendor_phone, vendor_fax, vendor_payment_schedule')\n            .eq('id', vendorId)\n            .single();\n\n          if (vendorData) {\n            vendorInfo.vendor_phone = vendorData.vendor_phone || '';\n            vendorInfo.vendor_fax = vendorData.vendor_fax || '';\n            vendorInfo.vendor_payment_schedule = vendorData.vendor_payment_schedule || '';\n          }\n        }\n\n        // vendor_contacts에서 contact_id로 담당자 정보 조회\n        if (contactId) {\n          const { data: contactData } = await supabase\n            .from('vendor_contacts')\n            .select('contact_name, contact_phone, contact_email')\n            .eq('id', contactId)\n            .single();\n          if (contactData) {\n            vendorInfo.vendor_contact_name = contactData.contact_name || '';\n          }\n        }\n      } catch (error) {\n        // 업체 정보 조회 실패는 무시\n      }\n\n      const excelData: PurchaseOrderData = {\n        purchase_order_number: purchaseRequest.purchase_order_number || '',\n        request_date: purchaseRequest.request_date,\n        delivery_request_date: purchaseRequest.delivery_request_date,\n        requester_name: purchaseRequest.requester_name,\n        vendor_name: vendorInfo.vendor_name || '',\n        vendor_contact_name: vendorInfo.vendor_contact_name,\n        vendor_phone: vendorInfo.vendor_phone,\n        vendor_fax: vendorInfo.vendor_fax,\n        project_vendor: purchaseRequest.project_vendor,\n        sales_order_number: purchaseRequest.sales_order_number,\n        project_item: purchaseRequest.project_item,\n        vendor_payment_schedule: vendorInfo.vendor_payment_schedule,\n        items: orderItems.map((item: any) => ({\n          line_number: item.line_number,\n          item_name: item.item_name,\n          specification: item.specification,\n          quantity: item.quantity,\n          unit_price_value: item.unit_price_value,\n          amount_value: item.amount_value,\n          remark: item.remark,\n          currency: purchaseRequest.currency || 'KRW'\n        }))\n      };\n\n      // 코드 기반 ExcelJS 생성\n      const blob = await generatePurchaseOrderExcelJS(excelData);\n      \n      // 다운로드용 파일명\n      const downloadFilename = `발주서_${excelData.vendor_name}_${excelData.purchase_order_number}.xlsx`;\n\n      // 다운로드 제공\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = downloadFilename;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n      \n      toast.success('엑셀 파일이 다운로드되었습니다.');\n      \n      // DB에 다운로드 완료 플래그(is_po_download) 업데이트 - lead buyer만 해당\n      try {\n        const canUpdateFlag = currentUserRoles && currentUserRoles.includes('lead buyer');\n\n        if (canUpdateFlag) {\n          const { error: downloadFlagErr } = await supabase\n            .from('purchase_requests')\n            .update({ is_po_download: true })\n            .eq('purchase_order_number', purchase.purchase_order_number);\n          \n          if (!downloadFlagErr) {\n            // 화면 업데이트\n            onRefresh?.();\n          }\n        }\n      } catch (flagErr) {\n        // 플래그 업데이트 실패는 무시\n      }\n    } catch (error) {\n      toast.error('엑셀 다운로드에 실패했습니다.');\n    }\n  };\n\n  const handleConfirmDelete = async () => {\n    if (!purchaseToDelete) return;\n\n    try {\n      // 모든 아이템 삭제\n      const { error: itemsError } = await supabase\n        .from('purchase_request_items')\n        .delete()\n        .eq('purchase_request_id', purchaseToDelete.id);\n\n      if (itemsError) throw itemsError;\n\n      // 발주요청 삭제\n      const { error: requestError } = await supabase\n        .from('purchase_requests')\n        .delete()\n        .eq('id', purchaseToDelete.id);\n\n      if (requestError) throw requestError;\n\n      toast.success(\"발주요청 내역이 삭제되었습니다.\");\n      onRefresh?.();\n    } catch (error) {\n      toast.error(\"삭제 중 오류가 발생했습니다.\");\n    }\n    \n    setDeleteConfirmOpen(false);\n    setPurchaseToDelete(null);\n  };\n\n  // 탭별 테이블 헤더 메모화\n  const tableHeader = useMemo(() => {\n    if (activeTab === 'pending') {\n      return (\n        <thead className=\"bg-gray-50\">\n          <tr>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.approvalStatus}`}>승인상태</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.purchaseOrderNumber}`}>발주번호</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.paymentCategory}`}>결제종류</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.requesterName}`}>요청자</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.requestDate}`}>청구일</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] text-left ${COMMON_COLUMN_CLASSES.vendorName}`}>업체</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.contactName}`}>담당자</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.deliveryRequestDate}`}>입고요청일</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] text-left ${COMMON_COLUMN_CLASSES.itemName}`}>품명</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] text-left ${COMMON_COLUMN_CLASSES.specification}`}>규격</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.quantity}`}>수량</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.unitPrice}`}>단가</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.amount}`}>금액</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.remark}`}>비고</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.projectVendor}`}>PJ업체</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.projectItem}`}>PJ ITEM</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.salesOrderNumber}`}>수주번호</th>\n          </tr>\n        </thead>\n      );\n    }\n    \n    const baseHeaders = (\n      <>\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.purchaseOrderNumber}`}>발주번호</th>\n        {(activeTab === 'receipt' || activeTab === 'done' || !activeTab) && (\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.paymentCategory}`}>결제종류</th>\n        )}\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.requesterName}`}>요청자</th>\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.requestDate}`}>청구일</th>\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.vendorName}`}>업체</th>\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.contactName}`}>담당자</th>\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.deliveryRequestDate}`}>입고요청일</th>\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] text-left ${COMMON_COLUMN_CLASSES.itemName}`}>품명</th>\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] text-left ${COMMON_COLUMN_CLASSES.specification}`}>규격</th>\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.quantity}`}>수량</th>\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.unitPrice}`}>단가</th>\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.amount}`}>금액</th>\n      </>\n    );\n\n    let additionalHeaders = null;\n    \n    if (activeTab === 'purchase') {\n      additionalHeaders = (\n        <>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.remark}`}>비고</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.link}`}>링크</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.paymentSchedule}`}>지출예정일</th>\n        </>\n      );\n    } else if (activeTab === 'receipt') {\n      additionalHeaders = (\n        <>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.remark}`}>비고</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.projectVendor}`}>PJ업체</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.projectItem}`}>PJ ITEM</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.salesOrderNumber}`}>수주번호</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.paymentSchedule}`}>지출예정일</th>\n        </>\n      );\n    } else {\n      // done 또는 기본\n      additionalHeaders = (\n        <>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.remark}`}>비고</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.link}`}>링크</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.projectVendor}`}>PJ업체</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.projectItem}`}>PJ ITEM</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.salesOrderNumber}`}>수주번호</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.paymentSchedule}`}>지출예정일</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.status}`}>상태</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.receipt}`}>입고</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.paymentStatus}`}>결제</th>\n        </>\n      );\n    }\n\n    return (\n      <thead className=\"bg-gray-50\">\n        <tr>\n          {/* 구매현황 탭에서는 구매완료 진행률을 맨 앞에 */}\n          {activeTab === 'purchase' && (\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.receiptProgress}`}>구매진행</th>\n          )}\n          {/* 입고현황 탭에서는 입고진행을 맨 앞에 */}\n          {activeTab === 'receipt' && (\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.receiptProgress}`}>입고진행</th>\n          )}\n          {baseHeaders}\n          {additionalHeaders}\n        </tr>\n      </thead>\n    );\n  }, [activeTab]);\n\n  return (\n    <>\n      {/* 데스크톱 테이블 뷰 - 강화된 반응형 처리 */}\n      <div className=\"hidden md:block w-full\">\n        <div className=\"overflow-x-auto border rounded-lg\">\n          <table className=\"w-full min-w-fit\">\n            {tableHeader}\n            <tbody>\n              {purchases.map((purchase) => (\n                <TableRow \n                  key={purchase.id} \n                  purchase={purchase} \n                  onClick={handleRowClick}\n                  activeTab={activeTab}\n                  isLeadBuyer={isLeadBuyer}\n                  onPaymentComplete={onPaymentComplete}\n                  onReceiptComplete={onReceiptComplete}\n                  onExcelDownload={handleExcelDownload}\n                />\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n      \n      {/* 태블릿 컴팩트 뷰 */}\n      <div className=\"hidden sm:block md:hidden w-full\">\n        <div className=\"overflow-x-auto border rounded-lg\">\n          <table className=\"w-full min-w-[640px] text-[11px]\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"text-left p-2 font-medium text-gray-900 w-20 sm:w-24\">발주번호</th>\n                <th className=\"text-left p-2 font-medium text-gray-900 w-16 sm:w-20\">요청자</th>\n                <th className=\"text-left p-2 font-medium text-gray-900 w-24 sm:w-28\">업체</th>\n                <th className=\"text-left p-2 font-medium text-gray-900 min-w-[100px]\">품명</th>\n                <th className=\"text-right p-2 font-medium text-gray-900 w-20 sm:w-24\">금액</th>\n                <th className=\"text-center p-2 font-medium text-gray-900 w-16 sm:w-20\">상태</th>\n              </tr>\n            </thead>\n            <tbody>\n              {purchases.map((purchase) => (\n                <tr \n                  key={purchase.id}\n                  className=\"border-b hover:bg-gray-50 cursor-pointer\"\n                  onClick={() => handleRowClick(purchase)}\n                >\n                  <td className=\"p-2 font-medium\">{purchase.purchase_order_number || '-'}</td>\n                  <td className=\"p-2\">{purchase.requester_name}</td>\n                  <td className=\"p-2 truncate\" title={purchase.vendor_name}>{purchase.vendor_name}</td>\n                  <td className=\"p-2 truncate\" title={purchase.item_name}>{purchase.item_name || '-'}</td>\n                  <td className=\"p-2 text-right font-medium\">\n                    {purchase.amount_value?.toLocaleString() || purchase.total_amount?.toLocaleString() || 0}\n                  </td>\n                  <td className=\"p-2 text-center\">\n                    <StatusBadge purchase={purchase} />\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n      \n      {/* 모바일 카드 뷰 */}\n      <div className=\"sm:hidden space-y-3\">\n        {purchases.map((purchase) => (\n          <MobilePurchaseCard\n            key={purchase.id}\n            purchase={purchase}\n            onClick={() => handleRowClick(purchase)}\n          />\n        ))}\n      </div>\n      \n      {/* 통합 상세/편집 모달 */}\n      <PurchaseDetailModal\n        purchaseId={selectedPurchaseId}\n        isOpen={isModalOpen}\n        onClose={handleCloseModal}\n        currentUserRoles={currentUserRoles}\n        activeTab={activeTab}\n        onRefresh={onRefresh}\n        onDelete={(purchase) => {\n          setPurchaseToDelete(purchase as unknown as Purchase);\n          setDeleteConfirmOpen(true);\n        }}\n      />\n\n      {/* 삭제 확인 다이얼로그 */}\n      <AlertDialog open={deleteConfirmOpen} onOpenChange={setDeleteConfirmOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>발주요청 내역 삭제</AlertDialogTitle>\n            <AlertDialogDescription>\n              발주요청번호 {purchaseToDelete?.purchase_order_number}를 삭제하시겠습니까?\n              이 작업은 되돌릴 수 없습니다.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>취소</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleConfirmDelete}\n              className=\"bg-red-600 hover:bg-red-700\"\n            >\n              삭제\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </>\n  );\n});\n\nFastPurchaseTable.displayName = 'FastPurchaseTable';\n\nexport default FastPurchaseTable;","var U=1,Y=.9,H=.8,J=.17,p=.1,u=.999,$=.9999;var k=.99,m=/[\\\\\\/_+.#\"@\\[\\(\\{&]/,B=/[\\\\\\/_+.#\"@\\[\\(\\{&]/g,K=/[\\s-]/,X=/[\\s-]/g;function G(_,C,h,P,A,f,O){if(f===C.length)return A===_.length?U:k;var T=`${A},${f}`;if(O[T]!==void 0)return O[T];for(var L=P.charAt(f),c=h.indexOf(L,A),S=0,E,N,R,M;c>=0;)E=G(_,C,h,P,c+1,f+1,O),E>S&&(c===A?E*=U:m.test(_.charAt(c-1))?(E*=H,R=_.slice(A,c-1).match(B),R&&A>0&&(E*=Math.pow(u,R.length))):K.test(_.charAt(c-1))?(E*=Y,M=_.slice(A,c-1).match(X),M&&A>0&&(E*=Math.pow(u,M.length))):(E*=J,A>0&&(E*=Math.pow(u,c-A))),_.charAt(c)!==C.charAt(f)&&(E*=$)),(E<p&&h.charAt(c-1)===P.charAt(f+1)||P.charAt(f+1)===P.charAt(f)&&h.charAt(c-1)!==P.charAt(f))&&(N=G(_,C,h,P,c+1,f+2,O),N*p>E&&(E=N*p)),E>S&&(S=E),c=h.indexOf(L,c+1);return O[T]=S,S}function D(_){return _.toLowerCase().replace(X,\" \")}function W(_,C,h){return _=h&&h.length>0?`${_+\" \"+h.join(\" \")}`:_,G(_,C,D(_),D(C),0,0,{})}export{W as a};\n","\"use client\";import{a as ae}from\"./chunk-NZJY6EH4.mjs\";import*as w from\"@radix-ui/react-dialog\";import*as t from\"react\";import{Primitive as D}from\"@radix-ui/react-primitive\";import{useId as H}from\"@radix-ui/react-id\";import{composeRefs as G}from\"@radix-ui/react-compose-refs\";var N='[cmdk-group=\"\"]',Y='[cmdk-group-items=\"\"]',be='[cmdk-group-heading=\"\"]',le='[cmdk-item=\"\"]',ce=`${le}:not([aria-disabled=\"true\"])`,Z=\"cmdk-item-select\",T=\"data-value\",Re=(r,o,n)=>ae(r,o,n),ue=t.createContext(void 0),K=()=>t.useContext(ue),de=t.createContext(void 0),ee=()=>t.useContext(de),fe=t.createContext(void 0),me=t.forwardRef((r,o)=>{let n=L(()=>{var e,a;return{search:\"\",value:(a=(e=r.value)!=null?e:r.defaultValue)!=null?a:\"\",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),u=L(()=>new Set),c=L(()=>new Map),d=L(()=>new Map),f=L(()=>new Set),p=pe(r),{label:b,children:m,value:R,onValueChange:x,filter:C,shouldFilter:S,loop:A,disablePointerSelection:ge=!1,vimBindings:j=!0,...O}=r,$=H(),q=H(),_=H(),I=t.useRef(null),v=ke();k(()=>{if(R!==void 0){let e=R.trim();n.current.value=e,E.emit()}},[R]),k(()=>{v(6,ne)},[]);let E=t.useMemo(()=>({subscribe:e=>(f.current.add(e),()=>f.current.delete(e)),snapshot:()=>n.current,setState:(e,a,s)=>{var i,l,g,y;if(!Object.is(n.current[e],a)){if(n.current[e]=a,e===\"search\")J(),z(),v(1,W);else if(e===\"value\"){if(document.activeElement.hasAttribute(\"cmdk-input\")||document.activeElement.hasAttribute(\"cmdk-root\")){let h=document.getElementById(_);h?h.focus():(i=document.getElementById($))==null||i.focus()}if(v(7,()=>{var h;n.current.selectedItemId=(h=M())==null?void 0:h.id,E.emit()}),s||v(5,ne),((l=p.current)==null?void 0:l.value)!==void 0){let h=a!=null?a:\"\";(y=(g=p.current).onValueChange)==null||y.call(g,h);return}}E.emit()}},emit:()=>{f.current.forEach(e=>e())}}),[]),U=t.useMemo(()=>({value:(e,a,s)=>{var i;a!==((i=d.current.get(e))==null?void 0:i.value)&&(d.current.set(e,{value:a,keywords:s}),n.current.filtered.items.set(e,te(a,s)),v(2,()=>{z(),E.emit()}))},item:(e,a)=>(u.current.add(e),a&&(c.current.has(a)?c.current.get(a).add(e):c.current.set(a,new Set([e]))),v(3,()=>{J(),z(),n.current.value||W(),E.emit()}),()=>{d.current.delete(e),u.current.delete(e),n.current.filtered.items.delete(e);let s=M();v(4,()=>{J(),(s==null?void 0:s.getAttribute(\"id\"))===e&&W(),E.emit()})}),group:e=>(c.current.has(e)||c.current.set(e,new Set),()=>{d.current.delete(e),c.current.delete(e)}),filter:()=>p.current.shouldFilter,label:b||r[\"aria-label\"],getDisablePointerSelection:()=>p.current.disablePointerSelection,listId:$,inputId:_,labelId:q,listInnerRef:I}),[]);function te(e,a){var i,l;let s=(l=(i=p.current)==null?void 0:i.filter)!=null?l:Re;return e?s(e,n.current.search,a):0}function z(){if(!n.current.search||p.current.shouldFilter===!1)return;let e=n.current.filtered.items,a=[];n.current.filtered.groups.forEach(i=>{let l=c.current.get(i),g=0;l.forEach(y=>{let h=e.get(y);g=Math.max(h,g)}),a.push([i,g])});let s=I.current;V().sort((i,l)=>{var h,F;let g=i.getAttribute(\"id\"),y=l.getAttribute(\"id\");return((h=e.get(y))!=null?h:0)-((F=e.get(g))!=null?F:0)}).forEach(i=>{let l=i.closest(Y);l?l.appendChild(i.parentElement===l?i:i.closest(`${Y} > *`)):s.appendChild(i.parentElement===s?i:i.closest(`${Y} > *`))}),a.sort((i,l)=>l[1]-i[1]).forEach(i=>{var g;let l=(g=I.current)==null?void 0:g.querySelector(`${N}[${T}=\"${encodeURIComponent(i[0])}\"]`);l==null||l.parentElement.appendChild(l)})}function W(){let e=V().find(s=>s.getAttribute(\"aria-disabled\")!==\"true\"),a=e==null?void 0:e.getAttribute(T);E.setState(\"value\",a||void 0)}function J(){var a,s,i,l;if(!n.current.search||p.current.shouldFilter===!1){n.current.filtered.count=u.current.size;return}n.current.filtered.groups=new Set;let e=0;for(let g of u.current){let y=(s=(a=d.current.get(g))==null?void 0:a.value)!=null?s:\"\",h=(l=(i=d.current.get(g))==null?void 0:i.keywords)!=null?l:[],F=te(y,h);n.current.filtered.items.set(g,F),F>0&&e++}for(let[g,y]of c.current)for(let h of y)if(n.current.filtered.items.get(h)>0){n.current.filtered.groups.add(g);break}n.current.filtered.count=e}function ne(){var a,s,i;let e=M();e&&(((a=e.parentElement)==null?void 0:a.firstChild)===e&&((i=(s=e.closest(N))==null?void 0:s.querySelector(be))==null||i.scrollIntoView({block:\"nearest\"})),e.scrollIntoView({block:\"nearest\"}))}function M(){var e;return(e=I.current)==null?void 0:e.querySelector(`${le}[aria-selected=\"true\"]`)}function V(){var e;return Array.from(((e=I.current)==null?void 0:e.querySelectorAll(ce))||[])}function X(e){let s=V()[e];s&&E.setState(\"value\",s.getAttribute(T))}function Q(e){var g;let a=M(),s=V(),i=s.findIndex(y=>y===a),l=s[i+e];(g=p.current)!=null&&g.loop&&(l=i+e<0?s[s.length-1]:i+e===s.length?s[0]:s[i+e]),l&&E.setState(\"value\",l.getAttribute(T))}function re(e){let a=M(),s=a==null?void 0:a.closest(N),i;for(;s&&!i;)s=e>0?we(s,N):De(s,N),i=s==null?void 0:s.querySelector(ce);i?E.setState(\"value\",i.getAttribute(T)):Q(e)}let oe=()=>X(V().length-1),ie=e=>{e.preventDefault(),e.metaKey?oe():e.altKey?re(1):Q(1)},se=e=>{e.preventDefault(),e.metaKey?X(0):e.altKey?re(-1):Q(-1)};return t.createElement(D.div,{ref:o,tabIndex:-1,...O,\"cmdk-root\":\"\",onKeyDown:e=>{var s;(s=O.onKeyDown)==null||s.call(O,e);let a=e.nativeEvent.isComposing||e.keyCode===229;if(!(e.defaultPrevented||a))switch(e.key){case\"n\":case\"j\":{j&&e.ctrlKey&&ie(e);break}case\"ArrowDown\":{ie(e);break}case\"p\":case\"k\":{j&&e.ctrlKey&&se(e);break}case\"ArrowUp\":{se(e);break}case\"Home\":{e.preventDefault(),X(0);break}case\"End\":{e.preventDefault(),oe();break}case\"Enter\":{e.preventDefault();let i=M();if(i){let l=new Event(Z);i.dispatchEvent(l)}}}}},t.createElement(\"label\",{\"cmdk-label\":\"\",htmlFor:U.inputId,id:U.labelId,style:Te},b),B(r,e=>t.createElement(de.Provider,{value:E},t.createElement(ue.Provider,{value:U},e))))}),he=t.forwardRef((r,o)=>{var _,I;let n=H(),u=t.useRef(null),c=t.useContext(fe),d=K(),f=pe(r),p=(I=(_=f.current)==null?void 0:_.forceMount)!=null?I:c==null?void 0:c.forceMount;k(()=>{if(!p)return d.item(n,c==null?void 0:c.id)},[p]);let b=ve(n,u,[r.value,r.children,u],r.keywords),m=ee(),R=P(v=>v.value&&v.value===b.current),x=P(v=>p||d.filter()===!1?!0:v.search?v.filtered.items.get(n)>0:!0);t.useEffect(()=>{let v=u.current;if(!(!v||r.disabled))return v.addEventListener(Z,C),()=>v.removeEventListener(Z,C)},[x,r.onSelect,r.disabled]);function C(){var v,E;S(),(E=(v=f.current).onSelect)==null||E.call(v,b.current)}function S(){m.setState(\"value\",b.current,!0)}if(!x)return null;let{disabled:A,value:ge,onSelect:j,forceMount:O,keywords:$,...q}=r;return t.createElement(D.div,{ref:G(u,o),...q,id:n,\"cmdk-item\":\"\",role:\"option\",\"aria-disabled\":!!A,\"aria-selected\":!!R,\"data-disabled\":!!A,\"data-selected\":!!R,onPointerMove:A||d.getDisablePointerSelection()?void 0:S,onClick:A?void 0:C},r.children)}),Ee=t.forwardRef((r,o)=>{let{heading:n,children:u,forceMount:c,...d}=r,f=H(),p=t.useRef(null),b=t.useRef(null),m=H(),R=K(),x=P(S=>c||R.filter()===!1?!0:S.search?S.filtered.groups.has(f):!0);k(()=>R.group(f),[]),ve(f,p,[r.value,r.heading,b]);let C=t.useMemo(()=>({id:f,forceMount:c}),[c]);return t.createElement(D.div,{ref:G(p,o),...d,\"cmdk-group\":\"\",role:\"presentation\",hidden:x?void 0:!0},n&&t.createElement(\"div\",{ref:b,\"cmdk-group-heading\":\"\",\"aria-hidden\":!0,id:m},n),B(r,S=>t.createElement(\"div\",{\"cmdk-group-items\":\"\",role:\"group\",\"aria-labelledby\":n?m:void 0},t.createElement(fe.Provider,{value:C},S))))}),ye=t.forwardRef((r,o)=>{let{alwaysRender:n,...u}=r,c=t.useRef(null),d=P(f=>!f.search);return!n&&!d?null:t.createElement(D.div,{ref:G(c,o),...u,\"cmdk-separator\":\"\",role:\"separator\"})}),Se=t.forwardRef((r,o)=>{let{onValueChange:n,...u}=r,c=r.value!=null,d=ee(),f=P(m=>m.search),p=P(m=>m.selectedItemId),b=K();return t.useEffect(()=>{r.value!=null&&d.setState(\"search\",r.value)},[r.value]),t.createElement(D.input,{ref:o,...u,\"cmdk-input\":\"\",autoComplete:\"off\",autoCorrect:\"off\",spellCheck:!1,\"aria-autocomplete\":\"list\",role:\"combobox\",\"aria-expanded\":!0,\"aria-controls\":b.listId,\"aria-labelledby\":b.labelId,\"aria-activedescendant\":p,id:b.inputId,type:\"text\",value:c?r.value:f,onChange:m=>{c||d.setState(\"search\",m.target.value),n==null||n(m.target.value)}})}),Ce=t.forwardRef((r,o)=>{let{children:n,label:u=\"Suggestions\",...c}=r,d=t.useRef(null),f=t.useRef(null),p=P(m=>m.selectedItemId),b=K();return t.useEffect(()=>{if(f.current&&d.current){let m=f.current,R=d.current,x,C=new ResizeObserver(()=>{x=requestAnimationFrame(()=>{let S=m.offsetHeight;R.style.setProperty(\"--cmdk-list-height\",S.toFixed(1)+\"px\")})});return C.observe(m),()=>{cancelAnimationFrame(x),C.unobserve(m)}}},[]),t.createElement(D.div,{ref:G(d,o),...c,\"cmdk-list\":\"\",role:\"listbox\",tabIndex:-1,\"aria-activedescendant\":p,\"aria-label\":u,id:b.listId},B(r,m=>t.createElement(\"div\",{ref:G(f,b.listInnerRef),\"cmdk-list-sizer\":\"\"},m)))}),xe=t.forwardRef((r,o)=>{let{open:n,onOpenChange:u,overlayClassName:c,contentClassName:d,container:f,...p}=r;return t.createElement(w.Root,{open:n,onOpenChange:u},t.createElement(w.Portal,{container:f},t.createElement(w.Overlay,{\"cmdk-overlay\":\"\",className:c}),t.createElement(w.Content,{\"aria-label\":r.label,\"cmdk-dialog\":\"\",className:d},t.createElement(me,{ref:o,...p}))))}),Ie=t.forwardRef((r,o)=>P(u=>u.filtered.count===0)?t.createElement(D.div,{ref:o,...r,\"cmdk-empty\":\"\",role:\"presentation\"}):null),Pe=t.forwardRef((r,o)=>{let{progress:n,children:u,label:c=\"Loading...\",...d}=r;return t.createElement(D.div,{ref:o,...d,\"cmdk-loading\":\"\",role:\"progressbar\",\"aria-valuenow\":n,\"aria-valuemin\":0,\"aria-valuemax\":100,\"aria-label\":c},B(r,f=>t.createElement(\"div\",{\"aria-hidden\":!0},f)))}),_e=Object.assign(me,{List:Ce,Item:he,Input:Se,Group:Ee,Separator:ye,Dialog:xe,Empty:Ie,Loading:Pe});function we(r,o){let n=r.nextElementSibling;for(;n;){if(n.matches(o))return n;n=n.nextElementSibling}}function De(r,o){let n=r.previousElementSibling;for(;n;){if(n.matches(o))return n;n=n.previousElementSibling}}function pe(r){let o=t.useRef(r);return k(()=>{o.current=r}),o}var k=typeof window==\"undefined\"?t.useEffect:t.useLayoutEffect;function L(r){let o=t.useRef();return o.current===void 0&&(o.current=r()),o}function P(r){let o=ee(),n=()=>r(o.snapshot());return t.useSyncExternalStore(o.subscribe,n,n)}function ve(r,o,n,u=[]){let c=t.useRef(),d=K();return k(()=>{var b;let f=(()=>{var m;for(let R of n){if(typeof R==\"string\")return R.trim();if(typeof R==\"object\"&&\"current\"in R)return R.current?(m=R.current.textContent)==null?void 0:m.trim():c.current}})(),p=u.map(m=>m.trim());d.value(r,f,p),(b=o.current)==null||b.setAttribute(T,f),c.current=f}),c}var ke=()=>{let[r,o]=t.useState(),n=L(()=>new Map);return k(()=>{n.current.forEach(u=>u()),n.current=new Map},[r]),(u,c)=>{n.current.set(u,c),o({})}};function Me(r){let o=r.type;return typeof o==\"function\"?o(r.props):\"render\"in o?o.render(r.props):r}function B({asChild:r,children:o},n){return r&&t.isValidElement(o)?t.cloneElement(Me(o),{ref:o.ref},n(o.props.children)):n(o)}var Te={position:\"absolute\",width:\"1px\",height:\"1px\",padding:\"0\",margin:\"-1px\",overflow:\"hidden\",clip:\"rect(0, 0, 0, 0)\",whiteSpace:\"nowrap\",borderWidth:\"0\"};export{_e as Command,xe as CommandDialog,Ie as CommandEmpty,Ee as CommandGroup,Se as CommandInput,he as CommandItem,Ce as CommandList,Pe as CommandLoading,me as CommandRoot,ye as CommandSeparator,Re as defaultFilter,P as useCommandState};\n","\"use client\"\n\nimport * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","\"use client\"\n\nimport * as React from \"react\"\nimport { Check, ChevronsUpDown } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n} from \"@/components/ui/command\"\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\"\n\nexport interface ComboboxOption {\n  value: string\n  label: string\n}\n\ninterface ComboboxProps {\n  options: ComboboxOption[]\n  value: string\n  onValueChange: (value: string) => void\n  placeholder?: string\n  searchPlaceholder?: string\n  emptyText?: string\n  className?: string\n}\n\nexport function Combobox({\n  options,\n  value,\n  onValueChange,\n  placeholder = \"선택...\",\n  searchPlaceholder = \"검색...\",\n  emptyText = \"결과가 없습니다.\",\n  className,\n}: ComboboxProps) {\n  const [open, setOpen] = React.useState(false)\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"outline\"\n          role=\"combobox\"\n          aria-expanded={open}\n          className={cn(\n            \"w-full justify-between h-9 text-sm font-normal\",\n            className\n          )}\n        >\n          {value\n            ? options.find((option) => option.value === value)?.label\n            : placeholder}\n          <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-full p-0\" align=\"start\">\n        <Command>\n          <CommandInput placeholder={searchPlaceholder} className=\"h-9\" />\n          <CommandEmpty>{emptyText}</CommandEmpty>\n          <CommandGroup className=\"max-h-[300px] overflow-auto\">\n            {options.map((option) => (\n              <CommandItem\n                key={option.value}\n                value={option.label}\n                onSelect={() => {\n                  onValueChange(option.value === value ? \"\" : option.value)\n                  setOpen(false)\n                }}\n              >\n                <Check\n                  className={cn(\n                    \"mr-2 h-4 w-4\",\n                    value === option.value ? \"opacity-100\" : \"opacity-0\"\n                  )}\n                />\n                {option.label}\n              </CommandItem>\n            ))}\n          </CommandGroup>\n        </Command>\n      </PopoverContent>\n    </Popover>\n  )\n}","\nimport { useState, lazy, Suspense, useEffect } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { usePurchaseData } from \"@/hooks/usePurchaseData\";\nimport { useFastPurchaseFilters } from \"@/hooks/useFastPurchaseFilters\";\nimport FastPurchaseTable from \"@/components/purchase/FastPurchaseTable\";\n\nimport { Search, Filter, Plus, Package } from \"lucide-react\";\nimport { generatePurchaseOrderExcelJS, PurchaseOrderData } from \"@/utils/exceljs/generatePurchaseOrderExcel\";\nimport { Input } from \"@/components/ui/input\";\n\n// Lazy load modal for better performance\nconst PurchaseItemsModal = lazy(() => import(\"@/components/purchase/PurchaseItemsModal\"));\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Combobox, ComboboxOption } from \"@/components/ui/combobox\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\n// Tabs 컴포넌트를 제거하고 직접 구현 (hanslwebapp 방식)\nimport { Button } from \"@/components/ui/button\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { format } from \"date-fns\";\nimport { toast } from \"sonner\";\nimport { Purchase } from \"@/types/purchase\";\n\ninterface PurchaseListMainProps {\n  onEmailToggle?: () => void;\n  showEmailButton?: boolean;\n}\n\n// 화면 상단의 탭(진행상태별) 목록\nconst NAV_TABS: { key: string; label: string }[] = [\n  { key: 'pending', label: '승인대기' },\n  { key: 'purchase', label: '구매 현황' },\n  { key: 'receipt', label: '입고 현황' },\n  { key: 'done', label: '전체 항목' },\n];\n\n// 발주 목록 메인 컴포넌트\nexport default function PurchaseListMain({ onEmailToggle, showEmailButton = true }: PurchaseListMainProps) {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const supabase = createClient();\n  const [editingId, setEditingId] = useState<number | null>(null);\n  const [editingData, setEditingData] = useState<any>({});\n  const [selectedPurchase, setSelectedPurchase] = useState<Purchase | null>(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  \n  // 발주 데이터 및 사용자 정보\n  const {\n    purchases,\n    vendors,\n    employees,\n    loading,\n    currentUserRoles,\n    currentUserName,\n    currentUserEmail,\n    currentUserId,\n    refreshPurchases: loadPurchases\n  } = usePurchaseData();\n  \n  const isAdmin = currentUserRoles?.includes('app_admin');\n\n  // 필터링 및 탭 관리\n  const {\n    activeTab,\n    searchTerm,\n    vendorFilter,\n    dateFromFilter,\n    dateToFilter,\n    selectedEmployee,\n    purchaseNumberFilter,\n    itemNameFilter,\n    specificationFilter,\n    approvalStatusFilter,\n    remarkFilter,\n    setActiveTab,\n    setSearchTerm,\n    setVendorFilter,\n    setDateFromFilter,\n    setDateToFilter,\n    setSelectedEmployee,\n    setPurchaseNumberFilter,\n    setItemNameFilter,\n    setSpecificationFilter,\n    setApprovalStatusFilter,\n    setRemarkFilter,\n    filteredPurchases,\n    tabCounts\n  } = useFastPurchaseFilters(purchases, currentUserRoles, currentUserName, currentUserId, currentUserEmail);\n  \n  // URL 쿼리 파라미터에서 탭 설정\n  useEffect(() => {\n    const searchParams = new URLSearchParams(location.search);\n    const tab = searchParams.get('tab');\n    if (tab === 'purchase') {\n      setActiveTab('purchase');\n    }\n  }, [location.search, setActiveTab]);\n  \n\n  // 상태에 따른 배지 생성\n  const getStatusBadge = (purchase: Purchase) => {\n    if (purchase.is_received) {\n      return <Badge className=\"bg-green-50 text-green-700\">입고완료</Badge>;\n    } else if (purchase.middle_manager_status === 'approved' && purchase.final_manager_status === 'approved') {\n      return <Badge className=\"bg-hansl-50 text-hansl-700\">구매진행</Badge>;\n    } else if (purchase.middle_manager_status === 'rejected' || purchase.final_manager_status === 'rejected') {\n      return <Badge className=\"bg-red-50 text-red-700\">반려</Badge>;\n    } else {\n      return <Badge className=\"bg-yellow-50 text-yellow-700\">승인대기</Badge>;\n    }\n  };\n\n  // 입고 현황 계산\n  const getReceiptProgress = (purchase: Purchase) => {\n    if (!purchase.items || purchase.items.length === 0) return { received: 0, total: 0, percentage: 0 };\n    \n    const total = purchase.items.length;\n    const received = purchase.items.filter(item => item.is_received || item.delivery_status === 'received').length;\n    const percentage = total > 0 ? Math.round((received / total) * 100) : 0;\n    \n    return { received, total, percentage };\n  };\n\n  // 선진행 체크 함수\n  const isAdvancePayment = (progress_type?: string) => {\n    return progress_type === '선진행' || progress_type?.trim() === '선진행' || progress_type?.includes('선진행');\n  };\n\n  // 편집 시작\n  const handleEditStart = (purchase: Purchase) => {\n    if (!currentUserRoles || !currentUserRoles.includes('app_admin')) return;\n    setEditingId(purchase.id);\n    setEditingData({\n      vendor_name: purchase.vendor_name,\n      project_vendor: purchase.project_vendor,\n      sales_order_number: purchase.sales_order_number,\n      project_item: purchase.project_item,\n      delivery_request_date: purchase.delivery_request_date ? \n        purchase.delivery_request_date.split('T')[0] : '',\n      total_amount: purchase.total_amount,\n    });\n  };\n\n  // 편집 저장\n  const handleEditSave = async () => {\n    if (!currentUserRoles || !currentUserRoles.includes('app_admin') || !editingId) return;\n    \n    try {\n      const { error } = await supabase\n        .from('purchase_requests')\n        .update(editingData)\n        .eq('id', editingId);\n\n      if (error) throw error;\n\n      toast.success('수정이 완료되었습니다.');\n      setEditingId(null);\n      setEditingData({});\n      await loadPurchases();\n    } catch (error) {\n      toast.error('수정 중 오류가 발생했습니다.');\n    }\n  };\n\n  // 편집 취소\n  const handleEditCancel = () => {\n    setEditingId(null);\n    setEditingData({});\n  };\n\n  // 엑셀 다운로드\n  const handleExcelDownload = async (purchase: Purchase) => {\n    try {\n      // DB에서 직접 모든 품목 조회\n      const { data: purchaseRequest, error: requestError } = await supabase\n        .from('purchase_requests')\n        .select('*')\n        .eq('purchase_order_number', purchase.purchase_order_number)\n        .single();\n\n      if (requestError || !purchaseRequest) {\n        toast.error('해당 발주요청번호의 데이터를 찾을 수 없습니다.');\n        return;\n      }\n\n      // 품목 데이터 조회\n      const { data: orderItems, error: itemsError } = await supabase\n        .from('purchase_request_items')\n        .select('*')\n        .eq('purchase_order_number', purchase.purchase_order_number)\n        .order('line_number');\n\n      if (itemsError || !orderItems || orderItems.length === 0) {\n        toast.error('해당 발주요청번호의 품목 데이터를 찾을 수 없습니다.');\n        return;\n      }\n\n      // 업체 상세 정보 및 담당자 정보 조회\n      const vendorInfo = {\n        vendor_name: purchase.vendor_name,\n        vendor_phone: '',\n        vendor_fax: '',\n        vendor_contact_name: '',\n        vendor_payment_schedule: ''\n      };\n\n      try {\n        const vendorId = purchaseRequest.vendor_id || purchase.vendor_id;\n        const contactId = purchaseRequest.contact_id || purchase.contact_id;\n        \n        // vendor 정보 조회\n        if (vendorId) {\n          const { data: vendorData, error: vendorError } = await supabase\n            .from('vendors')\n            .select('vendor_phone, vendor_fax, vendor_payment_schedule')\n            .eq('id', vendorId)\n            .single();\n\n          if (vendorData && !vendorError) {\n            vendorInfo.vendor_phone = vendorData.vendor_phone || '';\n            vendorInfo.vendor_fax = vendorData.vendor_fax || '';\n            vendorInfo.vendor_payment_schedule = vendorData.vendor_payment_schedule || '';\n          }\n        }\n\n        // vendor_contacts에서 contact_id로 담당자 정보 조회\n        if (contactId) {\n          const { data: contactData, error: contactError } = await supabase\n            .from('vendor_contacts')\n            .select('contact_name, contact_phone, contact_email')\n            .eq('id', contactId)\n            .single();\n          if (contactData && !contactError) {\n            vendorInfo.vendor_contact_name = contactData.contact_name || '';\n          }\n        }\n      } catch (error) {\n      }\n\n      const excelData: PurchaseOrderData = {\n        purchase_order_number: purchaseRequest.purchase_order_number || '',\n        request_date: purchaseRequest.request_date,\n        delivery_request_date: purchaseRequest.delivery_request_date,\n        requester_name: purchaseRequest.requester_name,\n        vendor_name: vendorInfo.vendor_name || '',\n        vendor_contact_name: vendorInfo.vendor_contact_name,\n        vendor_phone: vendorInfo.vendor_phone,\n        vendor_fax: vendorInfo.vendor_fax,\n        project_vendor: purchaseRequest.project_vendor,\n        sales_order_number: purchaseRequest.sales_order_number,\n        project_item: purchaseRequest.project_item,\n        vendor_payment_schedule: vendorInfo.vendor_payment_schedule,\n        items: orderItems.map((item: any) => ({\n          line_number: item.line_number,\n          item_name: item.item_name,\n          specification: item.specification,\n          quantity: item.quantity,\n          unit_price_value: item.unit_price_value,\n          amount_value: item.amount_value,\n          remark: item.remark,\n          currency: purchaseRequest.currency || 'KRW'\n        }))\n      };\n\n      // 코드 기반 ExcelJS 생성 (템플릿 없이 서식 직접 정의)\n      const blob = await generatePurchaseOrderExcelJS(excelData);\n      \n      // 다운로드용 파일명: 발주서_{업체명}_발주요청번호\n      const downloadFilename = `발주서_${excelData.vendor_name}_${excelData.purchase_order_number}.xlsx`;\n\n      // 사용자에게 즉시 다운로드 제공\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = downloadFilename;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n      \n      toast.success('엑셀 파일이 다운로드되었습니다.');\n      \n      // DB에 다운로드 완료 플래그(is_po_download) 업데이트 - lead buyer만 해당\n      try {\n        const isLeadBuyer = currentUserRoles && currentUserRoles.includes('lead buyer');\n\n        if (isLeadBuyer) {\n          const { error: downloadFlagErr } = await supabase\n            .from('purchase_requests')\n            .update({ is_po_download: true })\n            .eq('purchase_order_number', purchase.purchase_order_number);\n          if (downloadFlagErr) {\n          } else {\n            // 화면 업데이트\n            await loadPurchases();\n          }\n        }\n      } catch (flagErr) {\n      }\n    } catch (error) {\n      toast.error('엑셀 다운로드에 실패했습니다.');\n    }\n  };\n\n  // 최적화된 핸들러들\n  const handleReceiptComplete = async (purchaseId: number) => {\n    try {\n      const { error } = await supabase\n        .from('purchase_requests')\n        .update({ \n          is_received: true,\n          received_at: new Date().toISOString()\n        })\n        .eq('id', purchaseId);\n\n      if (error) throw error;\n      \n      // 개별 품목도 모두 입고완료 처리\n      await supabase\n        .from('purchase_request_items')\n        .update({ \n          is_received: true,\n          delivery_status: 'received'\n        })\n        .eq('purchase_request_id', purchaseId);\n      \n      toast.success('입고완료 처리되었습니다.');\n      await loadPurchases();\n    } catch (error) {\n      toast.error('처리 중 오류가 발생했습니다.');\n    }\n  };\n\n  const handlePaymentComplete = async (purchaseId: number) => {\n    try {\n      const { error } = await supabase\n        .from('purchase_requests')\n        .update({ \n          is_payment_completed: true,\n          payment_completed_at: new Date().toISOString()\n        })\n        .eq('id', purchaseId);\n\n      if (error) throw error;\n      \n      toast.success('구매완료 처리되었습니다.');\n      await loadPurchases();\n    } catch (error) {\n      toast.error('처리 중 오류가 발생했습니다.');\n    }\n  };\n\n  const handleItemsClick = (purchase: Purchase) => {\n    setSelectedPurchase(purchase);\n    setIsModalOpen(true);\n  };\n\n  return (\n    <div className=\"w-full\">\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">발주요청 관리</h1>\n          <p className=\"text-sm text-gray-600 mt-1\">발주요청서를 관리하고 승인 처리를 할 수 있습니다</p>\n        </div>\n        <Button \n          onClick={() => navigate('/purchase/new')}\n          className=\"mt-4 sm:mt-0 bg-hansl-500 hover:bg-hansl-600\"\n        >\n          <Plus className=\"w-4 h-4 mr-2\" />\n          새 발주요청 작성\n        </Button>\n      </div>\n\n      {/* 필터 섹션 */}\n      <Card className=\"mb-4 border border-gray-200\">\n        <CardHeader className=\"bg-white border-b border-gray-200 py-3\">\n          <CardTitle className=\"flex items-center text-gray-900 text-sm font-medium\">\n            <Filter className=\"w-4 h-4 mr-2\" />\n            검색 필터\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"py-3\">\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-2\">\n            <div>\n              <label className=\"block text-xs font-medium text-gray-600 mb-1\">시작일</label>\n              <Input\n                type=\"date\"\n                value={dateFromFilter}\n                onChange={(e) => setDateFromFilter(e.target.value)}\n                className=\"text-sm h-9\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-xs font-medium text-gray-600 mb-1\">종료일</label>\n              <Input\n                type=\"date\"\n                value={dateToFilter}\n                onChange={(e) => setDateToFilter(e.target.value)}\n                className=\"text-sm h-9\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-xs font-medium text-gray-600 mb-1\">요청자</label>\n              <Combobox\n                value={selectedEmployee || \"all\"}\n                onValueChange={(value) => {\n                  setSelectedEmployee(value);\n                }}\n                options={[\n                  { value: \"all\", label: \"전체\" },\n                  ...employees\n                    .filter(emp => emp.name && emp.name.trim() !== '')\n                    .sort((a, b) => (a.name || '').localeCompare(b.name || ''))\n                    .map((employee): ComboboxOption => ({\n                      value: employee.name || '',\n                      label: `${employee.name}${employee.name === currentUserName ? \" (나)\" : \"\"}`\n                    }))\n                ]}\n                placeholder={selectedEmployee === \"all\" ? \"전체\" : selectedEmployee || \"선택\"}\n                searchPlaceholder=\"직원 이름 검색...\"\n                emptyText=\"일치하는 직원이 없습니다\"\n                className=\"text-sm\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-xs font-medium text-gray-600 mb-1\">업체</label>\n              <Select value={vendorFilter || \"all\"} onValueChange={(value) => setVendorFilter(value === \"all\" ? \"\" : value)}>\n                <SelectTrigger className=\"h-9 text-sm\">\n                  <SelectValue placeholder=\"전체\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">전체</SelectItem>\n                  {vendors.map((vendor) => (\n                    <SelectItem key={vendor.id} value={vendor.vendor_name}>\n                      {vendor.vendor_name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div>\n              <label className=\"block text-xs font-medium text-gray-600 mb-1\">발주번호</label>\n              <Input\n                placeholder=\"번호\"\n                value={purchaseNumberFilter}\n                onChange={(e) => setPurchaseNumberFilter(e.target.value)}\n                className=\"text-sm h-9\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-xs font-medium text-gray-600 mb-1\">품명</label>\n              <Input\n                placeholder=\"품명\"\n                value={itemNameFilter}\n                onChange={(e) => setItemNameFilter(e.target.value)}\n                className=\"text-sm h-9\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-xs font-medium text-gray-600 mb-1\">승인상태</label>\n              <Select \n                value={approvalStatusFilter || \"all\"} \n                onValueChange={(value) => setApprovalStatusFilter(value === \"all\" ? \"\" : value)}\n              >\n                <SelectTrigger className=\"h-9 text-sm\">\n                  <SelectValue placeholder=\"전체\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">전체</SelectItem>\n                  <SelectItem value=\"pending\">대기</SelectItem>\n                  <SelectItem value=\"approved\">승인</SelectItem>\n                  <SelectItem value=\"rejected\">반려</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"col-span-2 sm:col-span-1\">\n              <label className=\"block text-xs font-medium text-gray-600 mb-1\">통합검색</label>\n              <div className=\"relative\">\n                <Search className=\"absolute left-2 top-1/2 transform -translate-y-1/2 w-3 h-3 text-gray-400\" />\n                <Input\n                  placeholder=\"검색...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"pl-7 text-sm h-9\"\n                />\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* 직접 구현한 탭 (hanslwebapp 방식) - 빠른 성능 */}\n      <div className=\"space-y-3\">\n        {/* 탭 버튼들 - 모바일 반응형 개선 */}\n        <div className=\"flex flex-col sm:flex-row sm:space-x-1 space-y-1 sm:space-y-0 bg-gray-50 p-1 rounded-lg border border-gray-200\">\n          {NAV_TABS.map((tab) => (\n            <button\n              key={tab.key}\n              onClick={() => setActiveTab(tab.key)}\n              className={`flex-1 flex items-center justify-center space-x-2 py-2.5 px-3 sm:px-4 rounded-md text-xs sm:text-sm font-medium transition-colors ${\n                activeTab === tab.key\n                  ? 'text-hansl-600 bg-white shadow-sm border border-gray-200'\n                  : 'text-gray-600 bg-transparent hover:text-gray-900 hover:bg-white/50'\n              }`}\n            >\n              <span className=\"whitespace-nowrap\">{tab.label}</span>\n              <Badge \n                variant=\"secondary\" \n                className={`text-[10px] sm:text-xs ${\n                  activeTab === tab.key \n                    ? 'bg-hansl-50 text-hansl-700' \n                    : 'bg-gray-100 text-gray-600'\n                }`}\n              >\n                {tabCounts[tab.key as keyof typeof tabCounts]}\n              </Badge>\n            </button>\n          ))}\n        </div>\n\n        {/* 탭 콘텐츠 */}\n        <Card className=\"overflow-hidden border border-gray-200\">\n          <CardContent className=\"p-0\">\n            {loading ? (\n              <div className=\"flex items-center justify-center py-12\">\n                <div className=\"w-8 h-8 border-2 border-hansl-500 border-t-transparent rounded-full animate-spin\" />\n                <span className=\"ml-3 text-gray-600\">로딩 중...</span>\n              </div>\n            ) : filteredPurchases.length === 0 ? (\n              <div className=\"text-center py-12\">\n                <Package className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">발주요청서가 없습니다</h3>\n                <p className=\"text-gray-600\">새로운 발주요청서를 작성해보세요.</p>\n              </div>\n            ) : (\n              <FastPurchaseTable \n                purchases={filteredPurchases} \n                activeTab={activeTab}\n                currentUserRoles={currentUserRoles}\n                onRefresh={loadPurchases}\n                onPaymentComplete={handlePaymentComplete}\n                onReceiptComplete={handleReceiptComplete}\n              />\n            )}\n          </CardContent>\n        </Card>\n      </div>\n      \n      {/* 세부항목 모달 */}\n      {selectedPurchase && (\n        <Suspense fallback={<div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\"><div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-white\"></div></div>}>\n          <PurchaseItemsModal\n            isOpen={isModalOpen}\n            onClose={() => {\n              setIsModalOpen(false);\n              setSelectedPurchase(null);\n            }}\n            purchase={{\n              ...selectedPurchase,\n              vendor_name: selectedPurchase.vendor_name || '',\n              project_vendor: selectedPurchase.project_vendor || '',\n              sales_order_number: selectedPurchase.sales_order_number || '',\n              project_item: selectedPurchase.project_item || ''\n            }}\n            isAdmin={isAdmin || false}\n            onUpdate={loadPurchases}\n          />\n        </Suspense>\n      )}\n    </div>\n  );\n}"],"file":"assets/PurchaseListMain-ArtCFsgK.js"}