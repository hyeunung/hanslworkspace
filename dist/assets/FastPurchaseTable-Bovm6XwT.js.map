{"version":3,"mappings":"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","names":["formatDate","dateStr","d","Date","isNaN","getTime","getFullYear","String","getMonth","padStart","getDate","getCurrencySymbol","currency","includes","StatusBadge","memo","purchase","status","is_received","middle_manager_status","final_manager_status","text","className","completed","inProgress","rejected","pending","Badge","children","displayName","MobilePurchaseCard","onClick","receiptProgress","items","length","received","total","percentage","filter","item","delivery_status","Math","round","getReceiptProgress","isAdvance","progress_type","jsxs","jsx","purchase_order_number","formatDateShort","request_date","requester_name","vendor_name","project_vendor","project_item","sales_order_number","item_name","amount_value","total_amount","toLocaleString","style","width","is_payment_completed","Eye","ROOT_NAME","createAlertDialogContext","createAlertDialogScope","createContextScope","createDialogScope","useDialogScope","AlertDialog","props","__scopeAlertDialog","alertDialogProps","dialogScope","DialogPrimitive.Root","modal","React.forwardRef","forwardedRef","triggerProps","DialogPrimitive.Trigger","ref","AlertDialogPortal","portalProps","DialogPrimitive.Portal","AlertDialogOverlay","overlayProps","DialogPrimitive.Overlay","CONTENT_NAME","AlertDialogContentProvider","useAlertDialogContentContext","Slottable","createSlottable","AlertDialogContent","contentProps","contentRef","React.useRef","composedRefs","useComposedRefs","cancelRef","DialogPrimitive.WarningProvider","contentName","titleName","TITLE_NAME","docsSlug","scope","DialogPrimitive.Content","role","onOpenAutoFocus","composeEventHandlers","event","preventDefault","current","focus","preventScroll","onPointerDownOutside","onInteractOutside","DescriptionWarning","AlertDialogTitle","titleProps","DialogPrimitive.Title","DESCRIPTION_NAME","AlertDialogDescription","descriptionProps","DialogPrimitive.Description","AlertDialogAction","actionProps","DialogPrimitive.Close","CANCEL_NAME","AlertDialogCancel","cancelProps","MESSAGE","React.useEffect","document","getElementById","getAttribute","Overlay2","Content2","Action","Cancel","Title2","Description2","AlertDialogPrimitive.Overlay","cn","AlertDialogPrimitive.Content","AlertDialogHeader","AlertDialogFooter","AlertDialogPrimitive.Title","AlertDialogPrimitive.Description","AlertDialogPrimitive.Action","buttonVariants","AlertDialogPrimitive.Cancel","variant","COMMON_COLUMN_CLASSES","ApprovalStatusBadge","middleApproved","middleRejected","finalApproved","finalRejected","type","TableRow","activeTab","isLeadBuyer","onPaymentComplete","onReceiptComplete","onExcelDownload","paymentProgress","getPaymentProgress","purchaseProgress","receivedItems","paymentCompletedItems","receiptPercentage","min","paymentPercentage","getPurchaseProgress","src","alt","height","is_po_download","async","e","stopPropagation","pointerEvents","title","payment_category","contact_name","delivery_request_date","revised_delivery_request_date","specification","quantity","unit_price_value","Fragment","remark","link","href","target","rel","vendor_payment_schedule","FastPurchaseTable","purchases","currentUserRoles","onRefresh","selectedPurchaseId","setSelectedPurchaseId","useState","isModalOpen","setIsModalOpen","deleteConfirmOpen","setDeleteConfirmOpen","purchaseToDelete","setPurchaseToDelete","supabase","createClient","handleRowClick","id","handleExcelDownload","data","purchaseRequest","error","requestError","from","select","eq","single","toast","orderItems","itemsError","order","vendorInfo","vendor_phone","vendor_fax","vendor_contact_name","vendorId","vendor_id","contactId","contact_id","vendorData","contactData","excelData","map","line_number","blob","workbook","__vitePreload","import","then","n","__VITE_PRELOAD__","Workbook","sheet","addWorksheet","pageSetup","paperSize","orientation","fitToPage","fitToWidth","fitToHeight","horizontalCentered","verticalCentered","margins","left","right","top","bottom","header","footer","getRow","r","eachCell","cell","font","name","size","mergeCells","response","fetch","arrayBuffer","imageId","addImage","buffer","extension","dWidth","getColumn","logoWidth","max","logoHeight","logoCol","logoRow","tl","col","row","ext","_e","getCell","value","alignment","horizontal","vertical","indent","bold","tableHeaders","i","fromCharCode","sortedItems","sort","a","b","itemRows","sumRow","rowIdx","bCell","unitSymbol","unitWithCurrency","trim","amountSymbol","amountWithCurrency","gCell","wrapText","shrinkToFit","c","totalSymbol","totalAmount","reduce","sum","lastRow","cellAddr","isItemRow","border","currentBorder","sumCellBorder","Object","entries","A","B","C","D","E","F","G","forEach","xlsx","writeBuffer","Blob","generatePurchaseOrderExcelJS","downloadFilename","url","window","URL","createObjectURL","createElement","download","body","appendChild","click","removeChild","revokeObjectURL","success","downloadFlagErr","update","flagErr","tableHeader","useMemo","baseHeaders","additionalHeaders","PurchaseDetailModal","purchaseId","isOpen","onClose","onDelete","open","onOpenChange","logger","debug","user","authError","auth","getUser","employee","empError","email","roles","purchase_role","Array","isArray","split","canEdit","isApproved","isRequester","canDeleteThis","userRoles","deletedItems","delete","code","message","details","hint","deletedItemsCount","purchaseRequestId","deletedRequest","deletedRequestId","errorObj","stack"],"ignoreList":[2],"sources":["../../src/utils/exceljs/generatePurchaseOrderExcel.ts","../../src/components/purchase/MobilePurchaseCard.tsx","../../node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","../../src/components/ui/alert-dialog.tsx","../../src/components/purchase/FastPurchaseTable.tsx"],"sourcesContent":["// hanslwebapp과 동일한 코드 기반 Excel 생성\n\nexport interface PurchaseOrderData {\n  purchase_order_number: string;\n  request_date: string;\n  delivery_request_date: string;\n  requester_name: string;\n  vendor_name: string;\n  vendor_contact_name?: string;\n  vendor_phone?: string;\n  vendor_fax?: string;\n  project_vendor: string;\n  sales_order_number: string;\n  project_item: string;\n  items: PurchaseOrderItem[];\n  vendor_payment_schedule?: string;\n}\n\nexport interface PurchaseOrderItem {\n  line_number: number;\n  item_name: string;\n  specification: string;\n  quantity: number;\n  unit_price_value: number;\n  amount_value: number;\n  remark: string;\n  currency: string;\n}\n\nfunction formatDate(dateStr: string): string {\n  if (!dateStr) return '';\n  const d = new Date(dateStr);\n  if (isNaN(d.getTime())) return dateStr;\n  return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;\n}\n\n// Helper: currency code to symbol\nfunction getCurrencySymbol(currency: string) {\n  if (!currency) return '';\n  if (['KRW', '원', '₩'].includes(currency)) return '₩';\n  if (['USD', '$', '달러'].includes(currency)) return '$';\n  if (['EUR', '€'].includes(currency)) return '€';\n  if (['JPY', '엔', '¥'].includes(currency)) return '¥';\n  if (['CNY', '위안', '元'].includes(currency)) return '¥';\n  return currency;\n}\n\n/**\n * 엑셀 발주서 생성 (ExcelJS) - hanslwebapp과 동일한 방식\n * @param data PurchaseOrderData\n * @returns Blob (xlsx)\n */\nexport async function generatePurchaseOrderExcelJS(data: PurchaseOrderData): Promise<Blob> {\n  // ExcelJS를 동적으로 import하여 초기 번들 크기 감소\n  const ExcelJS = await import('exceljs');\n  const workbook = new ExcelJS.Workbook();\n  \n  const sheet = workbook.addWorksheet('발주서', {\n    pageSetup: {\n      paperSize: 9, // A4\n      orientation: 'portrait',\n      fitToPage: true,\n      fitToWidth: 1,\n      fitToHeight: 1,\n      horizontalCentered: true,\n      verticalCentered: true,\n      margins: {\n        left: 0.3,\n        right: 0.3,\n        top: 0.5,\n        bottom: 0.5,\n        header: 0.2,\n        footer: 0.2\n      }\n    }\n  });\n\n  // 행 높이 고정: 1행 39.75px(≈29.8pt), 2행부터 18px(≈13.5pt)\n  sheet.getRow(1).height = 29.8; // 39.75px\n  for (let r = 2; r <= 60; r++) {\n    sheet.getRow(r).height = 15.75; // 21px≈15.75pt\n  }\n  // 폰트 기본값: 맑은고딕, 크기 11 (2행부터), 1행은 20\n  // 1행\n  sheet.getRow(1).eachCell(cell => {\n    cell.font = { ...(cell.font || {}), name: '맑은 고딕', size: 20 };\n  });\n\n  // 나머지 행 기본 폰트 설정 (필요시 뒤에서 개별 셀에서 다시 bold 지정)\n  for (let r = 2; r <= 60; r++) {\n    sheet.getRow(r).eachCell(cell => {\n      cell.font = { ...(cell.font || {}), name: '맑은 고딕', size: 11 };\n    });\n  }\n\n  // 1. 병합 범위 템플릿과 1:1 적용\n  sheet.mergeCells('A1:G1');\n  sheet.mergeCells('A2:B2'); sheet.mergeCells('C2:D2'); sheet.mergeCells('F2:G2');\n  sheet.mergeCells('A3:B3'); sheet.mergeCells('C3:D3'); sheet.mergeCells('F3:G3');\n  sheet.mergeCells('A4:B4'); sheet.mergeCells('C4:D4'); sheet.mergeCells('F4:G4');\n  sheet.mergeCells('A5:B5'); sheet.mergeCells('C5:D5'); sheet.mergeCells('F5:G5');\n  sheet.mergeCells('A6:B6'); sheet.mergeCells('C6:D6'); sheet.mergeCells('F6:G6');\n  sheet.mergeCells('A7:B7'); sheet.mergeCells('C7:D7'); sheet.mergeCells('F7:G7');\n  // 8~46행(헤더/품목/합계) 병합 없음\n  // 합계가 들어가는 행에 맞춰 병합 범위도 동적으로 이동\n  // (아래에서 sumRow 계산 후 병합)\n\n  try {\n    const response = await fetch('/logo_KOR.png');\n    const arrayBuffer = await response.arrayBuffer();\n    const imageId = workbook.addImage({\n      buffer: arrayBuffer,\n      extension: 'png',\n    });\n    // 로고(이모티콘)는 너비 0.58col, '발주서' 글자 바로 왼쪽에 딱 붙게 배치\n    // D열 width가 undefined/null/0이면 기본값 22로 대체\n    const dWidth = sheet.getColumn('D').width || 22;\n    const logoWidth = Math.max(1, dWidth * 7.2 * 0.58) + 4; // 기존보다 4px 더 크게\n    const logoHeight = 30 + 4; // 기존 30에서 4px 더 크게\n    // D1 셀 중앙(3.5, 0.5)에서 왼쪽 2px(0.28col), 위로 2px(0.13row) 이동\n    const logoCol = 3.5 - 0.50;\n    const logoRow = 0.5 - 0.20;\n    sheet.addImage(imageId, {\n      tl: { col: logoCol, row: logoRow }, // D1 셀 중앙에서 왼쪽 2px, 위로 2px 이동\n      ext: { width: logoWidth, height: logoHeight },\n    });\n  } catch (_e) {\n    // Logo loading failed, continue without logo\n  }\n\n  // 2. 제목 (B1:H1 병합, 중앙정렬)\n  sheet.getCell('D1').value = '                발 주 서';\n  sheet.getCell('D1').alignment = { horizontal: 'left', vertical: 'middle', indent: 1 };\n  sheet.getCell('D1').font = { bold: true, size: 20 };\n\n  // 3. 상단 정보 고정 라벨 적용 (공백 포함)\n  sheet.getCell('A2').value = '업   체   명';\n  sheet.getCell('A2').font = { bold: true };\n  sheet.getCell('A3').value = '담   당   자';\n  sheet.getCell('A3').font = { bold: true };\n  sheet.getCell('A4').value = '청   구   일';\n  sheet.getCell('A4').font = { bold: true };\n  sheet.getCell('A5').value = 'TEL.';\n  sheet.getCell('A5').font = { bold: true };\n  sheet.getCell('A6').value = 'FAX.';\n  sheet.getCell('A6').font = { bold: true };\n  sheet.getCell('A7').value = '입고요청일';\n  sheet.getCell('A7').font = { bold: true };\n\n  sheet.getCell('E2').value = '구매요청자';\n  sheet.getCell('E2').font = { bold: true };\n  sheet.getCell('E3').value = '주         소';\n  sheet.getCell('E3').font = { bold: true };\n  sheet.getCell('E4').value = '발 주 번 호';\n  sheet.getCell('E4').font = { bold: true };\n  sheet.getCell('E5').value = 'TEL.';\n  sheet.getCell('E5').font = { bold: true };\n  sheet.getCell('E6').value = 'FAX.';\n  sheet.getCell('E6').font = { bold: true };\n  sheet.getCell('E7').value = '지출 예정일';\n  sheet.getCell('E7').font = { bold: true };\n\n  sheet.getCell('F7').value = data.vendor_payment_schedule || '';\n\n  // 데이터 매핑(예시)\n  sheet.getCell('C2').value = data.vendor_name;\n  sheet.getCell('C3').value = data.vendor_contact_name || '';\n  sheet.getCell('C4').value = formatDate(data.request_date);\n  sheet.getCell('C5').value = data.vendor_phone || '';\n  sheet.getCell('C6').value = data.vendor_fax || '';\n  sheet.getCell('C7').value = formatDate(data.delivery_request_date);\n\n  sheet.getCell('F2').value = data.requester_name;\n  sheet.getCell('F3').value = '대구광역시 달서구 성서공단북로305';\n  sheet.getCell('F4').value = data.purchase_order_number;\n  sheet.getCell('F5').value = '(053) 626-7805';\n  sheet.getCell('F6').value = '(053) 657-7905';\n  sheet.getCell('F5').alignment = { horizontal: 'center', vertical: 'middle' };\n  sheet.getCell('F6').alignment = { horizontal: 'center', vertical: 'middle' };\n\n  // 8행: 테이블 헤더\n  const tableHeaders = ['No', '품명', '규격', '수량', '단가', '금액', '비고'];\n  for (let i = 0; i < tableHeaders.length; i++) {\n    sheet.getCell(String.fromCharCode(65 + i) + '8').value = tableHeaders[i];\n    sheet.getCell(String.fromCharCode(65 + i) + '8').font = { bold: true };\n    if(i===6){\n       sheet.getCell('G8').alignment = { horizontal:'center', vertical:'middle' };\n    }\n  }\n\n  // 품목이 45개를 넘으면 아래로 밀어서 합계/하단 정보 출력\n  const baseRow = 9;\n  const minRows = 45;\n  // --- 품목 데이터 line_number 기준 정렬 ---\n  const sortedItems = [...data.items].sort((a, b) => a.line_number - b.line_number);\n  const itemRows = sortedItems.length;\n  const sumRow = baseRow + Math.max(itemRows, minRows); // 합계 위치\n\n  // 품목 데이터\n  for (let i = 0; i < sortedItems.length; i++) {\n    const item = sortedItems[i];\n    const rowIdx = baseRow + i;\n    sheet.getCell('A' + rowIdx).value = item.line_number;\n    const bCell = sheet.getCell('B' + rowIdx);\n    bCell.value = item.item_name;\n    bCell.alignment = { horizontal: 'left', vertical: 'middle' };\n    sheet.getCell('C' + rowIdx).value = item.specification;\n    sheet.getCell('C' + rowIdx).alignment = { horizontal: 'left', vertical: 'middle' };\n    sheet.getCell('D' + rowIdx).value = item.quantity;\n    // 단가(E열) - 통화 기호 포함\n    const unitSymbol = getCurrencySymbol(item.currency);\n    const unitWithCurrency = (item.unit_price_value !== undefined && item.unit_price_value !== null)\n      ? `${item.unit_price_value.toLocaleString()} ${unitSymbol}`.trim()\n      : '';\n    sheet.getCell('E' + rowIdx).value = unitWithCurrency;\n    sheet.getCell('E' + rowIdx).alignment = { horizontal: 'right', vertical: 'middle' };\n\n    // 금액(F열) - 통화 기호 포함\n    const amountSymbol = getCurrencySymbol(item.currency);\n    const amountWithCurrency = (item.amount_value !== undefined && item.amount_value !== null)\n      ? `${item.amount_value.toLocaleString()} ${amountSymbol}`.trim()\n      : '';\n    sheet.getCell('F' + rowIdx).value = amountWithCurrency;\n    sheet.getCell('F' + rowIdx).alignment = { horizontal: 'right', vertical: 'middle' };\n    // G열은 비워둠\n    const gCell = sheet.getCell('G' + rowIdx);\n    gCell.value = (item.remark !== undefined && item.remark !== null) ? String(item.remark) : '';\n    gCell.alignment = { horizontal: 'left', vertical: 'middle', wrapText: false, shrinkToFit: true };\n  }\n\n  // 품목이 45개보다 적으면 빈 행 추가\n  for (let i = itemRows; i < minRows; i++) {\n    const rowIdx = baseRow + i;\n    for (let c = 0; c < 7; c++) {\n      sheet.getCell(String.fromCharCode(65 + c) + rowIdx).value = '';\n    }\n  }\n\n  // 합계\n  sheet.mergeCells(`A${sumRow}:E${sumRow}`);\n  sheet.getCell('A' + sumRow).value = '합계';\n  sheet.getCell('A' + sumRow).font = { bold: true };\n  const totalSymbol = getCurrencySymbol(data.items[0]?.currency);\n  const totalAmount = data.items.reduce((sum, item) => sum + (item.amount_value || 0), 0);\n  sheet.getCell('F' + sumRow).value = `${totalAmount.toLocaleString()} ${totalSymbol}`.trim();\n  sheet.getCell('F' + sumRow).alignment = { horizontal: 'right', vertical: 'middle' };\n\n  // 실제 마지막 데이터가 들어간 행까지 동적으로 테두리 적용 (합계까지만)\n  const lastRow = sumRow;\n  for (let r = 1; r <= lastRow; r++) {\n    for (let c = 1; c <= 7; c++) {\n      const col = String.fromCharCode(64 + c); // A~G\n      const cellAddr = col + r;\n      const cell = sheet.getCell(cellAddr);\n      // E(5), F(6)열의 품목 데이터 행(단가/금액)과 합계행, C(3)열의 품목 데이터 행(규격)은 alignment를 덮어쓰지 않음\n      const isPriceCol = (c === 5 || c === 6);\n      const isSpecCol = (c === 3);\n      const isItemRow = (r >= baseRow && r < sumRow);\n      const isSumRow = (r === sumRow);\n      if (!((isPriceCol && (isItemRow || isSumRow)) || (isSpecCol && isItemRow))) {\n        // 나머지 셀만 중앙 정렬\n        cell.alignment = { horizontal: 'center', vertical: 'middle' };\n      }\n      // 기존 스타일: 2행/8행/합계행(sumRow) 위, 8행 아래, 마지막행만 굵은선\n      cell.border = {\n        top:    { style: (r === 1) ? 'medium' : (r === 2 || r === 8 || r === sumRow) ? 'medium' : 'thin' },\n        left:   { style: c === 1 ? 'medium' : 'thin' },\n        right:  { style: c === 7 ? 'medium' : 'thin' },\n        bottom: { style: (r === 8 || r === sumRow || r === lastRow) ? 'medium' : 'thin' }\n      };\n    }\n  }\n  // 규격(C열) 입력란(품목 데이터 행)은 마지막에 좌측 정렬로 덮어쓴다\n  for (let i = 0; i < itemRows; i++) {\n    const rowIdx = baseRow + i;\n    sheet.getCell('C' + rowIdx).alignment = { horizontal: 'left', vertical: 'middle' };\n  }\n\n  // B2:B7, D2:D7, E2:E6 오른쪽 테두리 굵게\n  for (let r = 2; r <= 7; r++) {\n    sheet.getCell('B' + r).border = {\n      ...sheet.getCell('B' + r).border,\n      right: { style: 'medium' }\n    };\n    sheet.getCell('D' + r).border = {\n      ...sheet.getCell('D' + r).border,\n      right: { style: 'medium' }\n    };\n    if (r <= 6) {\n      sheet.getCell('E' + r).border = {\n        ...sheet.getCell('E' + r).border,\n        right: { style: 'medium' }\n      };\n    }\n  }\n  // E7, G7 위쪽 테두리 일반(얇게)\n  sheet.getCell('E7').border = {\n    ...sheet.getCell('E7').border,\n    top: { style: 'thin' },\n    right: { style: 'medium' }\n  };\n  sheet.getCell('G7').border = {\n    ...sheet.getCell('G7').border,\n    top: { style: 'thin' }\n  };\n\n  // A1~A7 왼쪽 테두리 굵게 명시적 설정 (덮어쓰기 방지)\n  for (let r = 1; r <= 7; r++) {\n    const currentBorder = sheet.getCell('A' + r).border || {};\n    sheet.getCell('A' + r).border = {\n      ...currentBorder,\n      left: { style: 'medium' }\n    };\n  }\n\n  // 합계 행(A열) 왼쪽 테두리 굵게 명시적 설정\n  const sumCellBorder = sheet.getCell('A' + sumRow).border || {};\n  sheet.getCell('A' + sumRow).border = {\n    ...sumCellBorder,\n    left: { style: 'medium' }\n  };\n\n  // 열 너비 (템플릿 기준)\n  const colWidths = { A:4.7, B:23, C:30, D:11, E:15, F:16, G:37 };\n  Object.entries(colWidths).forEach(([col, width]) => {\n    sheet.getColumn(col).width = width;\n  });\n\n  /* -----------------------------------\n      최종 행 높이/폰트 일괄 적용\n      1행 : 39.75pt\n      2행~lastRow : 18pt\n  ----------------------------------- */\n  sheet.getRow(1).height = 29.8; // 39.75px≈29.8pt\n  sheet.getRow(1).eachCell(c => { c.font = { ...(c.font || {}), name: '맑은 고딕', size: 20 }; });\n\n  for (let r = 2; r <= lastRow; r++) {\n    const row = sheet.getRow(r);\n    row.height = 15.75; // 21px≈15.75pt\n    row.eachCell(c => {\n      c.font = { ...(c.font || {}), name: '맑은 고딕', size: 11 };\n    });\n  }\n\n  // G열 전체 좌측 정렬 및 자동 줄바꿈 보장\n  for (let r = 9; r <= lastRow; r++) {\n    sheet.getCell('G' + r).alignment = { horizontal: 'left', vertical: 'middle', wrapText: false, shrinkToFit: true };\n    sheet.getCell('B' + r).alignment = { horizontal: 'left', vertical: 'middle' };\n  }\n\n  // 9. 파일 생성\n  const buffer = await workbook.xlsx.writeBuffer();\n  return new Blob([buffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\n}","import { memo } from 'react'\nimport { Eye } from 'lucide-react'\nimport { Badge } from '@/components/ui/badge'\nimport { Purchase } from '@/types/purchase'\nimport { formatDateShort } from '@/utils/helpers'\n\ninterface MobilePurchaseCardProps {\n  purchase: Purchase\n  onClick: (purchase: Purchase) => void\n}\n\n// formatDateShort는 utils/helpers.ts에서 import\n\nconst getReceiptProgress = (purchase: Purchase) => {\n  if (!purchase.items || purchase.items.length === 0) return { received: 0, total: 0, percentage: 0 }\n  \n  const total = purchase.items.length\n  const received = purchase.items.filter((item: any) => item.is_received || item.delivery_status === 'received').length\n  const percentage = total > 0 ? Math.round((received / total) * 100) : 0\n  \n  return { received, total, percentage }\n}\n\nconst StatusBadge = memo(({ purchase }: { purchase: Purchase }) => {\n  const status = purchase.is_received \n    ? 'completed'\n    : (purchase.middle_manager_status === 'approved' && purchase.final_manager_status === 'approved')\n    ? 'inProgress'\n    : (purchase.middle_manager_status === 'rejected' || purchase.final_manager_status === 'rejected')\n    ? 'rejected'\n    : 'pending'\n  \n  const config = {\n    completed: { text: '입고완료', className: 'bg-green-100 text-green-800' },\n    inProgress: { text: '구매진행', className: 'bg-hansl-100 text-hansl-800' },\n    rejected: { text: '반려', className: 'bg-red-100 text-red-800' },\n    pending: { text: '승인대기', className: 'bg-yellow-100 text-yellow-800' }\n  }\n  \n  const { text, className } = config[status]\n  return <Badge className={`${className} text-xs`}>{text}</Badge>\n})\n\nStatusBadge.displayName = 'StatusBadge'\n\nconst MobilePurchaseCard = memo(({ purchase, onClick }: MobilePurchaseCardProps) => {\n  const receiptProgress = getReceiptProgress(purchase)\n  const isAdvance = purchase.progress_type === '선진행' || purchase.progress_type?.includes('선진행')\n  \n  return (\n    <div \n      className={`bg-white rounded-lg border p-4 space-y-3 cursor-pointer transition-all hover:shadow-md ${isAdvance ? 'border-red-400 bg-red-50 hover:bg-red-100' : 'hover:bg-gray-50'}`}\n      onClick={() => onClick(purchase)}\n    >\n      {/* 헤더 */}\n      <div className=\"flex items-start justify-between\">\n        <div>\n          <div className=\"flex items-center gap-2\">\n            {isAdvance ? (\n              <Badge className=\"bg-red-500 text-white font-bold text-xs px-2 py-0.5\">\n                선진행\n              </Badge>\n            ) : (\n              <Badge className=\"bg-gray-200 text-gray-700 text-xs px-2 py-0.5\">\n                일반\n              </Badge>\n            )}\n            <span className=\"font-semibold text-sm text-gray-900\">\n              {purchase.purchase_order_number || '-'}\n            </span>\n          </div>\n          <div className=\"text-xs text-gray-500 mt-1\">\n            {formatDateShort(purchase.request_date)} 요청\n          </div>\n        </div>\n        <StatusBadge purchase={purchase} />\n      </div>\n\n      {/* 중간 정보 */}\n      <div className=\"space-y-2\">\n        <div className=\"flex items-center justify-between text-sm\">\n          <span className=\"text-gray-600\">요청자</span>\n          <span className=\"font-medium\">{purchase.requester_name}</span>\n        </div>\n        <div className=\"flex items-center justify-between text-sm\">\n          <span className=\"text-gray-600\">업체</span>\n          <span className=\"font-medium\">{purchase.vendor_name}</span>\n        </div>\n        {purchase.project_vendor && (\n          <div className=\"flex items-center justify-between text-sm\">\n            <span className=\"text-gray-600\">PJ업체</span>\n            <span className=\"font-medium truncate max-w-[150px]\">{purchase.project_vendor}</span>\n          </div>\n        )}\n        {purchase.project_item && (\n          <div className=\"flex items-center justify-between text-sm\">\n            <span className=\"text-gray-600\">PJ ITEM</span>\n            <span className=\"font-medium truncate max-w-[150px]\">{purchase.project_item}</span>\n          </div>\n        )}\n        {purchase.sales_order_number && (\n          <div className=\"flex items-center justify-between text-sm\">\n            <span className=\"text-gray-600\">수주번호</span>\n            <span className=\"font-medium truncate max-w-[150px]\">{purchase.sales_order_number}</span>\n          </div>\n        )}\n        {purchase.item_name && (\n          <div className=\"flex items-center justify-between text-sm\">\n            <span className=\"text-gray-600\">품목</span>\n            <span className=\"font-medium truncate max-w-[150px]\">{purchase.item_name}</span>\n          </div>\n        )}\n        <div className=\"flex items-center justify-between text-sm\">\n          <span className=\"text-gray-600\">금액</span>\n          <span className=\"font-semibold text-gray-900\">\n            {(purchase.amount_value || purchase.total_amount)?.toLocaleString()} {purchase.currency}\n          </span>\n        </div>\n      </div>\n\n      {/* 입고 현황 */}\n      <div className=\"space-y-1\">\n        <div className=\"flex items-center justify-between text-xs\">\n          <span className=\"text-gray-600\">입고현황</span>\n          <span className=\"text-gray-700\">\n            {receiptProgress.received}/{receiptProgress.total} ({receiptProgress.percentage}%)\n          </span>\n        </div>\n        <div className=\"bg-gray-200 rounded-full h-2\">\n          <div \n            className={`h-2 rounded-full transition-all ${\n              receiptProgress.percentage === 100 ? 'bg-green-500' : \n              receiptProgress.percentage > 0 ? 'bg-hansl-500' : 'bg-gray-300'\n            }`}\n            style={{ width: `${receiptProgress.percentage}%` }}\n          />\n        </div>\n      </div>\n\n      {/* 결제 상태 */}\n      {purchase.is_payment_completed !== undefined && (\n        <div className=\"flex items-center justify-between text-sm\">\n          <span className=\"text-gray-600\">결제</span>\n          {purchase.is_payment_completed ? (\n            <Badge className=\"bg-green-100 text-green-800 text-xs\">완료</Badge>\n          ) : (\n            <Badge className=\"bg-gray-100 text-gray-800 text-xs\">대기</Badge>\n          )}\n        </div>\n      )}\n\n      {/* 카드 전체가 클릭 가능하므로 버튼 제거 */}\n      <div className=\"pt-2 border-t\">\n        <div className=\"flex items-center justify-center text-xs text-gray-500\">\n          <Eye className=\"w-3 h-3 mr-1\" />\n          클릭하여 상세보기\n        </div>\n      </div>\n    </div>\n  )\n})\n\nMobilePurchaseCard.displayName = 'MobilePurchaseCard'\n\nexport default MobilePurchaseCard","\"use client\";\n\n// src/alert-dialog.tsx\nimport * as React from \"react\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\";\nimport { createDialogScope } from \"@radix-ui/react-dialog\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { createSlottable } from \"@radix-ui/react-slot\";\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nvar ROOT_NAME = \"AlertDialog\";\nvar [createAlertDialogContext, createAlertDialogScope] = createContextScope(ROOT_NAME, [\n  createDialogScope\n]);\nvar useDialogScope = createDialogScope();\nvar AlertDialog = (props) => {\n  const { __scopeAlertDialog, ...alertDialogProps } = props;\n  const dialogScope = useDialogScope(__scopeAlertDialog);\n  return /* @__PURE__ */ jsx(DialogPrimitive.Root, { ...dialogScope, ...alertDialogProps, modal: true });\n};\nAlertDialog.displayName = ROOT_NAME;\nvar TRIGGER_NAME = \"AlertDialogTrigger\";\nvar AlertDialogTrigger = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, ...triggerProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    return /* @__PURE__ */ jsx(DialogPrimitive.Trigger, { ...dialogScope, ...triggerProps, ref: forwardedRef });\n  }\n);\nAlertDialogTrigger.displayName = TRIGGER_NAME;\nvar PORTAL_NAME = \"AlertDialogPortal\";\nvar AlertDialogPortal = (props) => {\n  const { __scopeAlertDialog, ...portalProps } = props;\n  const dialogScope = useDialogScope(__scopeAlertDialog);\n  return /* @__PURE__ */ jsx(DialogPrimitive.Portal, { ...dialogScope, ...portalProps });\n};\nAlertDialogPortal.displayName = PORTAL_NAME;\nvar OVERLAY_NAME = \"AlertDialogOverlay\";\nvar AlertDialogOverlay = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, ...overlayProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    return /* @__PURE__ */ jsx(DialogPrimitive.Overlay, { ...dialogScope, ...overlayProps, ref: forwardedRef });\n  }\n);\nAlertDialogOverlay.displayName = OVERLAY_NAME;\nvar CONTENT_NAME = \"AlertDialogContent\";\nvar [AlertDialogContentProvider, useAlertDialogContentContext] = createAlertDialogContext(CONTENT_NAME);\nvar Slottable = createSlottable(\"AlertDialogContent\");\nvar AlertDialogContent = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, children, ...contentProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    const contentRef = React.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, contentRef);\n    const cancelRef = React.useRef(null);\n    return /* @__PURE__ */ jsx(\n      DialogPrimitive.WarningProvider,\n      {\n        contentName: CONTENT_NAME,\n        titleName: TITLE_NAME,\n        docsSlug: \"alert-dialog\",\n        children: /* @__PURE__ */ jsx(AlertDialogContentProvider, { scope: __scopeAlertDialog, cancelRef, children: /* @__PURE__ */ jsxs(\n          DialogPrimitive.Content,\n          {\n            role: \"alertdialog\",\n            ...dialogScope,\n            ...contentProps,\n            ref: composedRefs,\n            onOpenAutoFocus: composeEventHandlers(contentProps.onOpenAutoFocus, (event) => {\n              event.preventDefault();\n              cancelRef.current?.focus({ preventScroll: true });\n            }),\n            onPointerDownOutside: (event) => event.preventDefault(),\n            onInteractOutside: (event) => event.preventDefault(),\n            children: [\n              /* @__PURE__ */ jsx(Slottable, { children }),\n              /* @__PURE__ */ jsx(DescriptionWarning, { contentRef })\n            ]\n          }\n        ) })\n      }\n    );\n  }\n);\nAlertDialogContent.displayName = CONTENT_NAME;\nvar TITLE_NAME = \"AlertDialogTitle\";\nvar AlertDialogTitle = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, ...titleProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    return /* @__PURE__ */ jsx(DialogPrimitive.Title, { ...dialogScope, ...titleProps, ref: forwardedRef });\n  }\n);\nAlertDialogTitle.displayName = TITLE_NAME;\nvar DESCRIPTION_NAME = \"AlertDialogDescription\";\nvar AlertDialogDescription = React.forwardRef((props, forwardedRef) => {\n  const { __scopeAlertDialog, ...descriptionProps } = props;\n  const dialogScope = useDialogScope(__scopeAlertDialog);\n  return /* @__PURE__ */ jsx(DialogPrimitive.Description, { ...dialogScope, ...descriptionProps, ref: forwardedRef });\n});\nAlertDialogDescription.displayName = DESCRIPTION_NAME;\nvar ACTION_NAME = \"AlertDialogAction\";\nvar AlertDialogAction = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, ...actionProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    return /* @__PURE__ */ jsx(DialogPrimitive.Close, { ...dialogScope, ...actionProps, ref: forwardedRef });\n  }\n);\nAlertDialogAction.displayName = ACTION_NAME;\nvar CANCEL_NAME = \"AlertDialogCancel\";\nvar AlertDialogCancel = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAlertDialog, ...cancelProps } = props;\n    const { cancelRef } = useAlertDialogContentContext(CANCEL_NAME, __scopeAlertDialog);\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    const ref = useComposedRefs(forwardedRef, cancelRef);\n    return /* @__PURE__ */ jsx(DialogPrimitive.Close, { ...dialogScope, ...cancelProps, ref });\n  }\n);\nAlertDialogCancel.displayName = CANCEL_NAME;\nvar DescriptionWarning = ({ contentRef }) => {\n  const MESSAGE = `\\`${CONTENT_NAME}\\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \\`${CONTENT_NAME}\\` by passing a \\`${DESCRIPTION_NAME}\\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \\`id\\` and passing the same value to the \\`aria-describedby\\` prop in \\`${CONTENT_NAME}\\`. If the description is confusing or duplicative for sighted users, you can use the \\`@radix-ui/react-visually-hidden\\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;\n  React.useEffect(() => {\n    const hasDescription = document.getElementById(\n      contentRef.current?.getAttribute(\"aria-describedby\")\n    );\n    if (!hasDescription) console.warn(MESSAGE);\n  }, [MESSAGE, contentRef]);\n  return null;\n};\nvar Root2 = AlertDialog;\nvar Trigger2 = AlertDialogTrigger;\nvar Portal2 = AlertDialogPortal;\nvar Overlay2 = AlertDialogOverlay;\nvar Content2 = AlertDialogContent;\nvar Action = AlertDialogAction;\nvar Cancel = AlertDialogCancel;\nvar Title2 = AlertDialogTitle;\nvar Description2 = AlertDialogDescription;\nexport {\n  Action,\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogOverlay,\n  AlertDialogPortal,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n  Cancel,\n  Content2 as Content,\n  Description2 as Description,\n  Overlay2 as Overlay,\n  Portal2 as Portal,\n  Root2 as Root,\n  Title2 as Title,\n  Trigger2 as Trigger,\n  createAlertDialogScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm\",\n      \"data-[state=open]:animate-in data-[state=closed]:animate-out\",\n      \"data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50\",\n        \"w-full max-w-md translate-x-[-50%] translate-y-[-50%]\",\n        \"grid gap-4 bg-white border border-gray-200\",\n        \"rounded-lg p-6 shadow-professional-xl\",\n        \"duration-200\",\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out\",\n        \"data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n        \"data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95\",\n        \"data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%]\",\n        \"data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end gap-3\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-gray-800 tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-gray-600\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}","import { memo, useMemo, useState } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport PurchaseDetailModal from \"./PurchaseDetailModal\";\nimport MobilePurchaseCard from \"./MobilePurchaseCard\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { toast } from \"sonner\";\nimport { generatePurchaseOrderExcelJS, PurchaseOrderData } from \"@/utils/exceljs/generatePurchaseOrderExcel\";\nimport { formatDateShort } from \"@/utils/helpers\";\nimport { logger } from \"@/lib/logger\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { Purchase, PurchaseRequestWithDetails } from \"@/types/purchase\";\n\ninterface FastPurchaseTableProps {\n  purchases: Purchase[];\n  activeTab?: string; // 현재 활성 탭\n  currentUserRoles?: string[];\n  onRefresh?: () => void;\n  onPaymentComplete?: (purchaseId: number) => Promise<void>;\n  onReceiptComplete?: (purchaseId: number) => Promise<void>;\n}\n\n// 상태 배지 컴포넌트 (더 빠르게)\nconst StatusBadge = memo(({ purchase }: { purchase: Purchase }) => {\n  const status = purchase.is_received \n    ? 'completed'\n    : (purchase.middle_manager_status === 'approved' && purchase.final_manager_status === 'approved')\n    ? 'inProgress'\n    : (purchase.middle_manager_status === 'rejected' || purchase.final_manager_status === 'rejected')\n    ? 'rejected'\n    : 'pending';\n  \n  const config = {\n    completed: { text: '입고완료', className: 'bg-green-100 text-green-800' },\n    inProgress: { text: '구매진행', className: 'bg-hansl-100 text-hansl-800' },\n    rejected: { text: '반려', className: 'bg-red-100 text-red-800' },\n    pending: { text: '승인대기', className: 'bg-yellow-100 text-yellow-800' }\n  };\n  \n  const { text, className } = config[status];\n  return <Badge className={className}>{text}</Badge>;\n});\n\nStatusBadge.displayName = 'StatusBadge';\n\n// 통화 코드를 기호로 변환하는 함수\nconst getCurrencySymbol = (currency: string) => {\n  if (!currency) return '₩';\n  if (['KRW', '원', '₩'].includes(currency)) return '₩';\n  if (['USD', '$', '달러'].includes(currency)) return '$';\n  if (['EUR', '€'].includes(currency)) return '€';\n  if (['JPY', '엔', '¥'].includes(currency)) return '¥';\n  if (['CNY', '위안', '元'].includes(currency)) return '¥';\n  return currency;\n};\n\n// 🎯 실제 DB 데이터 1,979건 정밀 분석 기반 최적 컬럼 너비 설정 (2025-10-28)\n// 📊 데이터 샘플: 90일 이내 발주요청 전체 아이템 분석 결과\n// ✂️ min-width = max-width로 고정 너비 설정, truncate로 긴 텍스트 자르기\nconst COMMON_COLUMN_CLASSES = {\n  // 승인대기 탭 전용 컬럼\n  approvalStatus: \"text-center w-20 min-w-[85px] max-w-[85px]\",\n  \n  // 모든 탭 공통 컬럼들 (고정 너비)\n  purchaseOrderNumber: \"pl-2 w-36 min-w-[145px] max-w-[145px]\",      // 발주번호 + 엑셀아이콘\n  paymentCategory: \"text-center w-20 min-w-[85px] max-w-[85px]\",\n  requesterName: \"w-16 min-w-[68px] max-w-[68px]\",\n  requestDate: \"w-20 min-w-[85px] max-w-[85px]\",\n  vendorName: \"w-28 min-w-[115px] max-w-[115px]\",\n  contactName: \"w-16 min-w-[68px] max-w-[68px]\",\n  deliveryRequestDate: \"w-20 min-w-[85px] max-w-[85px]\",\n  revisedDeliveryRequestDate: \"w-20 min-w-[85px] max-w-[85px]\",\n  itemName: \"w-28 min-w-[120px] max-w-[120px]\",                       // 평균 7.8자 + 여유\n  specification: \"w-64 min-w-[260px] max-w-[260px]\",                  // 평균 15.5자 + 여유 (조금 더 길게)\n  quantity: \"text-center w-14 min-w-[60px] max-w-[60px]\",\n  unitPrice: \"text-right w-24 min-w-[100px] max-w-[100px]\",\n  amount: \"text-right w-24 min-w-[100px] max-w-[100px]\",\n  \n  // 탭별 특화 컬럼들 (고정 너비)\n  remark: \"w-28 min-w-[115px] max-w-[115px]\",                         // 평균 1.8자, 대부분 비어있음\n  paymentSchedule: \"w-24 min-w-[100px] max-w-[100px]\",\n  purchaseStatus: \"text-center w-20 min-w-[85px] max-w-[85px]\",\n  projectVendor: \"w-24 min-w-[105px] max-w-[105px]\",                  // 평균 6.6자\n  salesOrderNumber: \"w-28 min-w-[115px] max-w-[115px]\",               // 평균 8.6자\n  projectItem: \"w-44 min-w-[180px] max-w-[180px]\",                    // 평균 11.1자 + 여유 (조금 더 길게)\n  receiptProgress: \"text-center w-20 min-w-[85px] max-w-[85px]\",\n  status: \"text-center w-20 min-w-[85px] max-w-[85px]\",\n  receipt: \"text-center w-16 min-w-[70px] max-w-[70px]\",\n  paymentStatus: \"text-center w-16 min-w-[70px] max-w-[70px]\",\n  link: \"w-20 min-w-[85px] max-w-[85px]\"\n};\n\n// 승인 상태 상세 표시 컴포넌트 (승인대기 탭용)\nconst ApprovalStatusBadge = memo(({ purchase }: { purchase: Purchase }) => {\n  const middleApproved = purchase.middle_manager_status === 'approved';\n  const middleRejected = purchase.middle_manager_status === 'rejected';\n  const finalApproved = purchase.final_manager_status === 'approved';\n  const finalRejected = purchase.final_manager_status === 'rejected';\n\n  // 전체 상태 결정\n  if (middleRejected || finalRejected) {\n    // 하나라도 반려면 반려 표시\n    return (\n      <div className=\"flex flex-col items-center gap-0.5\">\n        <div className=\"flex items-center gap-0.5\">\n          <div className=\"w-1.5 h-1.5 bg-red-500 rounded-full animate-pulse\"></div>\n        </div>\n        <Badge className=\"bg-red-100 text-red-800 text-[11px] font-medium px-1.5 py-0\">\n          반려\n        </Badge>\n      </div>\n    );\n  }\n  \n  if (middleApproved && finalApproved) {\n    // 둘 다 승인이면 완료\n    return (\n      <div className=\"flex flex-col items-center gap-0.5\">\n        <div className=\"flex items-center gap-0.5\">\n          <div className=\"w-1.5 h-1.5 bg-green-500 rounded-full\"></div>\n        </div>\n        <Badge className=\"bg-green-100 text-green-800 text-[11px] font-medium px-1.5 py-0\">\n          승인완료\n        </Badge>\n      </div>\n    );\n  }\n  \n  if (middleApproved && !finalApproved && !finalRejected) {\n    // 중간승인만 완료\n    return (\n      <div className=\"flex flex-col items-center gap-0.5\">\n        <div className=\"flex items-center gap-1\">\n          <div className=\"w-1.5 h-1.5 bg-green-500 rounded-full\"></div>\n          <div className=\"w-3 h-0.5 bg-gray-300\"></div>\n          <div className=\"w-1.5 h-1.5 bg-gray-300 rounded-full\"></div>\n        </div>\n        <Badge className=\"bg-yellow-100 text-yellow-800 text-[11px] font-medium px-1.5 py-0\">\n          1차 승인\n        </Badge>\n      </div>\n    );\n  }\n  \n  // 둘 다 대기\n  return (\n    <div className=\"flex flex-col items-center gap-0.5\">\n      <div className=\"flex items-center gap-1\">\n        <div className=\"w-1.5 h-1.5 bg-gray-300 rounded-full\"></div>\n        <div className=\"w-3 h-0.5 bg-gray-300\"></div>\n        <div className=\"w-1.5 h-1.5 bg-gray-300 rounded-full\"></div>\n      </div>\n      <Badge className=\"bg-gray-100 text-gray-600 text-[11px] font-medium px-1.5 py-0\">\n        승인대기\n      </Badge>\n    </div>\n  );\n});\n\nApprovalStatusBadge.displayName = 'ApprovalStatusBadge';\n\n// 입고 현황 계산 함수\nconst getReceiptProgress = (purchase: Purchase) => {\n  // purchase_requests 테이블의 is_received 필드 우선 체크\n  if (purchase.is_received) {\n    return { received: 1, total: 1, percentage: 100 };\n  }\n  \n  // items 배열이 없으면 전체 미입고로 처리\n  if (!purchase.items || purchase.items.length === 0) {\n    return { received: 0, total: 1, percentage: 0 };\n  }\n  \n  // 개별 아이템 입고 상태 계산\n  const total = purchase.items.length;\n  const received = purchase.items.filter((item: any) => \n    item.is_received === true\n  ).length;\n  const percentage = total > 0 ? Math.round((received / total) * 100) : 0;\n  \n  return { received, total, percentage };\n};\n\n// 구매완료 현황 계산 함수\nconst getPaymentProgress = (purchase: Purchase) => {\n  // purchase_requests 테이블의 is_payment_completed 필드 우선 체크\n  if (purchase.is_payment_completed) {\n    return { completed: 1, total: 1, percentage: 100 };\n  }\n  \n  // items 배열이 없으면 전체 미완료로 처리\n  if (!purchase.items || purchase.items.length === 0) {\n    return { completed: 0, total: 1, percentage: 0 };\n  }\n  \n  // 개별 아이템 구매완료 상태 계산\n  const total = purchase.items.length;\n  const completed = purchase.items.filter((item: any) => \n    item.is_payment_completed === true\n  ).length;\n  const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;\n  \n  return { completed, total, percentage };\n};\n\n// 구매진행 현황 계산 함수 (purchase_request_items 기반)\nconst getPurchaseProgress = (purchase: Purchase) => {\n  // items 배열이 없으면 전체 상태로 판단\n  if (!purchase.items || purchase.items.length === 0) {\n    if (purchase.is_received) return { percentage: 100 };\n    if (purchase.is_payment_completed) return { percentage: 80 };\n    \n    const middleRejected = purchase.middle_manager_status === 'rejected';\n    const finalRejected = purchase.final_manager_status === 'rejected';\n    if (middleRejected || finalRejected) return { percentage: 0 };\n    \n    const middleApproved = purchase.middle_manager_status === 'approved';\n    const finalApproved = purchase.final_manager_status === 'approved';\n    if (middleApproved && finalApproved) return { percentage: 40 };\n    \n    return { percentage: 20 };\n  }\n  \n  // 개별 아이템 기반 진행률 계산\n  const total = purchase.items.length;\n  const receivedItems = purchase.items.filter((item: any) => item.is_received === true).length;\n  const paymentCompletedItems = purchase.items.filter((item: any) => item.is_payment_completed === true).length;\n  \n  // 모든 아이템이 입고완료된 경우 100%\n  if (receivedItems === total) {\n    return { percentage: 100 };\n  }\n  \n  // 일부 아이템이라도 입고완료된 경우 80% + (입고완료율 * 20%)\n  if (receivedItems > 0) {\n    const receiptPercentage = Math.round((receivedItems / total) * 100);\n    return { percentage: Math.min(80 + Math.round(receiptPercentage * 0.2), 99) };\n  }\n  \n  // 모든 아이템이 구매완료된 경우 80%\n  if (paymentCompletedItems === total) {\n    return { percentage: 80 };\n  }\n  \n  // 일부 아이템이라도 구매완료된 경우 40% + (구매완료율 * 40%)\n  if (paymentCompletedItems > 0) {\n    const paymentPercentage = Math.round((paymentCompletedItems / total) * 100);\n    return { percentage: Math.min(40 + Math.round(paymentPercentage * 0.4), 79) };\n  }\n  \n  // 승인 상태에 따른 기본 진행률\n  const middleRejected = purchase.middle_manager_status === 'rejected';\n  const finalRejected = purchase.final_manager_status === 'rejected';\n  if (middleRejected || finalRejected) return { percentage: 0 };\n  \n  const middleApproved = purchase.middle_manager_status === 'approved';\n  const finalApproved = purchase.final_manager_status === 'approved';\n  if (middleApproved && finalApproved) return { percentage: 40 };\n  \n  return { percentage: 20 };\n};\n\n// formatDateShort는 utils/helpers.ts에서 import\n\n// 선진행 구분 배지\nconst ProgressTypeBadge = memo(({ type }: { type?: string }) => {\n  const isAdvance = type === '선진행' || type?.includes('선진행');\n  \n  if (isAdvance) {\n    return (\n      <Badge className=\"bg-red-500 text-white font-bold text-[11px] px-2 py-0.5\">\n        선진행\n      </Badge>\n    );\n  }\n  \n  return (\n    <Badge className=\"bg-gray-200 text-gray-700 text-[11px] px-2 py-0.5\">\n      일반\n    </Badge>\n  );\n});\n\nProgressTypeBadge.displayName = 'ProgressTypeBadge';\n\n// 테이블 행 컴포넌트 메모화\nconst TableRow = memo(({ purchase, onClick, activeTab, isLeadBuyer, onPaymentComplete, onReceiptComplete, onExcelDownload }: { \n  purchase: Purchase; \n  onClick: (purchase: Purchase) => void;\n  activeTab?: string;\n  isLeadBuyer?: boolean;\n  onPaymentComplete?: (purchaseId: number) => Promise<void>;\n  onReceiptComplete?: (purchaseId: number) => Promise<void>;\n  onExcelDownload?: (purchase: Purchase) => Promise<void>;\n}) => {\n  const receiptProgress = getReceiptProgress(purchase);\n  const paymentProgress = getPaymentProgress(purchase);\n  const purchaseProgress = getPurchaseProgress(purchase);\n  const isAdvance = purchase.progress_type === '선진행' || purchase.progress_type?.includes('선진행');\n  \n  return (\n    <tr \n      className={`border-b hover:bg-gray-100 cursor-pointer transition-colors ${isAdvance ? 'bg-red-50 hover:bg-red-100' : ''}`}\n      onClick={() => onClick(purchase)}\n    >\n      {/* 승인대기 탭에서는 승인상태를 맨 앞에 표시 */}\n      {activeTab === 'pending' && (\n        <td className={`px-2 py-1.5 whitespace-nowrap ${COMMON_COLUMN_CLASSES.approvalStatus}`}>\n          <ApprovalStatusBadge purchase={purchase} />\n        </td>\n      )}\n      {/* 구매현황 탭에서는 구매완료 진행률만 표시 */}\n      {activeTab === 'purchase' && (\n        <td className={`px-2 py-1.5 ${COMMON_COLUMN_CLASSES.receiptProgress}`}>\n          <div className=\"flex items-center justify-center gap-1\">\n            <div className=\"bg-gray-200 rounded-full h-1.5 w-8\">\n              <div \n                className={`h-1.5 rounded-full ${\n                  paymentProgress.percentage === 100 ? 'bg-blue-500' : \n                  paymentProgress.percentage > 0 ? 'bg-blue-400' : 'bg-gray-300'\n                }`}\n                style={{ width: `${paymentProgress.percentage}%` }}\n              />\n            </div>\n            <span className=\"text-[11px] text-gray-600\">\n              {paymentProgress.percentage}%\n            </span>\n          </div>\n        </td>\n      )}\n      {/* 입고현황 탭에서는 입고진행을 맨 앞에 표시 */}\n      {activeTab === 'receipt' && (\n        <td className={`px-2 py-1.5 ${COMMON_COLUMN_CLASSES.receiptProgress}`}>\n          <div className=\"flex items-center justify-center gap-1\">\n            <div className=\"bg-gray-200 rounded-full h-1.5 w-8\">\n              <div \n                className={`h-1.5 rounded-full ${\n                  receiptProgress.percentage === 100 ? 'bg-green-500' : \n                  receiptProgress.percentage > 0 ? 'bg-hansl-500' : 'bg-gray-300'\n                }`}\n                style={{ width: `${receiptProgress.percentage}%` }}\n              />\n            </div>\n            <span className=\"text-[11px] text-gray-600\">\n              {receiptProgress.percentage}%\n            </span>\n          </div>\n        </td>\n      )}\n      <td className={`px-2 py-1.5 font-medium text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.purchaseOrderNumber}`}>\n        <div className=\"flex items-center gap-1\">\n          {/* 엑셀 다운로드 아이콘 - 항상 표시, 조건에 따라 활성화/비활성화 */}\n          {onExcelDownload && (\n            <img\n              src=\"/excels-icon.svg\"\n              alt=\"엑셀 다운로드\"\n              width=\"16\"\n              height=\"16\"\n              className={`inline-block align-middle transition-transform p-0.5 rounded\n                ${purchase.is_po_download ? 'border border-gray-400' : ''}\n                ${(purchase.progress_type === '선진행' || purchase.progress_type?.includes('선진행') ||\n                  (purchase.middle_manager_status === 'approved' && purchase.final_manager_status === 'approved'))\n                  ? (purchase.is_po_download ? 'cursor-pointer' : 'cursor-pointer hover:scale-110')\n                  : 'opacity-40 grayscale cursor-not-allowed'}`}\n              onClick={async (e: React.MouseEvent) => {\n                if (purchase.progress_type === '선진행' || purchase.progress_type?.includes('선진행') ||\n                    (purchase.middle_manager_status === 'approved' && purchase.final_manager_status === 'approved')) {\n                  e.stopPropagation();\n                  await onExcelDownload(purchase);\n                }\n              }}\n              style={{\n                pointerEvents: (purchase.progress_type === '선진행' || purchase.progress_type?.includes('선진행') ||\n                  (purchase.middle_manager_status === 'approved' && purchase.final_manager_status === 'approved'))\n                  ? 'auto' : 'none'\n              }}\n              title={purchase.is_po_download ? '다운로드 완료' : '엑셀 발주서 다운로드'}\n            />\n          )}\n          <span className=\"block truncate\" title={purchase.purchase_order_number || ''}>\n            {purchase.purchase_order_number || '-'}\n            {purchase.items && purchase.items.length > 1 && (\n              <span className=\"text-gray-500 ml-0.5\">({purchase.items.length})</span>\n            )}\n          </span>\n        </div>\n      </td>\n      {/* 승인대기, 입고현황, 전체항목 탭에서만 결제종류 표시 */}\n      {(activeTab === 'pending' || activeTab === 'receipt' || activeTab === 'done' || !activeTab) && (\n        <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.paymentCategory}`}>\n          <Badge className={`text-[11px] ${\n            purchase.payment_category === '구매 요청' ? 'bg-blue-100 text-blue-800' : \n            purchase.payment_category === '발주' ? 'bg-green-100 text-green-800' :\n            purchase.payment_category === '경비 청구' ? 'bg-yellow-100 text-yellow-800' :\n            'bg-gray-100 text-gray-800'\n          }`}>\n            {(() => {\n              // 표시 텍스트 통일\n              if (purchase.payment_category === '구매 요청') return '구매요청';\n              if (purchase.payment_category === '발주') return '발주요청';\n              return purchase.payment_category || '-';\n            })()}\n          </Badge>\n        </td>\n      )}\n      <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.requesterName}`}>\n        <span className=\"block truncate\" title={purchase.requester_name || ''}>\n          {purchase.requester_name || '-'}\n        </span>\n      </td>\n      <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.requestDate}`}>\n        {formatDateShort(purchase.request_date)}\n      </td>\n      <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.vendorName}`}>\n        <span className=\"block truncate\" title={purchase.vendor_name || ''}>\n          {purchase.vendor_name || '-'}\n        </span>\n      </td>\n      <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.contactName}`}>\n        <span className=\"block truncate\" title={purchase.contact_name || ''}>\n          {purchase.contact_name || '-'}\n        </span>\n      </td>\n      <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.deliveryRequestDate}`}>\n        {formatDateShort(purchase.delivery_request_date)}\n      </td>\n      <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.revisedDeliveryRequestDate}`}>\n        {formatDateShort(purchase.revised_delivery_request_date)}\n      </td>\n      <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.itemName}`}>\n        <span className=\"block truncate\" title={purchase.item_name || ''}>\n          {purchase.item_name || '-'}\n        </span>\n      </td>\n      <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.specification}`}>\n        <span className=\"block truncate\" title={purchase.specification || ''}>\n          {purchase.specification || '-'}\n        </span>\n      </td>\n      <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.quantity}`}>\n        {purchase.quantity || 0}\n      </td>\n      <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.unitPrice}`}>\n        {purchase.unit_price_value ? `${purchase.unit_price_value.toLocaleString()} ${getCurrencySymbol(purchase.currency || 'KRW')}` : `0 ${getCurrencySymbol(purchase.currency || 'KRW')}`}\n      </td>\n      <td className={`px-2 py-1.5 text-[11px] font-medium whitespace-nowrap ${COMMON_COLUMN_CLASSES.amount}`}>\n        {purchase.amount_value ? `${purchase.amount_value.toLocaleString()} ${getCurrencySymbol(purchase.currency || 'KRW')}` : purchase.total_amount ? `${purchase.total_amount.toLocaleString()} ${getCurrencySymbol(purchase.currency || 'KRW')}` : `0 ${getCurrencySymbol(purchase.currency || 'KRW')}`}\n      </td>\n      \n      {/* 탭별 다른 칼럼 표시 */}\n      {activeTab === 'pending' && (\n        <>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.remark}`}>\n            <span className=\"block truncate\" title={purchase.remark || ''}>\n              {purchase.remark || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.projectVendor}`}>\n            <span className=\"block truncate\" title={purchase.project_vendor || ''}>\n              {purchase.project_vendor || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.projectItem}`}>\n            <span className=\"block truncate\" title={purchase.project_item || ''}>\n              {purchase.project_item || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.salesOrderNumber}`}>\n            <span className=\"block truncate\" title={purchase.sales_order_number || ''}>\n              {purchase.sales_order_number || '-'}\n            </span>\n          </td>\n        </>\n      )}\n      \n      {activeTab === 'purchase' && (\n        <>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.remark}`}>\n            <span className=\"block truncate\" title={purchase.remark || ''}>\n              {purchase.remark || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.link}`}>\n            {purchase.link ? (\n              <a \n                href={purchase.link} \n                target=\"_blank\" \n                rel=\"noopener noreferrer\" \n                className=\"text-blue-600 hover:text-blue-800 underline truncate block\"\n                title={purchase.link}\n              >\n                링크 보기\n              </a>\n            ) : (\n              <span className=\"text-gray-400\">-</span>\n            )}\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.paymentSchedule}`}>\n            <span className=\"block truncate\" title={purchase.vendor_payment_schedule || ''}>\n              {purchase.vendor_payment_schedule || '-'}\n            </span>\n          </td>\n        </>\n      )}\n      \n      {activeTab === 'receipt' && (\n        <>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.remark}`}>\n            <span className=\"block truncate\" title={purchase.remark || ''}>\n              {purchase.remark || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.projectVendor}`}>\n            <span className=\"block truncate\" title={purchase.project_vendor || ''}>\n              {purchase.project_vendor || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.projectItem}`}>\n            <span className=\"block truncate\" title={purchase.project_item || ''}>\n              {purchase.project_item || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.salesOrderNumber}`}>\n            <span className=\"block truncate\" title={purchase.sales_order_number || ''}>\n              {purchase.sales_order_number || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.paymentSchedule}`}>\n            <span className=\"block truncate\" title={purchase.vendor_payment_schedule || ''}>\n              {purchase.vendor_payment_schedule || '-'}\n            </span>\n          </td>\n        </>\n      )}\n      \n      {(activeTab === 'done' || !activeTab) && (\n        <>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.remark}`}>\n            <span className=\"block truncate\" title={purchase.remark || ''}>\n              {purchase.remark || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.link}`}>\n            {purchase.link ? (\n              <a \n                href={purchase.link} \n                target=\"_blank\" \n                rel=\"noopener noreferrer\" \n                className=\"text-blue-600 hover:text-blue-800 underline truncate block\"\n                title={purchase.link}\n              >\n                링크 보기\n              </a>\n            ) : (\n              <span className=\"text-gray-400\">-</span>\n            )}\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.projectVendor}`}>\n            <span className=\"block truncate\" title={purchase.project_vendor || ''}>\n              {purchase.project_vendor || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] ${COMMON_COLUMN_CLASSES.projectItem}`}>\n            <span className=\"block truncate\" title={purchase.project_item || ''}>\n              {purchase.project_item || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.salesOrderNumber}`}>\n            <span className=\"block truncate\" title={purchase.sales_order_number || ''}>\n              {purchase.sales_order_number || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.paymentSchedule}`}>\n            <span className=\"block truncate\" title={purchase.vendor_payment_schedule || ''}>\n              {purchase.vendor_payment_schedule || '-'}\n            </span>\n          </td>\n          <td className={`px-2 py-1.5 ${COMMON_COLUMN_CLASSES.status}`}>\n            {purchase.payment_category === '구매 요청' ? (\n              <div className=\"flex items-center justify-center gap-1\">\n                <div className=\"bg-gray-200 rounded-full h-1.5 w-8\">\n                  <div \n                    className={`h-1.5 rounded-full ${\n                      purchaseProgress.percentage === 100 ? 'bg-green-500' : \n                      purchaseProgress.percentage >= 80 ? 'bg-blue-500' : \n                      purchaseProgress.percentage >= 40 ? 'bg-hansl-500' :\n                      purchaseProgress.percentage > 0 ? 'bg-gray-400' : 'bg-red-500'\n                    }`}\n                    style={{ width: `${purchaseProgress.percentage}%` }}\n                  />\n                </div>\n                <span className=\"text-[11px] text-gray-600\">\n                  {purchaseProgress.percentage}%\n                </span>\n              </div>\n            ) : (\n              <span className=\"text-gray-400 text-[11px]\">-</span>\n            )}\n          </td>\n          <td className={`px-2 py-1.5 ${COMMON_COLUMN_CLASSES.receipt}`}>\n            <div className=\"flex items-center justify-center gap-1\">\n              <div className=\"bg-gray-200 rounded-full h-1.5 w-8\">\n                <div \n                  className={`h-1.5 rounded-full ${\n                    receiptProgress.percentage === 100 ? 'bg-green-500' : \n                    receiptProgress.percentage > 0 ? 'bg-hansl-500' : 'bg-gray-300'\n                  }`}\n                  style={{ width: `${receiptProgress.percentage}%` }}\n                />\n              </div>\n              <span className=\"text-[11px] text-gray-600\">\n                {receiptProgress.percentage}%\n              </span>\n            </div>\n          </td>\n          <td className={`px-2 py-1.5 ${COMMON_COLUMN_CLASSES.paymentStatus}`}>\n            {purchase.is_payment_completed ? (\n              <Badge className=\"bg-green-100 text-green-800 text-[11px]\">완료</Badge>\n            ) : (\n              <Badge className=\"bg-gray-100 text-gray-800 text-[11px]\">대기</Badge>\n            )}\n          </td>\n        </>\n      )}\n      \n    </tr>\n  );\n});\n\nTableRow.displayName = 'TableRow';\n\n// 메인 테이블 컴포넌트\nconst FastPurchaseTable = memo(({ \n  purchases, \n  activeTab = 'done', \n  currentUserRoles = [], \n  onRefresh,\n  onPaymentComplete,\n  onReceiptComplete \n}: FastPurchaseTableProps) => {\n  const [selectedPurchaseId, setSelectedPurchaseId] = useState<number | null>(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [deleteConfirmOpen, setDeleteConfirmOpen] = useState(false);\n  const [purchaseToDelete, setPurchaseToDelete] = useState<Purchase | null>(null);\n  const supabase = createClient();\n\n  // 권한 체크 - lead buyer와 app_admin만 구매완료/입고완료 버튼 사용 가능\n  const isLeadBuyer = currentUserRoles && (\n    currentUserRoles.includes('lead buyer') ||\n    currentUserRoles.includes('app_admin')\n  );\n  \n\n  // 권한 체크\n  const canEdit = currentUserRoles.includes('final_approver') || \n                  currentUserRoles.includes('app_admin') || \n                  currentUserRoles.includes('ceo');\n  \n  const canDelete = canEdit;\n\n  const handleRowClick = (purchase: Purchase) => {\n    setSelectedPurchaseId(purchase.id);\n    setIsModalOpen(true);\n  };\n\n  const handleCloseModal = () => {\n    setIsModalOpen(false);\n    setSelectedPurchaseId(null);\n  };\n\n  // 엑셀 다운로드 핸들러\n  const handleExcelDownload = async (purchase: Purchase) => {\n    try {\n      // DB에서 직접 모든 품목 조회\n      const { data: purchaseRequest, error: requestError } = await supabase\n        .from('purchase_requests')\n        .select('*')\n        .eq('purchase_order_number', purchase.purchase_order_number)\n        .single();\n\n      if (requestError || !purchaseRequest) {\n        toast.error('해당 발주요청번호의 데이터를 찾을 수 없습니다.');\n        return;\n      }\n\n      // 품목 데이터 조회\n      const { data: orderItems, error: itemsError } = await supabase\n        .from('purchase_request_items')\n        .select('*')\n        .eq('purchase_order_number', purchase.purchase_order_number)\n        .order('line_number');\n\n      if (itemsError || !orderItems || orderItems.length === 0) {\n        toast.error('해당 발주요청번호의 품목 데이터를 찾을 수 없습니다.');\n        return;\n      }\n\n      // 업체 상세 정보 및 담당자 정보 조회\n      const vendorInfo = {\n        vendor_name: purchase.vendor_name,\n        vendor_phone: '',\n        vendor_fax: '',\n        vendor_contact_name: '',\n        vendor_payment_schedule: ''\n      };\n\n      try {\n        const vendorId = purchaseRequest.vendor_id || purchase.vendor_id;\n        const contactId = purchaseRequest.contact_id || purchase.contact_id;\n        \n        // vendor 정보 조회\n        if (vendorId) {\n          const { data: vendorData } = await supabase\n            .from('vendors')\n            .select('vendor_phone, vendor_fax, vendor_payment_schedule')\n            .eq('id', vendorId)\n            .single();\n\n          if (vendorData) {\n            vendorInfo.vendor_phone = vendorData.vendor_phone || '';\n            vendorInfo.vendor_fax = vendorData.vendor_fax || '';\n            vendorInfo.vendor_payment_schedule = vendorData.vendor_payment_schedule || '';\n          }\n        }\n\n        // vendor_contacts에서 contact_id로 담당자 정보 조회\n        if (contactId) {\n          const { data: contactData } = await supabase\n            .from('vendor_contacts')\n            .select('contact_name, contact_phone, contact_email')\n            .eq('id', contactId)\n            .single();\n          if (contactData) {\n            vendorInfo.vendor_contact_name = contactData.contact_name || '';\n          }\n        }\n      } catch (error) {\n        // 업체 정보 조회 실패는 무시\n      }\n\n      const excelData: PurchaseOrderData = {\n        purchase_order_number: purchaseRequest.purchase_order_number || '',\n        request_date: purchaseRequest.request_date,\n        delivery_request_date: purchaseRequest.delivery_request_date,\n        requester_name: purchaseRequest.requester_name,\n        vendor_name: vendorInfo.vendor_name || '',\n        vendor_contact_name: vendorInfo.vendor_contact_name,\n        vendor_phone: vendorInfo.vendor_phone,\n        vendor_fax: vendorInfo.vendor_fax,\n        project_vendor: purchaseRequest.project_vendor,\n        sales_order_number: purchaseRequest.sales_order_number,\n        project_item: purchaseRequest.project_item,\n        vendor_payment_schedule: vendorInfo.vendor_payment_schedule,\n        items: orderItems.map((item: any) => ({\n          line_number: item.line_number,\n          item_name: item.item_name,\n          specification: item.specification,\n          quantity: item.quantity,\n          unit_price_value: item.unit_price_value,\n          amount_value: item.amount_value,\n          remark: item.remark,\n          currency: purchaseRequest.currency || 'KRW'\n        }))\n      };\n\n      // 코드 기반 ExcelJS 생성\n      const blob = await generatePurchaseOrderExcelJS(excelData);\n      \n      // 다운로드용 파일명\n      const downloadFilename = `발주서_${excelData.vendor_name}_${excelData.purchase_order_number}.xlsx`;\n\n      // 다운로드 제공\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = downloadFilename;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n      \n      toast.success('엑셀 파일이 다운로드되었습니다.');\n      \n      // DB에 다운로드 완료 플래그(is_po_download) 업데이트 - lead buyer만 해당\n      try {\n        const canUpdateFlag = currentUserRoles && currentUserRoles.includes('lead buyer');\n\n        if (canUpdateFlag) {\n          const { error: downloadFlagErr } = await supabase\n            .from('purchase_requests')\n            .update({ is_po_download: true })\n            .eq('purchase_order_number', purchase.purchase_order_number);\n          \n          if (!downloadFlagErr) {\n            // 화면 업데이트\n            onRefresh?.();\n          }\n        }\n      } catch (flagErr) {\n        // 플래그 업데이트 실패는 무시\n      }\n    } catch (error) {\n      toast.error('엑셀 다운로드에 실패했습니다.');\n    }\n  };\n\n  const handleConfirmDelete = async () => {\n    if (!purchaseToDelete) return;\n\n    logger.debug('발주 삭제 확인', {\n      id: purchaseToDelete.id,\n      purchase_order_number: purchaseToDelete.purchase_order_number,\n      requester_name: purchaseToDelete.requester_name,\n      final_manager_status: purchaseToDelete.final_manager_status\n    });\n\n    try {\n      // 현재 사용자 정보 확인\n      const { data: { user }, error: authError } = await supabase.auth.getUser();\n      \n      \n      if (authError || !user) {\n        toast.error(\"로그인이 필요합니다.\");\n        return;\n      }\n\n      // 사용자 권한 확인\n      const { data: employee, error: empError } = await supabase\n        .from('employees')\n        .select('name, email, purchase_role')\n        .eq('email', user.email)\n        .single();\n\n      logger.debug('사용자 권한 확인', {\n        employee: employee?.name,\n        roles: employee?.purchase_role,\n        email: employee?.email\n      });\n\n      if (empError || !employee) {\n        toast.error(\"사용자 권한을 확인할 수 없습니다.\");\n        return;\n      }\n\n      // 권한 체크\n      let roles: string[] = [];\n      if (employee.purchase_role) {\n        if (Array.isArray(employee.purchase_role)) {\n          roles = employee.purchase_role.map(r => String(r).trim());\n        } else {\n          const roleString = String(employee.purchase_role);\n          roles = roleString.split(',').map(r => r.trim()).filter(r => r.length > 0);\n        }\n      }\n\n      const canEdit = roles.includes('final_approver') || \n                      roles.includes('app_admin') || \n                      roles.includes('ceo');\n      \n      const isApproved = purchaseToDelete.final_manager_status === 'approved';\n      const isRequester = purchaseToDelete.requester_name === employee.name;\n      const canDeleteThis = isApproved ? canEdit : (canEdit || isRequester);\n\n      logger.debug('삭제 권한 확인', {\n        canEdit,\n        isApproved,\n        isRequester,\n        canDeleteThis,\n        userRoles: roles\n      });\n\n      if (!canDeleteThis) {\n        toast.error(\"삭제 권한이 없습니다.\");\n        return;\n      }\n\n\n      // 모든 아이템 삭제\n      const { data: deletedItems, error: itemsError } = await supabase\n        .from('purchase_request_items')\n        .delete()\n        .eq('purchase_request_id', purchaseToDelete.id)\n        .select();\n\n      if (itemsError) {\n        logger.error('아이템 삭제 중 오류 발생', itemsError, {\n          code: itemsError.code,\n          message: itemsError.message,\n          details: itemsError.details,\n          hint: itemsError.hint\n        });\n        throw itemsError;\n      }\n\n      logger.debug('아이템 삭제 완료', {\n        deletedItemsCount: deletedItems?.length || 0,\n        purchaseRequestId: purchaseToDelete.id\n      });\n\n      // 발주요청 삭제\n      const { data: deletedRequest, error: requestError } = await supabase\n        .from('purchase_requests')\n        .delete()\n        .eq('id', purchaseToDelete.id)\n        .select();\n\n      if (requestError) {\n        logger.error('발주요청 삭제 중 오류 발생', requestError, {\n          code: requestError.code,\n          message: requestError.message,\n          details: requestError.details,\n          hint: requestError.hint\n        });\n        throw requestError;\n      }\n\n      logger.debug('발주요청 삭제 완료', {\n        deletedRequestId: purchaseToDelete.id,\n        purchase_order_number: purchaseToDelete.purchase_order_number\n      });\n\n      toast.success(\"발주요청 내역이 삭제되었습니다.\");\n      onRefresh?.();\n    } catch (error) {\n      const errorObj = error as any;\n      logger.error('발주요청 삭제 중 예외 발생', errorObj, {\n        name: errorObj?.name,\n        message: errorObj?.message,\n        code: errorObj?.code,\n        details: errorObj?.details,\n        hint: errorObj?.hint,\n        stack: errorObj?.stack\n      });\n      toast.error(`삭제 중 오류가 발생했습니다: ${errorObj?.message || '알 수 없는 오류'}`);\n    }\n    \n    setDeleteConfirmOpen(false);\n    setPurchaseToDelete(null);\n  };\n\n  // 탭별 테이블 헤더 메모화\n  const tableHeader = useMemo(() => {\n    if (activeTab === 'pending') {\n      return (\n        <thead className=\"bg-gray-50\">\n          <tr>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.approvalStatus}`}>승인상태</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.purchaseOrderNumber}`}>발주번호</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.paymentCategory}`}>결제종류</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.requesterName}`}>요청자</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.requestDate}`}>청구일</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] text-left ${COMMON_COLUMN_CLASSES.vendorName}`}>업체</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.contactName}`}>담당자</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.deliveryRequestDate}`}>입고요청일</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.revisedDeliveryRequestDate}`}>변경 입고일</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] text-left ${COMMON_COLUMN_CLASSES.itemName}`}>품명</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] text-left ${COMMON_COLUMN_CLASSES.specification}`}>규격</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.quantity}`}>수량</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.unitPrice}`}>단가</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.amount}`}>합계</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.remark}`}>비고</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.projectVendor}`}>PJ업체</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.projectItem}`}>PJ ITEM</th>\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.salesOrderNumber}`}>수주번호</th>\n          </tr>\n        </thead>\n      );\n    }\n    \n    const baseHeaders = (\n      <>\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.purchaseOrderNumber}`}>발주번호</th>\n        {(activeTab === 'receipt' || activeTab === 'done' || !activeTab) && (\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.paymentCategory}`}>결제종류</th>\n        )}\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.requesterName}`}>요청자</th>\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.requestDate}`}>청구일</th>\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.vendorName}`}>업체</th>\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.contactName}`}>담당자</th>\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.deliveryRequestDate}`}>입고요청일</th>\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.revisedDeliveryRequestDate}`}>변경 입고일</th>\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] text-left ${COMMON_COLUMN_CLASSES.itemName}`}>품명</th>\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] text-left ${COMMON_COLUMN_CLASSES.specification}`}>규격</th>\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.quantity}`}>수량</th>\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.unitPrice}`}>단가</th>\n        <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.amount}`}>합계</th>\n      </>\n    );\n\n    let additionalHeaders = null;\n    \n    if (activeTab === 'purchase') {\n      additionalHeaders = (\n        <>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.remark}`}>비고</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.link}`}>링크</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.paymentSchedule}`}>지출예정일</th>\n        </>\n      );\n    } else if (activeTab === 'receipt') {\n      additionalHeaders = (\n        <>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.remark}`}>비고</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.projectVendor}`}>PJ업체</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.projectItem}`}>PJ ITEM</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.salesOrderNumber}`}>수주번호</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.paymentSchedule}`}>지출예정일</th>\n        </>\n      );\n    } else {\n      // done 또는 기본\n      additionalHeaders = (\n        <>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.remark}`}>비고</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.link}`}>링크</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.projectVendor}`}>PJ업체</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.projectItem}`}>PJ ITEM</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.salesOrderNumber}`}>수주번호</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${COMMON_COLUMN_CLASSES.paymentSchedule}`}>지출예정일</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.status}`}>구매진행</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.receipt}`}>입고진행</th>\n          <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.paymentStatus}`}>결제</th>\n        </>\n      );\n    }\n\n    return (\n      <thead className=\"bg-gray-50\">\n        <tr>\n          {/* 구매현황 탭에서는 구매완료 진행률을 맨 앞에 */}\n          {activeTab === 'purchase' && (\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.receiptProgress}`}>구매진행</th>\n          )}\n          {/* 입고현황 탭에서는 입고진행을 맨 앞에 */}\n          {activeTab === 'receipt' && (\n            <th className={`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${COMMON_COLUMN_CLASSES.receiptProgress}`}>입고진행</th>\n          )}\n          {baseHeaders}\n          {additionalHeaders}\n        </tr>\n      </thead>\n    );\n  }, [activeTab]);\n\n  return (\n    <>\n      {/* 데스크톱 테이블 뷰 - 실제 데이터 1,979건 분석 기반 최적 너비 */}\n      <div className=\"hidden md:block w-full\">\n        <div className=\"overflow-x-auto border rounded-lg\">\n          <table className=\"w-full min-w-[1760px]\">\n            {tableHeader}\n            <tbody>\n              {purchases.map((purchase) => (\n                <TableRow \n                  key={purchase.id} \n                  purchase={purchase} \n                  onClick={handleRowClick}\n                  activeTab={activeTab}\n                  isLeadBuyer={isLeadBuyer}\n                  onPaymentComplete={onPaymentComplete}\n                  onReceiptComplete={onReceiptComplete}\n                  onExcelDownload={handleExcelDownload}\n                />\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n      \n      {/* 태블릿 컴팩트 뷰 */}\n      <div className=\"hidden sm:block md:hidden w-full\">\n        <div className=\"overflow-x-auto border rounded-lg\">\n          <table className=\"w-full min-w-[600px] text-[11px]\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"text-left p-2 font-medium text-gray-900 w-24\">발주번호</th>\n                <th className=\"text-left p-2 font-medium text-gray-900 w-16\">요청자</th>\n                <th className=\"text-left p-2 font-medium text-gray-900 w-20\">업체</th>\n                <th className=\"text-left p-2 font-medium text-gray-900 w-32\">품명</th>\n                <th className=\"text-right p-2 font-medium text-gray-900 w-20\">금액</th>\n                <th className=\"text-center p-2 font-medium text-gray-900 w-16\">상태</th>\n              </tr>\n            </thead>\n            <tbody>\n              {purchases.map((purchase) => (\n                <tr \n                  key={purchase.id}\n                  className=\"border-b hover:bg-gray-50 cursor-pointer\"\n                  onClick={() => handleRowClick(purchase)}\n                >\n                  <td className=\"p-2 font-medium\">{purchase.purchase_order_number || '-'}</td>\n                  <td className=\"p-2\">{purchase.requester_name}</td>\n                  <td className=\"p-2 truncate\" title={purchase.vendor_name}>{purchase.vendor_name}</td>\n                  <td className=\"p-2 truncate\" title={purchase.item_name}>{purchase.item_name || '-'}</td>\n                  <td className=\"p-2 text-right font-medium\">\n                    {purchase.amount_value ? `${purchase.amount_value.toLocaleString()} ${getCurrencySymbol(purchase.currency || 'KRW')}` : purchase.total_amount ? `${purchase.total_amount.toLocaleString()} ${getCurrencySymbol(purchase.currency || 'KRW')}` : `0 ${getCurrencySymbol(purchase.currency || 'KRW')}`}\n                  </td>\n                  <td className=\"p-2 text-center\">\n                    <StatusBadge purchase={purchase} />\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n      \n      {/* 모바일 카드 뷰 */}\n      <div className=\"sm:hidden space-y-3\">\n        {purchases.map((purchase) => (\n          <MobilePurchaseCard\n            key={purchase.id}\n            purchase={purchase}\n            onClick={() => handleRowClick(purchase)}\n          />\n        ))}\n      </div>\n      \n      {/* 통합 상세/편집 모달 */}\n      <PurchaseDetailModal\n        purchaseId={selectedPurchaseId}\n        isOpen={isModalOpen}\n        onClose={handleCloseModal}\n        currentUserRoles={currentUserRoles}\n        activeTab={activeTab}\n        onRefresh={onRefresh}\n        onDelete={(purchase) => {\n          setPurchaseToDelete(purchase as unknown as Purchase);\n          setDeleteConfirmOpen(true);\n        }}\n      />\n\n      {/* 삭제 확인 다이얼로그 */}\n      <AlertDialog open={deleteConfirmOpen} onOpenChange={setDeleteConfirmOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>발주요청 내역 삭제</AlertDialogTitle>\n            <AlertDialogDescription>\n              발주요청번호 {purchaseToDelete?.purchase_order_number}를 삭제하시겠습니까?\n              이 작업은 되돌릴 수 없습니다.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>취소</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleConfirmDelete}\n              className=\"bg-red-600 hover:bg-red-700\"\n            >\n              삭제\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </>\n  );\n});\n\nFastPurchaseTable.displayName = 'FastPurchaseTable';\n\nexport default FastPurchaseTable;"],"file":"assets/FastPurchaseTable-Bovm6XwT.js"}