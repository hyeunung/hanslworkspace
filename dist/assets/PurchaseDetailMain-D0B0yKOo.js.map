{"version":3,"file":"PurchaseDetailMain-D0B0yKOo.js","sources":["../../node_modules/lucide-react/dist/esm/icons/arrow-left.js","../../src/components/purchase/PurchaseDetailMain.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.541.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n];\nconst ArrowLeft = createLucideIcon(\"arrow-left\", __iconNode);\n\nexport { __iconNode, ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n","\nimport { useEffect, useState } from 'react'\nimport { useParams, useNavigate } from 'react-router-dom'\nimport { createClient } from '@/lib/supabase/client'\nimport { PurchaseRequestWithDetails } from '@/types/purchase'\nimport { ArrowLeft, Calendar, User, Building2, Package, CreditCard } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { toast } from 'sonner'\n\nexport default function PurchaseDetailMain() {\n  const { id } = useParams<{ id: string }>()\n  const navigate = useNavigate()\n  const [loading, setLoading] = useState(true)\n  const [purchase, setPurchase] = useState<PurchaseRequestWithDetails | null>(null)\n\n  useEffect(() => {\n    if (id) {\n      loadPurchaseDetail(id)\n    }\n  }, [id])\n\n  const loadPurchaseDetail = async (purchaseId: string) => {\n    try {\n      const supabase = createClient()\n      \n      \n      const { data, error } = await supabase\n        .from('purchase_requests')\n        .select('*,vendors(id,vendor_name),purchase_request_items(*)')\n        .eq('id', purchaseId)\n        .single()\n\n\n      if (error) throw error\n\n      if (data) {\n        setPurchase({\n          ...data,\n          items: data.purchase_request_items || [],\n          vendor: data.vendors || { id: 0, vendor_name: '알 수 없음' },\n          vendor_contacts: []\n        } as PurchaseRequestWithDetails)\n      }\n    } catch (error) {\n      toast.error('발주 상세 정보를 불러오는데 실패했습니다.')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const getStatusBadge = (status: string | null) => {\n    switch (status) {\n      case 'approved':\n        return <Badge variant={null} className=\"badge-success\">승인</Badge>\n      case 'rejected':\n        return <Badge variant={null} className=\"badge-danger\">반려</Badge>\n      case 'pending':\n        return <Badge variant={null} className=\"badge-warning\">대기</Badge>\n      default:\n        return <Badge variant={null} className=\"badge-secondary\">-</Badge>\n    }\n  }\n\n  const getDeliveryStatusBadge = (status: string | null) => {\n    switch (status) {\n      case 'completed':\n        return <Badge variant={null} className=\"badge-success\">납품완료</Badge>\n      case 'partial':\n        return <Badge variant={null} className=\"badge-warning\">부분납품</Badge>\n      case 'pending':\n        return <Badge variant={null} className=\"badge-secondary\">납품대기</Badge>\n      default:\n        return <Badge variant={null} className=\"badge-secondary\">-</Badge>\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n      </div>\n    )\n  }\n\n  if (!purchase) {\n    return (\n      <div className=\"text-center py-12\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">발주 정보를 찾을 수 없습니다</h3>\n        <Button onClick={() => navigate('/purchase/list')} className=\"mt-4\">\n          <ArrowLeft className=\"w-4 h-4 mr-2\" />\n          목록으로 돌아가기\n        </Button>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-4\">\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => navigate('/purchase/list')}\n          >\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            목록으로\n          </Button>\n          <h1 className=\"text-2xl font-semibold text-gray-900\">\n            발주 상세 - {purchase.order_number}\n          </h1>\n        </div>\n      </div>\n\n      {/* Status Overview */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <div className=\"bg-white p-4 rounded-lg border\">\n          <p className=\"text-sm text-gray-600 mb-1\">1차 승인</p>\n          {getStatusBadge(purchase.middle_manager_status)}\n        </div>\n        <div className=\"bg-white p-4 rounded-lg border\">\n          <p className=\"text-sm text-gray-600 mb-1\">최종 승인</p>\n          {getStatusBadge(purchase.final_manager_status)}\n        </div>\n        <div className=\"bg-white p-4 rounded-lg border\">\n          <p className=\"text-sm text-gray-600 mb-1\">구매 처리</p>\n          {getStatusBadge(purchase.purchase_status || 'pending')}\n        </div>\n        <div className=\"bg-white p-4 rounded-lg border\">\n          <p className=\"text-sm text-gray-600 mb-1\">납품 상태</p>\n          {getDeliveryStatusBadge(purchase.delivery_status || 'pending')}\n        </div>\n      </div>\n\n      {/* Basic Info */}\n      <div className=\"bg-white rounded-lg border p-6 space-y-4\">\n        <h2 className=\"text-lg font-semibold text-gray-900\">기본 정보</h2>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <div className=\"flex items-center text-sm text-gray-600 mb-1\">\n              <Calendar className=\"w-4 h-4 mr-2\" />\n              요청일\n            </div>\n            <p className=\"font-medium\">\n              {purchase.created_at ? new Date(purchase.created_at).toLocaleDateString('ko-KR') : '-'}\n            </p>\n          </div>\n          \n          <div>\n            <div className=\"flex items-center text-sm text-gray-600 mb-1\">\n              <User className=\"w-4 h-4 mr-2\" />\n              요청자\n            </div>\n            <p className=\"font-medium\">{purchase.requester_name || '-'}</p>\n          </div>\n          \n          <div>\n            <div className=\"flex items-center text-sm text-gray-600 mb-1\">\n              <Building2 className=\"w-4 h-4 mr-2\" />\n              업체명\n            </div>\n            <p className=\"font-medium\">{purchase.vendor?.vendor_name || '-'}</p>\n          </div>\n          \n          <div>\n            <div className=\"flex items-center text-sm text-gray-600 mb-1\">\n              <CreditCard className=\"w-4 h-4 mr-2\" />\n              총 금액\n            </div>\n            <p className=\"font-medium\">\n              {purchase.total_amount?.toLocaleString('ko-KR')}원\n            </p>\n          </div>\n        </div>\n\n        {purchase.purpose && (\n          <div>\n            <p className=\"text-sm text-gray-600 mb-1\">구매 목적</p>\n            <p className=\"text-gray-900\">{purchase.purpose}</p>\n          </div>\n        )}\n      </div>\n\n      {/* Items */}\n      <div className=\"bg-white rounded-lg border p-6\">\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">구매 품목</h2>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  품목명\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  수량\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  단가\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  금액\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {(purchase.items || []).map((item, index) => (\n                <tr key={index}>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                    {item.item_name}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                    {item.quantity} {item.unit || '개'}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                    {item.unit_price?.toLocaleString('ko-KR')}원\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                    {((item.quantity || 0) * (item.unit_price || 0)).toLocaleString('ko-KR')}원\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Comments */}\n      {(purchase.middle_manager_comment || purchase.final_manager_comment || purchase.purchase_comment) && (\n        <div className=\"bg-white rounded-lg border p-6 space-y-4\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">처리 내역</h2>\n          \n          {purchase.middle_manager_comment && (\n            <div>\n              <p className=\"text-sm font-medium text-gray-600 mb-1\">1차 승인자 코멘트</p>\n              <p className=\"text-gray-900\">{purchase.middle_manager_comment}</p>\n            </div>\n          )}\n          \n          {purchase.final_manager_comment && (\n            <div>\n              <p className=\"text-sm font-medium text-gray-600 mb-1\">최종 승인자 코멘트</p>\n              <p className=\"text-gray-900\">{purchase.final_manager_comment}</p>\n            </div>\n          )}\n          \n          {purchase.purchase_comment && (\n            <div>\n              <p className=\"text-sm font-medium text-gray-600 mb-1\">구매담당자 코멘트</p>\n              <p className=\"text-gray-900\">{purchase.purchase_comment}</p>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  )\n}"],"names":["ArrowLeft","createLucideIcon","d","key","PurchaseDetailMain","id","useParams","navigate","useNavigate","loading","setLoading","useState","purchase","setPurchase","useEffect","loadPurchaseDetail","async","purchaseId","supabase","createClient","data","error","from","select","eq","single","items","purchase_request_items","vendor","vendors","vendor_name","vendor_contacts","toast","getStatusBadge","status","Badge","variant","className","children","jsx","jsxs","Button","size","onClick","order_number","middle_manager_status","final_manager_status","purchase_status","getDeliveryStatusBadge","delivery_status","Calendar","created_at","Date","toLocaleDateString","User","requester_name","Building2","CreditCard","total_amount","toLocaleString","purpose","map","item","index","item_name","quantity","unit","unit_price","middle_manager_comment","final_manager_comment","purchase_comment"],"mappings":"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","x_google_ignoreList":[0]}