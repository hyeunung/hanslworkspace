{"version":3,"mappings":"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","names":["vendorService","constructor","this","supabase","createClient","getVendors","filters","query","from","select","order","search","or","data","error","success","logger","Error","message","getVendor","id","eq","single","createVendor","vendorData","existingVendorByName","vendor_name","insert","updateVendor","neq","update","deleteVendor","fetch","method","headers","body","JSON","stringify","location","vendorId","timestamp","Date","now","sessionId","runId","hypothesisId","catch","purchaseRequests","limit","hasPurchaseRequests","length","count","delete","hasError","errorMessage","getVendorContacts","getVendorsForExport","map","vendor","vendor_phone","vendor_fax","vendor_payment_schedule","vendor_address","note","created_at","toLocaleDateString","VendorFilters","onExport","onCreateNew","className","children","jsxs","jsx","style","marginTop","marginBottom","Button","variant","onClick","Download","Plus","VendorTable","vendors","onEdit","onView","onRefresh","loadingId","setLoadingId","useState","sortedData","sortConfig","handleSort","useTableSort","handleDelete","async","confirm","result","toast","Fragment","Table","TableHeader","TableRow","TableHead","SortableHeader","sortKey","currentSortKey","key","sortDirection","direction","onSort","TableBody","TableCell","colSpan","vendor_contacts","slice","contact","idx","contact_name","contact_phone","contact_email","title","formatDate","DropdownMenu","DropdownMenuTrigger","asChild","disabled","MoreHorizontal","DropdownMenuContent","align","DropdownMenuItem","Eye","Edit","Trash2","size","MobileCard","MobileCardHeader","MobileCardItem","label","value","MobileCardActions","VendorModal","isOpen","onClose","onSave","mode","isSubmitting","setIsSubmitting","form","useForm","defaultValues","useEffect","reset","isReadOnly","Dialog","open","onOpenChange","DialogContent","DialogHeader","DialogTitle","getTitle","Form","onSubmit","handleSubmit","FormField","control","name","rules","required","render","field","FormItem","FormLabel","FormControl","Input","placeholder","FormMessage","Textarea","DialogFooter","type","VendorMain","setVendors","filteredVendors","setFilteredVendors","loading","setLoading","setFilters","isModalOpen","setIsModalOpen","selectedVendor","setSelectedVendor","modalMode","setModalMode","longestVendorNameLength","useMemo","reduce","maxLength","nameLength","Math","max","searchInputWidth","calculated","min","getServerFilters","currentFilters","serverFilters","loadVendors","is_active","business_number","normalizedSearch","trim","toLowerCase","includesSearch","includes","filter","some","position","XLSX","__vitePreload","import","__VITE_PRELOAD__","ws","utils","json_to_sheet","wb","book_new","book_append_sheet","filename","toISOString","writeFile","Search","onChange","e","target","width"],"ignoreList":[],"sources":["../../src/services/vendorService.ts","../../src/components/vendor/VendorFilters.tsx","../../src/components/vendor/VendorTable.tsx","../../src/components/vendor/VendorModal.tsx","../../src/components/vendor/VendorMain.tsx"],"sourcesContent":["import { createClient } from \"@/lib/supabase/client\";\nimport { Vendor, VendorFormData, VendorFilters, VendorContact } from \"@/types/purchase\";\nimport { logger } from \"@/lib/logger\";\n\nclass VendorService {\n  private supabase;\n\n  constructor() {\n    this.supabase = createClient();\n  }\n\n  // 업체 목록 조회\n  async getVendors(filters?: VendorFilters): Promise<{ success: boolean; data?: Vendor[]; error?: string }> {\n    try {\n      let query = this.supabase\n        .from('vendors')\n        .select('*,vendor_contacts(*)')\n        .order('vendor_name');\n\n      // 검색 필터 적용\n      if (filters?.search) {\n        query = query.or(`\n          vendor_name.ilike.%${filters.search}%,\n          vendor_phone.ilike.%${filters.search}%,\n          vendor_fax.ilike.%${filters.search}%,\n          vendor_address.ilike.%${filters.search}%\n        `);\n      }\n\n      // 활성 상태 필터는 제거 (DB에 is_active 컄럼 없음)\n\n      const { data, error } = await query;\n\n      if (error) throw error;\n\n      return { success: true, data: data || [] };\n    } catch (error) {\n      logger.error('업체 목록 조회 실패', error);\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : '알 수 없는 오류가 발생했습니다.' \n      };\n    }\n  }\n\n  // 업체 상세 조회\n  async getVendor(id: number): Promise<{ success: boolean; data?: Vendor; error?: string }> {\n    try {\n      const { data, error } = await this.supabase\n        .from('vendors')\n        .select('*')\n        .eq('id', id)\n        .single();\n\n      if (error) throw error;\n\n      return { success: true, data };\n    } catch (error) {\n      logger.error('업체 조회 실패', error);\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : '알 수 없는 오류가 발생했습니다.' \n      };\n    }\n  }\n\n  // 업체 생성\n  async createVendor(vendorData: VendorFormData): Promise<{ success: boolean; data?: Vendor; error?: string }> {\n    try {\n      // 사업자번호 중복 체크 제거 (DB에 해당 컄럼 없음)\n\n      // 업체명 중복 체크\n      const { data: existingVendorByName } = await this.supabase\n        .from('vendors')\n        .select('id')\n        .eq('vendor_name', vendorData.vendor_name)\n        .single();\n\n      if (existingVendorByName) {\n        return { success: false, error: '이미 등록된 업체명입니다.' };\n      }\n\n      const { data, error } = await this.supabase\n        .from('vendors')\n        .insert(vendorData)\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      return { success: true, data };\n    } catch (error) {\n      logger.error('업체 생성 실패', error);\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : '알 수 없는 오류가 발생했습니다.' \n      };\n    }\n  }\n\n  // 업체 수정\n  async updateVendor(id: number, vendorData: Partial<VendorFormData>): Promise<{ success: boolean; data?: Vendor; error?: string }> {\n    try {\n      // 사업자번호 중복 체크 제거 (DB에 해당 컄럼 없음)\n\n      // 업체명 중복 체크 (자신 제외)\n      if (vendorData.vendor_name) {\n        const { data: existingVendorByName } = await this.supabase\n          .from('vendors')\n          .select('id')\n          .eq('vendor_name', vendorData.vendor_name)\n          .neq('id', id)\n          .single();\n\n        if (existingVendorByName) {\n          return { success: false, error: '이미 등록된 업체명입니다.' };\n        }\n      }\n\n      const { data, error } = await this.supabase\n        .from('vendors')\n        .update(vendorData)\n        .eq('id', id)\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      return { success: true, data };\n    } catch (error) {\n      logger.error('업체 수정 실패', error);\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : '알 수 없는 오류가 발생했습니다.' \n      };\n    }\n  }\n\n  // 업체 삭제\n  async deleteVendor(id: number): Promise<{ success: boolean; error?: string }> {\n    try {\n      // #region agent log\n      fetch('http://127.0.0.1:7242/ingest/b22edbac-a44c-4882-a88d-47f6cafc7628',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'vendorService.ts:141',message:'deleteVendor start',data:{vendorId:id},timestamp:Date.now(),sessionId:'debug-session',runId:'pre',hypothesisId:'A'})}).catch(()=>{});\n      // #endregion\n      // 발주 요청과 연결된 업체인지 확인\n      const { data: purchaseRequests } = await this.supabase\n        .from('purchase_requests')\n        .select('id')\n        .eq('vendor_id', id)\n        .limit(1);\n\n      // #region agent log\n      fetch('http://127.0.0.1:7242/ingest/b22edbac-a44c-4882-a88d-47f6cafc7628',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'vendorService.ts:151',message:'purchaseRequests checked',data:{vendorId:id,hasPurchaseRequests:(purchaseRequests?.length || 0) > 0,count:purchaseRequests?.length || 0},timestamp:Date.now(),sessionId:'debug-session',runId:'pre',hypothesisId:'B'})}).catch(()=>{});\n      // #endregion\n\n      if (purchaseRequests && purchaseRequests.length > 0) {\n        // 발주 요청과 연결된 업체는 삭제 불가\n        return { \n          success: false, \n          error: '발주 요청과 연결된 업체는 삭제할 수 없습니다.' \n        };\n      } else {\n        // #region agent log\n        fetch('http://127.0.0.1:7242/ingest/b22edbac-a44c-4882-a88d-47f6cafc7628',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'vendorService.ts:160',message:'deleting vendor',data:{vendorId:id},timestamp:Date.now(),sessionId:'debug-session',runId:'pre',hypothesisId:'C'})}).catch(()=>{});\n        // #endregion\n        // 연결된 데이터가 없으면 완전 삭제\n        const { error } = await this.supabase\n          .from('vendors')\n          .delete()\n          .eq('id', id);\n\n        // #region agent log\n        fetch('http://127.0.0.1:7242/ingest/b22edbac-a44c-4882-a88d-47f6cafc7628',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'vendorService.ts:169',message:'delete result',data:{vendorId:id,hasError:!!error,errorMessage:error?.message},timestamp:Date.now(),sessionId:'debug-session',runId:'pre',hypothesisId:'C'})}).catch(()=>{});\n        // #endregion\n\n        if (error) throw error;\n\n        return { success: true };\n      }\n    } catch (error) {\n      // #region agent log\n      fetch('http://127.0.0.1:7242/ingest/b22edbac-a44c-4882-a88d-47f6cafc7628',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'vendorService.ts:178',message:'deleteVendor error',data:{vendorId:id,errorMessage:error instanceof Error ? error.message : 'unknown'},timestamp:Date.now(),sessionId:'debug-session',runId:'pre',hypothesisId:'C'})}).catch(()=>{});\n      // #endregion\n      logger.error('업체 삭제 실패', error);\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : '알 수 없는 오류가 발생했습니다.' \n      };\n    }\n  }\n\n  // 업체 활성화/비활성화 토글 - is_active 컄럼이 없어서 제거\n  // 필요 시 나중에 DB에 is_active 컄럼 추가 필요\n\n  // 업체 연락처 조회\n  async getVendorContacts(vendorId: number): Promise<{ success: boolean; data?: VendorContact[]; error?: string }> {\n    try {\n      const { data, error } = await this.supabase\n        .from('vendor_contacts')\n        .select('*')\n        .eq('vendor_id', vendorId)\n        .order('contact_name');\n\n      if (error) throw error;\n\n      return { success: true, data: data || [] };\n    } catch (error) {\n      logger.error('업체 연락처 조회 실패', error);\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : '알 수 없는 오류가 발생했습니다.' \n      };\n    }\n  }\n\n  // Excel 내보내기용 데이터 준비\n  async getVendorsForExport(): Promise<{ success: boolean; data?: Array<Record<string, string>>; error?: string }> {\n    try {\n      const { data, error } = await this.supabase\n        .from('vendors')\n        .select('*')\n        .order('vendor_name');\n\n      if (error) throw error;\n\n      // Excel 형식에 맞게 데이터 변환\n      const exportData = (data || []).map((vendor: any) => ({\n        '업체명': vendor.vendor_name,\n        '전화번호': vendor.vendor_phone || '',\n        '팩스번호': vendor.vendor_fax || '',\n        '결제조건': vendor.vendor_payment_schedule || '',\n        '주소': vendor.vendor_address || '',\n        '비고': vendor.note || '',\n        '등록일': vendor.created_at ? new Date(vendor.created_at).toLocaleDateString('ko-KR') : ''\n      }));\n\n      return { success: true, data: exportData };\n    } catch (error) {\n      logger.error('업체 Excel 내보내기 실패', error);\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : '알 수 없는 오류가 발생했습니다.' \n      };\n    }\n  }\n}\n\nexport const vendorService = new VendorService();","\nimport { Button } from '@/components/ui/button'\nimport { Download, Plus } from 'lucide-react'\n\ninterface VendorFiltersProps {\n  onExport: () => void\n  onCreateNew: () => void\n}\n\nexport default function VendorFilters({ \n  onExport,\n  onCreateNew \n}: VendorFiltersProps) {\n  return (\n    <div className=\"space-y-4\">\n      {/* 상단 액션 버튼 */}\n      <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3\">\n        <div>\n          <h2 className=\"page-title\">업체 관리</h2>\n          <p className=\"page-subtitle\" style={{marginTop:'-2px',marginBottom:'-4px'}}>Vendors Management</p>\n        </div>\n        <div className=\"flex gap-2\">\n          <Button\n            variant=\"outline\"\n            onClick={onExport}\n            className=\"flex items-center gap-1 sm:gap-2 button-base business-radius-button border border-gray-300 bg-white text-gray-700 hover:bg-gray-50\"\n          >\n            <Download className=\"w-3 h-3 sm:w-4 sm:h-4\" />\n            <span className=\"hidden sm:inline badge-text\">Excel 내보내기</span>\n            <span className=\"sm:hidden badge-text\">Excel</span>\n          </Button>\n          <Button \n            onClick={onCreateNew}\n            className=\"flex items-center gap-1 sm:gap-2 button-base business-radius-button bg-blue-500 text-white hover:bg-blue-600\"\n          >\n            <Plus className=\"w-3 h-3 sm:w-4 sm:h-4\" />\n            <span className=\"badge-text\">업체 등록</span>\n          </Button>\n        </div>\n      </div>\n    </div>\n  )\n}","\nimport { useState } from 'react'\nimport { Vendor } from '@/types/purchase'\nimport { formatDate } from '@/utils/helpers'\nimport { Button } from '@/components/ui/button'\nimport { \n  Table, \n  TableBody, \n  TableCell, \n  TableHead, \n  TableHeader, \n  TableRow \n} from '@/components/ui/table'\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu'\nimport { \n  MoreHorizontal, \n  Edit, \n  Trash2, \n  Eye, \n  ToggleLeft, \n  ToggleRight \n} from 'lucide-react'\nimport { vendorService } from '@/services/vendorService'\nimport { toast } from 'sonner'\nimport { useTableSort } from '@/hooks/useTableSort'\nimport { SortableHeader } from '@/components/ui/sortable-header'\nimport { MobileCard, MobileCardItem, MobileCardHeader, MobileCardActions } from '@/components/ui/mobile-card'\n\ninterface VendorTableProps {\n  vendors: Vendor[]\n  onEdit: (vendor: Vendor) => void\n  onView: (vendor: Vendor) => void\n  onRefresh: () => void\n}\n\nexport default function VendorTable({ vendors, onEdit, onView, onRefresh }: VendorTableProps) {\n  const [loadingId, setLoadingId] = useState<number | null>(null)\n  const { sortedData, sortConfig, handleSort } = useTableSort(vendors, 'vendor_name', 'asc')\n\n  // is_active 컄럼이 없어서 토글 기능 제거\n\n  const handleDelete = async (vendor: Vendor) => {\n    // #region agent log\n    fetch('http://127.0.0.1:7242/ingest/b22edbac-a44c-4882-a88d-47f6cafc7628',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'VendorTable.tsx:49',message:'handleDelete clicked',data:{vendorId:vendor.id},timestamp:Date.now(),sessionId:'debug-session',runId:'pre',hypothesisId:'A'})}).catch(()=>{});\n    // #endregion\n    if (!confirm(`정말로 '${vendor.vendor_name}' 업체를 삭제하시겠습니까?`)) {\n      // #region agent log\n      fetch('http://127.0.0.1:7242/ingest/b22edbac-a44c-4882-a88d-47f6cafc7628',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'VendorTable.tsx:52',message:'delete confirm canceled',data:{vendorId:vendor.id},timestamp:Date.now(),sessionId:'debug-session',runId:'pre',hypothesisId:'A'})}).catch(()=>{});\n      // #endregion\n      return\n    }\n\n    setLoadingId(vendor.id)\n    try {\n      const result = await vendorService.deleteVendor(vendor.id)\n      // #region agent log\n      fetch('http://127.0.0.1:7242/ingest/b22edbac-a44c-4882-a88d-47f6cafc7628',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'VendorTable.tsx:61',message:'deleteVendor result',data:{vendorId:vendor.id,success:result.success,error:result.error},timestamp:Date.now(),sessionId:'debug-session',runId:'pre',hypothesisId:'B'})}).catch(()=>{});\n      // #endregion\n      \n      if (result.success) {\n        toast.success('업체가 삭제되었습니다.')\n        onRefresh()\n      } else {\n        toast.error(result.error || '삭제에 실패했습니다.')\n      }\n    } catch (error) {\n      // #region agent log\n      fetch('http://127.0.0.1:7242/ingest/b22edbac-a44c-4882-a88d-47f6cafc7628',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'VendorTable.tsx:72',message:'handleDelete error',data:{vendorId:vendor.id,errorMessage:error instanceof Error ? error.message : 'unknown'},timestamp:Date.now(),sessionId:'debug-session',runId:'pre',hypothesisId:'C'})}).catch(()=>{});\n      // #endregion\n      toast.error('삭제 중 오류가 발생했습니다.')\n    } finally {\n      setLoadingId(null)\n    }\n  }\n\n  // formatDate는 utils/helpers.ts에서 import\n\n  return (\n    <>\n      {/* Desktop Table View */}\n      <div className=\"hidden lg:block border rounded-lg overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <Table>\n        <TableHeader>\n          <TableRow>\n            <TableHead className=\"w-24 min-w-[80px] lg:w-32\">\n              <SortableHeader\n                sortKey=\"vendor_name\"\n                currentSortKey={sortConfig.key as string | null}\n                sortDirection={sortConfig.direction}\n                onSort={() => handleSort('vendor_name' as keyof Vendor)}\n              >\n                업체명\n              </SortableHeader>\n            </TableHead>\n            <TableHead className=\"w-16 min-w-[50px] text-center\">담당자</TableHead>\n            <TableHead className=\"min-w-[200px]\">담당자 정보</TableHead>\n            <TableHead className=\"w-28 min-w-[110px]\">전화번호</TableHead>\n            <TableHead className=\"w-28 min-w-[110px]\">팩스번호</TableHead>\n            <TableHead className=\"w-24 min-w-[100px]\">지출예정일</TableHead>\n            <TableHead className=\"w-20 min-w-[60px]\">\n              <SortableHeader\n                sortKey=\"created_at\"\n                currentSortKey={sortConfig.key as string | null}\n                sortDirection={sortConfig.direction}\n                onSort={() => handleSort('created_at' as keyof Vendor)}\n              >\n                등록일\n              </SortableHeader>\n            </TableHead>\n            <TableHead className=\"w-14 min-w-[45px] text-center\">작업</TableHead>\n          </TableRow>\n        </TableHeader>\n        <TableBody>\n          {vendors.length === 0 ? (\n            <TableRow>\n              <TableCell colSpan={8} className=\"text-center py-8 text-gray-500\">\n                등록된 업체가 없습니다.\n              </TableCell>\n            </TableRow>\n          ) : (\n            sortedData.map((vendor) => (\n              <TableRow key={vendor.id}>\n                <TableCell className=\"modal-value px-2 py-1.5\">\n                  {vendor.vendor_name}\n                </TableCell>\n                <TableCell className=\"text-center text-[11px] px-1 py-1.5\">\n                  <span className=\"badge-stats border border-gray-300 bg-white text-gray-600 text-[10px] px-1 py-0\">\n                    {vendor.vendor_contacts?.length || 0}명\n                  </span>\n                </TableCell>\n                <TableCell className=\"px-2 py-1.5\">\n                  <div className=\"space-y-0.5\">\n                    {vendor.vendor_contacts && vendor.vendor_contacts.length > 0 ? (\n                      vendor.vendor_contacts.slice(0, 2).map((contact: any, idx: number) => (\n                        <div key={idx} className=\"text-[10px]\">\n                          <span className=\"modal-value\">{contact.contact_name}</span>\n                          <span className=\"text-gray-500 ml-1\">{contact.contact_phone}</span>\n                          {contact.contact_email && (\n                            <span className=\"text-gray-500 ml-1 truncate inline-block max-w-[180px]\">{contact.contact_email}</span>\n                          )}\n                        </div>\n                      ))\n                    ) : (\n                      <span className=\"text-gray-400 text-[10px]\">담당자 없음</span>\n                    )}\n                    {vendor.vendor_contacts && vendor.vendor_contacts.length > 2 && (\n                      <span className=\"text-[10px] text-gray-500\">외 {vendor.vendor_contacts.length - 2}명</span>\n                    )}\n                  </div>\n                </TableCell>\n                <TableCell className=\"text-[11px] px-2 py-1.5\">\n                  <span className=\"block truncate\" title={vendor.vendor_phone || ''}>\n                    {vendor.vendor_phone || '-'}\n                  </span>\n                </TableCell>\n                <TableCell className=\"text-[11px] px-2 py-1.5\">\n                  <span className=\"block truncate\" title={vendor.vendor_fax || ''}>\n                    {vendor.vendor_fax || '-'}\n                  </span>\n                </TableCell>\n                <TableCell className=\"text-[11px] px-2 py-1.5\">\n                  <span className=\"block truncate\" title={vendor.vendor_payment_schedule || ''}>\n                    {vendor.vendor_payment_schedule || '-'}\n                  </span>\n                </TableCell>\n                <TableCell className=\"text-[11px] px-2 py-1.5\">{formatDate(vendor.created_at)}</TableCell>\n                <TableCell className=\"px-1 py-1.5 text-center\">\n                  <DropdownMenu>\n                    <DropdownMenuTrigger asChild>\n                      <Button\n                        variant=\"ghost\"\n                        className=\"h-7 w-7 p-0\"\n                        disabled={loadingId === vendor.id}\n                      >\n                        <MoreHorizontal className=\"h-3 w-3\" />\n                      </Button>\n                    </DropdownMenuTrigger>\n                    <DropdownMenuContent align=\"end\">\n                      <DropdownMenuItem onClick={() => onView(vendor)}>\n                        <Eye className=\"mr-2 h-4 w-4\" />\n                        상세 보기\n                      </DropdownMenuItem>\n                      <DropdownMenuItem onClick={() => onEdit(vendor)}>\n                        <Edit className=\"mr-2 h-4 w-4\" />\n                        수정\n                      </DropdownMenuItem>\n                      <DropdownMenuItem \n                        onClick={() => handleDelete(vendor)}\n                        className=\"text-red-600\"\n                      >\n                        <Trash2 className=\"mr-2 h-4 w-4\" />\n                        삭제\n                      </DropdownMenuItem>\n                    </DropdownMenuContent>\n                  </DropdownMenu>\n                </TableCell>\n              </TableRow>\n            ))\n          )}\n        </TableBody>\n          </Table>\n        </div>\n      </div>\n\n      {/* Tablet View */}\n      <div className=\"hidden md:block lg:hidden\">\n        <div className=\"overflow-x-auto border rounded-lg\">\n          <table className=\"w-full min-w-[900px]\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"text-left p-3 header-title text-gray-900\">업체명</th>\n                <th className=\"text-center p-3 header-title text-gray-900 w-20\">담당자</th>\n                <th className=\"text-left p-3 header-title text-gray-900\">연락처</th>\n                <th className=\"text-left p-3 header-title text-gray-900 w-28\">전화번호</th>\n                <th className=\"text-left p-3 header-title text-gray-900 w-28\">팩스번호</th>\n                <th className=\"text-left p-3 header-title text-gray-900 w-24\">지출예정일</th>\n                <th className=\"text-left p-3 header-title text-gray-900 w-24\">등록일</th>\n                <th className=\"text-center p-3 header-title text-gray-900 w-16\">작업</th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {sortedData.length === 0 ? (\n                <tr>\n                  <td colSpan={8} className=\"text-center py-8 text-gray-500\">\n                    등록된 업체가 없습니다.\n                  </td>\n                </tr>\n              ) : (\n                sortedData.map((vendor) => (\n                  <tr key={vendor.id} className=\"hover:bg-gray-50\">\n                    <td className=\"p-3 modal-value\">{vendor.vendor_name}</td>\n                    <td className=\"p-3 text-center\">\n                      <span className=\"badge-stats border border-gray-300 bg-white text-gray-600 badge-text\">\n                        {vendor.vendor_contacts?.length || 0}명\n                      </span>\n                    </td>\n                    <td className=\"p-3 modal-subtitle\">\n                      {vendor.vendor_contacts && vendor.vendor_contacts.length > 0 ? (\n                        <div>\n                          <div className=\"modal-value\">{vendor.vendor_contacts[0].contact_name}</div>\n                          <div className=\"text-gray-500 badge-text\">{vendor.vendor_contacts[0].contact_phone}</div>\n                        </div>\n                      ) : (\n                        <span className=\"text-gray-400\">담당자 없음</span>\n                      )}\n                    </td>\n                    <td className=\"p-3 modal-subtitle\">\n                      <span className=\"block truncate\" title={vendor.vendor_phone || ''}>\n                        {vendor.vendor_phone || '-'}\n                      </span>\n                    </td>\n                    <td className=\"p-3 modal-subtitle\">\n                      <span className=\"block truncate\" title={vendor.vendor_fax || ''}>\n                        {vendor.vendor_fax || '-'}\n                      </span>\n                    </td>\n                    <td className=\"p-3 modal-subtitle\">\n                      <span className=\"block truncate\" title={vendor.vendor_payment_schedule || ''}>\n                        {vendor.vendor_payment_schedule || '-'}\n                      </span>\n                    </td>\n                    <td className=\"p-3 modal-subtitle\">{formatDate(vendor.created_at)}</td>\n                    <td className=\"p-3 text-center\">\n                      <DropdownMenu>\n                        <DropdownMenuTrigger asChild>\n                          <Button variant=\"ghost\" size=\"sm\" className=\"h-8 w-8 p-0\">\n                            <MoreHorizontal className=\"h-4 w-4\" />\n                          </Button>\n                        </DropdownMenuTrigger>\n                        <DropdownMenuContent align=\"end\">\n                          <DropdownMenuItem onClick={() => onView(vendor)}>\n                            <Eye className=\"mr-2 h-4 w-4\" />\n                            상세 보기\n                          </DropdownMenuItem>\n                          <DropdownMenuItem onClick={() => onEdit(vendor)}>\n                            <Edit className=\"mr-2 h-4 w-4\" />\n                            수정\n                          </DropdownMenuItem>\n                          <DropdownMenuItem \n                            onClick={() => handleDelete(vendor)}\n                            className=\"text-red-600\"\n                          >\n                            <Trash2 className=\"mr-2 h-4 w-4\" />\n                            삭제\n                          </DropdownMenuItem>\n                        </DropdownMenuContent>\n                      </DropdownMenu>\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Mobile Card View */}\n      <div className=\"block md:hidden space-y-3\">\n        {sortedData.length === 0 ? (\n          <div className=\"text-center py-8 text-gray-500\">\n            등록된 업체가 없습니다.\n          </div>\n        ) : (\n          sortedData.map((vendor) => (\n            <MobileCard key={vendor.id}>\n              <MobileCardHeader>\n                <div className=\"flex justify-between items-center\">\n                  <span>{vendor.vendor_name}</span>\n                  <span className=\"badge-stats border border-gray-300 bg-white text-gray-600\">\n                    {vendor.vendor_contacts?.length || 0}명\n                  </span>\n                </div>\n              </MobileCardHeader>\n              \n              <MobileCardItem \n                label=\"담당자\" \n                value={\n                  <div className=\"space-y-1\">\n                    {vendor.vendor_contacts && vendor.vendor_contacts.length > 0 ? (\n                      vendor.vendor_contacts.slice(0, 2).map((contact: any, idx: number) => (\n                        <div key={idx} className=\"modal-subtitle\">\n                          <div className=\"modal-value\">{contact.contact_name}</div>\n                          <div className=\"text-gray-500 badge-text\">{contact.contact_phone}</div>\n                          {contact.contact_email && (\n                            <div className=\"text-gray-500 badge-text\">{contact.contact_email}</div>\n                          )}\n                        </div>\n                      ))\n                    ) : (\n                      <span className=\"text-gray-400\">담당자 없음</span>\n                    )}\n                    {vendor.vendor_contacts && vendor.vendor_contacts.length > 2 && (\n                      <span className=\"modal-subtitle text-gray-500\">외 {vendor.vendor_contacts.length - 2}명</span>\n                    )}\n                  </div>\n                } \n              />\n              <MobileCardItem label=\"전화번호\" value={vendor.vendor_phone || '-'} />\n              <MobileCardItem label=\"팩스번호\" value={vendor.vendor_fax || '-'} />\n              <MobileCardItem label=\"지출예정일\" value={vendor.vendor_payment_schedule || '-'} />\n              <MobileCardItem label=\"등록일\" value={formatDate(vendor.created_at)} />\n              \n              <MobileCardActions>\n                <Button\n                  size=\"sm\"\n                  variant=\"outline\"\n                  onClick={() => onView(vendor)}\n                >\n                  <Eye className=\"w-4 h-4\" />\n                </Button>\n                <Button\n                  size=\"sm\"\n                  variant=\"outline\"\n                  onClick={() => onEdit(vendor)}\n                >\n                  <Edit className=\"w-4 h-4\" />\n                </Button>\n                <Button\n                  size=\"sm\"\n                  variant=\"outline\"\n                  className=\"text-red-600\"\n                  onClick={() => handleDelete(vendor)}\n                  disabled={loadingId === vendor.id}\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                </Button>\n              </MobileCardActions>\n            </MobileCard>\n          ))\n        )}\n      </div>\n    </>\n  )\n}","\nimport { useState, useEffect } from 'react'\nimport { Vendor, VendorFormData } from '@/types/purchase'\nimport { Button } from '@/components/ui/button'\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from '@/components/ui/dialog'\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form'\nimport { Input } from '@/components/ui/input'\nimport { Textarea } from '@/components/ui/textarea'\nimport { useForm } from 'react-hook-form'\nimport { vendorService } from '@/services/vendorService'\nimport { toast } from 'sonner'\n\ninterface VendorModalProps {\n  isOpen: boolean\n  onClose: () => void\n  vendor?: Vendor | null\n  onSave: () => void\n  mode: 'create' | 'edit' | 'view'\n}\n\nexport default function VendorModal({ isOpen, onClose, vendor, onSave, mode }: VendorModalProps) {\n  const [isSubmitting, setIsSubmitting] = useState(false)\n\n  const form = useForm<VendorFormData>({\n    defaultValues: {\n      vendor_name: '',\n      vendor_phone: '',\n      vendor_fax: '',\n      vendor_payment_schedule: '',\n      vendor_address: '',\n      note: ''\n    }\n  })\n\n  useEffect(() => {\n    if (vendor && isOpen) {\n      form.reset({\n        vendor_name: vendor.vendor_name || '',\n        vendor_phone: vendor.vendor_phone || '',\n        vendor_fax: vendor.vendor_fax || '',\n        vendor_payment_schedule: vendor.vendor_payment_schedule || '',\n        vendor_address: vendor.vendor_address || '',\n        note: vendor.note || ''\n      })\n    } else if (!vendor && isOpen) {\n      form.reset({\n        vendor_name: '',\n        vendor_phone: '',\n        vendor_fax: '',\n        vendor_payment_schedule: '',\n        vendor_address: '',\n        note: ''\n      })\n    }\n  }, [vendor, isOpen, form])\n\n  const onSubmit = async (data: VendorFormData) => {\n    setIsSubmitting(true)\n    \n    try {\n      let result\n      \n      if (mode === 'create') {\n        result = await vendorService.createVendor(data)\n      } else if (mode === 'edit' && vendor) {\n        result = await vendorService.updateVendor(vendor.id, data)\n      }\n\n      if (result?.success) {\n        toast.success(mode === 'create' ? '업체가 등록되었습니다.' : '업체 정보가 수정되었습니다.')\n        onSave()\n        onClose()\n      } else {\n        toast.error(result?.error || '처리 중 오류가 발생했습니다.')\n      }\n    } catch (error) {\n      toast.error('처리 중 오류가 발생했습니다.')\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  const getTitle = () => {\n    switch (mode) {\n      case 'create': return '업체 등록'\n      case 'edit': return '업체 수정'\n      case 'view': return '업체 상세'\n      default: return '업체'\n    }\n  }\n\n  const isReadOnly = mode === 'view'\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"w-full max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>{getTitle()}</DialogTitle>\n        </DialogHeader>\n        \n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"vendor_name\"\n                rules={{\n                  required: '업체명을 입력해주세요.'\n                }}\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>업체명 *</FormLabel>\n                    <FormControl>\n                      <Input \n                        {...field} \n                        placeholder=\"업체명을 입력하세요\"\n                        className=\"business-radius-input button-base border border-gray-300 bg-white text-gray-700\"\n                        disabled={isReadOnly}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"vendor_phone\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>전화번호</FormLabel>\n                    <FormControl>\n                      <Input \n                        {...field} \n                        placeholder=\"02-1234-5678\"\n                        className=\"business-radius-input button-base border border-gray-300 bg-white text-gray-700\"\n                        disabled={isReadOnly}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"vendor_fax\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>팩스번호</FormLabel>\n                    <FormControl>\n                      <Input \n                        {...field} \n                        placeholder=\"02-1234-5679\"\n                        className=\"business-radius-input button-base border border-gray-300 bg-white text-gray-700\"\n                        disabled={isReadOnly}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"vendor_payment_schedule\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>결제조건</FormLabel>\n                    <FormControl>\n                      <Input \n                        {...field} \n                        placeholder=\"월말결제, 현금결제 등\"\n                        className=\"business-radius-input button-base border border-gray-300 bg-white text-gray-700\"\n                        disabled={isReadOnly}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"vendor_address\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>주소</FormLabel>\n                  <FormControl>\n                    <Textarea \n                      {...field} \n                      placeholder=\"주소를 입력하세요\"\n                      className=\"business-radius-input border border-gray-300 bg-white text-gray-700 card-description min-h-[64px]\"\n                      disabled={isReadOnly}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"note\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>비고</FormLabel>\n                  <FormControl>\n                    <Textarea \n                      {...field} \n                      placeholder=\"메모 사항을 입력하세요\"\n                      className=\"business-radius-input border border-gray-300 bg-white text-gray-700 card-description min-h-[48px]\"\n                      disabled={isReadOnly}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            {mode === 'view' && vendor && (\n              <div className=\"pt-4 border-t\">\n                <div className=\"grid grid-cols-2 gap-4 modal-subtitle\">\n                  <div>\n                    <span className=\"text-gray-500\">상태:</span>\n                    <span className={`ml-2 px-2 py-1 business-radius-badge badge-text bg-green-100 text-green-800`}>\n                      활성\n                    </span>\n                  </div>\n                  <div>\n                    <span className=\"text-gray-500\">등록일:</span>\n                    <span className=\"ml-2\">\n                      {vendor.created_at ? new Date(vendor.created_at).toLocaleDateString('ko-KR') : '-'}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <DialogFooter className=\"gap-2\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={onClose}\n                className=\"button-base business-radius-button border border-gray-300 bg-white text-gray-700 hover:bg-gray-50\"\n              >\n                {mode === 'view' ? '닫기' : '취소'}\n              </Button>\n              {!isReadOnly && (\n                <Button\n                  type=\"submit\"\n                  disabled={isSubmitting}\n                  className=\"button-base business-radius-button bg-blue-500 text-white hover:bg-blue-600\"\n                >\n                  {isSubmitting \n                    ? (mode === 'create' ? '등록 중...' : '수정 중...')\n                    : (mode === 'create' ? '등록' : '수정')\n                  }\n                </Button>\n              )}\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  )\n}","\nimport { useMemo, useState, useEffect } from 'react'\nimport { Vendor, VendorFilters as VendorFiltersType } from '@/types/purchase'\nimport { vendorService } from '@/services/vendorService'\nimport VendorFilters from '@/components/vendor/VendorFilters'\nimport VendorTable from '@/components/vendor/VendorTable'\nimport VendorModal from '@/components/vendor/VendorModal'\nimport { toast } from 'sonner'\nimport { Search } from 'lucide-react'\n// XLSX는 사용할 때만 동적으로 import (성능 최적화)\n\ntype ModalMode = 'create' | 'edit' | 'view'\n\nexport default function VendorMain() {\n  const [vendors, setVendors] = useState<Vendor[]>([])\n  const [filteredVendors, setFilteredVendors] = useState<Vendor[]>([])\n  const [loading, setLoading] = useState(true)\n  const [filters, setFilters] = useState<VendorFiltersType>({})\n  \n  // 모달 상태\n  const [isModalOpen, setIsModalOpen] = useState(false)\n  const [selectedVendor, setSelectedVendor] = useState<Vendor | null>(null)\n  const [modalMode, setModalMode] = useState<ModalMode>('create')\n\n  // 업체 목록 로드\n  const longestVendorNameLength = useMemo(() => {\n    return vendors.reduce((maxLength, vendor) => {\n      const nameLength = (vendor.vendor_name || '').length\n      return Math.max(maxLength, nameLength)\n    }, 0)\n  }, [vendors])\n\n  const searchInputWidth = useMemo(() => {\n    const baseLength = longestVendorNameLength || 10\n    const calculated = baseLength * 8 + 40\n    return Math.min(Math.max(calculated, 180), 320)\n  }, [longestVendorNameLength])\n\n  const getServerFilters = (currentFilters: VendorFiltersType) => {\n    const { search, ...serverFilters } = currentFilters\n    return serverFilters\n  }\n\n  const loadVendors = async (serverFilters: VendorFiltersType = getServerFilters(filters)) => {\n    setLoading(true)\n    try {\n      const result = await vendorService.getVendors(serverFilters)\n      \n      if (result.success && result.data) {\n        setVendors(result.data)\n        setFilteredVendors(result.data)\n      } else {\n        toast.error(result.error || '업체 목록을 불러오는데 실패했습니다.')\n      }\n    } catch (error) {\n      toast.error('업체 목록을 불러오는 중 오류가 발생했습니다.')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  // 서버 필터 변경 시 업체 목록 로드 (초기 로드 포함)\n  useEffect(() => {\n    loadVendors(getServerFilters(filters))\n  }, [filters.is_active, filters.business_number])\n\n  // 검색어 변경 시 로컬 필터링\n  useEffect(() => {\n    const normalizedSearch = (filters.search || '').trim().toLowerCase()\n    if (!normalizedSearch) {\n      setFilteredVendors(vendors)\n      return\n    }\n\n    const includesSearch = (value?: string) =>\n      (value || '').toLowerCase().includes(normalizedSearch)\n\n    const matchesSearch = (vendor: Vendor) => {\n      const vendorFieldsMatch = [\n        vendor.vendor_name,\n        vendor.vendor_phone,\n        vendor.vendor_fax,\n        vendor.vendor_address,\n        vendor.vendor_payment_schedule,\n        vendor.note,\n      ].some(includesSearch)\n\n      if (vendorFieldsMatch) return true\n\n      return (vendor.vendor_contacts || []).some((contact) =>\n        [\n          contact.contact_name,\n          contact.contact_phone,\n          contact.contact_email,\n          contact.position,\n        ].some(includesSearch)\n      )\n    }\n\n    setFilteredVendors(vendors.filter(matchesSearch))\n  }, [filters.search, vendors])\n\n  // 모달 핸들러\n  const handleCreateNew = () => {\n    setSelectedVendor(null)\n    setModalMode('create')\n    setIsModalOpen(true)\n  }\n\n  const handleEdit = (vendor: Vendor) => {\n    setSelectedVendor(vendor)\n    setModalMode('edit')\n    setIsModalOpen(true)\n  }\n\n  const handleView = (vendor: Vendor) => {\n    setSelectedVendor(vendor)\n    setModalMode('view')\n    setIsModalOpen(true)\n  }\n\n  const handleModalClose = () => {\n    setIsModalOpen(false)\n    setSelectedVendor(null)\n  }\n\n  const handleSave = () => {\n    loadVendors(getServerFilters(filters))\n  }\n\n  // Excel 내보내기 (동적 import로 성능 최적화)\n  const handleExport = async () => {\n    try {\n      const result = await vendorService.getVendorsForExport()\n      \n      if (result.success && result.data) {\n        // XLSX를 사용할 때만 동적으로 import\n        const XLSX = await import('xlsx')\n        \n        const ws = XLSX.utils.json_to_sheet(result.data)\n        const wb = XLSX.utils.book_new()\n        XLSX.utils.book_append_sheet(wb, ws, '업체 목록')\n        \n        // 파일명에 현재 날짜 추가\n        const today = new Date().toISOString().slice(0, 10)\n        const filename = `업체_목록_${today}.xlsx`\n        \n        XLSX.writeFile(wb, filename)\n        toast.success('Excel 파일이 다운로드되었습니다.')\n      } else {\n        toast.error(result.error || 'Excel 내보내기에 실패했습니다.')\n      }\n    } catch (error) {\n      toast.error('Excel 내보내기 중 오류가 발생했습니다.')\n    }\n  }\n\n  if (loading && vendors.length === 0) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto\"></div>\n          <p className=\"mt-2 card-subtitle\">업체 목록을 불러오는 중...</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <>\n      <div className=\"space-y-5\">\n      {/* 필터 섹션 */}\n      <VendorFilters\n        onExport={handleExport}\n        onCreateNew={handleCreateNew}\n      />\n\n      {/* 테이블 섹션 */}\n      <div className=\"bg-white\">\n        <div className=\"p-3 border-b border-gray-200\">\n          <div className=\"flex justify-between items-center\">\n            <div className=\"flex items-center gap-3\">\n              <h3 className=\"modal-title\">업체 목록</h3>\n              <div className=\"relative flex items-center\">\n                <Search className=\"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 w-3.5 h-3.5\" />\n                <input\n                  type=\"text\"\n                  value={filters.search || ''}\n                  onChange={(e) => {\n                    setFilters({\n                      ...filters,\n                      search: e.target.value.trim() || undefined\n                    })\n                  }}\n                  placeholder=\"검색어를 입력하세요.\"\n                  style={{ width: `${searchInputWidth}px` }}\n                  className=\"pl-5 pr-1 h-6 bg-transparent text-[13px] text-gray-700 placeholder:text-gray-400 placeholder:text-[10px] border-0 border-b border-gray-300 focus:border-hansl-500 focus:outline-none focus:ring-0 rounded-none shadow-none appearance-none\"\n                />\n              </div>\n              <span className=\"badge-stats bg-blue-50 text-blue-600\">\n                총 {filteredVendors.length}개\n              </span>\n            </div>\n            <div className=\"card-description\">\n              {loading && '업데이트 중...'}\n            </div>\n          </div>\n        </div>\n        \n        <VendorTable\n          vendors={filteredVendors}\n          onEdit={handleEdit}\n          onView={handleView}\n          onRefresh={loadVendors}\n        />\n      </div>\n\n      {/* 모달 */}\n      <VendorModal\n        isOpen={isModalOpen}\n        onClose={handleModalClose}\n        vendor={selectedVendor}\n        onSave={handleSave}\n        mode={modalMode}\n      />\n      </div>\n    </>\n  )\n}"],"file":"assets/VendorMain-BUZOcF8n.js"}