import{c as lt,E as g,r as W,j as a,k as Y,O as Ve,B as V,a as Je,H as Xe,g as Kt,U as Gt,X as Se}from"./index-DURjiRtV.js";import{f as We}from"./helpers-CWDchwQL.js";import{t as $,B as Ee}from"./index-DgYLmkP3.js";import{I as G}from"./input-DR32zq7D.js";import{D as Lt,a as Vt}from"./dialog-BOugK96I.js";import{t as R,c as se,n as we,s as Re,g as Jt,d as Xt,f as ct,a as Qt,b as en,i as tn,e as nn,h as sn,j as rn,k as dt,P as an}from"./format-NvEY_HGk.js";import{a as on,C as ln}from"./circle-check-big-BuVt1Qd6.js";import{C as cn}from"./eye-Dp6JYudF.js";import{a as dn,C as Qe}from"./chevron-down-Diu47hfg.js";import{P as un,a as fn,b as mn}from"./popover-D9IINcEu.js";import{C as ut}from"./calendar-DMR6LWZU.js";import{P as et}from"./package-BOBhWn-U.js";import{C as hn}from"./credit-card-XsL0DUkR.js";import{T as tt}from"./trash-2-CdcJ6l8T.js";import{P as pn}from"./plus-W5OE0DJN.js";import{S as yn}from"./save-CLakp-ew.js";/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],xn=lt("dollar-sign",gn);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],bn=lt("truck",vn);function ft(e,t,n){const s=R(e,n?.in);return isNaN(t)?se(e,NaN):(t&&s.setDate(s.getDate()+t),s)}function mt(e,t,n){const s=R(e,n?.in);if(isNaN(t))return se(e,NaN);if(!t)return s;const r=s.getDate(),o=se(e,s.getTime());o.setMonth(s.getMonth()+t+1,0);const l=o.getDate();return r>=l?o:(s.setFullYear(o.getFullYear(),o.getMonth(),r),s)}function _n(e,t,n){return ft(e,t*7,n)}function Nn(e,t,n){return mt(e,t*12,n)}function wn(e,t){let n,s=t?.in;return e.forEach(r=>{!s&&typeof r=="object"&&(s=se.bind(null,r));const o=R(r,s);(!n||n<o||isNaN(+o))&&(n=o)}),se(s,n||NaN)}function kn(e,t){let n,s=t?.in;return e.forEach(r=>{!s&&typeof r=="object"&&(s=se.bind(null,r));const o=R(r,s);(!n||n>o||isNaN(+o))&&(n=o)}),se(s,n||NaN)}function Dn(e,t,n){const[s,r]=we(n?.in,e,t);return+Re(s)==+Re(r)}function Mn(e,t,n){const[s,r]=we(n?.in,e,t),o=s.getFullYear()-r.getFullYear(),l=s.getMonth()-r.getMonth();return o*12+l}function jn(e,t){const n=R(e,t?.in),s=n.getMonth();return n.setFullYear(n.getFullYear(),s+1,0),n.setHours(23,59,59,999),n}function Cn(e,t){const[n,s]=we(e,t.start,t.end);return{start:n,end:s}}function On(e,t){const{start:n,end:s}=Cn(t?.in,e);let r=+n>+s;const o=r?+n:+s,l=r?s:n;l.setHours(0,0,0,0),l.setDate(1);let i=1;const d=[];for(;+l<=o;)d.push(se(n,l)),l.setMonth(l.getMonth()+i);return r?d.reverse():d}function Sn(e,t){const n=R(e,t?.in);return n.setDate(1),n.setHours(0,0,0,0),n}function Wn(e,t){const n=R(e,t?.in),s=n.getFullYear();return n.setFullYear(s+1,0,0),n.setHours(23,59,59,999),n}function ht(e,t){const n=Jt(),s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,r=R(e,t?.in),o=r.getDay(),l=(o<s?-7:0)+6-(o-s);return r.setDate(r.getDate()+l),r.setHours(23,59,59,999),r}function En(e,t){return ht(e,{...t,weekStartsOn:1})}function qn(e,t){const n=R(e,t?.in),s=n.getFullYear(),r=n.getMonth(),o=se(n,0);return o.setFullYear(s,r+1,0),o.setHours(0,0,0,0),o.getDate()}function Tn(e,t){return R(e,t?.in).getMonth()}function Bn(e,t){return R(e,t?.in).getFullYear()}function Yn(e,t){return+R(e)>+R(t)}function In(e,t){return+R(e)<+R(t)}function Fn(e,t,n){const[s,r]=we(n?.in,e,t);return s.getFullYear()===r.getFullYear()&&s.getMonth()===r.getMonth()}function Pn(e,t,n){const[s,r]=we(n?.in,e,t);return s.getFullYear()===r.getFullYear()}function An(e,t,n){const s=R(e,n?.in),r=s.getFullYear(),o=s.getDate(),l=se(e,0);l.setFullYear(r,t,15),l.setHours(0,0,0,0);const i=qn(l);return s.setMonth(t,Math.min(o,i)),s}function zn(e,t,n){const s=R(e,n?.in);return isNaN(+s)?se(e,NaN):(s.setFullYear(t),s)}function Hn(e,t,n="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:e,timeZoneName:n}).format(t).split(/\s/g).slice(2).join(" ")}const $n={},Ne={};function ye(e,t){try{const s=($n[e]||=new Intl.DateTimeFormat("en-US",{timeZone:e,timeZoneName:"longOffset"}).format)(t).split("GMT")[1];return s in Ne?Ne[s]:nt(s,s.split(":"))}catch{if(e in Ne)return Ne[e];const n=e?.match(Rn);return n?nt(e,n.slice(1)):NaN}}const Rn=/([+-]\d\d):?(\d\d)?/;function nt(e,t){const n=+(t[0]||0),s=+(t[1]||0),r=+(t[2]||0)/60;return Ne[e]=n*60+s>0?n*60+s+r:n*60-s-r}class ie extends Date{constructor(...t){super(),t.length>1&&typeof t[t.length-1]=="string"&&(this.timeZone=t.pop()),this.internal=new Date,isNaN(ye(this.timeZone,this))?this.setTime(NaN):t.length?typeof t[0]=="number"&&(t.length===1||t.length===2&&typeof t[1]!="number")?this.setTime(t[0]):typeof t[0]=="string"?this.setTime(+new Date(t[0])):t[0]instanceof Date?this.setTime(+t[0]):(this.setTime(+new Date(...t)),pt(this),Ze(this)):this.setTime(Date.now())}static tz(t,...n){return n.length?new ie(...n,t):new ie(Date.now(),t)}withTimeZone(t){return new ie(+this,t)}getTimezoneOffset(){const t=-ye(this.timeZone,this);return t>0?Math.floor(t):Math.ceil(t)}setTime(t){return Date.prototype.setTime.apply(this,arguments),Ze(this),+this}[Symbol.for("constructDateFrom")](t){return new ie(+new Date(t),this.timeZone)}}const st=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(e=>{if(!st.test(e))return;const t=e.replace(st,"$1UTC");ie.prototype[t]&&(e.startsWith("get")?ie.prototype[e]=function(){return this.internal[t]()}:(ie.prototype[e]=function(){return Date.prototype[t].apply(this.internal,arguments),Zn(this),+this},ie.prototype[t]=function(){return Date.prototype[t].apply(this,arguments),Ze(this),+this}))});function Ze(e){e.internal.setTime(+e),e.internal.setUTCSeconds(e.internal.getUTCSeconds()-Math.round(-ye(e.timeZone,e)*60))}function Zn(e){Date.prototype.setFullYear.call(e,e.internal.getUTCFullYear(),e.internal.getUTCMonth(),e.internal.getUTCDate()),Date.prototype.setHours.call(e,e.internal.getUTCHours(),e.internal.getUTCMinutes(),e.internal.getUTCSeconds(),e.internal.getUTCMilliseconds()),pt(e)}function pt(e){const t=ye(e.timeZone,e),n=t>0?Math.floor(t):Math.ceil(t),s=new Date(+e);s.setUTCHours(s.getUTCHours()-1);const r=-new Date(+e).getTimezoneOffset(),o=-new Date(+s).getTimezoneOffset(),l=r-o,i=Date.prototype.getHours.apply(e)!==e.internal.getUTCHours();l&&i&&e.internal.setUTCMinutes(e.internal.getUTCMinutes()+l);const d=r-n;d&&Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+d);const h=new Date(+e);h.setUTCSeconds(0);const c=r>0?h.getSeconds():(h.getSeconds()-60)%60,p=Math.round(-(ye(e.timeZone,e)*60))%60;(p||c)&&(e.internal.setUTCSeconds(e.internal.getUTCSeconds()+p),Date.prototype.setUTCSeconds.call(e,Date.prototype.getUTCSeconds.call(e)+p+c));const f=ye(e.timeZone,e),N=f>0?Math.floor(f):Math.ceil(f),w=-new Date(+e).getTimezoneOffset()-N,b=N!==n,O=w-d;if(b&&O){Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+O);const q=ye(e.timeZone,e),D=q>0?Math.floor(q):Math.ceil(q),I=N-D;I&&(e.internal.setUTCMinutes(e.internal.getUTCMinutes()+I),Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+I))}}class K extends ie{static tz(t,...n){return n.length?new K(...n,t):new K(Date.now(),t)}toISOString(){const[t,n,s]=this.tzComponents(),r=`${t}${n}:${s}`;return this.internal.toISOString().slice(0,-1)+r}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[t,n,s,r]=this.internal.toUTCString().split(" ");return`${t?.slice(0,-1)} ${s} ${n} ${r}`}toTimeString(){const t=this.internal.toUTCString().split(" ")[4],[n,s,r]=this.tzComponents();return`${t} GMT${n}${s}${r} (${Hn(this.timeZone,this)})`}toLocaleString(t,n){return Date.prototype.toLocaleString.call(this,t,{...n,timeZone:n?.timeZone||this.timeZone})}toLocaleDateString(t,n){return Date.prototype.toLocaleDateString.call(this,t,{...n,timeZone:n?.timeZone||this.timeZone})}toLocaleTimeString(t,n){return Date.prototype.toLocaleTimeString.call(this,t,{...n,timeZone:n?.timeZone||this.timeZone})}tzComponents(){const t=this.getTimezoneOffset(),n=t>0?"-":"+",s=String(Math.floor(Math.abs(t)/60)).padStart(2,"0"),r=String(Math.abs(t)%60).padStart(2,"0");return[n,s,r]}withTimeZone(t){return new K(+this,t)}[Symbol.for("constructDateFrom")](t){return new K(+new Date(t),this.timeZone)}}const rt=5,Un=4;function Kn(e,t){const n=t.startOfMonth(e),s=n.getDay()>0?n.getDay():7,r=t.addDays(e,-s+1),o=t.addDays(r,rt*7-1);return t.getMonth(e)===t.getMonth(o)?rt:Un}function yt(e,t){const n=t.startOfMonth(e),s=n.getDay();return s===1?n:s===0?t.addDays(n,-6):t.addDays(n,-1*(s-1))}function Gn(e,t){const n=yt(e,t),s=Kn(e,t);return t.addDays(n,s*7-1)}class me{constructor(t,n){this.Date=Date,this.today=()=>this.overrides?.today?this.overrides.today():this.options.timeZone?K.tz(this.options.timeZone):new this.Date,this.newDate=(s,r,o)=>this.overrides?.newDate?this.overrides.newDate(s,r,o):this.options.timeZone?new K(s,r,o,this.options.timeZone):new Date(s,r,o),this.addDays=(s,r)=>this.overrides?.addDays?this.overrides.addDays(s,r):ft(s,r),this.addMonths=(s,r)=>this.overrides?.addMonths?this.overrides.addMonths(s,r):mt(s,r),this.addWeeks=(s,r)=>this.overrides?.addWeeks?this.overrides.addWeeks(s,r):_n(s,r),this.addYears=(s,r)=>this.overrides?.addYears?this.overrides.addYears(s,r):Nn(s,r),this.differenceInCalendarDays=(s,r)=>this.overrides?.differenceInCalendarDays?this.overrides.differenceInCalendarDays(s,r):Xt(s,r),this.differenceInCalendarMonths=(s,r)=>this.overrides?.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(s,r):Mn(s,r),this.eachMonthOfInterval=s=>this.overrides?.eachMonthOfInterval?this.overrides.eachMonthOfInterval(s):On(s),this.endOfBroadcastWeek=s=>this.overrides?.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(s):Gn(s,this),this.endOfISOWeek=s=>this.overrides?.endOfISOWeek?this.overrides.endOfISOWeek(s):En(s),this.endOfMonth=s=>this.overrides?.endOfMonth?this.overrides.endOfMonth(s):jn(s),this.endOfWeek=(s,r)=>this.overrides?.endOfWeek?this.overrides.endOfWeek(s,r):ht(s,this.options),this.endOfYear=s=>this.overrides?.endOfYear?this.overrides.endOfYear(s):Wn(s),this.format=(s,r,o)=>{const l=this.overrides?.format?this.overrides.format(s,r,this.options):ct(s,r,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(l):l},this.getISOWeek=s=>this.overrides?.getISOWeek?this.overrides.getISOWeek(s):Qt(s),this.getMonth=(s,r)=>this.overrides?.getMonth?this.overrides.getMonth(s,this.options):Tn(s,this.options),this.getYear=(s,r)=>this.overrides?.getYear?this.overrides.getYear(s,this.options):Bn(s,this.options),this.getWeek=(s,r)=>this.overrides?.getWeek?this.overrides.getWeek(s,this.options):en(s,this.options),this.isAfter=(s,r)=>this.overrides?.isAfter?this.overrides.isAfter(s,r):Yn(s,r),this.isBefore=(s,r)=>this.overrides?.isBefore?this.overrides.isBefore(s,r):In(s,r),this.isDate=s=>this.overrides?.isDate?this.overrides.isDate(s):tn(s),this.isSameDay=(s,r)=>this.overrides?.isSameDay?this.overrides.isSameDay(s,r):Dn(s,r),this.isSameMonth=(s,r)=>this.overrides?.isSameMonth?this.overrides.isSameMonth(s,r):Fn(s,r),this.isSameYear=(s,r)=>this.overrides?.isSameYear?this.overrides.isSameYear(s,r):Pn(s,r),this.max=s=>this.overrides?.max?this.overrides.max(s):wn(s),this.min=s=>this.overrides?.min?this.overrides.min(s):kn(s),this.setMonth=(s,r)=>this.overrides?.setMonth?this.overrides.setMonth(s,r):An(s,r),this.setYear=(s,r)=>this.overrides?.setYear?this.overrides.setYear(s,r):zn(s,r),this.startOfBroadcastWeek=(s,r)=>this.overrides?.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(s,this):yt(s,this),this.startOfDay=s=>this.overrides?.startOfDay?this.overrides.startOfDay(s):Re(s),this.startOfISOWeek=s=>this.overrides?.startOfISOWeek?this.overrides.startOfISOWeek(s):nn(s),this.startOfMonth=s=>this.overrides?.startOfMonth?this.overrides.startOfMonth(s):Sn(s),this.startOfWeek=(s,r)=>this.overrides?.startOfWeek?this.overrides.startOfWeek(s,this.options):sn(s,this.options),this.startOfYear=s=>this.overrides?.startOfYear?this.overrides.startOfYear(s):rn(s),this.options={locale:dt,...t},this.overrides=n}getDigitMap(){const{numerals:t="latn"}=this.options,n=new Intl.NumberFormat("en-US",{numberingSystem:t}),s={};for(let r=0;r<10;r++)s[r.toString()]=n.format(r);return s}replaceDigits(t){const n=this.getDigitMap();return t.replace(/\d/g,s=>n[s]||s)}formatNumber(t){return this.replaceDigits(t.toString())}}const le=new me;class gt{constructor(t,n,s=le){this.date=t,this.displayMonth=n,this.outside=!!(n&&!s.isSameMonth(t,n)),this.dateLib=s}isEqualTo(t){return this.dateLib.isSameDay(t.date,this.date)&&this.dateLib.isSameMonth(t.displayMonth,this.displayMonth)}}class Ln{constructor(t,n){this.date=t,this.weeks=n}}class Vn{constructor(t,n){this.days=n,this.weekNumber=t}}function Jn(e){return g.createElement("button",{...e})}function Xn(e){return g.createElement("span",{...e})}function Qn(e){const{size:t=24,orientation:n="left",className:s}=e;return g.createElement("svg",{className:s,width:t,height:t,viewBox:"0 0 24 24"},n==="up"&&g.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),n==="down"&&g.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),n==="left"&&g.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),n==="right"&&g.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function es(e){const{day:t,modifiers:n,...s}=e;return g.createElement("td",{...s})}function ts(e){const{day:t,modifiers:n,...s}=e,r=g.useRef(null);return g.useEffect(()=>{n.focused&&r.current?.focus()},[n.focused]),g.createElement("button",{ref:r,...s})}var v;(function(e){e.Root="root",e.Chevron="chevron",e.Day="day",e.DayButton="day_button",e.CaptionLabel="caption_label",e.Dropdowns="dropdowns",e.Dropdown="dropdown",e.DropdownRoot="dropdown_root",e.Footer="footer",e.MonthGrid="month_grid",e.MonthCaption="month_caption",e.MonthsDropdown="months_dropdown",e.Month="month",e.Months="months",e.Nav="nav",e.NextMonthButton="button_next",e.PreviousMonthButton="button_previous",e.Week="week",e.Weeks="weeks",e.Weekday="weekday",e.Weekdays="weekdays",e.WeekNumber="week_number",e.WeekNumberHeader="week_number_header",e.YearsDropdown="years_dropdown"})(v||(v={}));var A;(function(e){e.disabled="disabled",e.hidden="hidden",e.outside="outside",e.focused="focused",e.today="today"})(A||(A={}));var ne;(function(e){e.range_end="range_end",e.range_middle="range_middle",e.range_start="range_start",e.selected="selected"})(ne||(ne={}));var Q;(function(e){e.weeks_before_enter="weeks_before_enter",e.weeks_before_exit="weeks_before_exit",e.weeks_after_enter="weeks_after_enter",e.weeks_after_exit="weeks_after_exit",e.caption_after_enter="caption_after_enter",e.caption_after_exit="caption_after_exit",e.caption_before_enter="caption_before_enter",e.caption_before_exit="caption_before_exit"})(Q||(Q={}));function ns(e){const{options:t,className:n,components:s,classNames:r,...o}=e,l=[r[v.Dropdown],n].join(" "),i=t?.find(({value:d})=>d===o.value);return g.createElement("span",{"data-disabled":o.disabled,className:r[v.DropdownRoot]},g.createElement(s.Select,{className:l,...o},t?.map(({value:d,label:h,disabled:c})=>g.createElement(s.Option,{key:d,value:d,disabled:c},h))),g.createElement("span",{className:r[v.CaptionLabel],"aria-hidden":!0},i?.label,g.createElement(s.Chevron,{orientation:"down",size:18,className:r[v.Chevron]})))}function ss(e){return g.createElement("div",{...e})}function rs(e){return g.createElement("div",{...e})}function as(e){const{calendarMonth:t,displayIndex:n,...s}=e;return g.createElement("div",{...s},e.children)}function os(e){const{calendarMonth:t,displayIndex:n,...s}=e;return g.createElement("div",{...s})}function is(e){return g.createElement("table",{...e})}function ls(e){return g.createElement("div",{...e})}const xt=W.createContext(void 0);function ke(){const e=W.useContext(xt);if(e===void 0)throw new Error("useDayPicker() must be used within a custom component.");return e}function cs(e){const{components:t}=ke();return g.createElement(t.Dropdown,{...e})}function ds(e){const{onPreviousClick:t,onNextClick:n,previousMonth:s,nextMonth:r,...o}=e,{components:l,classNames:i,labels:{labelPrevious:d,labelNext:h}}=ke(),c=W.useCallback(f=>{r&&n?.(f)},[r,n]),p=W.useCallback(f=>{s&&t?.(f)},[s,t]);return g.createElement("nav",{...o},g.createElement(l.PreviousMonthButton,{type:"button",className:i[v.PreviousMonthButton],tabIndex:s?void 0:-1,"aria-disabled":s?void 0:!0,"aria-label":d(s),onClick:p},g.createElement(l.Chevron,{disabled:s?void 0:!0,className:i[v.Chevron],orientation:"left"})),g.createElement(l.NextMonthButton,{type:"button",className:i[v.NextMonthButton],tabIndex:r?void 0:-1,"aria-disabled":r?void 0:!0,"aria-label":h(r),onClick:c},g.createElement(l.Chevron,{disabled:r?void 0:!0,orientation:"right",className:i[v.Chevron]})))}function us(e){const{components:t}=ke();return g.createElement(t.Button,{...e})}function fs(e){return g.createElement("option",{...e})}function ms(e){const{components:t}=ke();return g.createElement(t.Button,{...e})}function hs(e){const{rootRef:t,...n}=e;return g.createElement("div",{...n,ref:t})}function ps(e){return g.createElement("select",{...e})}function ys(e){const{week:t,...n}=e;return g.createElement("tr",{...n})}function gs(e){return g.createElement("th",{...e})}function xs(e){return g.createElement("thead",{"aria-hidden":!0},g.createElement("tr",{...e}))}function vs(e){const{week:t,...n}=e;return g.createElement("th",{...n})}function bs(e){return g.createElement("th",{...e})}function _s(e){return g.createElement("tbody",{...e})}function Ns(e){const{components:t}=ke();return g.createElement(t.Dropdown,{...e})}const ws=Object.freeze(Object.defineProperty({__proto__:null,Button:Jn,CaptionLabel:Xn,Chevron:Qn,Day:es,DayButton:ts,Dropdown:ns,DropdownNav:ss,Footer:rs,Month:as,MonthCaption:os,MonthGrid:is,Months:ls,MonthsDropdown:cs,Nav:ds,NextMonthButton:us,Option:fs,PreviousMonthButton:ms,Root:hs,Select:ps,Week:ys,WeekNumber:vs,WeekNumberHeader:bs,Weekday:gs,Weekdays:xs,Weeks:_s,YearsDropdown:Ns},Symbol.toStringTag,{value:"Module"}));function ue(e,t,n=!1,s=le){let{from:r,to:o}=e;const{differenceInCalendarDays:l,isSameDay:i}=s;return r&&o?(l(o,r)<0&&([r,o]=[o,r]),l(t,r)>=(n?1:0)&&l(o,t)>=(n?1:0)):!n&&o?i(o,t):!n&&r?i(r,t):!1}function vt(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Ue(e){return!!(e&&typeof e=="object"&&"from"in e)}function bt(e){return!!(e&&typeof e=="object"&&"after"in e)}function _t(e){return!!(e&&typeof e=="object"&&"before"in e)}function Nt(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function wt(e,t){return Array.isArray(e)&&e.every(t.isDate)}function fe(e,t,n=le){const s=Array.isArray(t)?t:[t],{isSameDay:r,differenceInCalendarDays:o,isAfter:l}=n;return s.some(i=>{if(typeof i=="boolean")return i;if(n.isDate(i))return r(e,i);if(wt(i,n))return i.includes(e);if(Ue(i))return ue(i,e,!1,n);if(Nt(i))return Array.isArray(i.dayOfWeek)?i.dayOfWeek.includes(e.getDay()):i.dayOfWeek===e.getDay();if(vt(i)){const d=o(i.before,e),h=o(i.after,e),c=d>0,p=h<0;return l(i.before,i.after)?p&&c:c||p}return bt(i)?o(e,i.after)>0:_t(i)?o(i.before,e)>0:typeof i=="function"?i(e):!1})}function ks(e,t,n,s,r){const{disabled:o,hidden:l,modifiers:i,showOutsideDays:d,broadcastCalendar:h,today:c}=t,{isSameDay:p,isSameMonth:f,startOfMonth:N,isBefore:x,endOfMonth:w,isAfter:b}=r,O=n&&N(n),q=s&&w(s),D={[A.focused]:[],[A.outside]:[],[A.disabled]:[],[A.hidden]:[],[A.today]:[]},I={};for(const _ of e){const{date:k,displayMonth:j}=_,M=!!(j&&!f(k,j)),T=!!(O&&x(k,O)),H=!!(q&&b(k,q)),Z=!!(o&&fe(k,o,r)),J=!!(l&&fe(k,l,r))||T||H||!h&&!d&&M||h&&d===!1&&M,re=p(k,c??r.today());M&&D.outside.push(_),Z&&D.disabled.push(_),J&&D.hidden.push(_),re&&D.today.push(_),i&&Object.keys(i).forEach(ce=>{const de=i?.[ce];de&&fe(k,de,r)&&(I[ce]?I[ce].push(_):I[ce]=[_])})}return _=>{const k={[A.focused]:!1,[A.disabled]:!1,[A.hidden]:!1,[A.outside]:!1,[A.today]:!1},j={};for(const M in D){const T=D[M];k[M]=T.some(H=>H===_)}for(const M in I)j[M]=I[M].some(T=>T===_);return{...k,...j}}}function Ds(e,t,n={}){return Object.entries(e).filter(([,r])=>r===!0).reduce((r,[o])=>(n[o]?r.push(n[o]):t[A[o]]?r.push(t[A[o]]):t[ne[o]]&&r.push(t[ne[o]]),r),[t[v.Day]])}function Ms(e){return{...ws,...e}}function js(e){const t={"data-mode":e.mode??void 0,"data-required":"required"in e?e.required:void 0,"data-multiple-months":e.numberOfMonths&&e.numberOfMonths>1||void 0,"data-week-numbers":e.showWeekNumber||void 0,"data-broadcast-calendar":e.broadcastCalendar||void 0,"data-nav-layout":e.navLayout||void 0};return Object.entries(e).forEach(([n,s])=>{n.startsWith("data-")&&(t[n]=s)}),t}function Ke(){const e={};for(const t in v)e[v[t]]=`rdp-${v[t]}`;for(const t in A)e[A[t]]=`rdp-${A[t]}`;for(const t in ne)e[ne[t]]=`rdp-${ne[t]}`;for(const t in Q)e[Q[t]]=`rdp-${Q[t]}`;return e}function kt(e,t,n){return(n??new me(t)).format(e,"LLLL y")}const Cs=kt;function Os(e,t,n){return(n??new me(t)).format(e,"d")}function Ss(e,t=le){return t.format(e,"LLLL")}function Ws(e,t,n){return(n??new me(t)).format(e,"cccccc")}function Es(e,t=le){return e<10?t.formatNumber(`0${e.toLocaleString()}`):t.formatNumber(`${e.toLocaleString()}`)}function qs(){return""}function Dt(e,t=le){return t.format(e,"yyyy")}const Ts=Dt,Bs=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:kt,formatDay:Os,formatMonthCaption:Cs,formatMonthDropdown:Ss,formatWeekNumber:Es,formatWeekNumberHeader:qs,formatWeekdayName:Ws,formatYearCaption:Ts,formatYearDropdown:Dt},Symbol.toStringTag,{value:"Module"}));function Ys(e){return e?.formatMonthCaption&&!e.formatCaption&&(e.formatCaption=e.formatMonthCaption),e?.formatYearCaption&&!e.formatYearDropdown&&(e.formatYearDropdown=e.formatYearCaption),{...Bs,...e}}function Is(e,t,n,s,r){const{startOfMonth:o,startOfYear:l,endOfYear:i,eachMonthOfInterval:d,getMonth:h}=r;return d({start:l(e),end:i(e)}).map(f=>{const N=s.formatMonthDropdown(f,r),x=h(f),w=t&&f<o(t)||n&&f>o(n)||!1;return{value:x,label:N,disabled:w}})}function Fs(e,t={},n={}){let s={...t?.[v.Day]};return Object.entries(e).filter(([,r])=>r===!0).forEach(([r])=>{s={...s,...n?.[r]}}),s}function Ps(e,t,n){const s=e.today(),r=t?e.startOfISOWeek(s):e.startOfWeek(s),o=[];for(let l=0;l<7;l++){const i=e.addDays(r,l);o.push(i)}return o}function As(e,t,n,s,r=!1){if(!e||!t)return;const{startOfYear:o,endOfYear:l,addYears:i,getYear:d,isBefore:h,isSameYear:c}=s,p=o(e),f=l(t),N=[];let x=p;for(;h(x,f)||c(x,f);)N.push(x),x=i(x,1);return r&&N.reverse(),N.map(w=>{const b=n.formatYearDropdown(w,s);return{value:d(w),label:b,disabled:!1}})}function Mt(e,t,n,s){let r=(s??new me(n)).format(e,"PPPP");return t.today&&(r=`Today, ${r}`),t.selected&&(r=`${r}, selected`),r}const zs=Mt;function jt(e,t,n){return(n??new me(t)).format(e,"LLLL y")}const Hs=jt;function $s(e,t,n,s){let r=(s??new me(n)).format(e,"PPPP");return t?.today&&(r=`Today, ${r}`),r}function Rs(e){return"Choose the Month"}function Zs(){return""}function Us(e){return"Go to the Next Month"}function Ks(e){return"Go to the Previous Month"}function Gs(e,t,n){return(n??new me(t)).format(e,"cccc")}function Ls(e,t){return`Week ${e}`}function Vs(e){return"Week Number"}function Js(e){return"Choose the Year"}const Xs=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:Hs,labelDay:zs,labelDayButton:Mt,labelGrid:jt,labelGridcell:$s,labelMonthDropdown:Rs,labelNav:Zs,labelNext:Us,labelPrevious:Ks,labelWeekNumber:Ls,labelWeekNumberHeader:Vs,labelWeekday:Gs,labelYearDropdown:Js},Symbol.toStringTag,{value:"Module"})),De=e=>e instanceof HTMLElement?e:null,Ae=e=>[...e.querySelectorAll("[data-animated-month]")??[]],Qs=e=>De(e.querySelector("[data-animated-month]")),ze=e=>De(e.querySelector("[data-animated-caption]")),He=e=>De(e.querySelector("[data-animated-weeks]")),er=e=>De(e.querySelector("[data-animated-nav]")),tr=e=>De(e.querySelector("[data-animated-weekdays]"));function nr(e,t,{classNames:n,months:s,focused:r,dateLib:o}){const l=W.useRef(null),i=W.useRef(s),d=W.useRef(!1);W.useLayoutEffect(()=>{const h=i.current;if(i.current=s,!t||!e.current||!(e.current instanceof HTMLElement)||s.length===0||h.length===0||s.length!==h.length)return;const c=o.isSameMonth(s[0].date,h[0].date),p=o.isAfter(s[0].date,h[0].date),f=p?n[Q.caption_after_enter]:n[Q.caption_before_enter],N=p?n[Q.weeks_after_enter]:n[Q.weeks_before_enter],x=l.current,w=e.current.cloneNode(!0);if(w instanceof HTMLElement?(Ae(w).forEach(D=>{if(!(D instanceof HTMLElement))return;const I=Qs(D);I&&D.contains(I)&&D.removeChild(I);const _=ze(D);_&&_.classList.remove(f);const k=He(D);k&&k.classList.remove(N)}),l.current=w):l.current=null,d.current||c||r)return;const b=x instanceof HTMLElement?Ae(x):[],O=Ae(e.current);if(O?.every(q=>q instanceof HTMLElement)&&b&&b.every(q=>q instanceof HTMLElement)){d.current=!0,e.current.style.isolation="isolate";const q=er(e.current);q&&(q.style.zIndex="1"),O.forEach((D,I)=>{const _=b[I];if(!_)return;D.style.position="relative",D.style.overflow="hidden";const k=ze(D);k&&k.classList.add(f);const j=He(D);j&&j.classList.add(N);const M=()=>{d.current=!1,e.current&&(e.current.style.isolation=""),q&&(q.style.zIndex=""),k&&k.classList.remove(f),j&&j.classList.remove(N),D.style.position="",D.style.overflow="",D.contains(_)&&D.removeChild(_)};_.style.pointerEvents="none",_.style.position="absolute",_.style.overflow="hidden",_.setAttribute("aria-hidden","true");const T=tr(_);T&&(T.style.opacity="0");const H=ze(_);H&&(H.classList.add(p?n[Q.caption_before_exit]:n[Q.caption_after_exit]),H.addEventListener("animationend",M));const Z=He(_);Z&&Z.classList.add(p?n[Q.weeks_before_exit]:n[Q.weeks_after_exit]),D.insertBefore(_,D.firstChild)})}})}function sr(e,t,n,s){const r=e[0],o=e[e.length-1],{ISOWeek:l,fixedWeeks:i,broadcastCalendar:d}=n??{},{addDays:h,differenceInCalendarDays:c,differenceInCalendarMonths:p,endOfBroadcastWeek:f,endOfISOWeek:N,endOfMonth:x,endOfWeek:w,isAfter:b,startOfBroadcastWeek:O,startOfISOWeek:q,startOfWeek:D}=s,I=d?O(r,s):l?q(r):D(r),_=d?f(o):l?N(x(o)):w(x(o)),k=c(_,I),j=p(o,r)+1,M=[];for(let Z=0;Z<=k;Z++){const J=h(I,Z);if(t&&b(J,t))break;M.push(J)}const H=(d?35:42)*j;if(i&&M.length<H){const Z=H-M.length;for(let J=0;J<Z;J++){const re=h(M[M.length-1],1);M.push(re)}}return M}function rr(e){const t=[];return e.reduce((n,s)=>{const r=s.weeks.reduce((o,l)=>o.concat(l.days.slice()),t.slice());return n.concat(r.slice())},t.slice())}function ar(e,t,n,s){const{numberOfMonths:r=1}=n,o=[];for(let l=0;l<r;l++){const i=s.addMonths(e,l);if(t&&i>t)break;o.push(i)}return o}function at(e,t,n,s){const{month:r,defaultMonth:o,today:l=s.today(),numberOfMonths:i=1}=e;let d=r||o||l;const{differenceInCalendarMonths:h,addMonths:c,startOfMonth:p}=s;if(n&&h(n,d)<i-1){const f=-1*(i-1);d=c(n,f)}return t&&h(d,t)<0&&(d=t),p(d)}function or(e,t,n,s){const{addDays:r,endOfBroadcastWeek:o,endOfISOWeek:l,endOfMonth:i,endOfWeek:d,getISOWeek:h,getWeek:c,startOfBroadcastWeek:p,startOfISOWeek:f,startOfWeek:N}=s,x=e.reduce((w,b)=>{const O=n.broadcastCalendar?p(b,s):n.ISOWeek?f(b):N(b),q=n.broadcastCalendar?o(b):n.ISOWeek?l(i(b)):d(i(b)),D=t.filter(j=>j>=O&&j<=q),I=n.broadcastCalendar?35:42;if(n.fixedWeeks&&D.length<I){const j=t.filter(M=>{const T=I-D.length;return M>q&&M<=r(q,T)});D.push(...j)}const _=D.reduce((j,M)=>{const T=n.ISOWeek?h(M):c(M),H=j.find(J=>J.weekNumber===T),Z=new gt(M,b,s);return H?H.days.push(Z):j.push(new Vn(T,[Z])),j},[]),k=new Ln(b,_);return w.push(k),w},[]);return n.reverseMonths?x.reverse():x}function ir(e,t){let{startMonth:n,endMonth:s}=e;const{startOfYear:r,startOfDay:o,startOfMonth:l,endOfMonth:i,addYears:d,endOfYear:h,newDate:c,today:p}=t,{fromYear:f,toYear:N,fromMonth:x,toMonth:w}=e;!n&&x&&(n=x),!n&&f&&(n=t.newDate(f,0,1)),!s&&w&&(s=w),!s&&N&&(s=c(N,11,31));const b=e.captionLayout==="dropdown"||e.captionLayout==="dropdown-years";return n?n=l(n):f?n=c(f,0,1):!n&&b&&(n=r(d(e.today??p(),-100))),s?s=i(s):N?s=c(N,11,31):!s&&b&&(s=h(e.today??p())),[n&&o(n),s&&o(s)]}function lr(e,t,n,s){if(n.disableNavigation)return;const{pagedNavigation:r,numberOfMonths:o=1}=n,{startOfMonth:l,addMonths:i,differenceInCalendarMonths:d}=s,h=r?o:1,c=l(e);if(!t)return i(c,h);if(!(d(t,e)<o))return i(c,h)}function cr(e,t,n,s){if(n.disableNavigation)return;const{pagedNavigation:r,numberOfMonths:o}=n,{startOfMonth:l,addMonths:i,differenceInCalendarMonths:d}=s,h=r?o??1:1,c=l(e);if(!t)return i(c,-h);if(!(d(c,t)<=0))return i(c,-h)}function dr(e){const t=[];return e.reduce((n,s)=>n.concat(s.weeks.slice()),t.slice())}function qe(e,t){const[n,s]=W.useState(e);return[t===void 0?n:t,s]}function ur(e,t){const[n,s]=ir(e,t),{startOfMonth:r,endOfMonth:o}=t,l=at(e,n,s,t),[i,d]=qe(l,e.month?l:void 0);W.useEffect(()=>{const k=at(e,n,s,t);d(k)},[e.timeZone]);const h=ar(i,s,e,t),c=sr(h,e.endMonth?o(e.endMonth):void 0,e,t),p=or(h,c,e,t),f=dr(p),N=rr(p),x=cr(i,n,e,t),w=lr(i,s,e,t),{disableNavigation:b,onMonthChange:O}=e,q=k=>f.some(j=>j.days.some(M=>M.isEqualTo(k))),D=k=>{if(b)return;let j=r(k);n&&j<r(n)&&(j=r(n)),s&&j>r(s)&&(j=r(s)),d(j),O?.(j)};return{months:p,weeks:f,days:N,navStart:n,navEnd:s,previousMonth:x,nextMonth:w,goToMonth:D,goToDay:k=>{q(k)||D(k.date)}}}var oe;(function(e){e[e.Today=0]="Today",e[e.Selected=1]="Selected",e[e.LastFocused=2]="LastFocused",e[e.FocusedModifier=3]="FocusedModifier"})(oe||(oe={}));function ot(e){return!e[A.disabled]&&!e[A.hidden]&&!e[A.outside]}function fr(e,t,n,s){let r,o=-1;for(const l of e){const i=t(l);ot(i)&&(i[A.focused]&&o<oe.FocusedModifier?(r=l,o=oe.FocusedModifier):s?.isEqualTo(l)&&o<oe.LastFocused?(r=l,o=oe.LastFocused):n(l.date)&&o<oe.Selected?(r=l,o=oe.Selected):i[A.today]&&o<oe.Today&&(r=l,o=oe.Today))}return r||(r=e.find(l=>ot(t(l)))),r}function mr(e,t,n,s,r,o,l){const{ISOWeek:i,broadcastCalendar:d}=o,{addDays:h,addMonths:c,addWeeks:p,addYears:f,endOfBroadcastWeek:N,endOfISOWeek:x,endOfWeek:w,max:b,min:O,startOfBroadcastWeek:q,startOfISOWeek:D,startOfWeek:I}=l;let k={day:h,week:p,month:c,year:f,startOfWeek:j=>d?q(j,l):i?D(j):I(j),endOfWeek:j=>d?N(j):i?x(j):w(j)}[e](n,t==="after"?1:-1);return t==="before"&&s?k=b([s,k]):t==="after"&&r&&(k=O([r,k])),k}function Ct(e,t,n,s,r,o,l,i=0){if(i>365)return;const d=mr(e,t,n.date,s,r,o,l),h=!!(o.disabled&&fe(d,o.disabled,l)),c=!!(o.hidden&&fe(d,o.hidden,l)),p=d,f=new gt(d,p,l);return!h&&!c?f:Ct(e,t,f,s,r,o,l,i+1)}function hr(e,t,n,s,r){const{autoFocus:o}=e,[l,i]=W.useState(),d=fr(t.days,n,s||(()=>!1),l),[h,c]=W.useState(o?d:void 0);return{isFocusTarget:w=>!!d?.isEqualTo(w),setFocused:c,focused:h,blur:()=>{i(h),c(void 0)},moveFocus:(w,b)=>{if(!h)return;const O=Ct(w,b,h,t.navStart,t.navEnd,e,r);O&&(t.goToDay(O),c(O))}}}function pr(e,t){const{selected:n,required:s,onSelect:r}=e,[o,l]=qe(n,r?n:void 0),i=r?n:o,{isSameDay:d}=t,h=N=>i?.some(x=>d(x,N))??!1,{min:c,max:p}=e;return{selected:i,select:(N,x,w)=>{let b=[...i??[]];if(h(N)){if(i?.length===c||s&&i?.length===1)return;b=i?.filter(O=>!d(O,N))}else i?.length===p?b=[N]:b=[...b,N];return r||l(b),r?.(b,N,x,w),b},isSelected:h}}function yr(e,t,n=0,s=0,r=!1,o=le){const{from:l,to:i}=t||{},{isSameDay:d,isAfter:h,isBefore:c}=o;let p;if(!l&&!i)p={from:e,to:n>0?void 0:e};else if(l&&!i)d(l,e)?n===0?p={from:l,to:e}:r?p={from:l,to:void 0}:p=void 0:c(e,l)?p={from:e,to:l}:p={from:l,to:e};else if(l&&i)if(d(l,e)&&d(i,e))r?p={from:l,to:i}:p=void 0;else if(d(l,e))p={from:l,to:n>0?void 0:e};else if(d(i,e))p={from:e,to:n>0?void 0:e};else if(c(e,l))p={from:e,to:i};else if(h(e,l))p={from:l,to:e};else if(h(e,i))p={from:l,to:e};else throw new Error("Invalid range");if(p?.from&&p?.to){const f=o.differenceInCalendarDays(p.to,p.from);s>0&&f>s?p={from:e,to:void 0}:n>1&&f<n&&(p={from:e,to:void 0})}return p}function gr(e,t,n=le){const s=Array.isArray(t)?t:[t];let r=e.from;const o=n.differenceInCalendarDays(e.to,e.from),l=Math.min(o,6);for(let i=0;i<=l;i++){if(s.includes(r.getDay()))return!0;r=n.addDays(r,1)}return!1}function it(e,t,n=le){return ue(e,t.from,!1,n)||ue(e,t.to,!1,n)||ue(t,e.from,!1,n)||ue(t,e.to,!1,n)}function xr(e,t,n=le){const s=Array.isArray(t)?t:[t];if(s.filter(i=>typeof i!="function").some(i=>typeof i=="boolean"?i:n.isDate(i)?ue(e,i,!1,n):wt(i,n)?i.some(d=>ue(e,d,!1,n)):Ue(i)?i.from&&i.to?it(e,{from:i.from,to:i.to},n):!1:Nt(i)?gr(e,i.dayOfWeek,n):vt(i)?n.isAfter(i.before,i.after)?it(e,{from:n.addDays(i.after,1),to:n.addDays(i.before,-1)},n):fe(e.from,i,n)||fe(e.to,i,n):bt(i)||_t(i)?fe(e.from,i,n)||fe(e.to,i,n):!1))return!0;const l=s.filter(i=>typeof i=="function");if(l.length){let i=e.from;const d=n.differenceInCalendarDays(e.to,e.from);for(let h=0;h<=d;h++){if(l.some(c=>c(i)))return!0;i=n.addDays(i,1)}}return!1}function vr(e,t){const{disabled:n,excludeDisabled:s,selected:r,required:o,onSelect:l}=e,[i,d]=qe(r,l?r:void 0),h=l?r:i;return{selected:h,select:(f,N,x)=>{const{min:w,max:b}=e,O=f?yr(f,h,w,b,o,t):void 0;return s&&n&&O?.from&&O.to&&xr({from:O.from,to:O.to},n,t)&&(O.from=f,O.to=void 0),l||d(O),l?.(O,f,N,x),O},isSelected:f=>h&&ue(h,f,!1,t)}}function br(e,t){const{selected:n,required:s,onSelect:r}=e,[o,l]=qe(n,r?n:void 0),i=r?n:o,{isSameDay:d}=t;return{selected:i,select:(p,f,N)=>{let x=p;return!s&&i&&i&&d(p,i)&&(x=void 0),r||l(x),r?.(x,p,f,N),x},isSelected:p=>i?d(i,p):!1}}function _r(e,t){const n=br(e,t),s=pr(e,t),r=vr(e,t);switch(e.mode){case"single":return n;case"multiple":return s;case"range":return r;default:return}}function Nr(e){let t=e;t.timeZone&&(t={...e},t.today&&(t.today=new K(t.today,t.timeZone)),t.month&&(t.month=new K(t.month,t.timeZone)),t.defaultMonth&&(t.defaultMonth=new K(t.defaultMonth,t.timeZone)),t.startMonth&&(t.startMonth=new K(t.startMonth,t.timeZone)),t.endMonth&&(t.endMonth=new K(t.endMonth,t.timeZone)),t.mode==="single"&&t.selected?t.selected=new K(t.selected,t.timeZone):t.mode==="multiple"&&t.selected?t.selected=t.selected?.map(E=>new K(E,t.timeZone)):t.mode==="range"&&t.selected&&(t.selected={from:t.selected.from?new K(t.selected.from,t.timeZone):void 0,to:t.selected.to?new K(t.selected.to,t.timeZone):void 0}));const{components:n,formatters:s,labels:r,dateLib:o,locale:l,classNames:i}=W.useMemo(()=>{const E={...dt,...t.locale};return{dateLib:new me({locale:E,weekStartsOn:t.broadcastCalendar?1:t.weekStartsOn,firstWeekContainsDate:t.firstWeekContainsDate,useAdditionalWeekYearTokens:t.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:t.useAdditionalDayOfYearTokens,timeZone:t.timeZone,numerals:t.numerals},t.dateLib),components:Ms(t.components),formatters:Ys(t.formatters),labels:{...Xs,...t.labels},locale:E,classNames:{...Ke(),...t.classNames}}},[t.locale,t.broadcastCalendar,t.weekStartsOn,t.firstWeekContainsDate,t.useAdditionalWeekYearTokens,t.useAdditionalDayOfYearTokens,t.timeZone,t.numerals,t.dateLib,t.components,t.formatters,t.labels,t.classNames]),{captionLayout:d,mode:h,navLayout:c,numberOfMonths:p=1,onDayBlur:f,onDayClick:N,onDayFocus:x,onDayKeyDown:w,onDayMouseEnter:b,onDayMouseLeave:O,onNextClick:q,onPrevClick:D,showWeekNumber:I,styles:_}=t,{formatCaption:k,formatDay:j,formatMonthDropdown:M,formatWeekNumber:T,formatWeekNumberHeader:H,formatWeekdayName:Z,formatYearDropdown:J}=s,re=ur(t,o),{days:ce,months:de,navStart:X,navEnd:ge,previousMonth:L,nextMonth:z,goToMonth:ee}=re,he=ks(ce,t,X,ge,o),{isSelected:be,select:ae,selected:xe}=_r(t,o)??{},{blur:Me,focused:je,isFocusTarget:Te,moveFocus:_e,setFocused:ve}=hr(t,re,he,be??(()=>!1),o),{labelDayButton:Be,labelGridcell:Ce,labelGrid:Oe,labelMonthDropdown:m,labelNav:u,labelPrevious:y,labelNext:C,labelWeekday:U,labelWeekNumber:pe,labelWeekNumberHeader:Ot,labelYearDropdown:St}=r,Wt=W.useMemo(()=>Ps(o,t.ISOWeek),[o,t.ISOWeek]),Ge=h!==void 0||N!==void 0,Ye=W.useCallback(()=>{L&&(ee(L),D?.(L))},[L,ee,D]),Ie=W.useCallback(()=>{z&&(ee(z),q?.(z))},[ee,z,q]),Et=W.useCallback((E,F)=>S=>{S.preventDefault(),S.stopPropagation(),ve(E),ae?.(E.date,F,S),N?.(E.date,F,S)},[ae,N,ve]),qt=W.useCallback((E,F)=>S=>{ve(E),x?.(E.date,F,S)},[x,ve]),Tt=W.useCallback((E,F)=>S=>{Me(),f?.(E.date,F,S)},[Me,f]),Bt=W.useCallback((E,F)=>S=>{const P={ArrowLeft:[S.shiftKey?"month":"day",t.dir==="rtl"?"after":"before"],ArrowRight:[S.shiftKey?"month":"day",t.dir==="rtl"?"before":"after"],ArrowDown:[S.shiftKey?"year":"week","after"],ArrowUp:[S.shiftKey?"year":"week","before"],PageUp:[S.shiftKey?"year":"month","before"],PageDown:[S.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(P[S.key]){S.preventDefault(),S.stopPropagation();const[te,B]=P[S.key];_e(te,B)}w?.(E.date,F,S)},[_e,w,t.dir]),Yt=W.useCallback((E,F)=>S=>{b?.(E.date,F,S)},[b]),It=W.useCallback((E,F)=>S=>{O?.(E.date,F,S)},[O]),Ft=W.useCallback(E=>F=>{const S=Number(F.target.value),P=o.setMonth(o.startOfMonth(E),S);ee(P)},[o,ee]),Pt=W.useCallback(E=>F=>{const S=Number(F.target.value),P=o.setYear(o.startOfMonth(E),S);ee(P)},[o,ee]),{className:At,style:zt}=W.useMemo(()=>({className:[i[v.Root],t.className].filter(Boolean).join(" "),style:{..._?.[v.Root],...t.style}}),[i,t.className,t.style,_]),Ht=js(t),Le=W.useRef(null);nr(Le,!!t.animate,{classNames:i,months:de,focused:je,dateLib:o});const $t={dayPickerProps:t,selected:xe,select:ae,isSelected:be,months:de,nextMonth:z,previousMonth:L,goToMonth:ee,getModifiers:he,components:n,classNames:i,styles:_,labels:r,formatters:s};return g.createElement(xt.Provider,{value:$t},g.createElement(n.Root,{rootRef:t.animate?Le:void 0,className:At,style:zt,dir:t.dir,id:t.id,lang:t.lang,nonce:t.nonce,title:t.title,role:t.role,"aria-label":t["aria-label"],...Ht},g.createElement(n.Months,{className:i[v.Months],style:_?.[v.Months]},!t.hideNavigation&&!c&&g.createElement(n.Nav,{"data-animated-nav":t.animate?"true":void 0,className:i[v.Nav],style:_?.[v.Nav],"aria-label":u(),onPreviousClick:Ye,onNextClick:Ie,previousMonth:L,nextMonth:z}),de.map((E,F)=>g.createElement(n.Month,{"data-animated-month":t.animate?"true":void 0,className:i[v.Month],style:_?.[v.Month],key:F,displayIndex:F,calendarMonth:E},c==="around"&&!t.hideNavigation&&F===0&&g.createElement(n.PreviousMonthButton,{type:"button",className:i[v.PreviousMonthButton],tabIndex:L?void 0:-1,"aria-disabled":L?void 0:!0,"aria-label":y(L),onClick:Ye,"data-animated-button":t.animate?"true":void 0},g.createElement(n.Chevron,{disabled:L?void 0:!0,className:i[v.Chevron],orientation:t.dir==="rtl"?"right":"left"})),g.createElement(n.MonthCaption,{"data-animated-caption":t.animate?"true":void 0,className:i[v.MonthCaption],style:_?.[v.MonthCaption],calendarMonth:E,displayIndex:F},d?.startsWith("dropdown")?g.createElement(n.DropdownNav,{className:i[v.Dropdowns],style:_?.[v.Dropdowns]},d==="dropdown"||d==="dropdown-months"?g.createElement(n.MonthsDropdown,{className:i[v.MonthsDropdown],"aria-label":m(),classNames:i,components:n,disabled:!!t.disableNavigation,onChange:Ft(E.date),options:Is(E.date,X,ge,s,o),style:_?.[v.Dropdown],value:o.getMonth(E.date)}):g.createElement("span",null,M(E.date,o)),d==="dropdown"||d==="dropdown-years"?g.createElement(n.YearsDropdown,{className:i[v.YearsDropdown],"aria-label":St(o.options),classNames:i,components:n,disabled:!!t.disableNavigation,onChange:Pt(E.date),options:As(X,ge,s,o,!!t.reverseYears),style:_?.[v.Dropdown],value:o.getYear(E.date)}):g.createElement("span",null,J(E.date,o)),g.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},k(E.date,o.options,o))):g.createElement(n.CaptionLabel,{className:i[v.CaptionLabel],role:"status","aria-live":"polite"},k(E.date,o.options,o))),c==="around"&&!t.hideNavigation&&F===p-1&&g.createElement(n.NextMonthButton,{type:"button",className:i[v.NextMonthButton],tabIndex:z?void 0:-1,"aria-disabled":z?void 0:!0,"aria-label":C(z),onClick:Ie,"data-animated-button":t.animate?"true":void 0},g.createElement(n.Chevron,{disabled:z?void 0:!0,className:i[v.Chevron],orientation:t.dir==="rtl"?"left":"right"})),F===p-1&&c==="after"&&!t.hideNavigation&&g.createElement(n.Nav,{"data-animated-nav":t.animate?"true":void 0,className:i[v.Nav],style:_?.[v.Nav],"aria-label":u(),onPreviousClick:Ye,onNextClick:Ie,previousMonth:L,nextMonth:z}),g.createElement(n.MonthGrid,{role:"grid","aria-multiselectable":h==="multiple"||h==="range","aria-label":Oe(E.date,o.options,o)||void 0,className:i[v.MonthGrid],style:_?.[v.MonthGrid]},!t.hideWeekdays&&g.createElement(n.Weekdays,{"data-animated-weekdays":t.animate?"true":void 0,className:i[v.Weekdays],style:_?.[v.Weekdays]},I&&g.createElement(n.WeekNumberHeader,{"aria-label":Ot(o.options),className:i[v.WeekNumberHeader],style:_?.[v.WeekNumberHeader],scope:"col"},H()),Wt.map(S=>g.createElement(n.Weekday,{"aria-label":U(S,o.options,o),className:i[v.Weekday],key:String(S),style:_?.[v.Weekday],scope:"col"},Z(S,o.options,o)))),g.createElement(n.Weeks,{"data-animated-weeks":t.animate?"true":void 0,className:i[v.Weeks],style:_?.[v.Weeks]},E.weeks.map(S=>g.createElement(n.Week,{className:i[v.Week],key:S.weekNumber,style:_?.[v.Week],week:S},I&&g.createElement(n.WeekNumber,{week:S,style:_?.[v.WeekNumber],"aria-label":pe(S.weekNumber,{locale:l}),className:i[v.WeekNumber],scope:"row",role:"rowheader"},T(S.weekNumber,o)),S.days.map(P=>{const{date:te}=P,B=he(P);if(B[A.focused]=!B.hidden&&!!je?.isEqualTo(P),B[ne.selected]=be?.(te)||B.selected,Ue(xe)){const{from:Fe,to:Pe}=xe;B[ne.range_start]=!!(Fe&&Pe&&o.isSameDay(te,Fe)),B[ne.range_end]=!!(Fe&&Pe&&o.isSameDay(te,Pe)),B[ne.range_middle]=ue(xe,te,!0,o)}const Rt=Fs(B,_,t.modifiersStyles),Zt=Ds(B,i,t.modifiersClassNames),Ut=!Ge&&!B.hidden?Ce(te,B,o.options,o):void 0;return g.createElement(n.Day,{key:`${o.format(te,"yyyy-MM-dd")}_${o.format(P.displayMonth,"yyyy-MM")}`,day:P,modifiers:B,className:Zt.join(" "),style:Rt,role:"gridcell","aria-selected":B.selected||void 0,"aria-label":Ut,"data-day":o.format(te,"yyyy-MM-dd"),"data-month":P.outside?o.format(te,"yyyy-MM"):void 0,"data-selected":B.selected||void 0,"data-disabled":B.disabled||void 0,"data-hidden":B.hidden||void 0,"data-outside":P.outside||void 0,"data-focused":B.focused||void 0,"data-today":B.today||void 0},!B.hidden&&Ge?g.createElement(n.DayButton,{className:i[v.DayButton],style:_?.[v.DayButton],type:"button",day:P,modifiers:B,disabled:B.disabled||void 0,tabIndex:Te(P)?0:-1,"aria-label":Be(te,B,o.options,o),onClick:Et(P,B),onBlur:Tt(P,B),onFocus:qt(P,B),onKeyDown:Bt(P,B),onMouseEnter:Yt(P,B),onMouseLeave:It(P,B)},j(te,o.options,o)):!B.hidden&&j(P.date,o.options,o))})))))))),t.footer&&g.createElement(n.Footer,{className:i[v.Footer],style:_?.[v.Footer],role:"status","aria-live":"polite"},t.footer)))}function wr({className:e,classNames:t,showOutsideDays:n=!0,captionLayout:s="label",buttonVariant:r="ghost",formatters:o,components:l,...i}){const d=Ke();return a.jsx(Nr,{showOutsideDays:n,className:Y("bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,e),captionLayout:s,formatters:{formatMonthDropdown:h=>h.toLocaleString("default",{month:"short"}),...o},classNames:{root:Y("w-fit",d.root),months:Y("flex gap-4 flex-col md:flex-row relative",d.months),month:Y("flex flex-col w-full gap-4",d.month),nav:Y("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",d.nav),button_previous:Y(Ve({variant:r}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",d.button_previous),button_next:Y(Ve({variant:r}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",d.button_next),month_caption:Y("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",d.month_caption),dropdowns:Y("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",d.dropdowns),dropdown_root:Y("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",d.dropdown_root),dropdown:Y("absolute bg-popover inset-0 opacity-0",d.dropdown),caption_label:Y("select-none font-medium",s==="label"?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",d.caption_label),table:"w-full border-collapse",weekdays:Y("flex",d.weekdays),weekday:Y("text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",d.weekday),week:Y("flex w-full mt-2",d.week),week_number_header:Y("select-none w-(--cell-size)",d.week_number_header),week_number:Y("text-[0.8rem] select-none text-muted-foreground",d.week_number),day:Y("relative w-full h-full p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",d.day),range_start:Y("rounded-l-md bg-accent",d.range_start),range_middle:Y("rounded-none",d.range_middle),range_end:Y("rounded-r-md bg-accent",d.range_end),today:Y("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",d.today),outside:Y("text-muted-foreground aria-selected:text-muted-foreground",d.outside),disabled:Y("text-muted-foreground opacity-50",d.disabled),hidden:Y("invisible",d.hidden),...t},components:{Root:({className:h,rootRef:c,...p})=>a.jsx("div",{"data-slot":"calendar",ref:c,className:Y(h),...p}),Chevron:({className:h,orientation:c,...p})=>c==="left"?a.jsx(on,{className:Y("size-4",h),...p}):c==="right"?a.jsx(cn,{className:Y("size-4",h),...p}):a.jsx(dn,{className:Y("size-4",h),...p}),DayButton:kr,WeekNumber:({children:h,...c})=>a.jsx("td",{...c,children:a.jsx("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:h})}),...l},...i})}function kr({className:e,day:t,modifiers:n,...s}){const r=Ke(),o=W.useRef(null);return W.useEffect(()=>{n.focused&&o.current?.focus()},[n.focused]),a.jsx(V,{ref:o,variant:"ghost",size:"icon","data-day":t.date.toLocaleDateString(),"data-selected-single":n.selected&&!n.range_start&&!n.range_end&&!n.range_middle,"data-range-start":n.range_start,"data-range-end":n.range_end,"data-range-middle":n.range_middle,className:Y("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",r.day,e),...s})}function $e({date:e,onDateChange:t,placeholder:n="날짜 선택",className:s,disabled:r=!1}){return a.jsxs(un,{children:[a.jsx(fn,{asChild:!0,children:a.jsxs(V,{variant:"outline",className:Y("justify-start text-left font-normal",!e&&"text-muted-foreground",s),disabled:r,children:[a.jsx(ut,{className:"mr-2 h-4 w-4"}),e?ct(e,"yyyy-MM-dd"):a.jsx("span",{children:n})]})}),a.jsx(mn,{className:"w-auto p-0",children:a.jsx(wr,{mode:"single",selected:e,onSelect:t,initialFocus:!0})})]})}function zr({purchaseId:e,isOpen:t,onClose:n,embedded:s=!1,currentUserRoles:r=[],activeTab:o,onRefresh:l,onDelete:i}){const[d,h]=W.useState(!1),[c,p]=W.useState(null),[f,N]=W.useState(!1),[x,w]=W.useState(null),[b,O]=W.useState([]),[q,D]=W.useState([]),[I,_]=W.useState([]),[k,j]=W.useState(""),M=Je();W.useEffect(()=>{t&&(async()=>{try{const{data:{user:u}}=await M.auth.getUser();if(u){let{data:y}=await M.from("employees").select("*").eq("id",u.id).maybeSingle();if(!y&&u.email){const{data:C}=await M.from("employees").select("*").eq("email",u.email).maybeSingle();y=C}if(y?.name&&j(y.name),y?.purchase_role){let C=[];Array.isArray(y.purchase_role)?C=y.purchase_role.map(U=>String(U).trim()):C=String(y.purchase_role).split(",").map(pe=>pe.trim()).filter(pe=>pe.length>0),_(C)}}}catch{}})()},[t]);const T=Array.isArray(r)&&r.length>0?r:I,H=T.includes("final_approver")||T.includes("app_admin")||T.includes("ceo"),J=c?.final_manager_status==="approved"?H:H||c?.requester_name===k,re=T.includes("app_admin")||c?.requester_name===k,ce=T.includes("final_approver")||T.includes("app_admin")||T.includes("ceo"),de=c?.requester_name===k,X=ce||de;console.log("Receipt Check Debug:",{activeTab:o,canReceiptCheck:X,isAdmin:ce,isRequester:de,currentUserName:k,requesterName:c?.requester_name,effectiveRoles:T});const ge=T.includes("middle_manager")||T.includes("app_admin")||T.includes("ceo"),L=T.includes("final_approver")||T.includes("app_admin")||T.includes("ceo");console.log("=== PurchaseDetailModal Debug ==="),console.log("Current User Roles (prop):",r),console.log("User Roles (direct load):",I),console.log("Effective Roles:",T),console.log("Can Approve Middle:",ge),console.log("Can Approve Final:",L),console.log("Is Editing:",f),console.log("Middle Manager Status:",c?.middle_manager_status),console.log("Final Manager Status:",c?.final_manager_status),console.log("================================"),W.useEffect(()=>{e&&t&&(z(e.toString()),N(!1))},[e,t]);const z=async m=>{try{h(!0);const u=Je(),{data:y,error:C}=await u.from("purchase_requests").select(`
          *,
          vendors(id, vendor_name),
          purchase_request_items(*)
        `).eq("id",m).single();if(C)throw C;if(y){const U={...y,items:y.purchase_request_items||[],vendor:y.vendors||{id:0,vendor_name:"알 수 없음"},vendor_contacts:[]};p(U),w(U),O(U.items||[])}}catch{$.error("발주 상세 정보를 불러오는데 실패했습니다.")}finally{h(!1)}},ee=()=>c?c.is_received?a.jsx(Ee,{className:"bg-green-100 text-green-800",children:"입고완료"}):c.middle_manager_status==="approved"&&c.final_manager_status==="approved"?a.jsx(Ee,{className:"bg-hansl-100 text-hansl-800",children:"구매진행"}):c.middle_manager_status==="rejected"||c.final_manager_status==="rejected"?a.jsx(Ee,{className:"bg-red-100 text-red-800",children:"반려"}):a.jsx(Ee,{className:"bg-yellow-100 text-yellow-800",children:"승인대기"}):null,he=m=>new Intl.NumberFormat("ko-KR").format(m),be=async()=>{if(!(!c||!x))try{const m=b.reduce((y,C)=>y+(C.amount_value||0),0),{error:u}=await M.from("purchase_requests").update({purchase_order_number:x.purchase_order_number,requester_name:x.requester_name,delivery_request_date:x.delivery_request_date,revised_delivery_request_date:x.revised_delivery_request_date,payment_category:x.payment_category,project_vendor:x.project_vendor,total_amount:m,updated_at:new Date().toISOString()}).eq("id",c.id);if(u)throw u;if(q.length>0){const{error:y}=await M.from("purchase_request_items").delete().in("id",q);if(y)throw y}console.log("저장할 editedItems:",b);for(const y of b)if(console.log("처리 중인 item:",y),y.id){console.log("기존 항목 업데이트:",y.id);const{error:C}=await M.from("purchase_request_items").update({item_name:y.item_name,specification:y.specification,quantity:y.quantity,unit_price_value:y.unit_price_value,unit_price_currency:c.currency||"KRW",amount_value:y.amount_value,amount_currency:c.currency||"KRW",remark:y.remark,updated_at:new Date().toISOString()}).eq("id",y.id);if(C)throw console.error("기존 항목 업데이트 오류:",C),C}else{console.log("새 항목 생성:",y);const C={purchase_request_id:c.id,item_name:y.item_name,specification:y.specification,quantity:y.quantity,unit_price_value:y.unit_price_value,unit_price_currency:c.currency||"KRW",amount_value:y.amount_value,amount_currency:c.currency||"KRW",remark:y.remark,line_number:y.line_number||b.indexOf(y)+1,created_at:new Date().toISOString()};console.log("삽입할 데이터:",C);const{error:U}=await M.from("purchase_request_items").insert(C);if(U)throw console.error("새 항목 생성 오류:",U),U;console.log("새 항목 생성 성공")}$.success("발주 내역이 수정되었습니다."),N(!1),D([]),l?.(!0),await z(e?.toString()||"")}catch(m){console.error("저장 중 전체 오류:",m),$.error("저장 중 오류가 발생했습니다: "+(m instanceof Error?m.message:"알 수 없는 오류"))}},ae=(m,u,y)=>{const C=[...b];if(u==="amount_value")C[m]={...C[m],amount_value:y};else if(u==="quantity"||u==="unit_price_value"){const U=u==="quantity"?y:C[m].quantity,pe=u==="unit_price_value"?y:C[m].unit_price_value;C[m]={...C[m],[u]:y,amount_value:U*pe}}else C[m]={...C[m],[u]:y};O(C)},xe=()=>{const m={item_name:"",specification:"",quantity:1,unit_price_value:0,amount_value:0,remark:"",line_number:b.length+1};O([...b,m])},Me=m=>{const u=b[m];u.id&&D([...q,u.id]);const y=b.filter((C,U)=>U!==m);O(y)},je=async(m,u)=>{if(!X){$.error("구매완료 처리 권한이 없습니다.");return}try{const{error:y}=await M.from("purchase_request_items").update({is_payment_completed:u,payment_completed_at:u?new Date().toISOString():null}).eq("id",m);if(y)throw y;$.success(u?"구매완료 처리되었습니다.":"구매완료가 취소되었습니다."),e&&await z(e.toString()),l?.(!0)}catch{$.error("구매완료 처리 중 오류가 발생했습니다.")}},Te=async(m,u)=>{if(!X){$.error("입고 처리 권한이 없습니다.");return}try{const{error:y}=await M.from("purchase_request_items").update({is_received:u,received_at:u?new Date().toISOString():null}).eq("id",m);if(y)throw y;$.success(u?"입고 처리되었습니다.":"입고가 취소되었습니다."),e&&await z(e.toString()),l?.(!0)}catch{$.error("입고 처리 중 오류가 발생했습니다.")}},_e=async m=>{if(c)try{const u=m==="middle"?{middle_manager_status:"approved"}:{final_manager_status:"approved"},{error:y}=await M.from("purchase_requests").update(u).eq("id",c.id);if(y)throw y;$.success(`${m==="middle"?"중간":"최종"} 승인이 완료되었습니다.`),l?.(!0),await z(e?.toString()||"")}catch{$.error("승인 처리 중 오류가 발생했습니다.")}},ve=async()=>{if(!(!c||!re||!window.confirm("모든 품목을 구매완료 처리하시겠습니까?")))try{const u={is_payment_completed:!0,payment_completed_at:new Date().toISOString()},{error:y}=await M.from("purchase_request_items").update(u).eq("purchase_request_id",c.id).eq("is_payment_completed",!1);if(y)throw y;$.success("모든 품목이 구매완료 처리되었습니다."),l?.(!0),await z(e?.toString()||"")}catch(u){console.error("전체 구매완료 처리 오류:",u),$.error("구매완료 처리 중 오류가 발생했습니다.")}},Be=async()=>{if(!(!c||!re||!window.confirm("모든 품목을 입고완료 처리하시겠습니까?")))try{const{data:{user:u}}=await M.auth.getUser();if(!u)throw new Error("사용자 인증이 필요합니다");const y={is_received:!0,delivery_status:"received",received_quantity:null,received_date:new Date().toISOString(),received_by:u.id,received_by_name:k},{error:C}=await M.from("purchase_request_items").update(y).eq("purchase_request_id",c.id).eq("is_received",!1);if(C)throw C;$.success("모든 품목이 입고완료 처리되었습니다."),l?.(!0),await z(e?.toString()||"")}catch(u){console.error("전체 입고완료 처리 오류:",u),$.error("입고완료 처리 중 오류가 발생했습니다.")}},Ce=async m=>{if(!(!c||!window.prompt("반려 사유를 입력해주세요:")))try{const y=m==="middle"?{middle_manager_status:"rejected"}:{final_manager_status:"rejected"},{error:C}=await M.from("purchase_requests").update(y).eq("id",c.id);if(C)throw C;$.success(`${m==="middle"?"중간":"최종"} 반려가 완료되었습니다.`),l?.(!0),await z(e?.toString()||"")}catch{$.error("반려 처리 중 오류가 발생했습니다.")}},Oe=a.jsx("div",{className:"space-y-4 max-h-[80vh]",children:d?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-hansl-600"})}):c?a.jsxs("div",{children:[a.jsx("div",{className:"bg-gray-50 rounded-2xl p-4 mb-4 border border-gray-100",children:a.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[a.jsx(et,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"modal-label",children:"총 품목"})]}),a.jsxs("p",{className:"modal-value",children:[c.items?.length||0,"개"]})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[a.jsx(xn,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"modal-label",children:"총 금액"})]}),a.jsxs("p",{className:"modal-value",children:["₩",he(c.total_amount||0)]})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[a.jsx(ut,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"modal-label",children:"납기요청일"})]}),a.jsx("p",{className:"modal-subtitle",children:c.delivery_request_date?We(c.delivery_request_date):"미지정"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[a.jsx(ln,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"modal-label",children:"상태"})]}),a.jsx("div",{className:"flex justify-center",children:ee()})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[a.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm",children:[a.jsxs("h3",{className:"modal-section-title mb-4 flex items-center",children:[a.jsx(Xe,{className:"w-4 h-4 mr-2 text-gray-600"}),"발주 기본정보"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("span",{className:"modal-label",children:"발주서 종류"}),f?a.jsx(G,{value:x?.request_type||"",onChange:m=>w(u=>u?{...u,request_type:m.target.value}:null),className:"mt-1 rounded-xl border-gray-200 focus:border-gray-400 text-xs",placeholder:"일반"}):a.jsx("p",{className:"modal-value",children:c.request_type||"일반"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"modal-label",children:"진행 종류"}),f?a.jsx(G,{value:x?.progress_type||"",onChange:m=>w(u=>u?{...u,progress_type:m.target.value}:null),className:"mt-1 rounded-xl border-gray-200 focus:border-gray-400 text-xs",placeholder:"선택"}):a.jsx("p",{className:"modal-value",children:c.progress_type||"-"})]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"modal-label",children:"결제 종류"}),f?a.jsx(G,{value:x?.payment_category||"",onChange:m=>w(u=>u?{...u,payment_category:m.target.value}:null),className:"mt-1 rounded-xl border-gray-200 focus:border-gray-400 text-xs",placeholder:"선택"}):a.jsx("p",{className:"modal-value",children:c.payment_category||"-"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"modal-label",children:"구매요청자"}),f?a.jsx(G,{value:x?.requester_name||"",onChange:m=>w(u=>u?{...u,requester_name:m.target.value}:null),className:"mt-1 rounded-xl border-gray-200 focus:border-gray-400 text-xs"}):a.jsx("p",{className:"modal-value",children:c.requester_name})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("span",{className:"modal-label",children:"청구일"}),f?a.jsx($e,{date:x?.request_date?new Date(x.request_date):void 0,onDateChange:m=>w(u=>u?{...u,request_date:m?.toISOString().split("T")[0]||""}:null),className:"mt-1 rounded-xl border-gray-200 focus:border-gray-400 text-xs"}):a.jsx("p",{className:"modal-subtitle",children:We(c.request_date)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"modal-label",children:"입고 요청일"}),f?a.jsx($e,{date:x?.delivery_request_date?new Date(x.delivery_request_date):void 0,onDateChange:m=>w(u=>u?{...u,delivery_request_date:m?.toISOString().split("T")[0]||""}:null),className:"mt-1 rounded-xl border-gray-200 focus:border-gray-400 text-xs"}):a.jsx("p",{className:"modal-subtitle",children:We(c.delivery_request_date)})]})]}),(c.revised_delivery_request_date||f)&&a.jsxs("div",{children:[a.jsx("span",{className:"modal-label text-orange-500",children:"변경 입고일"}),f?a.jsx($e,{date:x?.revised_delivery_request_date?new Date(x.revised_delivery_request_date):void 0,onDateChange:m=>w(u=>u?{...u,revised_delivery_request_date:m?.toISOString().split("T")[0]||""}:null),className:"mt-1 rounded-xl border-gray-200 focus:border-gray-400 text-xs"}):a.jsx("p",{className:"modal-subtitle text-orange-700",children:We(c.revised_delivery_request_date)})]})]})]}),a.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm",children:[a.jsxs("h3",{className:"modal-section-title mb-4 flex items-center",children:[a.jsx(Kt,{className:"w-4 h-4 mr-2 text-gray-600"}),"업체 정보"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("span",{className:"modal-label",children:"업체명"}),f?a.jsx(G,{value:x?.vendor?.vendor_name||x?.vendor_name||"",onChange:m=>w(u=>u?{...u,vendor_name:m.target.value}:null),className:"mt-1 rounded-xl border-gray-200 focus:border-gray-400 text-xs",placeholder:"업체 선택"}):a.jsx("p",{className:"modal-value",children:c.vendor?.vendor_name||"-"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"modal-label",children:"업체 담당자"}),f?a.jsx(G,{value:x?.vendor_contacts?.[0]?.contact_name||"",onChange:m=>{w(u=>{if(!u)return null;const C=[...u.vendor_contacts||[]];return C[0]?C[0]={...C[0],contact_name:m.target.value}:C[0]={contact_name:m.target.value},{...u,vendor_contacts:C}})},className:"mt-1 rounded-xl border-gray-200 focus:border-gray-400 text-xs",placeholder:"담당자 선택"}):a.jsx("p",{className:"modal-value",children:c.vendor_contacts?.[0]?.contact_name||"-"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"modal-label",children:"PJ업체"}),f?a.jsx(G,{value:x?.project_vendor||"",onChange:m=>w(u=>u?{...u,project_vendor:m.target.value}:null),className:"mt-1 rounded-xl border-gray-200 focus:border-gray-400 text-xs",placeholder:"입력"}):a.jsx("p",{className:"modal-value",children:c.project_vendor||"-"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("span",{className:"modal-label",children:"수주번호"}),f?a.jsx(G,{value:x?.order_number||"",onChange:m=>w(u=>u?{...u,order_number:m.target.value}:null),className:"mt-1 rounded-xl border-gray-200 focus:border-gray-400 text-xs",placeholder:"입력"}):a.jsx("p",{className:"modal-subtitle",children:c.order_number||"-"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"modal-label",children:"Item"}),f?a.jsx(G,{value:x?.project_item||"",onChange:m=>w(u=>u?{...u,project_item:m.target.value}:null),className:"mt-1 rounded-xl border-gray-200 focus:border-gray-400 text-xs",placeholder:"입력"}):a.jsx("p",{className:"modal-subtitle",children:c.project_item||"-"})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm",children:[a.jsxs("h3",{className:"modal-section-title mb-4 flex items-center",children:[a.jsx(Gt,{className:"w-4 h-4 mr-2 text-gray-600"}),"승인 정보"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("span",{className:"modal-label",children:"중간승인"}),a.jsx("div",{className:`inline-flex px-3 py-1 rounded-xl badge-text text-xs ${c.middle_manager_status==="approved"?"bg-green-50 text-green-700 border border-green-200":c.middle_manager_status==="rejected"?"bg-red-50 text-red-700 border border-red-200":"bg-gray-50 text-gray-600 border border-gray-200"}`,children:c.middle_manager_status==="approved"?"승인완료":c.middle_manager_status==="rejected"?"반려됨":"승인대기"})]}),!f&&ge&&c.middle_manager_status==="pending"&&a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(V,{size:"sm",onClick:()=>_e("middle"),className:"bg-green-500 hover:bg-green-600 text-white rounded-xl px-4 py-1 text-xs",children:[a.jsx(Qe,{className:"w-3 h-3 mr-1"}),"승인"]}),a.jsxs(V,{size:"sm",variant:"outline",onClick:()=>Ce("middle"),className:"border-red-200 text-red-600 hover:bg-red-50 rounded-xl px-4 py-1 text-xs",children:[a.jsx(Se,{className:"w-3 h-3 mr-1"}),"반려"]})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("span",{className:"modal-label",children:"최종승인"}),a.jsx("div",{className:`inline-flex px-3 py-1 rounded-xl badge-text text-xs ${c.final_manager_status==="approved"?"bg-green-50 text-green-700 border border-green-200":c.final_manager_status==="rejected"?"bg-red-50 text-red-700 border border-red-200":"bg-gray-50 text-gray-600 border border-gray-200"}`,children:c.final_manager_status==="approved"?"승인완료":c.final_manager_status==="rejected"?"반려됨":"승인대기"})]}),!f&&L&&c.middle_manager_status==="approved"&&c.final_manager_status==="pending"&&a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(V,{size:"sm",onClick:()=>_e("final"),className:"bg-green-500 hover:bg-green-600 text-white rounded-xl px-4 py-1 text-xs",children:[a.jsx(Qe,{className:"w-3 h-3 mr-1"}),"승인"]}),a.jsxs(V,{size:"sm",variant:"outline",onClick:()=>Ce("final"),className:"border-red-200 text-red-600 hover:bg-red-50 rounded-xl px-4 py-1 text-xs",children:[a.jsx(Se,{className:"w-3 h-3 mr-1"}),"반려"]})]})]})]})]})]}),a.jsx("div",{className:"lg:col-span-3",children:a.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 overflow-hidden shadow-sm",children:[a.jsxs("div",{className:"p-4 bg-gray-50 border-b border-gray-100 flex items-center justify-between",children:[a.jsxs("h3",{className:"modal-section-title flex items-center",children:[a.jsx(et,{className:"w-4 h-4 mr-2 text-gray-600"}),"품목 리스트"]}),!f&&re&&a.jsxs(a.Fragment,{children:[o==="purchase"&&a.jsxs(V,{size:"sm",onClick:ve,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-xl text-xs",children:[a.jsx(hn,{className:"w-3 h-3 mr-1"}),"전체 구매완료"]}),o==="receipt"&&a.jsxs(V,{size:"sm",onClick:Be,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-xl text-xs",children:[a.jsx(bn,{className:"w-3 h-3 mr-1"}),"전체 입고완료"]})]})]}),a.jsx("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-100",children:a.jsxs("div",{className:"grid grid-cols-12 gap-2 text-xs font-semibold text-gray-600",children:[a.jsx("div",{className:"col-span-4",children:"품목명"}),a.jsx("div",{className:"col-span-2",children:"규격"}),a.jsx("div",{className:"col-span-1 text-center",children:"수량"}),a.jsx("div",{className:"col-span-2 text-right",children:"단가"}),a.jsx("div",{className:"col-span-2 text-right",children:"금액"}),a.jsx("div",{className:"col-span-1 text-center",children:"상태"})]})}),a.jsx("div",{className:"max-h-[40vh] overflow-y-auto",children:(f?b:c.items)?.map((m,u)=>a.jsxs("div",{className:"px-4 py-3 border-b border-gray-50 hover:bg-gray-50/50 transition-colors",children:[a.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center",children:[a.jsx("div",{className:"col-span-4",children:f?a.jsx(G,{value:m.item_name,onChange:y=>ae(u,"item_name",y.target.value),className:"text-xs border-gray-200 rounded-lg",placeholder:"품목명"}):a.jsx("span",{className:"modal-value text-xs font-semibold",children:m.item_name||"품목명 없음"})}),a.jsx("div",{className:"col-span-2",children:f?a.jsx(G,{value:m.specification,onChange:y=>ae(u,"specification",y.target.value),className:"text-xs border-gray-200 rounded-lg",placeholder:"규격"}):a.jsx("span",{className:"modal-subtitle text-xs",children:m.specification||"-"})}),a.jsx("div",{className:"col-span-1 text-center",children:f?a.jsx(G,{type:"number",value:m.quantity,onChange:y=>ae(u,"quantity",Number(y.target.value)),className:"text-xs border-gray-200 rounded-lg text-center"}):a.jsx("span",{className:"modal-subtitle text-xs",children:m.quantity||0})}),a.jsx("div",{className:"col-span-2 text-right",children:f?a.jsx(G,{type:"number",value:m.unit_price_value,onChange:y=>ae(u,"unit_price_value",Number(y.target.value)),className:"text-xs border-gray-200 rounded-lg text-right"}):a.jsxs("span",{className:"modal-subtitle text-xs",children:["₩",he(m.unit_price_value)]})}),a.jsx("div",{className:"col-span-2 text-right",children:f?a.jsx(G,{type:"number",value:m.amount_value,onChange:y=>ae(u,"amount_value",Number(y.target.value)),className:"text-xs border-gray-200 rounded-lg text-right"}):a.jsxs("span",{className:"modal-value text-xs font-semibold",children:["₩",he(m.amount_value||0)]})}),a.jsx("div",{className:"col-span-1 text-center",children:f?a.jsx(V,{size:"sm",variant:"ghost",onClick:()=>Me(u),className:"text-red-600 hover:bg-red-50 rounded-lg p-1 h-6 w-6",children:a.jsx(tt,{className:"w-3 h-3"})}):a.jsxs(a.Fragment,{children:[X&&o==="purchase"&&a.jsx("button",{onClick:()=>je(m.id,!m.is_payment_completed),className:`text-xs px-2 py-1 rounded-lg border transition-colors ${m.is_payment_completed?"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100":"bg-gray-50 text-gray-600 border-gray-200 hover:bg-gray-100"}`,disabled:!X,children:m.is_payment_completed?"완료":"대기"}),X&&o==="receipt"&&a.jsx("button",{onClick:()=>Te(m.id,!m.is_received),className:`text-xs px-2 py-1 rounded-lg border transition-colors ${m.is_received?"bg-green-50 text-green-700 border-green-200 hover:bg-green-100":"bg-gray-50 text-gray-600 border-gray-200 hover:bg-gray-100"}`,disabled:!X,children:m.is_received?"입고":"대기"}),!X&&a.jsx("span",{className:"text-xs text-gray-400",children:"-"})]})})]}),(m.remark||f&&u===b.length-1)&&a.jsx("div",{className:"mt-2 col-span-12",children:f?a.jsx(G,{value:m.remark||"",onChange:y=>ae(u,"remark",y.target.value),className:"text-xs border-gray-200 rounded-lg w-full",placeholder:"비고"}):m.remark?a.jsx("div",{className:"bg-amber-50 rounded-lg p-2 border border-amber-200",children:a.jsx("span",{className:"text-xs text-amber-700",children:m.remark})}):null})]},u))}),a.jsx("div",{className:"bg-gray-50 p-4 border-t border-gray-100",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"modal-section-title",children:"총액"}),a.jsxs("span",{className:"modal-value text-lg font-bold",children:["₩",he((f?b:c.items)?.reduce((m,u)=>m+(u.amount_value||0),0)||0)]})]})}),f&&a.jsx("div",{className:"p-4 border-t border-gray-100",children:a.jsxs(V,{size:"sm",variant:"outline",onClick:xe,className:"w-full rounded-xl border-dashed border-2 border-gray-300 hover:border-gray-400 py-3 text-xs",children:[a.jsx(pn,{className:"w-4 h-4 mr-1"}),"항목 추가"]})})]})})]})]}):a.jsx("div",{className:"text-center py-12 modal-subtitle",children:"발주 정보를 불러올 수 없습니다."})});return s?Oe:a.jsx(Lt,{open:t,onOpenChange:n,children:a.jsxs(Vt,{className:"overflow-hidden bg-white rounded-3xl shadow-2xl border-0",style:{maxWidth:"1280px",width:"90vw",maxHeight:"80vh"},showCloseButton:!1,children:[a.jsxs("div",{className:"relative px-6 pt-6 pb-4",children:[a.jsx("button",{onClick:n,className:"absolute right-6 top-6 w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-all duration-200",children:a.jsx(Se,{className:"w-4 h-4 text-gray-500"})}),a.jsx("div",{className:"pr-16",children:a.jsxs("div",{className:"flex items-start gap-4 mb-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-50 flex items-center justify-center flex-shrink-0",children:a.jsx(Xe,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h1",{className:"modal-title mb-1",children:c?.purchase_order_number||"PO번호 없음"}),a.jsx("p",{className:"modal-subtitle",children:c?.vendor?.vendor_name||"업체명 없음"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[c&&!f&&ee(),!f&&H&&a.jsxs(a.Fragment,{children:[a.jsxs(V,{size:"sm",variant:"outline",onClick:()=>N(!0),className:"border-gray-300 text-gray-700 hover:bg-gray-50 hover:text-gray-900 hover:border-gray-400 rounded-2xl px-4 py-2 transition-all duration-200",children:[a.jsx(an,{className:"w-4 h-4 mr-2"}),"수정"]}),J&&i&&a.jsxs(V,{size:"sm",variant:"outline",onClick:()=>c&&i(c),className:"border-red-200 text-red-600 hover:bg-red-50 hover:border-red-300 rounded-2xl px-4 py-2 transition-all duration-200",children:[a.jsx(tt,{className:"w-4 h-4 mr-2"}),"삭제"]})]}),f&&a.jsxs(a.Fragment,{children:[a.jsxs(V,{size:"sm",variant:"outline",onClick:()=>{N(!1),w(c),O(c?.items||[]),D([])},className:"border-gray-300 text-gray-700 hover:bg-gray-50 hover:text-gray-900 hover:border-gray-400 rounded-2xl px-4 py-2 transition-all duration-200",children:[a.jsx(Se,{className:"w-4 h-4 mr-2"}),"취소"]}),a.jsxs(V,{size:"sm",onClick:be,className:"bg-gray-900 hover:bg-gray-800 text-white rounded-2xl px-6 py-2 shadow-lg transition-all duration-200",children:[a.jsx(yn,{className:"w-4 h-4 mr-2"}),"저장"]})]})]})]})})]}),a.jsx("div",{className:"overflow-y-auto max-h-[calc(80vh-160px)] px-6 pb-6",children:Oe})]})})}export{zr as P,bn as T};
//# sourceMappingURL=PurchaseDetailModal-BvNLZqrd.js.map
