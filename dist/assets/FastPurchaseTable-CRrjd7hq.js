const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/exceljs.min-BsMlm5Q2.js","assets/index-m3fJUWdN.js","assets/index-xu3noEvr.css"])))=>i.map(i=>d[i]);
import{_ as De,r as m,j as e,q as G,p as ke,s as Se,N as Pe,k,O as J,a as Re}from"./index-m3fJUWdN.js";import{B as f,t as E}from"./index-OpY-RBjo.js";import{P as Ee}from"./PurchaseDetailModal-DrVdQG50.js";import{a as L}from"./helpers-CWDchwQL.js";import{E as qe}from"./eye-D8dGsA2j.js";import{c as K,R as Fe,P as Oe,W as Ie,C as Me,T as Be,D as ze,d as V,O as Le,e as We}from"./input-L8jZtFSn.js";import"./dialog-BsyHRK2b.js";import"./format-Dg54GRbZ.js";import"./circle-check-big-B_vs-Xwo.js";import"./chevron-down-B34F4nwP.js";import"./popover-Bru2i_nz.js";import"./calendar-Bvy8cUb0.js";import"./package-Cqdj-6Td.js";import"./credit-card-V-VwHt5k.js";import"./trash-2-CYhjtZSR.js";import"./plus-BLzYEBb7.js";import"./save-CXgkag0j.js";function T(t){if(!t)return"";const l=new Date(t);return isNaN(l.getTime())?t:`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}-${String(l.getDate()).padStart(2,"0")}`}function z(t){return t?["KRW","원","₩"].includes(t)?"₩":["USD","$","달러"].includes(t)?"$":["EUR","€"].includes(t)?"€":["JPY","엔","¥"].includes(t)||["CNY","위안","元"].includes(t)?"¥":t:""}async function Te(t){const l=await De(()=>import("./exceljs.min-BsMlm5Q2.js").then(s=>s.e),__vite__mapDeps([0,1,2])),r=new l.Workbook,a=r.addWorksheet("발주서",{pageSetup:{paperSize:9,orientation:"portrait",fitToPage:!0,fitToWidth:1,fitToHeight:1,horizontalCentered:!0,verticalCentered:!0,margins:{left:.3,right:.3,top:.5,bottom:.5,header:.2,footer:.2}}});a.getRow(1).height=29.8;for(let s=2;s<=60;s++)a.getRow(s).height=15.75;a.getRow(1).eachCell(s=>{s.font={...s.font||{},name:"맑은 고딕",size:20}});for(let s=2;s<=60;s++)a.getRow(s).eachCell(o=>{o.font={...o.font||{},name:"맑은 고딕",size:11}});a.mergeCells("A1:G1"),a.mergeCells("A2:B2"),a.mergeCells("C2:D2"),a.mergeCells("F2:G2"),a.mergeCells("A3:B3"),a.mergeCells("C3:D3"),a.mergeCells("F3:G3"),a.mergeCells("A4:B4"),a.mergeCells("C4:D4"),a.mergeCells("F4:G4"),a.mergeCells("A5:B5"),a.mergeCells("C5:D5"),a.mergeCells("F5:G5"),a.mergeCells("A6:B6"),a.mergeCells("C6:D6"),a.mergeCells("F6:G6"),a.mergeCells("A7:B7"),a.mergeCells("C7:D7"),a.mergeCells("F7:G7");try{const o=await(await fetch("/logo_KOR.png")).arrayBuffer(),g=r.addImage({buffer:o,extension:"png"}),C=a.getColumn("D").width||22,$=Math.max(1,C*7.2*.58)+4,i=34,x=3.5-.5,A=.5-.2;a.addImage(g,{tl:{col:x,row:A},ext:{width:$,height:i}})}catch{}a.getCell("D1").value="                발 주 서",a.getCell("D1").alignment={horizontal:"left",vertical:"middle",indent:1},a.getCell("D1").font={bold:!0,size:20},a.getCell("A2").value="업   체   명",a.getCell("A2").font={bold:!0},a.getCell("A3").value="담   당   자",a.getCell("A3").font={bold:!0},a.getCell("A4").value="청   구   일",a.getCell("A4").font={bold:!0},a.getCell("A5").value="TEL.",a.getCell("A5").font={bold:!0},a.getCell("A6").value="FAX.",a.getCell("A6").font={bold:!0},a.getCell("A7").value="입고요청일",a.getCell("A7").font={bold:!0},a.getCell("E2").value="구매요청자",a.getCell("E2").font={bold:!0},a.getCell("E3").value="주         소",a.getCell("E3").font={bold:!0},a.getCell("E4").value="발 주 번 호",a.getCell("E4").font={bold:!0},a.getCell("E5").value="TEL.",a.getCell("E5").font={bold:!0},a.getCell("E6").value="FAX.",a.getCell("E6").font={bold:!0},a.getCell("E7").value="지출 예정일",a.getCell("E7").font={bold:!0},a.getCell("F7").value=t.vendor_payment_schedule||"",a.getCell("C2").value=t.vendor_name,a.getCell("C3").value=t.vendor_contact_name||"",a.getCell("C4").value=T(t.request_date),a.getCell("C5").value=t.vendor_phone||"",a.getCell("C6").value=t.vendor_fax||"",a.getCell("C7").value=T(t.delivery_request_date),a.getCell("F2").value=t.requester_name,a.getCell("F3").value="대구광역시 달서구 성서공단북로305",a.getCell("F4").value=t.purchase_order_number,a.getCell("F5").value="(053) 626-7805",a.getCell("F6").value="(053) 657-7905",a.getCell("F5").alignment={horizontal:"center",vertical:"middle"},a.getCell("F6").alignment={horizontal:"center",vertical:"middle"};const c=["No","품명","규격","수량","단가","금액","비고"];for(let s=0;s<c.length;s++)a.getCell(String.fromCharCode(65+s)+"8").value=c[s],a.getCell(String.fromCharCode(65+s)+"8").font={bold:!0},s===6&&(a.getCell("G8").alignment={horizontal:"center",vertical:"middle"});const h=9,y=45,u=[...t.items].sort((s,o)=>s.line_number-o.line_number),p=u.length,d=h+Math.max(p,y);for(let s=0;s<u.length;s++){const o=u[s],g=h+s;a.getCell("A"+g).value=o.line_number;const C=a.getCell("B"+g);C.value=o.item_name,C.alignment={horizontal:"left",vertical:"middle"},a.getCell("C"+g).value=o.specification,a.getCell("C"+g).alignment={horizontal:"left",vertical:"middle"},a.getCell("D"+g).value=o.quantity;const $=z(o.currency),i=o.unit_price_value!==void 0&&o.unit_price_value!==null?`${o.unit_price_value.toLocaleString()} ${$}`.trim():"";a.getCell("E"+g).value=i,a.getCell("E"+g).alignment={horizontal:"right",vertical:"middle"};const x=z(o.currency),A=o.amount_value!==void 0&&o.amount_value!==null?`${o.amount_value.toLocaleString()} ${x}`.trim():"";a.getCell("F"+g).value=A,a.getCell("F"+g).alignment={horizontal:"right",vertical:"middle"};const P=a.getCell("G"+g);P.value=o.remark!==void 0&&o.remark!==null?String(o.remark):"",P.alignment={horizontal:"left",vertical:"middle",wrapText:!1,shrinkToFit:!0}}for(let s=p;s<y;s++){const o=h+s;for(let g=0;g<7;g++)a.getCell(String.fromCharCode(65+g)+o).value=""}a.mergeCells(`A${d}:E${d}`),a.getCell("A"+d).value="합계",a.getCell("A"+d).font={bold:!0};const S=z(t.items[0]?.currency),j=t.items.reduce((s,o)=>s+(o.amount_value||0),0);a.getCell("F"+d).value=`${j.toLocaleString()} ${S}`.trim(),a.getCell("F"+d).alignment={horizontal:"right",vertical:"middle"};const w=d;for(let s=1;s<=w;s++)for(let o=1;o<=7;o++){const C=String.fromCharCode(64+o)+s,$=a.getCell(C),i=o===5||o===6,x=o===3,A=s>=h&&s<d;i&&(A||s===d)||x&&A||($.alignment={horizontal:"center",vertical:"middle"}),$.border={top:{style:s===1||s===2||s===8||s===d?"medium":"thin"},left:{style:o===1?"medium":"thin"},right:{style:o===7?"medium":"thin"},bottom:{style:s===8||s===d||s===w?"medium":"thin"}}}for(let s=0;s<p;s++){const o=h+s;a.getCell("C"+o).alignment={horizontal:"left",vertical:"middle"}}for(let s=2;s<=7;s++)a.getCell("B"+s).border={...a.getCell("B"+s).border,right:{style:"medium"}},a.getCell("D"+s).border={...a.getCell("D"+s).border,right:{style:"medium"}},s<=6&&(a.getCell("E"+s).border={...a.getCell("E"+s).border,right:{style:"medium"}});a.getCell("E7").border={...a.getCell("E7").border,top:{style:"thin"},right:{style:"medium"}},a.getCell("G7").border={...a.getCell("G7").border,top:{style:"thin"}};for(let s=1;s<=7;s++){const o=a.getCell("A"+s).border||{};a.getCell("A"+s).border={...o,left:{style:"medium"}}}const O=a.getCell("A"+d).border||{};a.getCell("A"+d).border={...O,left:{style:"medium"}},Object.entries({A:4.7,B:23,C:30,D:11,E:15,F:16,G:37}).forEach(([s,o])=>{a.getColumn(s).width=o}),a.getRow(1).height=29.8,a.getRow(1).eachCell(s=>{s.font={...s.font||{},name:"맑은 고딕",size:20}});for(let s=2;s<=w;s++){const o=a.getRow(s);o.height=15.75,o.eachCell(g=>{g.font={...g.font||{},name:"맑은 고딕",size:11}})}for(let s=9;s<=w;s++)a.getCell("G"+s).alignment={horizontal:"left",vertical:"middle",wrapText:!1,shrinkToFit:!0},a.getCell("B"+s).alignment={horizontal:"left",vertical:"middle"};const M=await r.xlsx.writeBuffer();return new Blob([M],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})}const Ge=t=>{if(!t.items||t.items.length===0)return{received:0,total:0,percentage:0};const l=t.items.length,r=t.items.filter(c=>c.is_received||c.delivery_status==="received").length,a=l>0?Math.round(r/l*100):0;return{received:r,total:l,percentage:a}},H=m.memo(({purchase:t})=>{const l=t.is_received?"completed":t.middle_manager_status==="approved"&&t.final_manager_status==="approved"?"inProgress":t.middle_manager_status==="rejected"||t.final_manager_status==="rejected"?"rejected":"pending",r={completed:{text:"입고완료",className:"bg-green-100 text-green-800"},inProgress:{text:"구매진행",className:"bg-hansl-100 text-hansl-800"},rejected:{text:"반려",className:"bg-red-100 text-red-800"},pending:{text:"승인대기",className:"bg-yellow-100 text-yellow-800"}},{text:a,className:c}=r[l];return e.jsx(f,{className:`${c} text-xs`,children:a})});H.displayName="StatusBadge";const Y=m.memo(({purchase:t,onClick:l})=>{const r=Ge(t),a=t.progress_type==="선진행"||t.progress_type?.includes("선진행");return e.jsxs("div",{className:`bg-white rounded-lg border p-4 space-y-3 cursor-pointer transition-all hover:shadow-md ${a?"border-red-400 bg-red-50 hover:bg-red-100":"hover:bg-gray-50"}`,onClick:()=>l(t),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[a?e.jsx(f,{className:"bg-red-500 text-white font-bold text-xs px-2 py-0.5",children:"선진행"}):e.jsx(f,{className:"bg-gray-200 text-gray-700 text-xs px-2 py-0.5",children:"일반"}),e.jsx("span",{className:"font-semibold text-sm text-gray-900",children:t.purchase_order_number||"-"})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[L(t.request_date)," 요청"]})]}),e.jsx(H,{purchase:t})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"요청자"}),e.jsx("span",{className:"font-medium",children:t.requester_name})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"업체"}),e.jsx("span",{className:"font-medium",children:t.vendor_name})]}),t.project_vendor&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"PJ업체"}),e.jsx("span",{className:"font-medium truncate max-w-[150px]",children:t.project_vendor})]}),t.project_item&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"PJ ITEM"}),e.jsx("span",{className:"font-medium truncate max-w-[150px]",children:t.project_item})]}),t.sales_order_number&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"수주번호"}),e.jsx("span",{className:"font-medium truncate max-w-[150px]",children:t.sales_order_number})]}),t.item_name&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"품목"}),e.jsx("span",{className:"font-medium truncate max-w-[150px]",children:t.item_name})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"금액"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[(t.amount_value||t.total_amount)?.toLocaleString()," ",t.currency]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"입고현황"}),e.jsxs("span",{className:"text-gray-700",children:[r.received,"/",r.total," (",r.percentage,"%)"]})]}),e.jsx("div",{className:"bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${r.percentage===100?"bg-green-500":r.percentage>0?"bg-hansl-500":"bg-gray-300"}`,style:{width:`${r.percentage}%`}})})]}),t.is_payment_completed!==void 0&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"결제"}),t.is_payment_completed?e.jsx(f,{className:"bg-green-100 text-green-800 text-xs",children:"완료"}):e.jsx(f,{className:"bg-gray-100 text-gray-800 text-xs",children:"대기"})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("div",{className:"flex items-center justify-center text-xs text-gray-500",children:[e.jsx(qe,{className:"w-3 h-3 mr-1"}),"클릭하여 상세보기"]})})]})});Y.displayName="MobilePurchaseCard";var U="AlertDialog",[Je,At]=ke(U,[K]),v=K(),X=t=>{const{__scopeAlertDialog:l,...r}=t,a=v(l);return e.jsx(Fe,{...a,...r,modal:!0})};X.displayName=U;var Ke="AlertDialogTrigger",Ve=m.forwardRef((t,l)=>{const{__scopeAlertDialog:r,...a}=t,c=v(r);return e.jsx(We,{...c,...a,ref:l})});Ve.displayName=Ke;var He="AlertDialogPortal",Q=t=>{const{__scopeAlertDialog:l,...r}=t,a=v(l);return e.jsx(Oe,{...a,...r})};Q.displayName=He;var Ye="AlertDialogOverlay",Z=m.forwardRef((t,l)=>{const{__scopeAlertDialog:r,...a}=t,c=v(r);return e.jsx(Le,{...c,...a,ref:l})});Z.displayName=Ye;var q="AlertDialogContent",[Ue,Xe]=Je(q),Qe=Pe("AlertDialogContent"),ee=m.forwardRef((t,l)=>{const{__scopeAlertDialog:r,children:a,...c}=t,h=v(r),y=m.useRef(null),u=G(l,y),p=m.useRef(null);return e.jsx(Ie,{contentName:q,titleName:te,docsSlug:"alert-dialog",children:e.jsx(Ue,{scope:r,cancelRef:p,children:e.jsxs(Me,{role:"alertdialog",...h,...c,ref:u,onOpenAutoFocus:Se(c.onOpenAutoFocus,d=>{d.preventDefault(),p.current?.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[e.jsx(Qe,{children:a}),e.jsx(et,{contentRef:y})]})})})});ee.displayName=q;var te="AlertDialogTitle",ae=m.forwardRef((t,l)=>{const{__scopeAlertDialog:r,...a}=t,c=v(r);return e.jsx(Be,{...c,...a,ref:l})});ae.displayName=te;var re="AlertDialogDescription",se=m.forwardRef((t,l)=>{const{__scopeAlertDialog:r,...a}=t,c=v(r);return e.jsx(ze,{...c,...a,ref:l})});se.displayName=re;var Ze="AlertDialogAction",le=m.forwardRef((t,l)=>{const{__scopeAlertDialog:r,...a}=t,c=v(r);return e.jsx(V,{...c,...a,ref:l})});le.displayName=Ze;var ne="AlertDialogCancel",oe=m.forwardRef((t,l)=>{const{__scopeAlertDialog:r,...a}=t,{cancelRef:c}=Xe(ne,r),h=v(r),y=G(l,c);return e.jsx(V,{...h,...a,ref:y})});oe.displayName=ne;var et=({contentRef:t})=>{const l=`\`${q}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${q}\` by passing a \`${re}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${q}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(l)},[l,t]),null},tt=X,at=Q,ie=Z,ce=ee,de=le,me=oe,xe=ae,pe=se;const rt=tt,st=at,ge=m.forwardRef(({className:t,...l},r)=>e.jsx(ie,{className:k("fixed inset-0 z-50 bg-black/40 backdrop-blur-sm","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l,ref:r}));ge.displayName=ie.displayName;const ue=m.forwardRef(({className:t,...l},r)=>e.jsxs(st,{children:[e.jsx(ge,{}),e.jsx(ce,{ref:r,className:k("fixed left-[50%] top-[50%] z-50","w-full max-w-md translate-x-[-50%] translate-y-[-50%]","grid gap-4 bg-white border border-gray-200","rounded-lg p-6 shadow-professional-xl","duration-200","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%]","data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]",t),...l})]}));ue.displayName=ce.displayName;const fe=({className:t,...l})=>e.jsx("div",{className:k("flex flex-col space-y-2 text-left",t),...l});fe.displayName="AlertDialogHeader";const he=({className:t,...l})=>e.jsx("div",{className:k("flex flex-col-reverse sm:flex-row sm:justify-end gap-3",t),...l});he.displayName="AlertDialogFooter";const ye=m.forwardRef(({className:t,...l},r)=>e.jsx(xe,{ref:r,className:k("text-lg font-semibold text-gray-800 tracking-tight",t),...l}));ye.displayName=xe.displayName;const _e=m.forwardRef(({className:t,...l},r)=>e.jsx(pe,{ref:r,className:k("text-sm text-gray-600",t),...l}));_e.displayName=pe.displayName;const je=m.forwardRef(({className:t,...l},r)=>e.jsx(de,{ref:r,className:k(J(),t),...l}));je.displayName=de.displayName;const we=m.forwardRef(({className:t,...l},r)=>e.jsx(me,{ref:r,className:k(J({variant:"outline"}),"mt-2 sm:mt-0",t),...l}));we.displayName=me.displayName;const Ne=m.memo(({purchase:t})=>{const l=t.is_received?"completed":t.middle_manager_status==="approved"&&t.final_manager_status==="approved"?"inProgress":t.middle_manager_status==="rejected"||t.final_manager_status==="rejected"?"rejected":"pending",r={completed:{text:"입고완료",className:"bg-green-100 text-green-800"},inProgress:{text:"구매진행",className:"bg-hansl-100 text-hansl-800"},rejected:{text:"반려",className:"bg-red-100 text-red-800"},pending:{text:"승인대기",className:"bg-yellow-100 text-yellow-800"}},{text:a,className:c}=r[l];return e.jsx(f,{className:c,children:a})});Ne.displayName="StatusBadge";const D=t=>!t||["KRW","원","₩"].includes(t)?"₩":["USD","$","달러"].includes(t)?"$":["EUR","€"].includes(t)?"€":["JPY","엔","¥"].includes(t)||["CNY","위안","元"].includes(t)?"¥":t,n={approvalStatus:"text-center w-20 min-w-[85px] max-w-[85px]",purchaseOrderNumber:"pl-2 w-36 min-w-[145px] max-w-[145px]",paymentCategory:"text-center w-20 min-w-[85px] max-w-[85px]",requesterName:"w-16 min-w-[68px] max-w-[68px]",requestDate:"w-20 min-w-[85px] max-w-[85px]",vendorName:"w-28 min-w-[115px] max-w-[115px]",contactName:"w-16 min-w-[68px] max-w-[68px]",deliveryRequestDate:"w-20 min-w-[85px] max-w-[85px]",itemName:"w-28 min-w-[120px] max-w-[120px]",specification:"w-64 min-w-[260px] max-w-[260px]",quantity:"text-center w-14 min-w-[60px] max-w-[60px]",unitPrice:"text-right w-24 min-w-[100px] max-w-[100px]",amount:"text-right w-24 min-w-[100px] max-w-[100px]",remark:"w-28 min-w-[115px] max-w-[115px]",paymentSchedule:"w-24 min-w-[100px] max-w-[100px]",projectVendor:"w-24 min-w-[105px] max-w-[105px]",salesOrderNumber:"w-28 min-w-[115px] max-w-[115px]",projectItem:"w-44 min-w-[180px] max-w-[180px]",receiptProgress:"text-center w-20 min-w-[85px] max-w-[85px]",status:"text-center w-20 min-w-[85px] max-w-[85px]",receipt:"text-center w-16 min-w-[70px] max-w-[70px]",paymentStatus:"text-center w-16 min-w-[70px] max-w-[70px]",link:"w-20 min-w-[85px] max-w-[85px]"},ve=m.memo(({purchase:t})=>{const l=t.middle_manager_status==="approved",r=t.middle_manager_status==="rejected",a=t.final_manager_status==="approved",c=t.final_manager_status==="rejected";return r||c?e.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[e.jsx("div",{className:"flex items-center gap-0.5",children:e.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full animate-pulse"})}),e.jsx(f,{className:"bg-red-100 text-red-800 text-[11px] font-medium px-1.5 py-0",children:"반려"})]}):l&&a?e.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[e.jsx("div",{className:"flex items-center gap-0.5",children:e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"})}),e.jsx(f,{className:"bg-green-100 text-green-800 text-[11px] font-medium px-1.5 py-0",children:"승인완료"})]}):l&&!a&&!c?e.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),e.jsx("div",{className:"w-3 h-0.5 bg-gray-300"}),e.jsx("div",{className:"w-1.5 h-1.5 bg-gray-300 rounded-full"})]}),e.jsx(f,{className:"bg-yellow-100 text-yellow-800 text-[11px] font-medium px-1.5 py-0",children:"1차 승인"})]}):e.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-gray-300 rounded-full"}),e.jsx("div",{className:"w-3 h-0.5 bg-gray-300"}),e.jsx("div",{className:"w-1.5 h-1.5 bg-gray-300 rounded-full"})]}),e.jsx(f,{className:"bg-gray-100 text-gray-600 text-[11px] font-medium px-1.5 py-0",children:"승인대기"})]})});ve.displayName="ApprovalStatusBadge";const lt=t=>{if(t.is_received)return{received:1,total:1,percentage:100};if(!t.items||t.items.length===0)return{received:0,total:1,percentage:0};const l=t.items.length,r=t.items.filter(c=>c.is_received===!0).length,a=l>0?Math.round(r/l*100):0;return{received:r,total:l,percentage:a}},nt=t=>{if(t.is_payment_completed)return{completed:1,total:1,percentage:100};if(!t.items||t.items.length===0)return{completed:0,total:1,percentage:0};const l=t.items.length,r=t.items.filter(c=>c.is_payment_completed===!0).length,a=l>0?Math.round(r/l*100):0;return{completed:r,total:l,percentage:a}},ot=t=>{if(!t.items||t.items.length===0){if(t.is_received)return{percentage:100};if(t.is_payment_completed)return{percentage:80};const p=t.middle_manager_status==="rejected",d=t.final_manager_status==="rejected";if(p||d)return{percentage:0};const S=t.middle_manager_status==="approved",j=t.final_manager_status==="approved";return S&&j?{percentage:40}:{percentage:20}}const l=t.items.length,r=t.items.filter(p=>p.is_received===!0).length,a=t.items.filter(p=>p.is_payment_completed===!0).length;if(r===l)return{percentage:100};if(r>0){const p=Math.round(r/l*100);return{percentage:Math.min(80+Math.round(p*.2),99)}}if(a===l)return{percentage:80};if(a>0){const p=Math.round(a/l*100);return{percentage:Math.min(40+Math.round(p*.4),79)}}const c=t.middle_manager_status==="rejected",h=t.final_manager_status==="rejected";if(c||h)return{percentage:0};const y=t.middle_manager_status==="approved",u=t.final_manager_status==="approved";return y&&u?{percentage:40}:{percentage:20}},it=m.memo(({type:t})=>t==="선진행"||t?.includes("선진행")?e.jsx(f,{className:"bg-red-500 text-white font-bold text-[11px] px-2 py-0.5",children:"선진행"}):e.jsx(f,{className:"bg-gray-200 text-gray-700 text-[11px] px-2 py-0.5",children:"일반"}));it.displayName="ProgressTypeBadge";const be=m.memo(({purchase:t,onClick:l,activeTab:r,isLeadBuyer:a,onPaymentComplete:c,onReceiptComplete:h,onExcelDownload:y})=>{const u=lt(t),p=nt(t),d=ot(t),S=t.progress_type==="선진행"||t.progress_type?.includes("선진행");return e.jsxs("tr",{className:`border-b hover:bg-gray-100 cursor-pointer transition-colors ${S?"bg-red-50 hover:bg-red-100":""}`,onClick:()=>l(t),children:[r==="pending"&&e.jsx("td",{className:`px-2 py-1.5 whitespace-nowrap ${n.approvalStatus}`,children:e.jsx(ve,{purchase:t})}),r==="purchase"&&e.jsx("td",{className:`px-2 py-1.5 ${n.receiptProgress}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("div",{className:"bg-gray-200 rounded-full h-1.5 w-8",children:e.jsx("div",{className:`h-1.5 rounded-full ${p.percentage===100?"bg-blue-500":p.percentage>0?"bg-blue-400":"bg-gray-300"}`,style:{width:`${p.percentage}%`}})}),e.jsxs("span",{className:"text-[11px] text-gray-600",children:[p.percentage,"%"]})]})}),r==="receipt"&&e.jsx("td",{className:`px-2 py-1.5 ${n.receiptProgress}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("div",{className:"bg-gray-200 rounded-full h-1.5 w-8",children:e.jsx("div",{className:`h-1.5 rounded-full ${u.percentage===100?"bg-green-500":u.percentage>0?"bg-hansl-500":"bg-gray-300"}`,style:{width:`${u.percentage}%`}})}),e.jsxs("span",{className:"text-[11px] text-gray-600",children:[u.percentage,"%"]})]})}),e.jsx("td",{className:`px-2 py-1.5 font-medium text-[11px] whitespace-nowrap ${n.purchaseOrderNumber}`,children:e.jsxs("div",{className:"flex items-center gap-1",children:[y&&e.jsx("img",{src:"/excels-icon.svg",alt:"엑셀 다운로드",width:"16",height:"16",className:`inline-block align-middle transition-transform p-0.5 rounded
                ${t.is_po_download?"border border-gray-400":""}
                ${t.progress_type==="선진행"||t.progress_type?.includes("선진행")||t.middle_manager_status==="approved"&&t.final_manager_status==="approved"?t.is_po_download?"cursor-pointer":"cursor-pointer hover:scale-110":"opacity-40 grayscale cursor-not-allowed"}`,onClick:async j=>{(t.progress_type==="선진행"||t.progress_type?.includes("선진행")||t.middle_manager_status==="approved"&&t.final_manager_status==="approved")&&(j.stopPropagation(),await y(t))},style:{pointerEvents:t.progress_type==="선진행"||t.progress_type?.includes("선진행")||t.middle_manager_status==="approved"&&t.final_manager_status==="approved"?"auto":"none"},title:t.is_po_download?"다운로드 완료":"엑셀 발주서 다운로드"}),e.jsxs("span",{className:"block truncate",title:t.purchase_order_number||"",children:[t.purchase_order_number||"-",t.items&&t.items.length>1&&e.jsxs("span",{className:"text-gray-500 ml-0.5",children:["(",t.items.length,")"]})]})]})}),(r==="pending"||r==="receipt"||r==="done"||!r)&&e.jsx("td",{className:`px-2 py-1.5 text-[11px] whitespace-nowrap ${n.paymentCategory}`,children:e.jsx(f,{className:`text-[11px] ${t.payment_category==="구매 요청"?"bg-blue-100 text-blue-800":t.payment_category==="발주"?"bg-green-100 text-green-800":t.payment_category==="경비 청구"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:t.payment_category==="구매 요청"?"구매요청":t.payment_category==="발주"?"발주요청":t.payment_category||"-"})}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] whitespace-nowrap ${n.requesterName}`,children:e.jsx("span",{className:"block truncate",title:t.requester_name||"",children:t.requester_name||"-"})}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] whitespace-nowrap ${n.requestDate}`,children:L(t.request_date)}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] ${n.vendorName}`,children:e.jsx("span",{className:"block truncate",title:t.vendor_name||"",children:t.vendor_name||"-"})}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] whitespace-nowrap ${n.contactName}`,children:e.jsx("span",{className:"block truncate",title:t.contact_name||"",children:t.contact_name||"-"})}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] whitespace-nowrap ${n.deliveryRequestDate}`,children:L(t.delivery_request_date)}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] ${n.itemName}`,children:e.jsx("span",{className:"block truncate",title:t.item_name||"",children:t.item_name||"-"})}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] ${n.specification}`,children:e.jsx("span",{className:"block truncate",title:t.specification||"",children:t.specification||"-"})}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] whitespace-nowrap ${n.quantity}`,children:t.quantity||0}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] whitespace-nowrap ${n.unitPrice}`,children:t.unit_price_value?`${t.unit_price_value.toLocaleString()} ${D(t.currency||"KRW")}`:`0 ${D(t.currency||"KRW")}`}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] font-medium whitespace-nowrap ${n.amount}`,children:t.amount_value?`${t.amount_value.toLocaleString()} ${D(t.currency||"KRW")}`:t.total_amount?`${t.total_amount.toLocaleString()} ${D(t.currency||"KRW")}`:`0 ${D(t.currency||"KRW")}`}),r==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:`px-2 py-1.5 text-[11px] ${n.remark}`,children:e.jsx("span",{className:"block truncate",title:t.remark||"",children:t.remark||"-"})}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] ${n.projectVendor}`,children:e.jsx("span",{className:"block truncate",title:t.project_vendor||"",children:t.project_vendor||"-"})}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] ${n.projectItem}`,children:e.jsx("span",{className:"block truncate",title:t.project_item||"",children:t.project_item||"-"})}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] whitespace-nowrap ${n.salesOrderNumber}`,children:e.jsx("span",{className:"block truncate",title:t.sales_order_number||"",children:t.sales_order_number||"-"})})]}),r==="purchase"&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:`px-2 py-1.5 text-[11px] ${n.remark}`,children:e.jsx("span",{className:"block truncate",title:t.remark||"",children:t.remark||"-"})}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] ${n.link}`,children:t.link?e.jsx("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline truncate block",title:t.link,children:"링크 보기"}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] whitespace-nowrap ${n.paymentSchedule}`,children:e.jsx("span",{className:"block truncate",title:t.vendor_payment_schedule||"",children:t.vendor_payment_schedule||"-"})})]}),r==="receipt"&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:`px-2 py-1.5 text-[11px] ${n.remark}`,children:e.jsx("span",{className:"block truncate",title:t.remark||"",children:t.remark||"-"})}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] ${n.projectVendor}`,children:e.jsx("span",{className:"block truncate",title:t.project_vendor||"",children:t.project_vendor||"-"})}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] ${n.projectItem}`,children:e.jsx("span",{className:"block truncate",title:t.project_item||"",children:t.project_item||"-"})}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] whitespace-nowrap ${n.salesOrderNumber}`,children:e.jsx("span",{className:"block truncate",title:t.sales_order_number||"",children:t.sales_order_number||"-"})}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] whitespace-nowrap ${n.paymentSchedule}`,children:e.jsx("span",{className:"block truncate",title:t.vendor_payment_schedule||"",children:t.vendor_payment_schedule||"-"})})]}),(r==="done"||!r)&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:`px-2 py-1.5 text-[11px] ${n.remark}`,children:e.jsx("span",{className:"block truncate",title:t.remark||"",children:t.remark||"-"})}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] ${n.link}`,children:t.link?e.jsx("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline truncate block",title:t.link,children:"링크 보기"}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] ${n.projectVendor}`,children:e.jsx("span",{className:"block truncate",title:t.project_vendor||"",children:t.project_vendor||"-"})}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] ${n.projectItem}`,children:e.jsx("span",{className:"block truncate",title:t.project_item||"",children:t.project_item||"-"})}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] whitespace-nowrap ${n.salesOrderNumber}`,children:e.jsx("span",{className:"block truncate",title:t.sales_order_number||"",children:t.sales_order_number||"-"})}),e.jsx("td",{className:`px-2 py-1.5 text-[11px] whitespace-nowrap ${n.paymentSchedule}`,children:e.jsx("span",{className:"block truncate",title:t.vendor_payment_schedule||"",children:t.vendor_payment_schedule||"-"})}),e.jsx("td",{className:`px-2 py-1.5 ${n.status}`,children:t.payment_category==="구매 요청"?e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("div",{className:"bg-gray-200 rounded-full h-1.5 w-8",children:e.jsx("div",{className:`h-1.5 rounded-full ${d.percentage===100?"bg-green-500":d.percentage>=80?"bg-blue-500":d.percentage>=40?"bg-hansl-500":d.percentage>0?"bg-gray-400":"bg-red-500"}`,style:{width:`${d.percentage}%`}})}),e.jsxs("span",{className:"text-[11px] text-gray-600",children:[d.percentage,"%"]})]}):e.jsx("span",{className:"text-gray-400 text-[11px]",children:"-"})}),e.jsx("td",{className:`px-2 py-1.5 ${n.receipt}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("div",{className:"bg-gray-200 rounded-full h-1.5 w-8",children:e.jsx("div",{className:`h-1.5 rounded-full ${u.percentage===100?"bg-green-500":u.percentage>0?"bg-hansl-500":"bg-gray-300"}`,style:{width:`${u.percentage}%`}})}),e.jsxs("span",{className:"text-[11px] text-gray-600",children:[u.percentage,"%"]})]})}),e.jsx("td",{className:`px-2 py-1.5 ${n.paymentStatus}`,children:t.is_payment_completed?e.jsx(f,{className:"bg-green-100 text-green-800 text-[11px]",children:"완료"}):e.jsx(f,{className:"bg-gray-100 text-gray-800 text-[11px]",children:"대기"})})]})]})});be.displayName="TableRow";const ct=m.memo(({purchases:t,activeTab:l="done",currentUserRoles:r=[],onRefresh:a,onPaymentComplete:c,onReceiptComplete:h})=>{const[y,u]=m.useState(null),[p,d]=m.useState(!1),[S,j]=m.useState(!1),[w,O]=m.useState(null),b=Re(),M=r&&(r.includes("lead buyer")||r.includes("app_admin"));r.includes("final_approver")||r.includes("app_admin")||r.includes("ceo");const s=i=>{u(i.id),d(!0)},o=()=>{d(!1),u(null)},g=async i=>{try{const{data:x,error:A}=await b.from("purchase_requests").select("*").eq("purchase_order_number",i.purchase_order_number).single();if(A||!x){E.error("해당 발주요청번호의 데이터를 찾을 수 없습니다.");return}const{data:P,error:Ce}=await b.from("purchase_request_items").select("*").eq("purchase_order_number",i.purchase_order_number).order("line_number");if(Ce||!P||P.length===0){E.error("해당 발주요청번호의 품목 데이터를 찾을 수 없습니다.");return}const N={vendor_name:i.vendor_name,vendor_phone:"",vendor_fax:"",vendor_contact_name:"",vendor_payment_schedule:""};try{const _=x.vendor_id||i.vendor_id,I=x.contact_id||i.contact_id;if(_){const{data:R}=await b.from("vendors").select("vendor_phone, vendor_fax, vendor_payment_schedule").eq("id",_).single();R&&(N.vendor_phone=R.vendor_phone||"",N.vendor_fax=R.vendor_fax||"",N.vendor_payment_schedule=R.vendor_payment_schedule||"")}if(I){const{data:R}=await b.from("vendor_contacts").select("contact_name, contact_phone, contact_email").eq("id",I).single();R&&(N.vendor_contact_name=R.contact_name||"")}}catch{}const B={purchase_order_number:x.purchase_order_number||"",request_date:x.request_date,delivery_request_date:x.delivery_request_date,requester_name:x.requester_name,vendor_name:N.vendor_name||"",vendor_contact_name:N.vendor_contact_name,vendor_phone:N.vendor_phone,vendor_fax:N.vendor_fax,project_vendor:x.project_vendor,sales_order_number:x.sales_order_number,project_item:x.project_item,vendor_payment_schedule:N.vendor_payment_schedule,items:P.map(_=>({line_number:_.line_number,item_name:_.item_name,specification:_.specification,quantity:_.quantity,unit_price_value:_.unit_price_value,amount_value:_.amount_value,remark:_.remark,currency:x.currency||"KRW"}))},$e=await Te(B),Ae=`발주서_${B.vendor_name}_${B.purchase_order_number}.xlsx`,W=window.URL.createObjectURL($e),F=document.createElement("a");F.href=W,F.download=Ae,document.body.appendChild(F),F.click(),document.body.removeChild(F),window.URL.revokeObjectURL(W),E.success("엑셀 파일이 다운로드되었습니다.");try{if(r&&r.includes("lead buyer")){const{error:I}=await b.from("purchase_requests").update({is_po_download:!0}).eq("purchase_order_number",i.purchase_order_number);I||a?.()}}catch{}}catch{E.error("엑셀 다운로드에 실패했습니다.")}},C=async()=>{if(w){try{const{error:i}=await b.from("purchase_request_items").delete().eq("purchase_request_id",w.id);if(i)throw i;const{error:x}=await b.from("purchase_requests").delete().eq("id",w.id);if(x)throw x;E.success("발주요청 내역이 삭제되었습니다."),a?.()}catch{E.error("삭제 중 오류가 발생했습니다.")}j(!1),O(null)}},$=m.useMemo(()=>{if(l==="pending")return e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${n.approvalStatus}`,children:"승인상태"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.purchaseOrderNumber}`,children:"발주번호"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${n.paymentCategory}`,children:"결제종류"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.requesterName}`,children:"요청자"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.requestDate}`,children:"청구일"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] text-left ${n.vendorName}`,children:"업체"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.contactName}`,children:"담당자"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.deliveryRequestDate}`,children:"입고요청일"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] text-left ${n.itemName}`,children:"품명"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] text-left ${n.specification}`,children:"규격"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${n.quantity}`,children:"수량"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${n.unitPrice}`,children:"단가"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${n.amount}`,children:"합계"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.remark}`,children:"비고"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.projectVendor}`,children:"PJ업체"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.projectItem}`,children:"PJ ITEM"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.salesOrderNumber}`,children:"수주번호"})]})});const i=e.jsxs(e.Fragment,{children:[e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.purchaseOrderNumber}`,children:"발주번호"}),(l==="receipt"||l==="done"||!l)&&e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${n.paymentCategory}`,children:"결제종류"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.requesterName}`,children:"요청자"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.requestDate}`,children:"청구일"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.vendorName}`,children:"업체"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.contactName}`,children:"담당자"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.deliveryRequestDate}`,children:"입고요청일"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] text-left ${n.itemName}`,children:"품명"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] text-left ${n.specification}`,children:"규격"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${n.quantity}`,children:"수량"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${n.unitPrice}`,children:"단가"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${n.amount}`,children:"합계"})]});let x=null;return l==="purchase"?x=e.jsxs(e.Fragment,{children:[e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.remark}`,children:"비고"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.link}`,children:"링크"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.paymentSchedule}`,children:"지출예정일"})]}):l==="receipt"?x=e.jsxs(e.Fragment,{children:[e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.remark}`,children:"비고"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.projectVendor}`,children:"PJ업체"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.projectItem}`,children:"PJ ITEM"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.salesOrderNumber}`,children:"수주번호"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.paymentSchedule}`,children:"지출예정일"})]}):x=e.jsxs(e.Fragment,{children:[e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.remark}`,children:"비고"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.link}`,children:"링크"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.projectVendor}`,children:"PJ업체"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.projectItem}`,children:"PJ ITEM"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.salesOrderNumber}`,children:"수주번호"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap text-left ${n.paymentSchedule}`,children:"지출예정일"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${n.status}`,children:"구매진행"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${n.receipt}`,children:"입고진행"}),e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${n.paymentStatus}`,children:"결제"})]}),e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[l==="purchase"&&e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${n.receiptProgress}`,children:"구매진행"}),l==="receipt"&&e.jsx("th",{className:`px-2 py-1.5 font-medium text-gray-900 text-[11px] whitespace-nowrap ${n.receiptProgress}`,children:"입고진행"}),i,x]})})},[l]);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block w-full",children:e.jsx("div",{className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"w-full min-w-[1760px]",children:[$,e.jsx("tbody",{children:t.map(i=>e.jsx(be,{purchase:i,onClick:s,activeTab:l,isLeadBuyer:M,onPaymentComplete:c,onReceiptComplete:h,onExcelDownload:g},i.id))})]})})}),e.jsx("div",{className:"hidden sm:block md:hidden w-full",children:e.jsx("div",{className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"w-full min-w-[600px] text-[11px]",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-2 font-medium text-gray-900 w-24",children:"발주번호"}),e.jsx("th",{className:"text-left p-2 font-medium text-gray-900 w-16",children:"요청자"}),e.jsx("th",{className:"text-left p-2 font-medium text-gray-900 w-20",children:"업체"}),e.jsx("th",{className:"text-left p-2 font-medium text-gray-900 w-32",children:"품명"}),e.jsx("th",{className:"text-right p-2 font-medium text-gray-900 w-20",children:"금액"}),e.jsx("th",{className:"text-center p-2 font-medium text-gray-900 w-16",children:"상태"})]})}),e.jsx("tbody",{children:t.map(i=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 cursor-pointer",onClick:()=>s(i),children:[e.jsx("td",{className:"p-2 font-medium",children:i.purchase_order_number||"-"}),e.jsx("td",{className:"p-2",children:i.requester_name}),e.jsx("td",{className:"p-2 truncate",title:i.vendor_name,children:i.vendor_name}),e.jsx("td",{className:"p-2 truncate",title:i.item_name,children:i.item_name||"-"}),e.jsx("td",{className:"p-2 text-right font-medium",children:i.amount_value?`${i.amount_value.toLocaleString()} ${D(i.currency||"KRW")}`:i.total_amount?`${i.total_amount.toLocaleString()} ${D(i.currency||"KRW")}`:`0 ${D(i.currency||"KRW")}`}),e.jsx("td",{className:"p-2 text-center",children:e.jsx(Ne,{purchase:i})})]},i.id))})]})})}),e.jsx("div",{className:"sm:hidden space-y-3",children:t.map(i=>e.jsx(Y,{purchase:i,onClick:()=>s(i)},i.id))}),e.jsx(Ee,{purchaseId:y,isOpen:p,onClose:o,currentUserRoles:r,activeTab:l,onRefresh:a,onDelete:i=>{O(i),j(!0)}}),e.jsx(rt,{open:S,onOpenChange:j,children:e.jsxs(ue,{children:[e.jsxs(fe,{children:[e.jsx(ye,{children:"발주요청 내역 삭제"}),e.jsxs(_e,{children:["발주요청번호 ",w?.purchase_order_number,"를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."]})]}),e.jsxs(he,{children:[e.jsx(we,{children:"취소"}),e.jsx(je,{onClick:C,className:"bg-red-600 hover:bg-red-700",children:"삭제"})]})]})})]})});ct.displayName="FastPurchaseTable";export{ct as default};
//# sourceMappingURL=FastPurchaseTable-CRrjd7hq.js.map
