const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FastPurchaseTable-_xUFPmj7.js","assets/index-ZKBxihlF.js","assets/index-xu3noEvr.css","assets/index-BlVFNekE.js","assets/PurchaseDetailModal-BjtxcEOo.js","assets/helpers-CWDchwQL.js","assets/input-Bvu-QdaQ.js","assets/dialog-CWcZOFRh.js","assets/format-ByKmAvHy.js","assets/circle-check-big-DjHmIUSW.js","assets/eye-CdIUYqbT.js","assets/chevron-down-CyMTOmDO.js","assets/popover-D4PfswZc.js","assets/calendar-CQKrmv_m.js","assets/package-BsGm2TzP.js","assets/credit-card-CoxcICCE.js","assets/trash-2-CWTTOjI2.js","assets/plus-D6-EdpIV.js","assets/save-CTlhbVq3.js","assets/PurchaseItemsModal-dK6KsBXU.js","assets/table-BfwbBa6C.js"])))=>i.map(i=>d[i]);
import{r as n,a as he,l as ie,j as e,_ as we,u as Ee,f as ke,b as Ie}from"./index-ZKBxihlF.js";import{t as ee,B as Ae}from"./index-BlVFNekE.js";import{I as ce}from"./input-Bvu-QdaQ.js";import{S as fe,a as ge,b as xe,c as ye,d as U}from"./select-3CEBJk24.js";import{C as Le}from"./combobox-Cqi5Uc0N.js";import{C as ve,a as qe,b as Me,c as be}from"./card-CzvnZK5v.js";import{P as Oe}from"./plus-D6-EdpIV.js";import{F as Ve}from"./funnel-Da8i81hO.js";import{S as Re}from"./search-B6USDeq-.js";import{P as $e}from"./package-BsGm2TzP.js";import"./chevron-down-CyMTOmDO.js";import"./popover-D4PfswZc.js";const c={purchases:null,vendors:null,employees:null,lastFetch:0,userInfo:null,CACHE_DURATION:300*1e3},ze=()=>{const[f,i]=n.useState([]),[_,P]=n.useState([]),[v,T]=n.useState([]),[k,$]=n.useState(!0),[te,w]=n.useState([]),[M,Y]=n.useState(""),[S,z]=n.useState(""),[O,Z]=n.useState(""),y=he(),V=n.useRef(!1);n.useEffect(()=>{(async()=>{if(V.current)return;V.current=!0;const x=Date.now(),A=c.lastFetch&&x-c.lastFetch<c.CACHE_DURATION;try{if(A&&c.vendors&&c.employees&&c.userInfo)try{P(c.vendors),T(c.employees);const o=c.userInfo;if(o){let g=[];o.purchase_role&&(Array.isArray(o.purchase_role)?g=o.purchase_role.map(s=>String(s).trim()):g=String(o.purchase_role).split(",").map(m=>m.trim()).filter(m=>m.length>0)),w(g),Y(o.name||o.full_name||""),z(o.email||""),Z(o.id||"")}return}catch(o){ie.error("캐시 데이터 사용 중 오류",o),c.purchases=null,c.vendors=null,c.employees=null,c.userInfo=null,c.lastFetch=0}const[h,L,C]=await Promise.all([y.from("vendors").select("*"),y.from("employees").select("*"),y.auth.getUser()]);if(h.error)throw h.error;const F=h.data||[];if(P(F),c.vendors=F,L.error)throw L.error;const D=L.data||[];if(T(D),c.employees=D,C.data.user&&!C.error){let o=null;if(C.data.user.email&&(o=(await y.from("employees").select("*").eq("email",C.data.user.email).maybeSingle()).data),o){c.userInfo=o;let g=[];o.purchase_role&&(Array.isArray(o.purchase_role)?g=o.purchase_role.map(s=>String(s).trim()):g=String(o.purchase_role).split(",").map(m=>m.trim()).filter(m=>m.length>0)),w(g),Y(o.name||o.full_name||""),z(o.email||""),Z(o.id||"")}c.lastFetch=x}}catch(h){ie.error("초기 데이터 로드 실패",h)}})()},[]);const N=n.useCallback(async I=>{$(!0);try{const x=Date.now(),A=c.lastFetch&&x-c.lastFetch<c.CACHE_DURATION;if(!I&&A&&c.purchases)try{i(c.purchases),$(!1);return}catch(s){ie.error("발주 데이터 캐시 사용 중 오류",s),c.purchases=null,c.lastFetch=0}let h=v;if(h.length===0&&(h=c.employees||[],h.length===0)){const{data:s}=await y.from("employees").select("*");h=s||[]}const{data:{user:L},error:C}=await y.auth.getUser();if(C||!L){ie.error("사용자 인증 실패",C),ee.error("로그인이 필요합니다."),$(!1);return}const F=new Date;F.setMonth(F.getMonth()-3);const{data:D,error:o}=await y.from("purchase_requests").select("*,vendors(vendor_name,vendor_payment_schedule),vendor_contacts(contact_name),purchase_request_items(*).order(line_number)").gte("request_date",F.toISOString()).order("request_date",{ascending:!1}).limit(1e3);if(o)throw o;const g=(D||[]).map(s=>{const m=s.purchase_request_items?.[0]||{},R=h.find(E=>E.id===s.requester_id);return{id:Number(s.id),purchase_order_number:s.purchase_order_number,request_date:s.request_date,delivery_request_date:s.delivery_request_date,progress_type:s.progress_type,payment_completed_at:s.payment_completed_at,payment_category:s.payment_category,currency:s.currency,request_type:s.request_type,vendor:s.vendors||null,vendor_name:s.vendors?.vendor_name||"",vendor_payment_schedule:s.vendors?.vendor_payment_schedule||"",vendor_contacts:s.vendor_contacts||[],requester_id:s.requester_id,requester_name:s.requester_name,requester_full_name:R?.full_name||R?.name||s.requester_name||"",item_name:m.item_name||"",specification:m.specification||"",quantity:Number(m.quantity)||0,unit_price_value:Number(m.unit_price_value)||0,amount_value:Number(m.amount_value)||0,remark:m.remark||"",project_vendor:s.project_vendor,sales_order_number:s.sales_order_number,project_item:s.project_item,line_number:Number(m.line_number)||1,contact_name:s.vendor_contacts?.contact_name||"",middle_manager_status:s.middle_manager_status,final_manager_status:s.final_manager_status,is_received:!!s.is_received,received_at:s.received_at,is_payment_completed:!!s.is_payment_completed,is_po_download:!!s.is_po_download,link:m.link,items:s.purchase_request_items||[],total_amount:s.purchase_request_items?.reduce((E,G)=>E+(Number(G.amount_value)||0),0)||0,purchase_status:s.purchase_status||"pending"}});i(g),c.purchases=g,c.lastFetch=x}catch(x){ie.error("발주 목록 로드 실패",x),ee.error("발주 목록을 불러올 수 없습니다.")}finally{$(!1)}},[v]);return n.useEffect(()=>{N()},[N]),{purchases:f,vendors:_,employees:v,loading:k,currentUserRoles:te,currentUserName:M,currentUserEmail:S,currentUserId:O,refreshPurchases:N}};function Be(f,i=500){const[_,P]=n.useState(f);return n.useEffect(()=>{const v=setTimeout(()=>{P(f)},i);return()=>{clearTimeout(v)}},[f,i]),_}const je=["정희웅"],u=new Map,ue=100,He=(f,i,_,P,v)=>{const T=he(),[k,$]=n.useState("pending"),[te,w]=n.useState(""),[M,Y]=n.useState(""),[S,z]=n.useState(""),[O,Z]=n.useState(""),[y,V]=n.useState(""),[N,I]=n.useState(""),[x,A]=n.useState(""),[h,L]=n.useState(""),C=new Date().getFullYear(),F=new Date(C,0,1).toISOString().split("T")[0],D=new Date().toISOString().split("T")[0],[o,g]=n.useState(F),[s,m]=n.useState(D),R=Be(te,300),E=i?.includes("app_admin");i?.includes("final_approver"),i?.includes("middle_manager");const G=i?.includes("purchase_manager"),Q=i?.includes("raw_material_manager")||i?.includes("consumable_manager")||i?.includes("purchase_manager"),W=n.useMemo(()=>!i||i.length===0?1:G?2:i.some(t=>["middle_manager","final_approver","app_admin","ceo"].includes(t))?3:1,[i,G]),X=n.useCallback(t=>{if(!_)return"all";if(t==="purchase")return Q||E?"all":_;switch(W){case 1:return t==="done"?"all":_;case 2:return t==="done"?"all":_;case 3:return"all";default:return _}},[_,W,Q,E]);n.useEffect(()=>{if(!_)return;const t=X(k);z(t)},[k,_,W,X]);const B=n.useMemo(()=>{try{const t=`visible_${f.length}_${i.join(",")}`;if(u.has(t))return u.get(t);let r;if(i.includes("purchase_manager")||i.includes("app_admin")?r=f:r=f.filter(a=>!je.includes(a.requester_name)),u.size>=ue){const a=u.keys().next().value;u.delete(a)}return u.set(t,r),r}catch(t){return console.error("필터링 중 오류:",t),u.clear(),i.includes("purchase_manager")||i.includes("app_admin")?f:f.filter(r=>!je.includes(r.requester_name))}},[f,i]),se=n.useMemo(()=>{const t=`date_${B.length}_${o}_${s}`;if(u.has(t))return u.get(t);const r=B.filter(a=>{const d=a.request_date?a.request_date.split("T")[0]:"",K=!o||d>=o,J=!s||d<=s;return K&&J});if(u.size>=ue){const a=u.keys().next().value;u.delete(a)}return u.set(t,r),r},[B,o,s]),H=n.useMemo(()=>{const t=`tab_${se.length}_${k}`;if(u.has(t))return u.get(t);const r=se.filter(a=>{let d=!1;switch(k){case"pending":return d=["pending","대기","",null].includes(a.final_manager_status),d;case"purchase":{const K=a.payment_category==="구매 요청",J=!a.is_payment_completed,le=(a.progress_type||"").includes("선진행"),pe=(a.progress_type||"").includes("일반"),_e=a.final_manager_status==="approved";return!K||!J?d=!1:d=le||pe&&_e,d}case"receipt":{const K=!a.is_received,J=(a.progress_type||"").includes("선진행"),le=a.final_manager_status==="approved";return d=K&&(J||le),d}case"done":return d=!0,d;default:return!0}});if(u.size>=ue){const a=u.keys().next().value;u.delete(a)}return u.set(t,r),r},[se,k]),re=n.useMemo(()=>{const t=`employee_${H.length}_${S}`;if(u.has(t))return u.get(t);let r;if(S&&S!=="all"&&S!=="전체"?r=H.filter(a=>a.requester_name===S):r=H,u.size>=ue){const a=u.keys().next().value;u.delete(a)}return u.set(t,r),r},[H,S]),de=n.useMemo(()=>M?re.filter(t=>t.vendor_name===M):re,[re,M]),ae=n.useMemo(()=>{let t=de;if(O){const r=O.trim().toLowerCase();t=t.filter(a=>a.purchase_order_number?.toLowerCase().includes(r))}if(y){const r=y.trim().toLowerCase();t=t.filter(a=>a.items&&a.items.length>0?a.items.some(d=>d.item_name?.toLowerCase().includes(r)):!1)}if(N){const r=N.trim().toLowerCase();t=t.filter(a=>a.items&&a.items.length>0?a.items.some(d=>d.specification?.toLowerCase().includes(r)):!1)}if(x&&x!=="all"&&(t=t.filter(r=>{switch(x){case"pending":return!r.final_manager_status||r.final_manager_status==="pending"||r.final_manager_status==="대기";case"approved":return r.final_manager_status==="approved";case"rejected":return r.final_manager_status==="rejected"||r.middle_manager_status==="rejected";default:return!0}})),h){const r=h.trim().toLowerCase();t=t.filter(a=>a.items&&a.items.length>0?a.items.some(d=>d.remark?.toLowerCase().includes(r)):!1)}return t},[de,O,y,N,x,h]),l=n.useMemo(()=>{if(!R)return ae;const t=R.trim().toLowerCase();return ae.filter(r=>r.purchase_order_number?.toLowerCase().includes(t)||r.vendor_name?.toLowerCase().includes(t)||r.requester_name?.toLowerCase().includes(t)||r.project_vendor?.toLowerCase().includes(t)?!0:r.items&&r.items.length>0?r.items.some(a=>a.item_name&&a.item_name.toLowerCase().includes(t)||a.specification&&a.specification.toLowerCase().includes(t)):!1)},[ae,R]),j=n.useMemo(()=>[...l].sort((t,r)=>{const a=t.request_date?new Date(t.request_date).getTime():0;return(r.request_date?new Date(r.request_date).getTime():0)-a}),[l]),Ce=n.useMemo(()=>{const r=B.filter(p=>{const b=p.request_date?p.request_date.split("T")[0]:"",q=!o||b>=o,oe=!s||b<=s;return q&&oe}),a=p=>new Set(p.map(b=>b.purchase_order_number)).size,d=p=>{if(p==="purchase")return Q||E?r:r.filter(q=>q.requester_name===_);const b=X(p);return b==="all"||b==="전체"?r:r.filter(q=>q.requester_name===b)},K=d("pending"),J=d("purchase"),le=d("receipt"),pe=d("done"),_e=K.filter(p=>["pending","대기","",null].includes(p.final_manager_status)),Fe=J.filter(p=>{const b=p.payment_category==="구매 요청",q=!p.is_payment_completed;if(!b||!q)return!1;const oe=(p.progress_type||"").includes("선진행"),Pe=(p.progress_type||"").includes("일반"),Te=p.final_manager_status==="approved";return oe||Pe&&Te}),De=le.filter(p=>{const b=!p.is_received,q=(p.progress_type||"").includes("선진행"),oe=p.final_manager_status==="approved";return b&&(q||oe)});return{pending:a(_e),purchase:a(Fe),receipt:a(De),done:a(pe)}},[B,o,s,W,_,X,Q,E]),me=n.useRef(!1);n.useEffect(()=>{me.current||(me.current=!0,(async()=>{const{data:{user:t}}=await T.auth.getUser();if(!t)return;const{data:r}=await T.from("user_preferences").select("period_start, period_end").eq("user_id",t.id).single();if(r){const a=r.period_start?new Date(r.period_start).toISOString().split("T")[0]:F,d=r.period_end?new Date(r.period_end).toISOString().split("T")[0]:D;g(a),m(d)}})())},[]);const ne=n.useRef();return n.useEffect(()=>{if(me.current)return ne.current&&clearTimeout(ne.current),ne.current=setTimeout(async()=>{const{data:{user:t}}=await T.auth.getUser();t&&(!o||!s||await T.from("user_preferences").upsert({user_id:t.id,period_start:o,period_end:s,updated_at:new Date().toISOString()}))},1e3),()=>{ne.current&&clearTimeout(ne.current)}},[o,s]),{activeTab:k,searchTerm:te,vendorFilter:M,dateFromFilter:o,dateToFilter:s,selectedEmployee:S,purchaseNumberFilter:O,itemNameFilter:y,specificationFilter:N,approvalStatusFilter:x,remarkFilter:h,setActiveTab:$,setSearchTerm:w,setVendorFilter:Y,setDateFromFilter:g,setDateToFilter:m,setSelectedEmployee:z,setPurchaseNumberFilter:Z,setItemNameFilter:V,setSpecificationFilter:I,setApprovalStatusFilter:A,setRemarkFilter:L,filteredPurchases:j,tabCounts:Ce}},Ke=n.lazy(()=>we(()=>import("./FastPurchaseTable-_xUFPmj7.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]))),Se=n.memo(()=>e.jsx("div",{className:"p-4 space-y-4",children:[...Array(5)].map((f,i)=>e.jsxs("div",{className:"flex space-x-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]},i))}));Se.displayName="TableSkeleton";const Ne=n.memo(({purchases:f,activeTab:i,currentUserRoles:_,onRefresh:P,onPaymentComplete:v,onReceiptComplete:T})=>e.jsx(n.Suspense,{fallback:e.jsx(Se,{}),children:e.jsx(Ke,{purchases:f,activeTab:i,currentUserRoles:_,onRefresh:P,onPaymentComplete:v,onReceiptComplete:T})}));Ne.displayName="LazyPurchaseTable";const Je=n.lazy(()=>we(()=>import("./PurchaseItemsModal-dK6KsBXU.js"),__vite__mapDeps([19,1,2,7,6,20,3,8,17,18,16]))),Ye=[{key:"pending",label:"승인대기"},{key:"purchase",label:"구매 현황"},{key:"receipt",label:"입고 현황"},{key:"done",label:"전체 항목"}];function ot({onEmailToggle:f,showEmailButton:i=!0}){const _=Ee(),P=ke(),v=he(),[T,k]=n.useState(null),[$,te]=n.useState({}),[w,M]=n.useState(null),[Y,S]=n.useState(!1),{purchases:z,vendors:O,employees:Z,loading:y,currentUserRoles:V,currentUserName:N,refreshPurchases:I}=ze(),x=V?.includes("app_admin"),{activeTab:A,searchTerm:h,vendorFilter:L,dateFromFilter:C,dateToFilter:F,selectedEmployee:D,purchaseNumberFilter:o,itemNameFilter:g,approvalStatusFilter:s,setActiveTab:m,setSearchTerm:R,setVendorFilter:E,setDateFromFilter:G,setDateToFilter:Q,setSelectedEmployee:W,setPurchaseNumberFilter:X,setItemNameFilter:B,setApprovalStatusFilter:se,filteredPurchases:H,tabCounts:re}=He(z,V,N);n.useEffect(()=>{new URLSearchParams(P.search).get("tab")==="purchase"&&m("purchase")},[P.search,m]);const de=async l=>{try{const{error:j}=await v.from("purchase_requests").update({is_received:!0,received_at:new Date().toISOString()}).eq("id",l);if(j)throw j;await v.from("purchase_request_items").update({is_received:!0,delivery_status:"received"}).eq("purchase_request_id",l),ee.success("입고완료 처리되었습니다."),await I()}catch{ee.error("처리 중 오류가 발생했습니다.")}},ae=async l=>{try{const{error:j}=await v.from("purchase_requests").update({is_payment_completed:!0,payment_completed_at:new Date().toISOString()}).eq("id",l);if(j)throw j;await v.from("purchase_request_items").update({is_payment_completed:!0}).eq("purchase_request_id",l),ee.success("구매완료 처리되었습니다."),await I()}catch{ee.error("처리 중 오류가 발생했습니다.")}};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"발주요청 관리"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"발주요청서를 관리하고 승인 처리를 할 수 있습니다"})]}),e.jsxs(Ie,{onClick:()=>_("/purchase/new"),className:"mt-4 sm:mt-0 bg-hansl-500 hover:bg-hansl-600",children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"새 발주요청 작성"]})]}),e.jsxs(ve,{className:"mb-4 border border-gray-200",children:[e.jsx(qe,{className:"bg-white border-b border-gray-200 py-3",children:e.jsxs(Me,{className:"flex items-center text-gray-900 text-sm font-medium",children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"검색 필터"]})}),e.jsx(be,{className:"py-3",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"시작일"}),e.jsx(ce,{type:"date",value:C,onChange:l=>G(l.target.value),className:"text-sm h-9"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"종료일"}),e.jsx(ce,{type:"date",value:F,onChange:l=>Q(l.target.value),className:"text-sm h-9"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"요청자"}),e.jsx(Le,{value:D||"all",onValueChange:l=>{W(l)},options:[{value:"all",label:"전체"},...Z.filter(l=>l.name&&l.name.trim()!=="").sort((l,j)=>(l.name||"").localeCompare(j.name||"")).map(l=>({value:l.name||"",label:`${l.name}${l.name===N?" (나)":""}`}))],placeholder:D==="all"?"전체":D||"선택",searchPlaceholder:"직원 이름 검색...",emptyText:"일치하는 직원이 없습니다",className:"text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"업체"}),e.jsxs(fe,{value:L||"all",onValueChange:l=>E(l==="all"?"":l),children:[e.jsx(ge,{className:"h-9 text-sm",children:e.jsx(xe,{placeholder:"전체"})}),e.jsxs(ye,{children:[e.jsx(U,{value:"all",children:"전체"}),O.map(l=>e.jsx(U,{value:l.vendor_name,children:l.vendor_name},l.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"발주번호"}),e.jsx(ce,{placeholder:"번호",value:o,onChange:l=>X(l.target.value),className:"text-sm h-9"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"품명"}),e.jsx(ce,{placeholder:"품명",value:g,onChange:l=>B(l.target.value),className:"text-sm h-9"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"승인상태"}),e.jsxs(fe,{value:s||"all",onValueChange:l=>se(l==="all"?"":l),children:[e.jsx(ge,{className:"h-9 text-sm",children:e.jsx(xe,{placeholder:"전체"})}),e.jsxs(ye,{children:[e.jsx(U,{value:"all",children:"전체"}),e.jsx(U,{value:"pending",children:"대기"}),e.jsx(U,{value:"approved",children:"승인"}),e.jsx(U,{value:"rejected",children:"반려"})]})]})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"통합검색"}),e.jsxs("div",{className:"relative",children:[e.jsx(Re,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 w-3 h-3 text-gray-400"}),e.jsx(ce,{placeholder:"검색...",value:h,onChange:l=>R(l.target.value),className:"pl-7 text-sm h-9"})]})]})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-1 space-y-1 sm:space-y-0 bg-gray-50 p-1 rounded-lg border border-gray-200",children:Ye.map(l=>e.jsxs("button",{onClick:()=>m(l.key),className:`flex-1 flex items-center justify-center space-x-2 py-2.5 px-3 sm:px-4 rounded-md text-xs sm:text-sm font-medium transition-colors ${A===l.key?"text-hansl-600 bg-white shadow-sm border border-gray-200":"text-gray-600 bg-transparent hover:text-gray-900 hover:bg-white/50"}`,children:[e.jsx("span",{className:"whitespace-nowrap",children:l.label}),e.jsx(Ae,{variant:"secondary",className:`text-[10px] sm:text-xs ${A===l.key?"bg-hansl-50 text-hansl-700":"bg-gray-100 text-gray-600"}`,children:re[l.key]})]},l.key))}),e.jsx(ve,{className:"overflow-hidden border border-gray-200",children:e.jsx(be,{className:"p-0",children:y?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-hansl-500 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"로딩 중..."})]}):H.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx($e,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"발주요청서가 없습니다"}),e.jsx("p",{className:"text-gray-600",children:"새로운 발주요청서를 작성해보세요."})]}):e.jsx(Ne,{purchases:H,activeTab:A,currentUserRoles:V,onRefresh:I,onPaymentComplete:ae,onReceiptComplete:de})})})]}),w&&e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}),children:e.jsx(Je,{isOpen:Y,onClose:()=>{S(!1),M(null)},purchase:{...w,vendor_name:w.vendor_name||"",project_vendor:w.project_vendor||"",sales_order_number:w.sales_order_number||"",project_item:w.project_item||""},isAdmin:x||!1,onUpdate:I})})]})}export{ot as default};
//# sourceMappingURL=PurchaseListMain-DOM_rKwl.js.map
