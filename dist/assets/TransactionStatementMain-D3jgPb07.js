import{e,r as t,c as a,j as r,X as s,B as n,a6 as i,h as c}from"./index-B0aFbCDa.js";import{S as l,C as d,c as o,T as m}from"./card-rzhbDXoW.js";import{D as u,a as x,b as h,c as p,d as b,P as _,I as g}from"./dialog-B9JpRg3-.js";import{t as y}from"./index-DqxGfJS2.js";import{S as f,a as j,b as N,c as w,d as v}from"./select-DVOVlBLJ.js";import{I as C,t as S,n as k,C as M}from"./transactionStatementService-CwTePWPx.js";import{U as q,Z as $,a as E}from"./zoom-out-sqeCeIq3.js";import{L as O}from"./loader-circle-Yppxpi33.js";import{D as I}from"./download-DE4_RAxd.js";import{C as z}from"./chevron-down-H143nN2r.js";import{C as L}from"./check-BFmJFwUt.js";import{C as R}from"./clock-CiwhqvnK.js";
/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=e("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),F=e("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),U=e("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),P=e("sliders-horizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),T=e("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);function W({isOpen:e,onClose:i,onSuccess:c}){const[l,d]=t.useState(null),[o,m]=t.useState(null),[_,g]=t.useState(!1),[f,j]=t.useState(""),N=t.useRef(null),w=a();t.useState(()=>{e&&(async()=>{try{const{data:{user:e}}=await w.auth.getUser();if(e?.email){const{data:t}=await w.from("employees").select("name").eq("email",e.email).single();t?.name&&j(t.name)}}catch(e){}})()});const v=e=>{if(!e.type.startsWith("image/"))return void y.error("ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");if(e.size>10485760)return void y.error("íŒŒì¼ í¬ê¸°ëŠ” 10MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.");d(e);const t=new FileReader;t.onloadend=()=>{m(t.result)},t.readAsDataURL(e)},k=()=>{_||(d(null),m(null),N.current&&(N.current.value=""),i())};return r.jsx(u,{open:e,onOpenChange:k,children:r.jsxs(x,{className:"sm:max-w-[480px] business-radius-modal",children:[r.jsx(h,{className:"border-b border-gray-100 pb-3",children:r.jsxs(p,{className:"flex items-center gap-2 text-[13px] font-bold text-gray-900",children:[r.jsx(q,{className:"w-4 h-4 text-hansl-600"}),"ê±°ë˜ëª…ì„¸ì„œ ì—…ë¡œë“œ"]})}),r.jsxs("div",{className:"py-4",children:[r.jsxs("div",{className:`\n              border-2 border-dashed business-radius-card p-6 text-center cursor-pointer transition-colors\n              ${o?"border-hansl-300 bg-hansl-50":"border-gray-200 hover:border-hansl-300 hover:bg-gray-50"}\n            `,onDrop:e=>{e.preventDefault(),e.stopPropagation();const t=e.dataTransfer.files[0];t&&v(t)},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onClick:()=>{N.current?.click()},children:[r.jsx("input",{ref:N,type:"file",accept:"image/*",onChange:e=>{const t=e.target.files?.[0];t&&v(t)},className:"hidden"}),o?r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:o,alt:"ë¯¸ë¦¬ë³´ê¸°",className:"max-h-52 mx-auto business-radius-card shadow-sm"}),r.jsx("button",{className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",onClick:e=>{e.stopPropagation(),d(null),m(null),N.current&&(N.current.value="")},children:r.jsx(s,{className:"w-3.5 h-3.5"})}),r.jsx("p",{className:"mt-3 text-[11px] text-gray-600 truncate px-4",children:l?.name})]}):r.jsxs(r.Fragment,{children:[r.jsx(C,{className:"w-10 h-10 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-[11px] text-gray-600 mb-1",children:"ê±°ë˜ëª…ì„¸ì„œ ì´ë¯¸ì§€ë¥¼ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì„ íƒí•˜ì„¸ìš”"}),r.jsx("p",{className:"text-[10px] text-gray-400",children:"ì§€ì› í˜•ì‹: JPG, PNG, GIF, WEBP (ìµœëŒ€ 10MB)"})]})]}),r.jsx("div",{className:"mt-3 p-2.5 bg-blue-50 business-radius-card border border-blue-100",children:r.jsx("p",{className:"text-[10px] text-blue-700 leading-relaxed",children:"ğŸ’¡ ê±°ë˜ëª…ì„¸ì„œë¥¼ ì´¬ì˜í•˜ê±°ë‚˜ ìŠ¤ìº”í•œ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ì„¸ìš”. ì—…ë¡œë“œ í›„ OCRë¡œ í’ˆëª©, ìˆ˜ëŸ‰, ê¸ˆì•¡, ë°œì£¼ë²ˆí˜¸ ë“±ì„ ìë™ìœ¼ë¡œ ì¶”ì¶œí•©ë‹ˆë‹¤."})})]}),r.jsxs(b,{className:"border-t border-gray-100 pt-3 gap-2",children:[r.jsx(n,{variant:"outline",onClick:k,disabled:_,className:"button-base h-8 text-[11px]",children:"ì·¨ì†Œ"}),r.jsx(n,{onClick:async()=>{if(l)try{g(!0);const e=await S.uploadStatement(l,f||"ì•Œ ìˆ˜ ì—†ìŒ");e.success&&e.data?(y.success("ì—…ë¡œë“œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."),c(e.data.statementId,e.data.imageUrl),k()):y.error(e.error||"ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}catch(e){y.error("ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{g(!1)}else y.error("íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.")},disabled:!l||_,className:"button-base h-8 text-[11px] bg-hansl-600 hover:bg-hansl-700 text-white",children:_?r.jsxs(r.Fragment,{children:[r.jsx(O,{className:"w-3.5 h-3.5 mr-1.5 animate-spin"}),"ì—…ë¡œë“œ ì¤‘..."]}):r.jsxs(r.Fragment,{children:[r.jsx(q,{className:"w-3.5 h-3.5 mr-1.5"}),"ì—…ë¡œë“œ"]})})]})]})})}function B({isOpen:e,imageUrl:a,onClose:n}){const[i,c]=t.useState(1),[l,d]=t.useState(0),o=()=>{c(1),d(0),n()};return a?r.jsx(u,{open:e,onOpenChange:o,children:r.jsxs(x,{className:"max-w-[90vw] max-h-[90vh] p-0 bg-black/95 border-none",children:[r.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 flex items-center justify-between px-4 py-3 bg-gradient-to-b from-black/80 to-transparent",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("button",{onClick:()=>{c(e=>Math.max(e-.25,.5))},disabled:i<=.5,className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white disabled:opacity-40 transition-colors",children:r.jsx($,{className:"w-4 h-4"})}),r.jsxs("span",{className:"text-[11px] text-white min-w-[50px] text-center font-medium",children:[Math.round(100*i),"%"]}),r.jsx("button",{onClick:()=>{c(e=>Math.min(e+.25,3))},disabled:i>=3,className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white disabled:opacity-40 transition-colors",children:r.jsx(E,{className:"w-4 h-4"})}),r.jsx("div",{className:"w-px h-5 bg-white/30 mx-1.5"}),r.jsx("button",{onClick:()=>{d(e=>(e+90)%360)},className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-colors",children:r.jsx(U,{className:"w-4 h-4"})}),r.jsx("button",{onClick:async()=>{try{const e=await fetch(a),t=await e.blob(),r=window.URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download=`ê±°ë˜ëª…ì„¸ì„œ_${(new Date).toISOString().split("T")[0]}.jpg`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r),y.success("ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(e){y.error("ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-colors",children:r.jsx(I,{className:"w-4 h-4"})})]}),r.jsx("button",{onClick:o,className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-colors",children:r.jsx(s,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"flex items-center justify-center w-full h-[80vh] overflow-auto p-4 pt-16",children:r.jsx("img",{src:a,alt:"ê±°ë˜ëª…ì„¸ì„œ",className:"max-w-full max-h-full object-contain transition-transform duration-200",style:{transform:`scale(${i}) rotate(${l}deg)`}})})]})}):null}function A(e,t){const a=e?.toLowerCase().replace(/\s+/g,"")||"",r=t?.toLowerCase().replace(/\s+/g,"")||"";if(!a||!r)return 0;if(a===r)return 100;if(a.includes(r)||r.includes(a))return 80;const s=function(e,t){const a=e.toLowerCase().replace(/\s+/g,""),r=t.toLowerCase().replace(/\s+/g,"");if(a===r)return 0;if(0===a.length)return r.length;if(0===r.length)return a.length;const s=[];for(let n=0;n<=a.length;n++)s[n]=[n];for(let n=0;n<=r.length;n++)s[0][n]=n;for(let n=1;n<=a.length;n++)for(let e=1;e<=r.length;e++){const t=a[n-1]===r[e-1]?0:1;s[n][e]=Math.min(s[n-1][e]+1,s[n][e-1]+1,s[n-1][e-1]+t)}return s[a.length][r.length]}(a,r),n=Math.max(a.length,r.length),i=(n-s)/n*100,c=e?.split(/\s+/)||[],l=t?.split(/\s+/)||[],d=c.filter(e=>l.some(t=>t.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(t.toLowerCase()))).length/Math.max(c.length,l.length)*30;return Math.min(100,i+d)}function H(e,t,a){const r=A(e,t),s=a?A(e,a):0;return Math.max(r,s)}function K({isOpen:e,statement:s,onClose:i,onConfirm:c}){const[l,d]=t.useState(!0),[o,m]=t.useState(!1),[_,g]=t.useState(null),[f,j]=t.useState(!1),[N,w]=t.useState(""),[v,q]=t.useState(""),[$,E]=t.useState(new Map),[I,R]=t.useState(new Map),[F,U]=t.useState(new Set),[P,W]=t.useState(new Map),[A,K]=t.useState(null),[G,J]=t.useState(null),V=a(),Z=t.useMemo(()=>{if(!_?.items.length)return!0;const e=_.items.map(e=>e.extracted_po_number?k(e.extracted_po_number):null).filter(Boolean);return 0===e.length||e.every(t=>t===e[0])},[_]),Q=t.useMemo(()=>{if(!_?.items.length)return null;const e=_.items.find(e=>e.extracted_po_number)?.extracted_po_number;return e?k(e):null},[_]),X=t.useCallback(async()=>{try{d(!0);const{data:{user:e}}=await V.auth.getUser();if(e?.email){const{data:t}=await V.from("employees").select("name").eq("email",e.email).single();t?.name&&w(t.name)}const t=await S.getStatementWithItems(s.id);if(t.success&&t.data){g(t.data);const e=new Map,a=new Map;t.data.items.forEach(t=>{let r="";if(t.extracted_po_number&&(r=k(t.extracted_po_number),e.set(t.id,r)),t.matched_purchase&&t.matched_item_id)a.set(t.id,{purchase_id:t.matched_purchase_id,item_id:t.matched_item_id,purchase_order_number:t.matched_purchase.purchase_order_number||"",sales_order_number:t.matched_purchase.sales_order_number,item_name:t.matched_item_name||"",quantity:t.matched_item_quantity,unit_price:t.matched_item_unit_price,amount:t.matched_item_amount,vendor_name:t.matched_purchase.vendor_name});else{let s=null,n=-1;if((t.match_candidates?.filter(e=>e.purchase_order_number===r||e.sales_order_number===r)||[]).forEach(e=>{const a=H(t.extracted_item_name||"",e.item_name,e.specification);a>n&&(n=a,s={purchase_id:e.purchase_id,item_id:e.item_id,purchase_order_number:e.purchase_order_number||"",sales_order_number:e.sales_order_number,item_name:e.item_name,specification:e.specification,quantity:e.quantity,unit_price:e.unit_price,amount:e.amount,vendor_name:e.vendor_name})}),!s&&t.match_candidates&&t.match_candidates.length>0&&(t.match_candidates.forEach(e=>{const a=H(t.extracted_item_name||"",e.item_name,e.specification);a>n&&a>=30&&(n=a,s={purchase_id:e.purchase_id,item_id:e.item_id,purchase_order_number:e.purchase_order_number||"",sales_order_number:e.sales_order_number,item_name:e.item_name,specification:e.specification,quantity:e.quantity,unit_price:e.unit_price,amount:e.amount,vendor_name:e.vendor_name})}),s)){const a=s.purchase_order_number||s.sales_order_number||"";a&&e.set(t.id,a)}a.set(t.id,s)}}),E(e),R(a);const r=t.data.items.find(e=>e.extracted_po_number)?.extracted_po_number;r&&q(k(r));const s=t.data.items.map(e=>e.extracted_po_number?k(e.extracted_po_number):null).filter(Boolean);if(0===s.length||s.every(e=>e===s[0])){const e=await S.findBestMatchingPurchaseOrderSet(t.data.items,r,t.data.vendor_name);if(e.success&&e.data&&(J(e.data),e.data.bestMatch)){const r=e.data.bestMatch.purchase_order_number||e.data.bestMatch.sales_order_number||"";q(r);const s=new Map;e.data.bestMatch.itemMatches.forEach(e=>{for(const a of t.data.items){const t=a.match_candidates?.find(t=>t.item_id===e.systemItemId);if(t){s.set(e.ocrItemId,{purchase_id:t.purchase_id,item_id:t.item_id,purchase_order_number:t.purchase_order_number||"",sales_order_number:t.sales_order_number,item_name:t.item_name,specification:t.specification,quantity:t.quantity,unit_price:t.unit_price,amount:t.amount,vendor_name:t.vendor_name});break}}});const n=new Map(a);s.forEach((e,t)=>{e&&n.set(t,e)}),R(n);const i=e.data.bestMatch.confidence,c="high"===i?"ë†’ìŒ":"medium"===i?"ë³´í†µ":"ë‚®ìŒ";y.success(`ì„¸íŠ¸ ë§¤ì¹­ ì™„ë£Œ! ${e.data.bestMatch.matchedItemCount}/${t.data.items.length}ê°œ í’ˆëª© ë§¤ì¹­ (ì‹ ë¢°ë„: ${c})`)}}}else y.error(t.error||"ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}catch(e){y.error("ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{d(!1)}},[s.id,V]);t.useEffect(()=>{e&&s&&X()},[e,s,X]),t.useEffect(()=>{if(!_||!e)return;if(l)return;const t=new Map,a=new Map($);let r=!1,s=!1;_.items.forEach(e=>{const n=I.get(e.id),i=Z?v:$.get(e.id)||(e.extracted_po_number?k(e.extracted_po_number):"");if(n&&(n.purchase_order_number===i||n.sales_order_number===i))return void t.set(e.id,n);let c=null,l=-1;if((i&&e.match_candidates?.filter(e=>e.purchase_order_number===i||e.sales_order_number===i)||[]).forEach(t=>{const a=H(e.extracted_item_name||"",t.item_name,t.specification);a>l&&(l=a,c={purchase_id:t.purchase_id,item_id:t.item_id,purchase_order_number:t.purchase_order_number||"",sales_order_number:t.sales_order_number,item_name:t.item_name,specification:t.specification,quantity:t.quantity,unit_price:t.unit_price,amount:t.amount,vendor_name:t.vendor_name})}),!c&&e.match_candidates&&e.match_candidates.forEach(t=>{const a=H(e.extracted_item_name||"",t.item_name,t.specification);a>l&&a>=30&&(l=a,c={purchase_id:t.purchase_id,item_id:t.item_id,purchase_order_number:t.purchase_order_number||"",sales_order_number:t.sales_order_number,item_name:t.item_name,specification:t.specification,quantity:t.quantity,unit_price:t.unit_price,amount:t.amount,vendor_name:t.vendor_name})}),t.set(e.id,c),c){const t=c.purchase_order_number||c.sales_order_number||"",r=$.get(e.id)||"";t&&t!==r&&(a.set(e.id,t),s=!0)}n!==c&&(r=!0)}),r&&R(t),s&&E(a)},[v,Z,_,e,l]);const Y=t.useMemo(()=>{if(!_)return[];const e=_.items.find(e=>e.extracted_po_number)?.extracted_po_number||"",t=(e?k(e).toUpperCase():"").startsWith("HS"),a=new Map;G?.candidates&&G.candidates.forEach(e=>{const r=t&&e.sales_order_number||e.purchase_order_number;r&&a.set(r,{poNumber:e.purchase_order_number||"",salesOrderNumber:e.sales_order_number,itemCount:e.matchedItemCount,items:[],vendorName:e.vendor_name,setMatchScore:e.matchScore,matchedItemCount:e.matchedItemCount})}),_.items.forEach(e=>{e.match_candidates?.forEach(e=>{const r=t?e.sales_order_number||"":e.purchase_order_number||"";if(r&&!a.has(r)&&a.set(r,{poNumber:e.purchase_order_number||"",salesOrderNumber:e.sales_order_number,itemCount:0,items:[],vendorName:e.vendor_name}),r&&a.has(r)){const t=a.get(r);t.items.push(e),t.setMatchScore||(t.itemCount=t.items.length)}})});const r=Array.from(a.values());return r.sort((e,t)=>e.setMatchScore&&t.setMatchScore?t.setMatchScore-e.setMatchScore:e.setMatchScore?-1:t.setMatchScore?1:t.itemCount-e.itemCount),r},[_,G]),ee=t.useCallback(e=>{if(!_||!e)return[];const t=[];return _.items.forEach(a=>{a.match_candidates?.forEach(a=>{a.purchase_order_number!==e&&a.sales_order_number!==e||t.push({purchase_id:a.purchase_id,item_id:a.item_id,purchase_order_number:a.purchase_order_number||"",sales_order_number:a.sales_order_number,item_name:a.item_name,specification:a.specification,quantity:a.quantity,unit_price:a.unit_price,amount:a.amount,vendor_name:a.vendor_name})})}),t.filter((e,t,a)=>t===a.findIndex(t=>t.item_id===e.item_id))},[_]),te=t.useCallback(e=>{if(!_)return[];const t=_.items.find(t=>t.id===e);if(!t)return[];const a=new Set,r=(t.extracted_po_number?k(t.extracted_po_number).toUpperCase():"").startsWith("HS");return t.match_candidates?.forEach(e=>{r?e.sales_order_number&&a.add(e.sales_order_number):e.purchase_order_number&&a.add(e.purchase_order_number)}),Array.from(a)},[_]),ae=(e,t,a)=>{W(r=>{const s=new Map(r),n=s.get(e)||{};return s.set(e,{...n,[t]:a}),s})},re=(e,t)=>{const a=P.get(e.id);if(a&&void 0!==a[t])return a[t];switch(t){case"item_name":return e.extracted_item_name||"";case"quantity":return e.extracted_quantity??"";case"unit_price":return e.extracted_unit_price??"";case"amount":return e.extracted_amount??"";case"po_number":return e.extracted_po_number?k(e.extracted_po_number):"";default:return""}},se=(e,t)=>{const a=P.get(e.id);if(!a||void 0===a[t])return!1;switch(t){case"item_name":return a.item_name!==e.extracted_item_name;case"quantity":return a.quantity!==e.extracted_quantity;case"unit_price":return a.unit_price!==e.extracted_unit_price;case"amount":return a.amount!==e.extracted_amount;case"po_number":{const t=e.extracted_po_number?k(e.extracted_po_number):"";return a.po_number!==t}default:return!1}},ne=(e,t)=>{R(a=>{const r=new Map(a);return r.set(e,t),r}),U(t=>{const a=new Set(t);return a.delete(`item-${e}`),a})},ie=e=>null==e?"-":e.toLocaleString("ko-KR"),ce=e=>{const t=(e=>{const t=I.get(e.id);let a=t||null,r=!1;if(!a){const t=Z?v:$.get(e.id)||(e.extracted_po_number?k(e.extracted_po_number):"");if(t){const s=ee(t);r=s.length>0;let n=0;s.forEach(t=>{const r=H(e.extracted_item_name||"",t.item_name,t.specification);r>n&&(n=r,a=t)})}}if(!a)return{ocrItemName:e.extracted_item_name||"-",systemItemName:"-",systemSpec:"-",similarity:0,status:"unmatched",reasons:["ì‹œìŠ¤í…œì—ì„œ ë§¤ì¹­í•  ë°œì£¼ í’ˆëª©ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤."]};const s=H(e.extracted_item_name||"",a.item_name||"",a.specification);let n="unmatched";s>=80?n="high":s>=50?n="med":(s>=30||r||t)&&(n="low");const i=[];s>=80?i.push(`âœ… í’ˆëª©ëª…/ê·œê²© ìœ ì‚¬ë„ ${s.toFixed(0)}% (ë†’ìŒ)`):s>=50?i.push(`âš ï¸ í’ˆëª©ëª…/ê·œê²© ìœ ì‚¬ë„ ${s.toFixed(0)}% (ë³´í†µ)`):s>=30?i.push(`âš ï¸ í’ˆëª©ëª…/ê·œê²© ìœ ì‚¬ë„ ${s.toFixed(0)}% (ë‚®ìŒ)`):i.push(`âŒ í’ˆëª©ëª…/ê·œê²© ìœ ì‚¬ë„ ${s.toFixed(0)}% (ë§¤ìš° ë‚®ìŒ)`);const c=(e.extracted_item_name||"").toLowerCase().replace(/\s+/g,""),l=(a.item_name||"").toLowerCase().replace(/\s+/g,""),d=(a.specification||"").toLowerCase().replace(/\s+/g,""),o=d&&(c===d||c.includes(d)||d.includes(c)),m=c===l||c.includes(l)||l.includes(c);return s>=80?m&&o?i.push("âœ… í’ˆëª©ëª…ê³¼ ê·œê²© ëª¨ë‘ ì¼ì¹˜"):o?i.push("âœ… ê·œê²©ìœ¼ë¡œ ë§¤ì¹­ë¨"):m?i.push("âœ… í’ˆëª©ëª…ìœ¼ë¡œ ë§¤ì¹­ë¨"):i.push("âœ… ë¬¸ìì—´ ìœ ì‚¬ë„ë¡œ ë§¤ì¹­ë¨"):s>=50?o?i.push("âš ï¸ ê·œê²© ë¶€ë¶„ ì¼ì¹˜"):m?i.push("âš ï¸ í’ˆëª©ëª… ë¶€ë¶„ ì¼ì¹˜"):i.push("âš ï¸ ë¶€ë¶„ì ìœ¼ë¡œ ìœ ì‚¬"):i.push("âŒ í’ˆëª©ëª…/ê·œê²© ë¶ˆì¼ì¹˜ - í•œê¸€/ì˜ì–´ ì°¨ì´ ë˜ëŠ” ë‹¤ë¥¸ í’ˆëª©ì¼ ìˆ˜ ìˆìŒ"),i.push(`ğŸ“¦ ë°œì£¼ë²ˆí˜¸: ${a.purchase_order_number||a.sales_order_number||"-"}`),a.specification&&i.push(`ğŸ“‹ ì‹œìŠ¤í…œ ê·œê²©: ${a.specification}`),{ocrItemName:e.extracted_item_name||"-",systemItemName:a.item_name||"-",systemSpec:a.specification||"-",similarity:s,status:n,reasons:i}})(e);K({isOpen:!0,ocrItemId:e.id,...t})},le=(e,t)=>{const a=t?()=>ce(t):void 0,s=t?"cursor-pointer hover:opacity-80 transition-opacity":"";switch(e){case"high":return r.jsxs("span",{className:`badge-stats bg-green-500 text-white ${s}`,onClick:a,title:"í´ë¦­í•˜ì—¬ ìƒì„¸ ë³´ê¸°",children:[r.jsx(L,{className:"w-3 h-3"}),"ë†’ìŒ"]});case"med":return r.jsx("span",{className:`badge-stats bg-yellow-500 text-white ${s}`,onClick:a,title:"í´ë¦­í•˜ì—¬ ìƒì„¸ ë³´ê¸°",children:"ë³´í†µ"});case"low":return r.jsx("span",{className:`badge-stats bg-orange-500 text-white ${s}`,onClick:a,title:"í´ë¦­í•˜ì—¬ ìƒì„¸ ë³´ê¸°",children:"ë‚®ìŒ"});case"unmatched":return r.jsx("span",{className:`badge-stats bg-gray-500 text-white ${s}`,onClick:a,title:"í´ë¦­í•˜ì—¬ ìƒì„¸ ë³´ê¸°",children:"ë¯¸ë§¤ì¹­"})}},de=e=>{U(t=>{const a=new Set(t);return a.has(e)?a.delete(e):(a.clear(),a.add(e)),a})};return s?r.jsxs(r.Fragment,{children:[r.jsx(u,{open:e,onOpenChange:i,children:r.jsxs(x,{className:"max-w-[95vw] md:max-w-[1200px] max-h-[90vh] overflow-hidden flex flex-col business-radius-modal",showCloseButton:!1,children:[r.jsx(h,{className:"border-b border-gray-100 pb-3",children:r.jsxs(p,{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 modal-title",children:[r.jsx(M,{className:"w-4 h-4 text-hansl-600"}),"ê±°ë˜ëª…ì„¸ì„œ í™•ì¸ ë° í™•ì •"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{if(!_)return;const e=new Map;let t=0;_.items.forEach(a=>{const r=Z?v:$.get(a.id)||(a.extracted_po_number?k(a.extracted_po_number):"");let s=null,n=-1;if((r?a.match_candidates?.filter(e=>e.purchase_order_number===r||e.sales_order_number===r)||[]:a.match_candidates||[]).forEach(e=>{const t=H(a.extracted_item_name||"",e.item_name,e.specification);t>n&&(n=t,s={purchase_id:e.purchase_id,item_id:e.item_id,purchase_order_number:e.purchase_order_number||"",sales_order_number:e.sales_order_number,item_name:e.item_name,specification:e.specification,quantity:e.quantity,unit_price:e.unit_price,amount:e.amount,vendor_name:e.vendor_name})}),!s&&r){ee(r).forEach(e=>{const t=H(a.extracted_item_name||"",e.item_name,e.specification);t>n&&(n=t,s=e)})}s||a.match_candidates?.forEach(e=>{const t=H(a.extracted_item_name||"",e.item_name,e.specification);t>n&&t>=30&&(n=t,s={purchase_id:e.purchase_id,item_id:e.item_id,purchase_order_number:e.purchase_order_number||"",sales_order_number:e.sales_order_number,item_name:e.item_name,specification:e.specification,quantity:e.quantity,unit_price:e.unit_price,amount:e.amount,vendor_name:e.vendor_name})}),s&&t++,e.set(a.id,s)}),R(e),y.success(`ìë™ ë§¤ì¹­ ì™„ë£Œ: ${t}/${_.items.length}ê±´`)},className:"button-base h-7 text-[10px] border-blue-300 text-blue-600 hover:bg-blue-50",children:[r.jsx(T,{className:"w-3.5 h-3.5 mr-1"}),"ìë™ ë§¤ì¹­"]}),r.jsxs(n,{variant:"outline",size:"sm",onClick:()=>j(!0),className:"button-base h-7 text-[10px]",children:[r.jsx(C,{className:"w-3.5 h-3.5 mr-1"}),"ì›ë³¸ ë³´ê¸°"]})]})]})}),l?r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsx(O,{className:"w-6 h-6 animate-spin text-hansl-600"}),r.jsx("span",{className:"ml-3 modal-subtitle",children:"ë¡œë”© ì¤‘..."})]}):_?r.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col py-3",children:[r.jsxs("div",{className:"flex items-center gap-6 p-3 bg-gray-50 business-radius-card mb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"modal-label",children:"ê±°ë˜ì²˜"}),r.jsx("p",{className:"modal-value",children:_.vendor_name||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"modal-label",children:"ê±°ë˜ì¼"}),r.jsx("p",{className:"modal-value",children:_.statement_date?new Date(_.statement_date).toLocaleDateString("ko-KR"):"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"modal-label",children:"í•©ê³„ê¸ˆì•¡"}),r.jsxs("p",{className:"modal-value-large",children:[ie(_.grand_total),"ì›"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"modal-label",children:"í’ˆëª© ìˆ˜"}),r.jsxs("p",{className:"modal-value",children:[_.items.length,"ê±´"]})]})]}),r.jsx("div",{className:"flex-1 overflow-auto border border-gray-200 business-radius-card",children:r.jsxs("table",{className:"modal-value table-auto min-w-full",children:[r.jsxs("thead",{className:"bg-gray-100 sticky top-0 z-10",children:[r.jsxs("tr",{children:[r.jsx("th",{colSpan:Z?4:5,className:"border-b border-r-2 border-gray-300 p-2 text-left w-[45%]",children:r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("span",{className:"modal-section-title text-gray-700",children:"ğŸ“‹ ì‹œìŠ¤í…œ ë°œì£¼í’ˆëª©"}),Z&&G?.bestMatch&&r.jsxs("span",{className:"text-[9px] px-1.5 py-0.5 rounded font-medium "+("high"===G.bestMatch.confidence?"bg-green-100 text-green-700":"medium"===G.bestMatch.confidence?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:["ì„¸íŠ¸ ë§¤ì¹­ ",G.bestMatch.matchScore,"% (",G.bestMatch.matchedItemCount,"/",G.bestMatch.totalItemCount,")"]}),Z&&Y.length>0&&r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>de("global-po"),className:"inline-flex items-center gap-1 px-2 py-1 text-[10px] font-medium bg-white border border-blue-300 rounded-md hover:bg-blue-50 text-blue-700",children:[v||"ë°œì£¼ë²ˆí˜¸ ì„ íƒ",r.jsx(z,{className:"w-3 h-3"})]}),F.has("global-po")&&r.jsx("div",{className:"absolute left-0 top-full mt-1 z-30 bg-white border border-gray-200 rounded-md shadow-lg min-w-[240px] max-h-[250px] overflow-auto",children:Y.map((e,t)=>{const a=e.poNumber||e.salesOrderNumber||"",s=v===a,n=G?.bestMatch?.purchase_order_number===e.poNumber||G?.bestMatch?.sales_order_number===e.salesOrderNumber;return r.jsxs("div",{onClick:()=>{(e=>{q(e);const t=ee(e);if(_){const e=new Map;_.items.forEach(a=>{let r=null,s=0;t.forEach(e=>{const t=H(a.extracted_item_name||"",e.item_name,e.specification);t>s&&t>=30&&(s=t,r=e)}),e.set(a.id,r)}),R(e)}})(a),de("global-po")},className:`p-2 cursor-pointer border-b border-gray-100 last:border-0 ${s?"bg-blue-50":"hover:bg-gray-100"} ${n?"ring-1 ring-green-400":""}`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"modal-label text-gray-900",children:a}),void 0!==e.setMatchScore&&r.jsxs("span",{className:"text-[9px] px-1.5 py-0.5 rounded "+(e.setMatchScore>=80?"bg-green-100 text-green-700":e.setMatchScore>=50?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"),children:[e.setMatchScore,"%"]})]}),r.jsxs("p",{className:"text-[9px] text-gray-500",children:[void 0!==e.matchedItemCount?`${e.matchedItemCount}/${_?.items.length||0}ê°œ ë§¤ì¹­`:`${e.itemCount}ê°œ í’ˆëª©`," Â· ",e.vendorName||"ê±°ë˜ì²˜ ë¯¸ìƒ"]}),n&&r.jsx("p",{className:"text-[8px] text-green-600 font-medium mt-0.5",children:"âœ… ì„¸íŠ¸ ë§¤ì¹­ ì¶”ì²œ"})]},t)})})]})]})}),r.jsx("th",{className:"border-b border-r-2 border-gray-300 p-2 text-center bg-blue-50 w-[10%]",children:r.jsx("span",{className:"modal-section-title text-blue-700",children:"ğŸ”— ë§¤ì¹­ í›„ë³´"})}),r.jsx("th",{colSpan:Z?4:5,className:"border-b border-gray-200 p-2 text-left w-[45%]",children:r.jsxs("span",{className:"modal-section-title text-gray-700",children:["ğŸ“„ OCR ì¶”ì¶œ í’ˆëª©",Z&&Q&&r.jsx("span",{className:"ml-2 px-2 py-0.5 bg-blue-100 text-blue-700 text-[10px] font-medium rounded",children:Q})]})})]}),r.jsxs("tr",{className:"modal-label",children:[!Z&&r.jsx("th",{className:"border-b border-r border-gray-100 p-1 text-left whitespace-nowrap modal-label",children:"ë°œì£¼/ìˆ˜ì£¼ë²ˆí˜¸"}),r.jsx("th",{className:"border-b border-r border-gray-100 p-2 text-left modal-label",children:"í’ˆëª©ëª…"}),r.jsx("th",{className:"border-b border-r border-gray-100 p-2 text-right modal-label",children:"ìˆ˜ëŸ‰"}),r.jsx("th",{className:"border-b border-r border-gray-100 p-2 text-right modal-label",children:"ë‹¨ê°€"}),r.jsx("th",{className:"border-b border-r-2 border-gray-300 p-2 text-right modal-label",children:"í•©ê³„"}),r.jsx("th",{className:"border-b border-r-2 border-gray-300 p-2 text-center bg-blue-50"}),r.jsx("th",{className:"border-b border-r border-gray-100 p-2 text-left whitespace-nowrap modal-label",children:"í’ˆëª©ëª…"}),r.jsx("th",{className:"border-b border-r border-gray-100 p-2 text-right whitespace-nowrap w-16 modal-label",children:"ìˆ˜ëŸ‰"}),r.jsx("th",{className:"border-b border-r border-gray-100 p-2 text-right whitespace-nowrap w-20 modal-label",children:"ë‹¨ê°€"}),r.jsx("th",{className:"border-b p-2 text-right whitespace-nowrap w-24 modal-label "+(Z?"":"border-r border-gray-100"),children:"í•©ê³„"}),!Z&&r.jsx("th",{className:"border-b p-1 text-left whitespace-nowrap modal-label",children:"ë°œì£¼/ìˆ˜ì£¼ë²ˆí˜¸"})]})]}),r.jsxs("tbody",{children:[_.items.map(e=>{const t=I.get(e.id),a=(e=>{const t=I.get(e.id);let a=t||null,r=!1;if(!a){const t=Z?v:$.get(e.id)||(e.extracted_po_number?k(e.extracted_po_number):"");if(t){const s=ee(t);r=s.length>0;let n=0;s.forEach(t=>{const r=H(e.extracted_item_name||"",t.item_name,t.specification);r>n&&(n=r,a=t)})}}if(!a)return"unmatched";const s=H(e.extracted_item_name||"",a.item_name||"",a.specification);return s>=80?"high":s>=50?"med":s>=30||r||t?"low":"unmatched"})(e),s=e.extracted_po_number?k(e.extracted_po_number):void 0,n=$.get(e.id)||s,i=te(e.id),c=ee(Z?v:n||"");return r.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-100",children:[!Z&&r.jsx("td",{className:"border-r border-gray-100 p-1 whitespace-nowrap",children:r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>de(`po-${e.id}`),className:"inline-flex items-center gap-1 px-2 py-1 text-[11px] font-medium bg-blue-50 border border-blue-200 business-radius hover:bg-blue-100 text-blue-700 whitespace-nowrap",style:{fontSize:"11px"},children:[r.jsx("span",{children:n||"ì„ íƒ"}),r.jsx(z,{className:"w-3 h-3 flex-shrink-0"})]}),F.has(`po-${e.id}`)&&i.length>0&&r.jsx("div",{className:"absolute left-0 top-full mt-1 z-20 bg-white border border-gray-200 rounded-md shadow-lg min-w-[150px] max-h-[150px] overflow-auto",children:i.map((t,a)=>r.jsx("div",{onClick:()=>((e,t)=>{E(a=>{const r=new Map(a);return r.set(e,t),r});const a=_?.items.find(t=>t.id===e);if(a){const r=a.match_candidates?.filter(e=>e.purchase_order_number===t||e.sales_order_number===t)||[];let s=null,n=-1;r.length>0&&r.forEach(e=>{const t=H(a.extracted_item_name||"",e.item_name,e.specification);t>n&&(n=t,s={purchase_id:e.purchase_id,item_id:e.item_id,purchase_order_number:e.purchase_order_number||"",sales_order_number:e.sales_order_number,item_name:e.item_name,specification:e.specification,quantity:e.quantity,unit_price:e.unit_price,amount:e.amount,vendor_name:e.vendor_name})}),s||ee(t).forEach(e=>{const t=H(a.extracted_item_name||"",e.item_name,e.specification);t>n&&(n=t,s=e)}),R(t=>{const a=new Map(t);return a.set(e,s),a})}U(t=>{const a=new Set(t);return a.delete(`po-${e}`),a})})(e.id,t),className:"px-2 py-1.5 hover:bg-gray-100 cursor-pointer text-[11px] font-medium "+(t===n?"bg-blue-50 text-blue-700":"text-gray-700"),style:{fontSize:"11px"},children:t},a))})]})}),r.jsx("td",{className:"border-r border-gray-100 p-1",children:t?r.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[r.jsx("span",{className:"text-[11px] font-medium text-gray-900",style:{fontSize:"11px"},children:t.item_name}),r.jsx("button",{onClick:()=>ne(e.id,null),className:"text-gray-400 hover:text-red-500 flex-shrink-0",title:"ë§¤ì¹­ í•´ì œ",children:r.jsx(D,{className:"w-3 h-3"})})]}):c.length>0?r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>de(`item-${e.id}`),className:"flex items-center gap-1 text-blue-600 hover:text-blue-700 text-[11px]",style:{fontSize:"11px"},children:[r.jsx("span",{children:"â–¼ í›„ë³´ ì„ íƒ"}),r.jsxs("span",{className:"text-gray-400",children:["(",c.length,")"]})]}),F.has(`item-${e.id}`)&&r.jsx("div",{className:"absolute left-0 top-full mt-1 z-20 bg-white border border-gray-200 rounded-md shadow-lg min-w-[280px] max-h-[200px] overflow-auto",children:c.map((t,a)=>{const s=H(e.extracted_item_name||"",t.item_name,t.specification);return r.jsxs("div",{onClick:()=>ne(e.id,t),className:"px-2 py-1.5 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-0",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-[11px] font-medium text-gray-900",style:{fontSize:"11px"},children:t.item_name}),r.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded "+(s>=80?"bg-green-100 text-green-700":s>=50?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"),children:[Math.round(s),"%"]})]}),r.jsxs("p",{className:"text-[10px] text-gray-500",children:[t.quantity??"-","ê°œ Ã— ",ie(t.unit_price)," = ",ie(t.amount)]})]},a)})})]}):r.jsx("span",{className:"text-[11px] text-gray-400",style:{fontSize:"11px"},children:"í›„ë³´ ì—†ìŒ"})}),r.jsx("td",{className:"border-r border-gray-100 p-1 text-right",children:r.jsx("span",{className:"text-[11px] text-gray-700",style:{fontSize:"11px"},children:t?.quantity??"-"})}),r.jsx("td",{className:"border-r border-gray-100 p-1 text-right",children:r.jsx("span",{className:"text-[11px] text-gray-700",style:{fontSize:"11px"},children:t?ie(t.unit_price):"-"})}),r.jsx("td",{className:"border-r-2 border-gray-300 p-1 text-right",children:r.jsx("span",{className:"text-[11px] font-bold text-gray-900",style:{fontSize:"11px",fontWeight:700},children:t?ie(t.amount):"-"})}),r.jsx("td",{className:"border-r-2 border-gray-300 p-2 text-center bg-blue-50/50",children:le(a,e)}),r.jsx("td",{className:"border-r border-gray-100 p-1 whitespace-nowrap",children:r.jsx("input",{type:"text",value:re(e,"item_name"),onChange:t=>ae(e.id,"item_name",t.target.value),className:"min-w-[180px] w-auto px-1.5 py-0.5 !text-[11px] !font-medium text-gray-900 border business-radius focus:outline-none focus:ring-1 focus:ring-blue-400 "+(se(e,"item_name")?"border-orange-400 bg-orange-50":"border-gray-200 bg-white"),style:{fontSize:"11px",fontWeight:500,width:`${Math.max(180,8*re(e,"item_name").length)}px`},title:se(e,"item_name")?`ì›ë³¸: ${e.extracted_item_name}`:void 0})}),r.jsx("td",{className:"border-r border-gray-100 p-1",children:r.jsx("input",{type:"number",value:re(e,"quantity"),onChange:t=>ae(e.id,"quantity",t.target.value?Number(t.target.value):0),className:"w-16 px-1.5 py-0.5 !text-[11px] !font-medium text-gray-900 text-right border business-radius focus:outline-none focus:ring-1 focus:ring-blue-400 "+(se(e,"quantity")?"border-orange-400 bg-orange-50":"border-gray-200 bg-white"),style:{fontSize:"11px",fontWeight:500},title:se(e,"quantity")?`ì›ë³¸: ${e.extracted_quantity}`:void 0})}),r.jsx("td",{className:"border-r border-gray-100 p-1",children:r.jsx("input",{type:"number",value:re(e,"unit_price"),onChange:t=>ae(e.id,"unit_price",t.target.value?Number(t.target.value):0),className:"w-20 px-1.5 py-0.5 !text-[11px] !font-medium text-gray-900 text-right border business-radius focus:outline-none focus:ring-1 focus:ring-blue-400 "+(se(e,"unit_price")?"border-orange-400 bg-orange-50":"border-gray-200 bg-white"),style:{fontSize:"11px",fontWeight:500},title:se(e,"unit_price")?`ì›ë³¸: ${e.extracted_unit_price}`:void 0})}),r.jsx("td",{className:"p-1 "+(Z?"":"border-r border-gray-100"),children:r.jsx("input",{type:"number",value:re(e,"amount"),onChange:t=>ae(e.id,"amount",t.target.value?Number(t.target.value):0),className:"w-24 px-1.5 py-0.5 !text-[11px] !font-bold text-gray-900 text-right border business-radius focus:outline-none focus:ring-1 focus:ring-blue-400 "+(se(e,"amount")?"border-orange-400 bg-orange-50":"border-gray-200 bg-white"),style:{fontSize:"11px",fontWeight:700},title:se(e,"amount")?`ì›ë³¸: ${e.extracted_amount}`:void 0})}),!Z&&r.jsx("td",{className:"p-1 whitespace-nowrap",children:r.jsx("input",{type:"text",value:re(e,"po_number"),onChange:t=>ae(e.id,"po_number",t.target.value),className:"w-full px-1.5 py-0.5 !text-[11px] !font-medium text-gray-900 border business-radius focus:outline-none focus:ring-1 focus:ring-blue-400 "+(se(e,"po_number")?"border-orange-400 bg-orange-50":"border-gray-200 bg-white"),style:{fontSize:"11px",fontWeight:500},title:se(e,"po_number")?`ì›ë³¸: ${e.extracted_po_number}`:void 0})})]},e.id)}),r.jsxs("tr",{className:"bg-gray-50 font-medium",children:[r.jsx("td",{colSpan:Z?3:4,className:"border-t border-gray-200 p-2 text-right text-gray-600",children:"ì‹œìŠ¤í…œ í•©ê³„"}),r.jsx("td",{className:"border-r-2 border-t border-gray-300 p-2 text-right text-gray-900",children:ie(Array.from(I.values()).filter(Boolean).reduce((e,t)=>e+(t?.amount||0),0))}),r.jsx("td",{className:"border-r-2 border-t border-gray-300 p-2 bg-blue-50/50"}),r.jsxs("td",{colSpan:Z?3:4,className:"border-t border-gray-200 p-2 text-right text-gray-600",children:["OCR í•©ê³„",P.size>0&&r.jsx("span",{className:"ml-1 text-[9px] text-orange-600",children:"(ìˆ˜ì •ë¨)"})]}),r.jsx("td",{className:"border-t border-gray-200 p-2 text-right text-gray-900",children:ie(_.items.reduce((e,t)=>{const a=P.get(t.id);return e+(void 0!==a?.amount?a.amount:t.extracted_amount||0)},0))}),!Z&&r.jsx("td",{className:"border-t border-gray-200"})]})]})]})})]}):r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"modal-subtitle",children:"ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."})}),r.jsxs(b,{className:"border-t border-gray-100 pt-3 gap-2",children:[r.jsxs(n,{variant:"outline",onClick:async()=>{if(confirm("ì´ ê±°ë˜ëª…ì„¸ì„œë¥¼ ê±°ë¶€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{m(!0);const e=await S.rejectStatement(s.id);e.success?(y.success("ê±°ë˜ëª…ì„¸ì„œê°€ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤."),i()):y.error(e.error||"ê±°ë¶€ ì²˜ë¦¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}catch(e){y.error("ê±°ë¶€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{m(!1)}},disabled:o,className:"button-base h-8 text-[11px] text-red-500 border-red-200 hover:bg-red-50",children:[r.jsx(D,{className:"w-3.5 h-3.5 mr-1"}),"ê±°ë¶€"]}),r.jsx(n,{variant:"outline",onClick:i,disabled:o,className:"button-base h-8 text-[11px]",children:"ë‹«ê¸°"}),r.jsx(n,{onClick:async()=>{if(_)try{m(!0),await(async()=>{if(!_)return;const e=[];if(_.items.forEach(t=>{const a=P.get(t.id);if(a&&(void 0!==a.item_name&&a.item_name!==t.extracted_item_name&&e.push({statement_id:_.id,statement_item_id:t.id,original_text:t.extracted_item_name||"",corrected_text:a.item_name,field_type:"item_name"}),void 0!==a.quantity&&a.quantity!==t.extracted_quantity&&e.push({statement_id:_.id,statement_item_id:t.id,original_text:String(t.extracted_quantity??""),corrected_text:String(a.quantity),field_type:"quantity"}),void 0!==a.unit_price&&a.unit_price!==t.extracted_unit_price&&e.push({statement_id:_.id,statement_item_id:t.id,original_text:String(t.extracted_unit_price??""),corrected_text:String(a.unit_price),field_type:"unit_price"}),void 0!==a.amount&&a.amount!==t.extracted_amount&&e.push({statement_id:_.id,statement_item_id:t.id,original_text:String(t.extracted_amount??""),corrected_text:String(a.amount),field_type:"amount"}),void 0!==a.po_number)){const r=t.extracted_po_number?k(t.extracted_po_number):"";a.po_number!==r&&e.push({statement_id:_.id,statement_item_id:t.id,original_text:r,corrected_text:a.po_number,field_type:"po_number"})}}),e.length>0){for(const t of e)await S.saveCorrection(t);y.success(`${e.length}ê±´ì˜ OCR ìˆ˜ì •ì‚¬í•­ì´ í•™ìŠµ ë°ì´í„°ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.`)}})();const e=_.items.map(e=>{const t=I.get(e.id),a=P.get(e.id),r=void 0!==a?.quantity?a.quantity:e.extracted_quantity,s=void 0!==a?.unit_price?a.unit_price:e.extracted_unit_price,n=void 0!==a?.amount?a.amount:e.extracted_amount;return{itemId:e.id,matched_purchase_id:t?.purchase_id,matched_item_id:t?.item_id,confirmed_quantity:r,confirmed_unit_price:s,confirmed_amount:n}}),t=await S.confirmStatement({statementId:s.id,items:e},N);t.success?(y.success("ê±°ë˜ëª…ì„¸ì„œê°€ í™•ì •ë˜ì—ˆìŠµë‹ˆë‹¤."),c()):y.error(t.error||"í™•ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}catch(e){y.error("í™•ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{m(!1)}},disabled:o||!_,className:"button-base h-8 text-[11px] bg-hansl-600 hover:bg-hansl-700 text-white",children:o?r.jsxs(r.Fragment,{children:[r.jsx(O,{className:"w-3.5 h-3.5 mr-1 animate-spin"}),"ì²˜ë¦¬ ì¤‘..."]}):r.jsxs(r.Fragment,{children:[r.jsx(M,{className:"w-3.5 h-3.5 mr-1"}),"í™•ì •"]})})]})]})}),A&&r.jsx(u,{open:A.isOpen,onOpenChange:()=>K(null),children:r.jsxs(x,{className:"max-w-md",children:[r.jsx(h,{children:r.jsx(p,{className:"text-[14px] font-semibold text-gray-800",children:"ë§¤ì¹­ ìƒì„¸ ì •ë³´"})}),r.jsxs("div",{className:"space-y-4 py-2",children:[r.jsxs("div",{className:"flex items-center justify-center",children:[le(A.status),r.jsxs("span",{className:"ml-2 text-[12px] text-gray-600",children:["ìœ ì‚¬ë„: ",A.similarity.toFixed(1),"%"]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-[11px] font-medium text-gray-500 w-20 shrink-0",children:"OCR í’ˆëª©:"}),r.jsx("span",{className:"text-[11px] text-gray-800 break-all",children:A.ocrItemName})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-[11px] font-medium text-gray-500 w-20 shrink-0",children:"ì‹œìŠ¤í…œ í’ˆëª©:"}),r.jsx("span",{className:"text-[11px] text-gray-800 break-all",children:A.systemItemName})]}),A.systemSpec&&"-"!==A.systemSpec&&r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-[11px] font-medium text-gray-500 w-20 shrink-0",children:"ì‹œìŠ¤í…œ ê·œê²©:"}),r.jsx("span",{className:"text-[11px] text-gray-800 break-all",children:A.systemSpec})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("span",{className:"text-[11px] font-medium text-gray-600",children:"ë§¤ì¹­ íŒì • ì´ìœ :"}),r.jsx("ul",{className:"space-y-1",children:A.reasons.map((e,t)=>r.jsx("li",{className:"text-[11px] text-gray-700 pl-2",children:e},t))})]})]}),r.jsx(b,{children:r.jsx(n,{variant:"outline",size:"sm",onClick:()=>K(null),className:"text-[11px]",children:"ë‹«ê¸°"})})]})}),r.jsx(B,{isOpen:f,imageUrl:s.image_url,onClose:()=>j(!1)})]}):null}function G(){const[e,s]=t.useState([]),[u,x]=t.useState(!0),[h,p]=t.useState(""),[b,k]=t.useState("all"),[q,$]=t.useState(""),[E,I]=t.useState(0),[z,L]=t.useState(!1),[U,T]=t.useState(!1),[A,H]=t.useState(null),[G,J]=t.useState(!1),[V,Z]=t.useState(!1),[Q,X]=t.useState(""),[Y,ee]=t.useState(new Set),te=t.useCallback(async()=>{try{x(!0);const e=await S.getStatements({status:"all"!==b?b:void 0,dateFrom:q||void 0,search:h||void 0,limit:50});e.success?(s(e.data||[]),I(e.count||0)):y.error(e.error||"ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}catch(e){y.error("ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{x(!1)}},[b,q,h]);t.useEffect(()=>{te()},[te]);const ae=t.useRef(a());t.useEffect(()=>{const e=ae.current,t=e.channel("transaction-statements-changes").on("postgres_changes",{event:"*",schema:"public",table:"transaction_statements"},e=>{if("UPDATE"===e.eventType){const t=e.new?.status,a=e.old?.status;t!==a&&te()}else"INSERT"!==e.eventType&&"DELETE"!==e.eventType||te()}).subscribe();return()=>{e.removeChannel(t)}},[te]);const re=e=>{const t="inline-flex items-center gap-1 business-radius-badge px-2 py-0.5 text-[10px] font-medium leading-tight";switch(e){case"pending":return r.jsxs("span",{className:`${t} bg-gray-100 text-gray-600 border border-gray-200`,children:[r.jsx(R,{className:"w-3 h-3"}),"ëŒ€ê¸°ì¤‘"]});case"processing":return r.jsxs("span",{className:`${t} bg-blue-50 text-blue-600 border border-blue-200`,children:[r.jsx(O,{className:"w-3 h-3 animate-spin"}),"ì²˜ë¦¬ì¤‘"]});case"extracted":return r.jsxs("span",{className:`${t} bg-yellow-50 text-yellow-600 border border-yellow-200`,children:[r.jsx(c,{className:"w-3 h-3"}),"í™•ì¸í•„ìš”"]});case"confirmed":return r.jsxs("span",{className:`${t} bg-green-50 text-green-600 border border-green-200`,children:[r.jsx(M,{className:"w-3 h-3"}),"í™•ì •ë¨"]});case"rejected":return r.jsxs("span",{className:`${t} bg-red-50 text-red-600 border border-red-200`,children:[r.jsx(D,{className:"w-3 h-3"}),"ê±°ë¶€ë¨"]});default:return r.jsx("span",{className:`${t} bg-gray-100 text-gray-600`,children:e})}},se=e=>{H(e),"extracted"===e.status?J(!0):"confirmed"!==e.status&&"pending"!==e.status||(X(e.image_url),Z(!0))},ne=(e,t)=>{e.stopPropagation(),X(t),Z(!0)},ie=()=>{J(!1),H(null),te()},ce=e=>e?new Date(e).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}):"-",le=e=>null==e?"-":e.toLocaleString("ko-KR")+"ì›";return r.jsxs("div",{className:"w-full",children:[r.jsx("div",{className:"mb-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"page-title",children:"ê±°ë˜ëª…ì„¸ì„œ í™•ì¸"}),r.jsx("p",{className:"page-subtitle",style:{marginTop:"-2px",marginBottom:"-4px"},children:"Transaction Statement Verification"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(n,{onClick:()=>T(!0),className:"!h-auto button-base bg-hansl-600 hover:bg-hansl-700 text-white",children:[r.jsx(_,{className:"w-3.5 h-3.5"}),r.jsx("span",{className:"hidden sm:inline",children:"ì—…ë¡œë“œ"})]}),r.jsx(n,{variant:"outline",onClick:te,disabled:u,className:"!h-auto button-base",children:r.jsx(F,{className:"w-3.5 h-3.5 "+(u?"animate-spin":"")})})]})]})}),r.jsxs("div",{className:"mb-3",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsxs("div",{className:"relative min-w-[140px] max-w-[200px]",children:[r.jsx(l,{className:"absolute left-1.5 top-1/2 transform -translate-y-1/2 w-2.5 h-2.5 text-gray-400"}),r.jsx(g,{placeholder:"ê±°ë˜ì²˜ëª…, íŒŒì¼ëª… ê²€ìƒ‰...",value:h,onChange:e=>p(e.target.value),className:"!h-auto !py-px !pr-1.5 !pl-5 !text-[11px] !min-h-[20px] business-radius-input border border-gray-300 bg-white text-gray-700"})]}),r.jsxs(f,{value:b,onValueChange:k,children:[r.jsx(j,{className:"!h-auto !py-[1px] !px-2 !text-[12px] !min-h-[22px] w-[100px] business-radius-input border border-gray-300 bg-white text-gray-700 [&>svg]:h-3 [&>svg]:w-3",children:r.jsx(N,{placeholder:"ìƒíƒœ"})}),r.jsxs(w,{className:"min-w-[100px]",children:[r.jsx(v,{value:"all",className:"text-[12px] py-1.5",children:"ì „ì²´ ìƒíƒœ"}),r.jsx(v,{value:"pending",className:"text-[12px] py-1.5",children:"ëŒ€ê¸°ì¤‘"}),r.jsx(v,{value:"extracted",className:"text-[12px] py-1.5",children:"í™•ì¸í•„ìš”"}),r.jsx(v,{value:"confirmed",className:"text-[12px] py-1.5",children:"í™•ì •ë¨"}),r.jsx(v,{value:"rejected",className:"text-[12px] py-1.5",children:"ê±°ë¶€ë¨"})]})]}),r.jsxs(n,{variant:"outline",onClick:()=>L(!z),className:"!h-auto button-base border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 "+(z?"bg-hansl-50 border-hansl-300 text-hansl-700":""),children:[r.jsx(P,{className:"w-3.5 h-3.5 mr-1"}),r.jsx("span",{className:"button-text",children:"í•„í„°"})]}),r.jsxs("span",{className:"badge-stats bg-gray-100 text-gray-600",children:["ì´ ",E,"ê±´"]})]}),z&&r.jsx("div",{className:"mt-2 p-3 bg-gray-50 business-radius-card border border-gray-200",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-[12px] font-medium text-gray-500",children:"ì—…ë¡œë“œ ë‚ ì§œ"}),r.jsx(g,{type:"date",value:q,onChange:e=>$(e.target.value),className:"!h-auto !py-[2px] !px-2.5 !text-[12px] !min-h-[24px] w-[140px] business-radius-input border border-gray-300 bg-white text-gray-700"})]}),r.jsxs(n,{variant:"outline",onClick:()=>{p(""),k("all"),$("")},className:"!h-auto button-base border border-gray-300 bg-white text-blue-600 hover:bg-blue-50 hover:border-blue-300",children:["â†» ",r.jsx("span",{className:"button-text text-blue-600",children:"ì´ˆê¸°í™”"})]})]})})]}),r.jsx(d,{className:"overflow-hidden border border-gray-200 business-radius-card",children:r.jsx(o,{className:"p-0",children:u?r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsx("div",{className:"w-6 h-6 border-2 border-hansl-500 border-t-transparent rounded-full animate-spin"}),r.jsx("span",{className:"ml-3 text-[11px] text-gray-500",children:"ë¡œë”© ì¤‘..."})]}):0===e.length?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(i,{className:"w-10 h-10 text-gray-300 mx-auto mb-3"}),r.jsx("h3",{className:"text-[12px] font-medium text-gray-700 mb-1",children:"ê±°ë˜ëª…ì„¸ì„œê°€ ì—†ìŠµë‹ˆë‹¤"}),r.jsx("p",{className:"text-[11px] text-gray-500",children:"ì—…ë¡œë“œëœ ê±°ë˜ëª…ì„¸ì„œê°€ ì—†ê±°ë‚˜ ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤."})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full min-w-fit",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2.5 text-center text-[10px] font-semibold text-gray-500 uppercase tracking-wider",children:"ìƒíƒœ"}),r.jsx("th",{className:"px-3 py-2.5 text-center text-[10px] font-semibold text-gray-500 uppercase tracking-wider",children:"ì—…ë¡œë“œì¼"}),r.jsx("th",{className:"px-3 py-2.5 text-center text-[10px] font-semibold text-gray-500 uppercase tracking-wider",children:"ëª…ì„¸ì„œì¼"}),r.jsx("th",{className:"px-3 py-2.5 text-left text-[10px] font-semibold text-gray-500 uppercase tracking-wider",children:"ê±°ë˜ì²˜ëª…"}),r.jsx("th",{className:"px-3 py-2.5 text-left text-[10px] font-semibold text-gray-500 uppercase tracking-wider",children:"íŒŒì¼ëª…"}),r.jsx("th",{className:"px-3 py-2.5 text-right text-[10px] font-semibold text-gray-500 uppercase tracking-wider",children:"í•©ê³„ê¸ˆì•¡"}),r.jsx("th",{className:"px-3 py-2.5 text-center text-[10px] font-semibold text-gray-500 uppercase tracking-wider",children:"ë“±ë¡ì"}),r.jsx("th",{className:"px-3 py-2.5 text-center text-[10px] font-semibold text-gray-500 uppercase tracking-wider",children:"ì•¡ì…˜"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:e.map(e=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>se(e),children:[r.jsx("td",{className:"px-3 py-2.5 text-center",children:Y.has(e.id)?re("processing"):re(e.status)}),r.jsx("td",{className:"px-3 py-2.5 text-[11px] text-center text-gray-600",children:ce(e.uploaded_at)}),r.jsx("td",{className:"px-3 py-2.5 text-[11px] text-center text-gray-600",children:e.statement_date?ce(e.statement_date):"-"}),r.jsx("td",{className:"px-3 py-2.5 text-[11px] font-medium text-gray-900",children:e.vendor_name||"-"}),r.jsx("td",{className:"px-3 py-2.5 text-[11px] text-gray-700 max-w-[180px] truncate",children:e.file_name||"-"}),r.jsx("td",{className:"px-3 py-2.5 text-[11px] font-medium text-right text-gray-900",children:le(e.grand_total)}),r.jsx("td",{className:"px-3 py-2.5 text-[11px] text-center text-gray-600",children:e.uploaded_by_name||"-"}),r.jsx("td",{className:"px-3 py-2.5 text-center",children:r.jsxs("div",{className:"flex items-center justify-center gap-1",children:[r.jsx("button",{onClick:t=>ne(t,e.image_url),className:"p-1.5 rounded-md hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors",title:"ì´ë¯¸ì§€ ë³´ê¸°",children:r.jsx(C,{className:"w-3.5 h-3.5"})}),r.jsx("button",{onClick:t=>(async(e,t)=>{if(e.stopPropagation(),confirm(`"${t.file_name||"ì´ ê±°ë˜ëª…ì„¸ì„œ"}"ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`))try{const e=await S.deleteStatement(t.id);e.success?(y.success("ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."),te()):y.error(e.error||"ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}catch(a){y.error("ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}})(t,e),className:"p-1.5 rounded-md hover:bg-red-50 text-red-400 hover:text-red-600 transition-colors",title:"ì‚­ì œ",children:r.jsx(m,{className:"w-3.5 h-3.5"})})]})})]},e.id))})]})}),r.jsx("div",{className:"md:hidden divide-y divide-gray-100",children:e.map(e=>r.jsxs("div",{className:"p-3 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>se(e),children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[Y.has(e.id)?re("processing"):re(e.status),r.jsx("span",{className:"text-[10px] text-gray-400",children:ce(e.uploaded_at)})]}),r.jsxs("div",{className:"mb-2",children:[r.jsx("p",{className:"text-[11px] font-medium text-gray-900",children:e.vendor_name||"ê±°ë˜ì²˜ ë¯¸í™•ì¸"}),r.jsx("p",{className:"text-[10px] text-gray-500 truncate",children:e.file_name})]}),e.grand_total&&r.jsx("p",{className:"text-[12px] font-bold text-gray-900",children:le(e.grand_total)}),r.jsx("div",{className:"flex items-center justify-end gap-2 mt-2 pt-2 border-t border-gray-100",children:r.jsxs("button",{onClick:t=>ne(t,e.image_url),className:"button-base px-2 py-1 text-[10px] border border-gray-200 text-gray-600 hover:bg-gray-50",children:[r.jsx(C,{className:"w-3 h-3 mr-1"}),"ë³´ê¸°"]})})]},e.id))})]})})}),r.jsx(W,{isOpen:U,onClose:()=>T(!1),onSuccess:async(e,t)=>{T(!1),await te(),ee(t=>new Set(t).add(e));try{y.loading("OCR ì¶”ì¶œ ì¤‘... (ì•½ 10~30ì´ˆ ì†Œìš”)",{id:`extraction-${e}`});const a=await S.extractStatementData(e,t);a.success?(y.success("OCR ì¶”ì¶œì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ê²°ê³¼ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.",{id:`extraction-${e}`}),te(),a.data&&(H(a.data),J(!0))):(y.error(a.error||"OCR ì¶”ì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",{id:`extraction-${e}`}),te())}catch(a){y.error("OCR ì¶”ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",{id:`extraction-${e}`}),te()}finally{ee(t=>{const a=new Set(t);return a.delete(e),a})}}}),A&&r.jsx(K,{isOpen:G,statement:A,onClose:ie,onConfirm:ie}),r.jsx(B,{isOpen:V,imageUrl:Q,onClose:()=>{Z(!1),X("")}})]})}export{G as default};
//# sourceMappingURL=TransactionStatementMain-D3jgPb07.js.map
