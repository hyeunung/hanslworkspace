import{c as Ie,a as rr,l as F,r as a,j as e,B as E,X as nr,e as Ee,m as Ce,P as O,f as v,d as Q,n as We,o as De,p as Ze,R as sr,A as or,q as he,s as ar,t as cr,D as ir,v as lr,w as dr,x as Je,h as k,_ as ur}from"./index-BA_gFQ-Z.js";import{P as mr,I as Z,S as fr,a as pr,b as xr,c as hr,d as ye,o as Qe,u as et,p as gr,q as vr,r as wr,s as br,F as _r,t as jr,D as yr,e as Mr,f as Nr,g as Cr,h as Sr}from"./dialog-B0amFztA.js";import{D as Rr,u as Ir,S as Ve,a as $e,T as Ue,b as Be,M as Er,c as Dr,d as qe,e as Tr,F as Pr,f as q,g as z,h as H,i as X,j as Y}from"./form-nRyFi71I.js";import{S as Ar,a as kr,b as Fr,c as Me,d as se,e as Or,f as W,E as ze,T as He}from"./card-BGBaK9_2.js";import{B as Xe,t as N}from"./index-CFkfiXwO.js";import{u as Lr}from"./index.esm-D8HC7T_W.js";/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Gr=Ie("chevron-right",Kr);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$r=Ie("circle",Vr);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Br=Ie("ellipsis",Ur);class qr{constructor(){this.supabase=rr()}async getVendors(n){try{let t=this.supabase.from("vendors").select(`
          *,
          vendor_contacts (*)
        `).order("vendor_name");n?.search&&(t=t.or(`
          vendor_name.ilike.%${n.search}%,
          business_number.ilike.%${n.search}%,
          representative.ilike.%${n.search}%,
          contact_phone.ilike.%${n.search}%,
          email.ilike.%${n.search}%
        `)),n?.is_active!==void 0&&(t=t.eq("is_active",n.is_active));const{data:s,error:o}=await t;if(o)throw o;return{success:!0,data:s||[]}}catch(t){return F.error("업체 목록 조회 실패",t),{success:!1,error:t instanceof Error?t.message:"알 수 없는 오류가 발생했습니다."}}}async getVendor(n){try{const{data:t,error:s}=await this.supabase.from("vendors").select("*").eq("id",n).single();if(s)throw s;return{success:!0,data:t}}catch(t){return F.error("업체 조회 실패",t),{success:!1,error:t instanceof Error?t.message:"알 수 없는 오류가 발생했습니다."}}}async createVendor(n){try{if(n.business_number){const{data:c}=await this.supabase.from("vendors").select("id").eq("business_number",n.business_number).single();if(c)return{success:!1,error:"이미 등록된 사업자번호입니다."}}const{data:t}=await this.supabase.from("vendors").select("id").eq("vendor_name",n.vendor_name).single();if(t)return{success:!1,error:"이미 등록된 업체명입니다."};const{data:s,error:o}=await this.supabase.from("vendors").insert({...n,is_active:!0}).select().single();if(o)throw o;return{success:!0,data:s}}catch(t){return F.error("업체 생성 실패",t),{success:!1,error:t instanceof Error?t.message:"알 수 없는 오류가 발생했습니다."}}}async updateVendor(n,t){try{if(t.business_number){const{data:c}=await this.supabase.from("vendors").select("id").eq("business_number",t.business_number).neq("id",n).single();if(c)return{success:!1,error:"이미 등록된 사업자번호입니다."}}if(t.vendor_name){const{data:c}=await this.supabase.from("vendors").select("id").eq("vendor_name",t.vendor_name).neq("id",n).single();if(c)return{success:!1,error:"이미 등록된 업체명입니다."}}const{data:s,error:o}=await this.supabase.from("vendors").update(t).eq("id",n).select().single();if(o)throw o;return{success:!0,data:s}}catch(s){return F.error("업체 수정 실패",s),{success:!1,error:s instanceof Error?s.message:"알 수 없는 오류가 발생했습니다."}}}async deleteVendor(n){try{const{data:t}=await this.supabase.from("purchase_requests").select("id").eq("vendor_id",n).limit(1);if(t&&t.length>0){const{error:s}=await this.supabase.from("vendors").update({is_active:!1}).eq("id",n);if(s)throw s;return{success:!0}}else{const{error:s}=await this.supabase.from("vendors").delete().eq("id",n);if(s)throw s;return{success:!0}}}catch(t){return F.error("업체 삭제 실패",t),{success:!1,error:t instanceof Error?t.message:"알 수 없는 오류가 발생했습니다."}}}async toggleVendorStatus(n){try{const{data:t,error:s}=await this.supabase.from("vendors").select("is_active").eq("id",n).single();if(s)throw s;const{data:o,error:c}=await this.supabase.from("vendors").update({is_active:!t.is_active}).eq("id",n).select().single();if(c)throw c;return{success:!0,data:o}}catch(t){return F.error("업체 상태 변경 실패",t),{success:!1,error:t instanceof Error?t.message:"알 수 없는 오류가 발생했습니다."}}}async getVendorContacts(n){try{const{data:t,error:s}=await this.supabase.from("vendor_contacts").select("*").eq("vendor_id",n).order("contact_name");if(s)throw s;return{success:!0,data:t||[]}}catch(t){return F.error("업체 연락처 조회 실패",t),{success:!1,error:t instanceof Error?t.message:"알 수 없는 오류가 발생했습니다."}}}async getVendorsForExport(){try{const{data:n,error:t}=await this.supabase.from("vendors").select("*").order("vendor_name");if(t)throw t;return{success:!0,data:(n||[]).map(o=>({업체명:o.vendor_name,사업자번호:o.business_number||"",대표자:o.representative||"",연락처:o.contact_phone||"",주소:o.address||"",이메일:o.email||"",상태:o.is_active?"활성":"비활성",등록일:o.created_at?new Date(o.created_at).toLocaleDateString("ko-KR"):""}))}}catch(n){return F.error("업체 Excel 내보내기 실패",n),{success:!1,error:n instanceof Error?n.message:"알 수 없는 오류가 발생했습니다."}}}}const J=new qr;function zr({filters:r,onFiltersChange:n,onExport:t,onCreateNew:s}){const[o,c]=a.useState(r.search||""),m=d=>{d.preventDefault(),n({...r,search:o.trim()||void 0})},u=d=>{n({...r,is_active:d==="all"?void 0:d==="active"})},x=()=>{c(""),n({})},f=r.search||r.is_active!==void 0;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"업체 관리"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{variant:"outline",onClick:t,className:"flex items-center gap-2",children:[e.jsx(Rr,{className:"w-4 h-4"}),"Excel 내보내기"]}),e.jsxs(E,{onClick:s,className:"flex items-center gap-2",children:[e.jsx(mr,{className:"w-4 h-4"}),"업체 등록"]})]})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg border space-y-4",children:e.jsxs("form",{onSubmit:m,className:"flex gap-4 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"검색"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ar,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Z,{type:"text",placeholder:"업체명, 사업자번호, 대표자, 연락처, 이메일로 검색",value:o,onChange:d=>c(d.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"sm:min-w-[120px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"상태"}),e.jsxs(fr,{value:r.is_active===void 0?"all":r.is_active?"active":"inactive",onValueChange:u,children:[e.jsx(pr,{children:e.jsx(xr,{})}),e.jsxs(hr,{children:[e.jsx(ye,{value:"all",children:"전체"}),e.jsx(ye,{value:"active",children:"활성"}),e.jsx(ye,{value:"inactive",children:"비활성"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{type:"submit",children:"검색"}),f&&e.jsxs(E,{type:"button",variant:"outline",onClick:x,className:"flex items-center gap-1",children:[e.jsx(nr,{className:"w-4 h-4"}),"초기화"]})]})]})})]})}var Ne="rovingFocusGroup.onEntryFocus",Hr={bubbles:!1,cancelable:!0},le="RovingFocusGroup",[Se,tt,Xr]=Qe(le),[Yr,rt]=Ee(le,[Xr]),[Wr,Zr]=Yr(le),nt=a.forwardRef((r,n)=>e.jsx(Se.Provider,{scope:r.__scopeRovingFocusGroup,children:e.jsx(Se.Slot,{scope:r.__scopeRovingFocusGroup,children:e.jsx(Jr,{...r,ref:n})})}));nt.displayName=le;var Jr=a.forwardRef((r,n)=>{const{__scopeRovingFocusGroup:t,orientation:s,loop:o=!1,dir:c,currentTabStopId:m,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:x,onEntryFocus:f,preventScrollOnEntryFocus:d=!1,...l}=r,i=a.useRef(null),h=Q(n,i),g=et(c),[C,b]=We({prop:m,defaultProp:u??null,onChange:x,caller:le}),[j,L]=a.useState(!1),y=De(f),S=tt(t),w=a.useRef(!1),[D,T]=a.useState(0);return a.useEffect(()=>{const _=i.current;if(_)return _.addEventListener(Ne,y),()=>_.removeEventListener(Ne,y)},[y]),e.jsx(Wr,{scope:t,orientation:s,dir:g,loop:o,currentTabStopId:C,onItemFocus:a.useCallback(_=>b(_),[b]),onItemShiftTab:a.useCallback(()=>L(!0),[]),onFocusableItemAdd:a.useCallback(()=>T(_=>_+1),[]),onFocusableItemRemove:a.useCallback(()=>T(_=>_-1),[]),children:e.jsx(O.div,{tabIndex:j||D===0?-1:0,"data-orientation":s,...l,ref:h,style:{outline:"none",...r.style},onMouseDown:v(r.onMouseDown,()=>{w.current=!0}),onFocus:v(r.onFocus,_=>{const K=!w.current;if(_.target===_.currentTarget&&K&&!j){const P=new CustomEvent(Ne,Hr);if(_.currentTarget.dispatchEvent(P),!P.defaultPrevented){const ee=S().filter(A=>A.focusable),te=ee.find(A=>A.active),me=ee.find(A=>A.id===C),be=[te,me,...ee].filter(Boolean).map(A=>A.ref.current);at(be,d)}}w.current=!1}),onBlur:v(r.onBlur,()=>L(!1))})})}),st="RovingFocusGroupItem",ot=a.forwardRef((r,n)=>{const{__scopeRovingFocusGroup:t,focusable:s=!0,active:o=!1,tabStopId:c,children:m,...u}=r,x=Ce(),f=c||x,d=Zr(st,t),l=d.currentTabStopId===f,i=tt(t),{onFocusableItemAdd:h,onFocusableItemRemove:g,currentTabStopId:C}=d;return a.useEffect(()=>{if(s)return h(),()=>g()},[s,h,g]),e.jsx(Se.ItemSlot,{scope:t,id:f,focusable:s,active:o,children:e.jsx(O.span,{tabIndex:l?0:-1,"data-orientation":d.orientation,...u,ref:n,onMouseDown:v(r.onMouseDown,b=>{s?d.onItemFocus(f):b.preventDefault()}),onFocus:v(r.onFocus,()=>d.onItemFocus(f)),onKeyDown:v(r.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){d.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const j=tn(b,d.orientation,d.dir);if(j!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let y=i().filter(S=>S.focusable).map(S=>S.ref.current);if(j==="last")y.reverse();else if(j==="prev"||j==="next"){j==="prev"&&y.reverse();const S=y.indexOf(b.currentTarget);y=d.loop?rn(y,S+1):y.slice(S+1)}setTimeout(()=>at(y))}}),children:typeof m=="function"?m({isCurrentTabStop:l,hasTabStop:C!=null}):m})})});ot.displayName=st;var Qr={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function en(r,n){return n!=="rtl"?r:r==="ArrowLeft"?"ArrowRight":r==="ArrowRight"?"ArrowLeft":r}function tn(r,n,t){const s=en(r.key,t);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return Qr[s]}function at(r,n=!1){const t=document.activeElement;for(const s of r)if(s===t||(s.focus({preventScroll:n}),document.activeElement!==t))return}function rn(r,n){return r.map((t,s)=>r[(n+s)%r.length])}var nn=nt,sn=ot,Re=["Enter"," "],on=["ArrowDown","PageUp","Home"],ct=["ArrowUp","PageDown","End"],an=[...on,...ct],cn={ltr:[...Re,"ArrowRight"],rtl:[...Re,"ArrowLeft"]},ln={ltr:["ArrowLeft"],rtl:["ArrowRight"]},de="Menu",[ce,dn,un]=Qe(de),[V,it]=Ee(de,[un,Ze,rt]),ge=Ze(),lt=rt(),[mn,$]=V(de),[fn,ue]=V(de),dt=r=>{const{__scopeMenu:n,open:t=!1,children:s,dir:o,onOpenChange:c,modal:m=!0}=r,u=ge(n),[x,f]=a.useState(null),d=a.useRef(!1),l=De(c),i=et(o);return a.useEffect(()=>{const h=()=>{d.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>d.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),e.jsx(sr,{...u,children:e.jsx(mn,{scope:n,open:t,onOpenChange:l,content:x,onContentChange:f,children:e.jsx(fn,{scope:n,onClose:a.useCallback(()=>l(!1),[l]),isUsingKeyboardRef:d,dir:i,modal:m,children:s})})})};dt.displayName=de;var pn="MenuAnchor",Te=a.forwardRef((r,n)=>{const{__scopeMenu:t,...s}=r,o=ge(t);return e.jsx(or,{...o,...s,ref:n})});Te.displayName=pn;var Pe="MenuPortal",[xn,ut]=V(Pe,{forceMount:void 0}),mt=r=>{const{__scopeMenu:n,forceMount:t,children:s,container:o}=r,c=$(Pe,n);return e.jsx(xn,{scope:n,forceMount:t,children:e.jsx(he,{present:t||c.open,children:e.jsx(gr,{asChild:!0,container:o,children:s})})})};mt.displayName=Pe;var I="MenuContent",[hn,Ae]=V(I),ft=a.forwardRef((r,n)=>{const t=ut(I,r.__scopeMenu),{forceMount:s=t.forceMount,...o}=r,c=$(I,r.__scopeMenu),m=ue(I,r.__scopeMenu);return e.jsx(ce.Provider,{scope:r.__scopeMenu,children:e.jsx(he,{present:s||c.open,children:e.jsx(ce.Slot,{scope:r.__scopeMenu,children:m.modal?e.jsx(gn,{...o,ref:n}):e.jsx(vn,{...o,ref:n})})})})}),gn=a.forwardRef((r,n)=>{const t=$(I,r.__scopeMenu),s=a.useRef(null),o=Q(n,s);return a.useEffect(()=>{const c=s.current;if(c)return vr(c)},[]),e.jsx(ke,{...r,ref:o,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:v(r.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),vn=a.forwardRef((r,n)=>{const t=$(I,r.__scopeMenu);return e.jsx(ke,{...r,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),wn=cr("MenuContent.ScrollLock"),ke=a.forwardRef((r,n)=>{const{__scopeMenu:t,loop:s=!1,trapFocus:o,onOpenAutoFocus:c,onCloseAutoFocus:m,disableOutsidePointerEvents:u,onEntryFocus:x,onEscapeKeyDown:f,onPointerDownOutside:d,onFocusOutside:l,onInteractOutside:i,onDismiss:h,disableOutsideScroll:g,...C}=r,b=$(I,t),j=ue(I,t),L=ge(t),y=lt(t),S=dn(t),[w,D]=a.useState(null),T=a.useRef(null),_=Q(n,T,b.onContentChange),K=a.useRef(0),P=a.useRef(""),ee=a.useRef(0),te=a.useRef(null),me=a.useRef("right"),fe=a.useRef(0),be=g?br:a.Fragment,A=g?{as:wn,allowPinchZoom:!0}:void 0,tr=p=>{const B=P.current+p,G=S().filter(R=>!R.disabled),re=document.activeElement,_e=G.find(R=>R.ref.current===re)?.textValue,je=G.map(R=>R.textValue),Ke=Dn(je,B,_e),ne=G.find(R=>R.textValue===Ke)?.ref.current;(function R(Ge){P.current=Ge,window.clearTimeout(K.current),Ge!==""&&(K.current=window.setTimeout(()=>R(""),1e3))})(B),ne&&setTimeout(()=>ne.focus())};a.useEffect(()=>()=>window.clearTimeout(K.current),[]),wr();const U=a.useCallback(p=>me.current===te.current?.side&&Pn(p,te.current?.area),[]);return e.jsx(hn,{scope:t,searchRef:P,onItemEnter:a.useCallback(p=>{U(p)&&p.preventDefault()},[U]),onItemLeave:a.useCallback(p=>{U(p)||(T.current?.focus(),D(null))},[U]),onTriggerLeave:a.useCallback(p=>{U(p)&&p.preventDefault()},[U]),pointerGraceTimerRef:ee,onPointerGraceIntentChange:a.useCallback(p=>{te.current=p},[]),children:e.jsx(be,{...A,children:e.jsx(_r,{asChild:!0,trapped:o,onMountAutoFocus:v(c,p=>{p.preventDefault(),T.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:m,children:e.jsx(ir,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:f,onPointerDownOutside:d,onFocusOutside:l,onInteractOutside:i,onDismiss:h,children:e.jsx(nn,{asChild:!0,...y,dir:j.dir,orientation:"vertical",loop:s,currentTabStopId:w,onCurrentTabStopIdChange:D,onEntryFocus:v(x,p=>{j.isUsingKeyboardRef.current||p.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(lr,{role:"menu","aria-orientation":"vertical","data-state":It(b.open),"data-radix-menu-content":"",dir:j.dir,...L,...C,ref:_,style:{outline:"none",...C.style},onKeyDown:v(C.onKeyDown,p=>{const G=p.target.closest("[data-radix-menu-content]")===p.currentTarget,re=p.ctrlKey||p.altKey||p.metaKey,_e=p.key.length===1;G&&(p.key==="Tab"&&p.preventDefault(),!re&&_e&&tr(p.key));const je=T.current;if(p.target!==je||!an.includes(p.key))return;p.preventDefault();const ne=S().filter(R=>!R.disabled).map(R=>R.ref.current);ct.includes(p.key)&&ne.reverse(),In(ne)}),onBlur:v(r.onBlur,p=>{p.currentTarget.contains(p.target)||(window.clearTimeout(K.current),P.current="")}),onPointerMove:v(r.onPointerMove,ie(p=>{const B=p.target,G=fe.current!==p.clientX;if(p.currentTarget.contains(B)&&G){const re=p.clientX>fe.current?"right":"left";me.current=re,fe.current=p.clientX}}))})})})})})})});ft.displayName=I;var bn="MenuGroup",Fe=a.forwardRef((r,n)=>{const{__scopeMenu:t,...s}=r;return e.jsx(O.div,{role:"group",...s,ref:n})});Fe.displayName=bn;var _n="MenuLabel",pt=a.forwardRef((r,n)=>{const{__scopeMenu:t,...s}=r;return e.jsx(O.div,{...s,ref:n})});pt.displayName=_n;var pe="MenuItem",Ye="menu.itemSelect",ve=a.forwardRef((r,n)=>{const{disabled:t=!1,onSelect:s,...o}=r,c=a.useRef(null),m=ue(pe,r.__scopeMenu),u=Ae(pe,r.__scopeMenu),x=Q(n,c),f=a.useRef(!1),d=()=>{const l=c.current;if(!t&&l){const i=new CustomEvent(Ye,{bubbles:!0,cancelable:!0});l.addEventListener(Ye,h=>s?.(h),{once:!0}),ar(l,i),i.defaultPrevented?f.current=!1:m.onClose()}};return e.jsx(xt,{...o,ref:x,disabled:t,onClick:v(r.onClick,d),onPointerDown:l=>{r.onPointerDown?.(l),f.current=!0},onPointerUp:v(r.onPointerUp,l=>{f.current||l.currentTarget?.click()}),onKeyDown:v(r.onKeyDown,l=>{const i=u.searchRef.current!=="";t||i&&l.key===" "||Re.includes(l.key)&&(l.currentTarget.click(),l.preventDefault())})})});ve.displayName=pe;var xt=a.forwardRef((r,n)=>{const{__scopeMenu:t,disabled:s=!1,textValue:o,...c}=r,m=Ae(pe,t),u=lt(t),x=a.useRef(null),f=Q(n,x),[d,l]=a.useState(!1),[i,h]=a.useState("");return a.useEffect(()=>{const g=x.current;g&&h((g.textContent??"").trim())},[c.children]),e.jsx(ce.ItemSlot,{scope:t,disabled:s,textValue:o??i,children:e.jsx(sn,{asChild:!0,...u,focusable:!s,children:e.jsx(O.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...c,ref:f,onPointerMove:v(r.onPointerMove,ie(g=>{s?m.onItemLeave(g):(m.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:v(r.onPointerLeave,ie(g=>m.onItemLeave(g))),onFocus:v(r.onFocus,()=>l(!0)),onBlur:v(r.onBlur,()=>l(!1))})})})}),jn="MenuCheckboxItem",ht=a.forwardRef((r,n)=>{const{checked:t=!1,onCheckedChange:s,...o}=r;return e.jsx(_t,{scope:r.__scopeMenu,checked:t,children:e.jsx(ve,{role:"menuitemcheckbox","aria-checked":xe(t)?"mixed":t,...o,ref:n,"data-state":Le(t),onSelect:v(o.onSelect,()=>s?.(xe(t)?!0:!t),{checkForDefaultPrevented:!1})})})});ht.displayName=jn;var gt="MenuRadioGroup",[yn,Mn]=V(gt,{value:void 0,onValueChange:()=>{}}),vt=a.forwardRef((r,n)=>{const{value:t,onValueChange:s,...o}=r,c=De(s);return e.jsx(yn,{scope:r.__scopeMenu,value:t,onValueChange:c,children:e.jsx(Fe,{...o,ref:n})})});vt.displayName=gt;var wt="MenuRadioItem",bt=a.forwardRef((r,n)=>{const{value:t,...s}=r,o=Mn(wt,r.__scopeMenu),c=t===o.value;return e.jsx(_t,{scope:r.__scopeMenu,checked:c,children:e.jsx(ve,{role:"menuitemradio","aria-checked":c,...s,ref:n,"data-state":Le(c),onSelect:v(s.onSelect,()=>o.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});bt.displayName=wt;var Oe="MenuItemIndicator",[_t,Nn]=V(Oe,{checked:!1}),jt=a.forwardRef((r,n)=>{const{__scopeMenu:t,forceMount:s,...o}=r,c=Nn(Oe,t);return e.jsx(he,{present:s||xe(c.checked)||c.checked===!0,children:e.jsx(O.span,{...o,ref:n,"data-state":Le(c.checked)})})});jt.displayName=Oe;var Cn="MenuSeparator",yt=a.forwardRef((r,n)=>{const{__scopeMenu:t,...s}=r;return e.jsx(O.div,{role:"separator","aria-orientation":"horizontal",...s,ref:n})});yt.displayName=Cn;var Sn="MenuArrow",Mt=a.forwardRef((r,n)=>{const{__scopeMenu:t,...s}=r,o=ge(t);return e.jsx(dr,{...o,...s,ref:n})});Mt.displayName=Sn;var Rn="MenuSub",[Ts,Nt]=V(Rn),oe="MenuSubTrigger",Ct=a.forwardRef((r,n)=>{const t=$(oe,r.__scopeMenu),s=ue(oe,r.__scopeMenu),o=Nt(oe,r.__scopeMenu),c=Ae(oe,r.__scopeMenu),m=a.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:x}=c,f={__scopeMenu:r.__scopeMenu},d=a.useCallback(()=>{m.current&&window.clearTimeout(m.current),m.current=null},[]);return a.useEffect(()=>d,[d]),a.useEffect(()=>{const l=u.current;return()=>{window.clearTimeout(l),x(null)}},[u,x]),e.jsx(Te,{asChild:!0,...f,children:e.jsx(xt,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":o.contentId,"data-state":It(t.open),...r,ref:Je(n,o.onTriggerChange),onClick:l=>{r.onClick?.(l),!(r.disabled||l.defaultPrevented)&&(l.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:v(r.onPointerMove,ie(l=>{c.onItemEnter(l),!l.defaultPrevented&&!r.disabled&&!t.open&&!m.current&&(c.onPointerGraceIntentChange(null),m.current=window.setTimeout(()=>{t.onOpenChange(!0),d()},100))})),onPointerLeave:v(r.onPointerLeave,ie(l=>{d();const i=t.content?.getBoundingClientRect();if(i){const h=t.content?.dataset.side,g=h==="right",C=g?-5:5,b=i[g?"left":"right"],j=i[g?"right":"left"];c.onPointerGraceIntentChange({area:[{x:l.clientX+C,y:l.clientY},{x:b,y:i.top},{x:j,y:i.top},{x:j,y:i.bottom},{x:b,y:i.bottom}],side:h}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(l),l.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:v(r.onKeyDown,l=>{const i=c.searchRef.current!=="";r.disabled||i&&l.key===" "||cn[s.dir].includes(l.key)&&(t.onOpenChange(!0),t.content?.focus(),l.preventDefault())})})})});Ct.displayName=oe;var St="MenuSubContent",Rt=a.forwardRef((r,n)=>{const t=ut(I,r.__scopeMenu),{forceMount:s=t.forceMount,...o}=r,c=$(I,r.__scopeMenu),m=ue(I,r.__scopeMenu),u=Nt(St,r.__scopeMenu),x=a.useRef(null),f=Q(n,x);return e.jsx(ce.Provider,{scope:r.__scopeMenu,children:e.jsx(he,{present:s||c.open,children:e.jsx(ce.Slot,{scope:r.__scopeMenu,children:e.jsx(ke,{id:u.contentId,"aria-labelledby":u.triggerId,...o,ref:f,align:"start",side:m.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{m.isUsingKeyboardRef.current&&x.current?.focus(),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:v(r.onFocusOutside,d=>{d.target!==u.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:v(r.onEscapeKeyDown,d=>{m.onClose(),d.preventDefault()}),onKeyDown:v(r.onKeyDown,d=>{const l=d.currentTarget.contains(d.target),i=ln[m.dir].includes(d.key);l&&i&&(c.onOpenChange(!1),u.trigger?.focus(),d.preventDefault())})})})})})});Rt.displayName=St;function It(r){return r?"open":"closed"}function xe(r){return r==="indeterminate"}function Le(r){return xe(r)?"indeterminate":r?"checked":"unchecked"}function In(r){const n=document.activeElement;for(const t of r)if(t===n||(t.focus(),document.activeElement!==n))return}function En(r,n){return r.map((t,s)=>r[(n+s)%r.length])}function Dn(r,n,t){const o=n.length>1&&Array.from(n).every(f=>f===n[0])?n[0]:n,c=t?r.indexOf(t):-1;let m=En(r,Math.max(c,0));o.length===1&&(m=m.filter(f=>f!==t));const x=m.find(f=>f.toLowerCase().startsWith(o.toLowerCase()));return x!==t?x:void 0}function Tn(r,n){const{x:t,y:s}=r;let o=!1;for(let c=0,m=n.length-1;c<n.length;m=c++){const u=n[c],x=n[m],f=u.x,d=u.y,l=x.x,i=x.y;d>s!=i>s&&t<(l-f)*(s-d)/(i-d)+f&&(o=!o)}return o}function Pn(r,n){if(!n)return!1;const t={x:r.clientX,y:r.clientY};return Tn(t,n)}function ie(r){return n=>n.pointerType==="mouse"?r(n):void 0}var An=dt,kn=Te,Fn=mt,On=ft,Ln=Fe,Kn=pt,Gn=ve,Vn=ht,$n=vt,Un=bt,Bn=jt,qn=yt,zn=Mt,Hn=Ct,Xn=Rt,we="DropdownMenu",[Yn,Ps]=Ee(we,[it]),M=it(),[Wn,Et]=Yn(we),Dt=r=>{const{__scopeDropdownMenu:n,children:t,dir:s,open:o,defaultOpen:c,onOpenChange:m,modal:u=!0}=r,x=M(n),f=a.useRef(null),[d,l]=We({prop:o,defaultProp:c??!1,onChange:m,caller:we});return e.jsx(Wn,{scope:n,triggerId:Ce(),triggerRef:f,contentId:Ce(),open:d,onOpenChange:l,onOpenToggle:a.useCallback(()=>l(i=>!i),[l]),modal:u,children:e.jsx(An,{...x,open:d,onOpenChange:l,dir:s,modal:u,children:t})})};Dt.displayName=we;var Tt="DropdownMenuTrigger",Pt=a.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,disabled:s=!1,...o}=r,c=Et(Tt,t),m=M(t);return e.jsx(kn,{asChild:!0,...m,children:e.jsx(O.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...o,ref:Je(n,c.triggerRef),onPointerDown:v(r.onPointerDown,u=>{!s&&u.button===0&&u.ctrlKey===!1&&(c.onOpenToggle(),c.open||u.preventDefault())}),onKeyDown:v(r.onKeyDown,u=>{s||(["Enter"," "].includes(u.key)&&c.onOpenToggle(),u.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});Pt.displayName=Tt;var Zn="DropdownMenuPortal",At=r=>{const{__scopeDropdownMenu:n,...t}=r,s=M(n);return e.jsx(Fn,{...s,...t})};At.displayName=Zn;var kt="DropdownMenuContent",Ft=a.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...s}=r,o=Et(kt,t),c=M(t),m=a.useRef(!1);return e.jsx(On,{id:o.contentId,"aria-labelledby":o.triggerId,...c,...s,ref:n,onCloseAutoFocus:v(r.onCloseAutoFocus,u=>{m.current||o.triggerRef.current?.focus(),m.current=!1,u.preventDefault()}),onInteractOutside:v(r.onInteractOutside,u=>{const x=u.detail.originalEvent,f=x.button===0&&x.ctrlKey===!0,d=x.button===2||f;(!o.modal||d)&&(m.current=!0)}),style:{...r.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ft.displayName=kt;var Jn="DropdownMenuGroup",Qn=a.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...s}=r,o=M(t);return e.jsx(Ln,{...o,...s,ref:n})});Qn.displayName=Jn;var es="DropdownMenuLabel",Ot=a.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...s}=r,o=M(t);return e.jsx(Kn,{...o,...s,ref:n})});Ot.displayName=es;var ts="DropdownMenuItem",Lt=a.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...s}=r,o=M(t);return e.jsx(Gn,{...o,...s,ref:n})});Lt.displayName=ts;var rs="DropdownMenuCheckboxItem",Kt=a.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...s}=r,o=M(t);return e.jsx(Vn,{...o,...s,ref:n})});Kt.displayName=rs;var ns="DropdownMenuRadioGroup",ss=a.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...s}=r,o=M(t);return e.jsx($n,{...o,...s,ref:n})});ss.displayName=ns;var os="DropdownMenuRadioItem",Gt=a.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...s}=r,o=M(t);return e.jsx(Un,{...o,...s,ref:n})});Gt.displayName=os;var as="DropdownMenuItemIndicator",Vt=a.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...s}=r,o=M(t);return e.jsx(Bn,{...o,...s,ref:n})});Vt.displayName=as;var cs="DropdownMenuSeparator",$t=a.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...s}=r,o=M(t);return e.jsx(qn,{...o,...s,ref:n})});$t.displayName=cs;var is="DropdownMenuArrow",ls=a.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...s}=r,o=M(t);return e.jsx(zn,{...o,...s,ref:n})});ls.displayName=is;var ds="DropdownMenuSubTrigger",Ut=a.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...s}=r,o=M(t);return e.jsx(Hn,{...o,...s,ref:n})});Ut.displayName=ds;var us="DropdownMenuSubContent",Bt=a.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...s}=r,o=M(t);return e.jsx(Xn,{...o,...s,ref:n,style:{...r.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Bt.displayName=us;var ms=Dt,fs=Pt,ps=At,qt=Ft,zt=Ot,Ht=Lt,Xt=Kt,Yt=Gt,Wt=Vt,Zt=$t,Jt=Ut,Qt=Bt;const xs=ms,hs=fs,gs=a.forwardRef(({className:r,inset:n,children:t,...s},o)=>e.jsxs(Jt,{ref:o,className:k("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",n&&"pl-8",r),...s,children:[t,e.jsx(Gr,{className:"ml-auto h-4 w-4"})]}));gs.displayName=Jt.displayName;const vs=a.forwardRef(({className:r,...n},t)=>e.jsx(Qt,{ref:t,className:k("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...n}));vs.displayName=Qt.displayName;const er=a.forwardRef(({className:r,sideOffset:n=4,...t},s)=>e.jsx(ps,{children:e.jsx(qt,{ref:s,sideOffset:n,className:k("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...t})}));er.displayName=qt.displayName;const ae=a.forwardRef(({className:r,inset:n,...t},s)=>e.jsx(Ht,{ref:s,className:k("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",r),...t}));ae.displayName=Ht.displayName;const ws=a.forwardRef(({className:r,children:n,checked:t,...s},o)=>e.jsxs(Xt,{ref:o,className:k("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:t,...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Wt,{children:e.jsx(jr,{className:"h-4 w-4"})})}),n]}));ws.displayName=Xt.displayName;const bs=a.forwardRef(({className:r,children:n,...t},s)=>e.jsxs(Yt,{ref:s,className:k("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Wt,{children:e.jsx($r,{className:"h-2 w-2 fill-current"})})}),n]}));bs.displayName=Yt.displayName;const _s=a.forwardRef(({className:r,inset:n,...t},s)=>e.jsx(zt,{ref:s,className:k("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",r),...t}));_s.displayName=zt.displayName;const js=a.forwardRef(({className:r,...n},t)=>e.jsx(Zt,{ref:t,className:k("-mx-1 my-1 h-px bg-muted",r),...n}));js.displayName=Zt.displayName;function ys({vendors:r,onEdit:n,onView:t,onRefresh:s}){const[o,c]=a.useState(null),{sortedData:m,sortConfig:u,handleSort:x}=Ir(r,"vendor_name","asc"),f=async i=>{c(i.id);try{const h=await J.toggleVendorStatus(i.id);h.success?(N.success(`업체가 ${i.is_active?"비활성화":"활성화"}되었습니다.`),s()):N.error(h.error||"상태 변경에 실패했습니다.")}catch{N.error("상태 변경 중 오류가 발생했습니다.")}finally{c(null)}},d=async i=>{if(confirm(`정말로 '${i.vendor_name}' 업체를 삭제하시겠습니까?`)){c(i.id);try{const h=await J.deleteVendor(i.id);h.success?(N.success("업체가 삭제되었습니다."),s()):N.error(h.error||"삭제에 실패했습니다.")}catch{N.error("삭제 중 오류가 발생했습니다.")}finally{c(null)}}},l=i=>i?new Date(i).toLocaleDateString("ko-KR"):"-";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block border rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(kr,{children:[e.jsx(Fr,{children:e.jsxs(Me,{children:[e.jsx(se,{children:e.jsx(Ve,{sortKey:"vendor_name",currentSortKey:u.key,sortDirection:u.direction,onSort:()=>x("vendor_name"),children:"업체명"})}),e.jsx(se,{children:"담당자 수"}),e.jsx(se,{children:"담당자 정보"}),e.jsx(se,{children:e.jsx(Ve,{sortKey:"created_at",currentSortKey:u.key,sortDirection:u.direction,onSort:()=>x("created_at"),children:"등록일"})}),e.jsx(se,{className:"w-[100px]",children:"작업"})]})}),e.jsx(Or,{children:r.length===0?e.jsx(Me,{children:e.jsx(W,{colSpan:5,className:"text-center py-8 text-gray-500",children:"등록된 업체가 없습니다."})}):m.map(i=>e.jsxs(Me,{children:[e.jsx(W,{className:"font-medium",children:i.vendor_name}),e.jsx(W,{children:e.jsxs(Xe,{variant:"outline",children:[i.vendor_contacts?.length||0,"명"]})}),e.jsx(W,{children:e.jsxs("div",{className:"space-y-1",children:[i.vendor_contacts&&i.vendor_contacts.length>0?i.vendor_contacts.slice(0,2).map((h,g)=>e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:h.contact_name}),e.jsx("span",{className:"text-gray-500 ml-2",children:h.contact_phone}),h.contact_email&&e.jsx("span",{className:"text-gray-500 ml-2",children:h.contact_email})]},g)):e.jsx("span",{className:"text-gray-400",children:"담당자 없음"}),i.vendor_contacts&&i.vendor_contacts.length>2&&e.jsxs("span",{className:"text-sm text-gray-500",children:["외 ",i.vendor_contacts.length-2,"명"]})]})}),e.jsx(W,{children:l(i.created_at)}),e.jsx(W,{children:e.jsxs(xs,{children:[e.jsx(hs,{asChild:!0,children:e.jsx(E,{variant:"ghost",className:"h-8 w-8 p-0",disabled:o===i.id,children:e.jsx(Br,{className:"h-4 w-4"})})}),e.jsxs(er,{align:"end",children:[e.jsxs(ae,{onClick:()=>t(i),children:[e.jsx(ze,{className:"mr-2 h-4 w-4"}),"상세 보기"]}),e.jsxs(ae,{onClick:()=>n(i),children:[e.jsx($e,{className:"mr-2 h-4 w-4"}),"수정"]}),e.jsx(ae,{onClick:()=>f(i),children:i.is_active?e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"mr-2 h-4 w-4"}),"비활성화"]}):e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"mr-2 h-4 w-4"}),"활성화"]})}),e.jsxs(ae,{onClick:()=>d(i),className:"text-red-600",children:[e.jsx(He,{className:"mr-2 h-4 w-4"}),"삭제"]})]})]})})]},i.id))})]})})}),e.jsx("div",{className:"block md:hidden space-y-3",children:m.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"등록된 업체가 없습니다."}):m.map(i=>e.jsxs(Er,{children:[e.jsx(Dr,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:i.vendor_name}),e.jsxs(Xe,{variant:"outline",children:[i.vendor_contacts?.length||0,"명"]})]})}),e.jsx(qe,{label:"담당자",value:e.jsxs("div",{className:"space-y-1",children:[i.vendor_contacts&&i.vendor_contacts.length>0?i.vendor_contacts.slice(0,2).map((h,g)=>e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:h.contact_name}),e.jsx("div",{className:"text-gray-500 text-xs",children:h.contact_phone}),h.contact_email&&e.jsx("div",{className:"text-gray-500 text-xs",children:h.contact_email})]},g)):e.jsx("span",{className:"text-gray-400",children:"담당자 없음"}),i.vendor_contacts&&i.vendor_contacts.length>2&&e.jsxs("span",{className:"text-sm text-gray-500",children:["외 ",i.vendor_contacts.length-2,"명"]})]})}),e.jsx(qe,{label:"등록일",value:l(i.created_at)}),e.jsxs(Tr,{children:[e.jsx(E,{size:"sm",variant:"outline",onClick:()=>t(i),children:e.jsx(ze,{className:"w-4 h-4"})}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>n(i),children:e.jsx($e,{className:"w-4 h-4"})}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>f(i),disabled:o===i.id,children:i.is_active?e.jsx(Ue,{className:"w-4 h-4"}):e.jsx(Be,{className:"w-4 h-4"})}),e.jsx(E,{size:"sm",variant:"outline",className:"text-red-600",onClick:()=>d(i),disabled:o===i.id,children:e.jsx(He,{className:"w-4 h-4"})})]})]},i.id))})]})}function Ms({className:r,...n}){return e.jsx("textarea",{"data-slot":"textarea",className:k("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),...n})}function Ns({isOpen:r,onClose:n,vendor:t,onSave:s,mode:o}){const[c,m]=a.useState(!1),u=Lr({defaultValues:{vendor_name:"",business_number:"",representative:"",contact_phone:"",address:"",email:""}});a.useEffect(()=>{t&&r?u.reset({vendor_name:t.vendor_name||"",business_number:t.business_number||"",representative:t.representative||"",contact_phone:t.contact_phone||"",address:t.address||"",email:t.email||""}):!t&&r&&u.reset({vendor_name:"",business_number:"",representative:"",contact_phone:"",address:"",email:""})},[t,r,u]);const x=async l=>{m(!0);try{let i;o==="create"?i=await J.createVendor(l):o==="edit"&&t&&(i=await J.updateVendor(t.id,l)),i?.success?(N.success(o==="create"?"업체가 등록되었습니다.":"업체 정보가 수정되었습니다."),s(),n()):N.error(i?.error||"처리 중 오류가 발생했습니다.")}catch{N.error("처리 중 오류가 발생했습니다.")}finally{m(!1)}},f=()=>{switch(o){case"create":return"업체 등록";case"edit":return"업체 수정";case"view":return"업체 상세";default:return"업체"}},d=o==="view";return e.jsx(yr,{open:r,onOpenChange:n,children:e.jsxs(Mr,{className:"w-full max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Nr,{children:e.jsx(Cr,{children:f()})}),e.jsx(Pr,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(x),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(q,{control:u.control,name:"vendor_name",rules:{required:"업체명을 입력해주세요."},render:({field:l})=>e.jsxs(z,{children:[e.jsx(H,{children:"업체명 *"}),e.jsx(X,{children:e.jsx(Z,{...l,placeholder:"업체명을 입력하세요",disabled:d})}),e.jsx(Y,{})]})}),e.jsx(q,{control:u.control,name:"business_number",render:({field:l})=>e.jsxs(z,{children:[e.jsx(H,{children:"사업자번호"}),e.jsx(X,{children:e.jsx(Z,{...l,placeholder:"000-00-00000",disabled:d})}),e.jsx(Y,{})]})}),e.jsx(q,{control:u.control,name:"representative",render:({field:l})=>e.jsxs(z,{children:[e.jsx(H,{children:"대표자"}),e.jsx(X,{children:e.jsx(Z,{...l,placeholder:"대표자명을 입력하세요",disabled:d})}),e.jsx(Y,{})]})}),e.jsx(q,{control:u.control,name:"contact_phone",render:({field:l})=>e.jsxs(z,{children:[e.jsx(H,{children:"연락처"}),e.jsx(X,{children:e.jsx(Z,{...l,placeholder:"010-0000-0000",disabled:d})}),e.jsx(Y,{})]})}),e.jsx(q,{control:u.control,name:"email",render:({field:l})=>e.jsxs(z,{children:[e.jsx(H,{children:"이메일"}),e.jsx(X,{children:e.jsx(Z,{...l,type:"email",placeholder:"company@example.com",disabled:d})}),e.jsx(Y,{})]})})]}),e.jsx(q,{control:u.control,name:"address",render:({field:l})=>e.jsxs(z,{children:[e.jsx(H,{children:"주소"}),e.jsx(X,{children:e.jsx(Ms,{...l,placeholder:"주소를 입력하세요",className:"min-h-[80px]",disabled:d})}),e.jsx(Y,{})]})}),o==="view"&&t&&e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"상태:"}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs ${t.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:t.is_active?"활성":"비활성"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"등록일:"}),e.jsx("span",{className:"ml-2",children:t.created_at?new Date(t.created_at).toLocaleDateString("ko-KR"):"-"})]})]})}),e.jsxs(Sr,{className:"gap-2",children:[e.jsx(E,{type:"button",variant:"outline",onClick:n,children:o==="view"?"닫기":"취소"}),!d&&e.jsx(E,{type:"submit",disabled:c,children:c?o==="create"?"등록 중...":"수정 중...":o==="create"?"등록":"수정"})]})]})})]})})}function As(){const[r,n]=a.useState([]),[t,s]=a.useState([]),[o,c]=a.useState(!0),[m,u]=a.useState({}),[x,f]=a.useState(!1),[d,l]=a.useState(null),[i,h]=a.useState("create"),g=async()=>{c(!0);try{const w=await J.getVendors(m);w.success&&w.data?(n(w.data),s(w.data)):N.error(w.error||"업체 목록을 불러오는데 실패했습니다.")}catch{N.error("업체 목록을 불러오는 중 오류가 발생했습니다.")}finally{c(!1)}};a.useEffect(()=>{g()},[m]);const C=()=>{l(null),h("create"),f(!0)},b=w=>{l(w),h("edit"),f(!0)},j=w=>{l(w),h("view"),f(!0)},L=()=>{f(!1),l(null)},y=()=>{g()},S=async()=>{try{const w=await J.getVendorsForExport();if(w.success&&w.data){const D=await ur(()=>import("./xlsx-DGuHH-KN.js"),[]),T=D.utils.json_to_sheet(w.data),_=D.utils.book_new();D.utils.book_append_sheet(_,T,"업체 목록");const P=`업체_목록_${new Date().toISOString().slice(0,10)}.xlsx`;D.writeFile(_,P),N.success("Excel 파일이 다운로드되었습니다.")}else N.error(w.error||"Excel 내보내기에 실패했습니다.")}catch{N.error("Excel 내보내기 중 오류가 발생했습니다.")}};return o&&r.length===0?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"업체 목록을 불러오는 중..."})]})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(zr,{filters:m,onFiltersChange:u,onExport:S,onCreateNew:C}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-hansl-600",children:t.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"총 업체 수"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.filter(w=>w.is_active).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"활성 업체"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:t.filter(w=>!w.is_active).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"비활성 업체"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t.filter(w=>w.business_number).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"사업자등록 완료"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium",children:"업체 목록"}),e.jsx("div",{className:"text-sm text-gray-600",children:o?"로딩 중...":`총 ${t.length}개의 업체`})]})}),e.jsx(ys,{vendors:t,onEdit:b,onView:j,onRefresh:g})]}),e.jsx(Ns,{isOpen:x,onClose:L,vendor:d,onSave:y,mode:i})]})})}export{As as default};
//# sourceMappingURL=VendorMain-DSHd8zHM.js.map
